(()=>{var t={964:(t,e,r)=>{var n,a=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,a,i;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){a=t,i=e}));var o,u,d,f,c,h={};for(o in e)e.hasOwnProperty(o)&&(h[o]=e[o]);u="object"==typeof window,d="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,c=!u&&!f&&!d;var s,l,v,p,g="";f?(g=d?r(386).dirname(g)+"/":"//",s=function(t,e){return v||(v=r(993)),p||(p=r(386)),t=p.normalize(t),v.readFileSync(t,e?null:"utf8")},l=function(t){return(t=s(t,!0)).buffer||(t=new Uint8Array(t)),M(t.buffer),t},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(t){throw t})),process.on("unhandledRejection",X),e.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(s=function(t){return read(t)}),l=function(t){return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(M("object"==typeof(t=read(t,"binary"))),t)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||d)&&(d?g=self.location.href:document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",s=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},d&&(l=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var w,y=e.print||console.log.bind(console),m=e.printErr||console.warn.bind(console);for(o in h)h.hasOwnProperty(o)&&(e[o]=h[o]);h=null,e.wasmBinary&&(w=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!=typeof WebAssembly&&X("no native wasm support detected");var b,A=new WebAssembly.Table({initial:49,maximum:49,element:"anyfunc"}),_=!1;function M(t,e){t||X("Assertion failed: "+e)}var k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(t,e,r){var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.subarray&&k)return k.decode(t.subarray(e,r));for(n="";e<r;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n}var S,P,T,O,j,C,x,I,W,U="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function R(t,e){for(var r=t>>1,n=r+e/2;!(r>=n)&&j[r];)++r;if(32<(r<<=1)-t&&U)return U.decode(T.subarray(t,r));for(r=0,n="";;){var a=O[t+2*r>>1];if(0==a||r==e/2)return n;++r,n+=String.fromCharCode(a)}}function z(t,e,r){if(void 0===r&&(r=2147483647),2>r)return 0;var n=e;r=(r-=2)<2*t.length?r/2:t.length;for(var a=0;a<r;++a)O[e>>1]=t.charCodeAt(a),e+=2;return O[e>>1]=0,e-n}function F(t){return 2*t.length}function V(t,e){for(var r=0,n="";!(r>=e/4);){var a=C[t+4*r>>2];if(0==a)break;++r,65536<=a?(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a)):n+=String.fromCharCode(a)}return n}function D(t,e,r){if(void 0===r&&(r=2147483647),4>r)return 0;var n=e;r=n+r-4;for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),C[e>>2]=i,(e+=4)+4>r)break}return C[e>>2]=0,e-n}function B(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);55296<=n&&57343>=n&&++r,e+=4}return e}function L(t){S=t,e.HEAP8=P=new Int8Array(t),e.HEAP16=O=new Int16Array(t),e.HEAP32=C=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=j=new Uint16Array(t),e.HEAPU32=x=new Uint32Array(t),e.HEAPF32=I=new Float32Array(t),e.HEAPF64=W=new Float64Array(t)}var q=e.INITIAL_MEMORY||16777216;(b=e.wasmMemory?e.wasmMemory:new WebAssembly.Memory({initial:q/65536,maximum:32768}))&&(S=b.buffer),q=S.byteLength,L(S);var H=[],N=[],J=[],Y=[];function $(){var t=e.preRun.shift();H.unshift(t)}var G=0,Q=null,K=null;function X(t){throw e.onAbort&&e.onAbort(t),m(t),_=!0,t=new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info."),i(t),t}function Z(t){var e=et;return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function tt(){return Z("data:application/octet-stream;base64,")}e.preloadedImages={},e.preloadedAudios={};var et="metrics.wasm";if(!tt()){var rt=et;et=e.locateFile?e.locateFile(rt,g):g+rt}function nt(){try{if(w)return new Uint8Array(w);if(l)return l(et);throw"both async and sync fetching of the wasm failed"}catch(t){X(t)}}function at(t){for(;0<t.length;){var r=t.shift();if("function"==typeof r)r(e);else{var n=r.S;"number"==typeof n?void 0===r.L?A.get(n)():A.get(n)(r.L):n(void 0===r.L?null:r.L)}}}function it(t){this.K=t-16,this.fa=function(t){C[this.K+8>>2]=t},this.ba=function(t){C[this.K+0>>2]=t},this.da=function(){C[this.K+4>>2]=0},this.aa=function(){P[this.K+12>>0]=0},this.ea=function(){P[this.K+13>>0]=0},this.X=function(t,e){this.fa(t),this.ba(e),this.da(),this.aa(),this.ea()}}function ot(){return 0<ot.N}var ut={};function dt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function ft(t){return this.fromWireType(x[t>>2])}var ct={},ht={},st={};function lt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?"_"+t:t}function vt(t,e){return t=lt(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function pt(t){var e=Error,r=vt(t,(function(e){this.name=t,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var gt=void 0;function wt(t,e,r){function n(e){if((e=r(e)).length!==t.length)throw new gt("Mismatched type converter count");for(var n=0;n<t.length;++n)Mt(t[n],e[n])}t.forEach((function(t){st[t]=e}));var a=Array(e.length),i=[],o=0;e.forEach((function(t,e){ht.hasOwnProperty(t)?a[e]=ht[t]:(i.push(t),ct.hasOwnProperty(t)||(ct[t]=[]),ct[t].push((function(){a[e]=ht[t],++o===i.length&&n(a)})))})),0===i.length&&n(a)}function yt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var mt=void 0;function bt(t){for(var e="";T[t];)e+=mt[T[t++]];return e}var At=void 0;function _t(t){throw new At(t)}function Mt(t,e,r){if(r=r||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=e.name;if(t||_t('type "'+n+'" must have a positive integer typeid pointer'),ht.hasOwnProperty(t)){if(r.W)return;_t("Cannot register type '"+n+"' twice")}ht[t]=e,delete st[t],ct.hasOwnProperty(t)&&(e=ct[t],delete ct[t],e.forEach((function(t){t()})))}var kt=[],Et=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function St(t){4<t&&0==--Et[t].M&&(Et[t]=void 0,kt.push(t))}function Pt(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=kt.length?kt.pop():Et.length;return Et[e]={M:1,value:t},e}}function Tt(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function Ot(t,e){switch(e){case 2:return function(t){return this.fromWireType(I[t>>2])};case 3:return function(t){return this.fromWireType(W[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function jt(t){var e=Function;if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=vt(e.name||"unknownFunctionName",(function(){}));return r.prototype=e.prototype,r=new r,(t=e.apply(r,t))instanceof Object?t:r}function Ct(t,r){var n=-1!=(t=bt(t)).indexOf("j")?function(t,r){M(0<=t.indexOf("j"),"getDynCaller should only be called with i64 sigs");var n=[];return function(){n.length=arguments.length;for(var a=0;a<arguments.length;a++)n[a]=arguments[a];return-1!=t.indexOf("j")?n&&n.length?e["dynCall_"+t].apply(null,[r].concat(n)):e["dynCall_"+t].call(null,r):A.get(r).apply(null,n)}}(t,r):A.get(r);return"function"!=typeof n&&_t("unknown function pointer with signature "+t+": "+r),n}var xt=void 0;function It(t){var e=bt(t=Jt(t));return Nt(t),e}function Wt(t,e,r){switch(e){case 0:return r?function(t){return P[t]}:function(t){return T[t]};case 1:return r?function(t){return O[t>>1]}:function(t){return j[t>>1]};case 2:return r?function(t){return C[t>>2]}:function(t){return x[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var Ut={},Rt=[];function zt(t,e){var r=ht[t];return void 0===r&&_t(e+" has unknown type "+It(t)),r}var Ft=[null,[],[]];gt=e.InternalError=pt("InternalError");for(var Vt=Array(256),Dt=0;256>Dt;++Dt)Vt[Dt]=String.fromCharCode(Dt);mt=Vt,At=e.BindingError=pt("BindingError"),e.count_emval_handles=function(){for(var t=0,e=5;e<Et.length;++e)void 0!==Et[e]&&++t;return t},e.get_first_emval=function(){for(var t=5;t<Et.length;++t)if(void 0!==Et[t])return Et[t];return null},xt=e.UnboundTypeError=pt("UnboundTypeError"),N.push({S:function(){qt()}});var Bt={d:function(t,e,r,n){X("Assertion failed: "+(t?E(T,t,void 0):"")+", at: "+[e?e?E(T,e,void 0):"":"unknown filename",r,n?n?E(T,n,void 0):"":"unknown function"])},B:function(t){return Ht(t+16)+16},x:function(t,e,r){throw new it(t).X(e,r),"uncaught_exception"in ot?ot.N++:ot.N=1,t},b:A,s:function(t){var e=ut[t];delete ut[t];var r=e.Z,n=e.$,a=e.O;wt([t],a.map((function(t){return t.V})).concat(a.map((function(t){return t.ha}))),(function(t){var i={};return a.forEach((function(e,r){var n=t[r],o=e.T,u=e.U,d=t[r+a.length],f=e.ga,c=e.ia;i[e.R]={read:function(t){return n.fromWireType(o(u,t))},write:function(t,e){var r=[];f(c,t,d.toWireType(r,e)),dt(r)}}})),[{name:e.name,fromWireType:function(t){var e,r={};for(e in i)r[e]=i[e].read(t);return n(t),r},toWireType:function(t,e){for(var a in i)if(!(a in e))throw new TypeError('Missing field:  "'+a+'"');var o=r();for(a in i)i[a].write(o,e[a]);return null!==t&&t.push(n,o),o},argPackAdvance:8,readValueFromPointer:ft,J:n}]}))},z:function(t,e,r,n,a){var i=yt(r);Mt(t,{name:e=bt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:a},argPackAdvance:8,readValueFromPointer:function(t){if(1===r)var n=P;else if(2===r)n=O;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+e);n=C}return this.fromWireType(n[t>>i])},J:null})},y:function(t,e){Mt(t,{name:e=bt(e),fromWireType:function(t){var e=Et[t].value;return St(t),e},toWireType:function(t,e){return Pt(e)},argPackAdvance:8,readValueFromPointer:ft,J:null})},q:function(t,e,r){r=yt(r),Mt(t,{name:e=bt(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+Tt(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:Ot(e,r),J:null})},k:function(t,r,n,a,i,o){var u=function(t,e){for(var r=[],n=0;n<t;n++)r.push(C[(e>>2)+n]);return r}(r,n);t=bt(t),i=Ct(a,i),function(t,r,n){e.hasOwnProperty(t)?((void 0===n||void 0!==e[t].I&&void 0!==e[t].I[n])&&_t("Cannot register public name '"+t+"' twice"),function(t,r){var n=e;if(void 0===n[t].I){var a=n[t];n[t]=function(){return n[t].I.hasOwnProperty(arguments.length)||_t("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+n[t].I+")!"),n[t].I[arguments.length].apply(this,arguments)},n[t].I=[],n[t].I[a.P]=a}}(t,t),e.hasOwnProperty(n)&&_t("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),e[t].I[n]=r):(e[t]=r,void 0!==n&&(e[t].ja=n))}(t,(function(){!function(t,e){var r=[],n={};throw e.forEach((function t(e){n[e]||ht[e]||(st[e]?st[e].forEach(t):(r.push(e),n[e]=!0))})),new xt(t+": "+r.map(It).join([", "]))}("Cannot call "+t+" due to unbound types",u)}),r-1),wt([],u,(function(n){var a=[n[0],null].concat(n.slice(1)),u=n=t,d=i,f=a.length;2>f&&_t("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var c=null!==a[1]&&!1,h=!1,s=1;s<a.length;++s)if(null!==a[s]&&void 0===a[s].J){h=!0;break}var l="void"!==a[0].name,v="",p="";for(s=0;s<f-2;++s)v+=(0!==s?", ":"")+"arg"+s,p+=(0!==s?", ":"")+"arg"+s+"Wired";u="return function "+lt(u)+"("+v+") {\nif (arguments.length !== "+(f-2)+") {\nthrowBindingError('function "+u+" called with ' + arguments.length + ' arguments, expected "+(f-2)+" args!');\n}\n",h&&(u+="var destructors = [];\n");var g=h?"destructors":"null";for(v="throwBindingError invoker fn runDestructors retType classParam".split(" "),d=[_t,d,o,dt,a[0],a[1]],c&&(u+="var thisWired = classParam.toWireType("+g+", this);\n"),s=0;s<f-2;++s)u+="var arg"+s+"Wired = argType"+s+".toWireType("+g+", arg"+s+"); // "+a[s+2].name+"\n",v.push("argType"+s),d.push(a[s+2]);if(c&&(p="thisWired"+(0<p.length?", ":"")+p),u+=(l?"var rv = ":"")+"invoker(fn"+(0<p.length?", ":"")+p+");\n",h)u+="runDestructors(destructors);\n";else for(s=c?1:2;s<a.length;++s)f=1===s?"thisWired":"arg"+(s-2)+"Wired",null!==a[s].J&&(u+=f+"_dtor("+f+"); // "+a[s].name+"\n",v.push(f+"_dtor"),d.push(a[s].J));if(l&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),v.push(u+"}\n"),a=jt(v).apply(null,d),s=r-1,!e.hasOwnProperty(n))throw new gt("Replacing nonexistant public symbol");return void 0!==e[n].I&&void 0!==s?e[n].I[s]=a:(e[n]=a,e[n].P=s),[]}))},f:function(t,e,r,n,a){function i(t){return t}e=bt(e),-1===a&&(a=4294967295);var o=yt(r);if(0===n){var u=32-8*r;i=function(t){return t<<u>>>u}}var d=-1!=e.indexOf("unsigned");Mt(t,{name:e,fromWireType:i,toWireType:function(t,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+Tt(r)+'" to '+this.name);if(r<n||r>a)throw new TypeError('Passing a number "'+Tt(r)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+n+", "+a+"]!");return d?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:Wt(e,o,0!==n),J:null})},e:function(t,e,r){function n(t){var e=x;return new a(S,e[1+(t>>=2)],e[t])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];Mt(t,{name:r=bt(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{W:!0})},r:function(t,e){var r="std::string"===(e=bt(e));Mt(t,{name:e,fromWireType:function(t){var e=x[t>>2];if(r)for(var n=t+4,a=0;a<=e;++a){var i=t+4+a;if(a==e||0==T[i]){if(n=n?E(T,n,i-n):"",void 0===o)var o=n;else o+=String.fromCharCode(0),o+=n;n=i+1}}else{for(o=Array(e),a=0;a<e;++a)o[a]=String.fromCharCode(T[t+4+a]);o=o.join("")}return Nt(t),o},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n="string"==typeof e;n||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||_t("Cannot pass non-string to std::string");var a=(r&&n?function(){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);55296<=n&&57343>=n&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),127>=n?++t:t=2047>=n?t+2:65535>=n?t+3:t+4}return t}:function(){return e.length})(),i=Ht(4+a+1);if(x[i>>2]=a,r&&n)!function(t,e,r){var n=T;if(0<r){r=e+r-1;for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),127>=i){if(e>=r)break;n[e++]=i}else{if(2047>=i){if(e+1>=r)break;n[e++]=192|i>>6}else{if(65535>=i){if(e+2>=r)break;n[e++]=224|i>>12}else{if(e+3>=r)break;n[e++]=240|i>>18,n[e++]=128|i>>12&63}n[e++]=128|i>>6&63}n[e++]=128|63&i}}n[e]=0}}(e,i+4,a+1);else if(n)for(n=0;n<a;++n){var o=e.charCodeAt(n);255<o&&(Nt(i),_t("String has UTF-16 code units that do not fit in 8 bits")),T[i+4+n]=o}else for(n=0;n<a;++n)T[i+4+n]=e[n];return null!==t&&t.push(Nt,i),i},argPackAdvance:8,readValueFromPointer:ft,J:function(t){Nt(t)}})},j:function(t,e,r){if(r=bt(r),2===e)var n=R,a=z,i=F,o=function(){return j},u=1;else 4===e&&(n=V,a=D,i=B,o=function(){return x},u=2);Mt(t,{name:r,fromWireType:function(t){for(var r,a=x[t>>2],i=o(),d=t+4,f=0;f<=a;++f){var c=t+4+f*e;f!=a&&0!=i[c>>u]||(d=n(d,c-d),void 0===r?r=d:(r+=String.fromCharCode(0),r+=d),d=c+e)}return Nt(t),r},toWireType:function(t,n){"string"!=typeof n&&_t("Cannot pass non-string to C++ string type "+r);var o=i(n),d=Ht(4+o+e);return x[d>>2]=o>>u,a(n,d+4,o+e),null!==t&&t.push(Nt,d),d},argPackAdvance:8,readValueFromPointer:ft,J:function(t){Nt(t)}})},l:function(t,e,r,n,a,i){ut[t]={name:bt(e),Z:Ct(r,n),$:Ct(a,i),O:[]}},g:function(t,e,r,n,a,i,o,u,d,f){ut[t].O.push({R:bt(e),V:r,T:Ct(n,a),U:i,ha:o,ga:Ct(u,d),ia:f})},A:function(t,e){Mt(t,{Y:!0,name:e=bt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},m:function(t,e,r,n){t=Rt[t],e||_t("Cannot use deleted val. handle = "+e),e=Et[e].value;var a=Ut[r];t(e,r=void 0===a?bt(r):a,null,n)},h:St,n:function(t,e){for(var r=(e=function(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=zt(C[(e>>2)+n],"parameter "+n);return r}(t,e))[0],n=r.name+"_$"+e.slice(1).map((function(t){return t.name})).join("_")+"$",a=["retType"],i=[r],o="",u=0;u<t-1;++u)o+=(0!==u?", ":"")+"arg"+u,a.push("argType"+u),i.push(e[1+u]);n="return function "+lt("methodCaller_"+n)+"(handle, name, destructors, args) {\n";var d=0;for(u=0;u<t-1;++u)n+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(d?"+"+d:"")+");\n",d+=e[u+1].argPackAdvance;for(n+="    var rv = handle[name]("+o+");\n",u=0;u<t-1;++u)e[u+1].deleteObject&&(n+="    argType"+u+".deleteObject(arg"+u+");\n");return r.Y||(n+="    return retType.toWireType(destructors, rv);\n"),a.push(n+"};\n"),function(t){var e=Rt.length;return Rt.push(t),e}(t=jt(a).apply(null,i))},i:function(t){4<t&&(Et[t].M+=1)},t:function(){return Pt([])},o:function(t,e){return Pt(t=(t=zt(t,"_emval_take_value")).readValueFromPointer(e))},c:function(){X()},v:function(t,e,r){T.copyWithin(t,e,e+r)},w:function(t){t>>>=0;var e=T.length;if(2147483648<t)return!1;for(var r=1;4>=r;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296),0<(n=Math.max(16777216,t,n))%65536&&(n+=65536-n%65536);t:{try{b.grow(Math.min(2147483648,n)-S.byteLength+65535>>>16),L(b.buffer);var a=1;break t}catch(t){}a=void 0}if(a)return!0}return!1},p:function(t,e,r,n){for(var a=0,i=0;i<r;i++){for(var o=C[e+8*i>>2],u=C[e+(8*i+4)>>2],d=0;d<u;d++){var f=T[o+d],c=Ft[t];0===f||10===f?((1===t?y:m)(E(c,0)),c.length=0):c.push(f)}a+=u}return C[n>>2]=a,0},a:b,u:function(){}};!function(){function t(t){e.asm=t.exports,G--,e.monitorRunDependencies&&e.monitorRunDependencies(G),0==G&&(null!==Q&&(clearInterval(Q),Q=null),K&&(t=K,K=null,t()))}function r(e){t(e.instance)}function n(t){return(w||!u&&!d||"function"!=typeof fetch||Z("file://")?Promise.resolve().then(nt):fetch(et,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+et+"'";return t.arrayBuffer()})).catch((function(){return nt()}))).then((function(t){return WebAssembly.instantiate(t,a)})).then(t,(function(t){m("failed to asynchronously prepare wasm: "+t),X(t)}))}var a={a:Bt};if(G++,e.monitorRunDependencies&&e.monitorRunDependencies(G),e.instantiateWasm)try{return e.instantiateWasm(a,t)}catch(t){return m("Module.instantiateWasm callback failed with error: "+t),!1}!function(){if(w||"function"!=typeof WebAssembly.instantiateStreaming||tt()||Z("file://")||"function"!=typeof fetch)return n(r);fetch(et,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,a).then(r,(function(t){return m("wasm streaming compile failed: "+t),m("falling back to ArrayBuffer instantiation"),n(r)}))}))}()}();var Lt,qt=e.___wasm_call_ctors=function(){return(qt=e.___wasm_call_ctors=e.asm.C).apply(null,arguments)},Ht=e._malloc=function(){return(Ht=e._malloc=e.asm.D).apply(null,arguments)},Nt=e._free=function(){return(Nt=e._free=e.asm.E).apply(null,arguments)},Jt=e.___getTypeName=function(){return(Jt=e.___getTypeName=e.asm.F).apply(null,arguments)};function Yt(){function t(){if(!Lt&&(Lt=!0,e.calledRun=!0,!_)){if(at(N),at(J),a(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();Y.unshift(t)}at(Y)}}if(!(0<G)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)$();at(H),0<G||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.G).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.H).apply(null,arguments)},K=function t(){Lt||Yt(),Lt||(K=t)},e.run=Yt,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Yt(),t.ready});t.exports=a},936:(t,e,r)=>{"use strict";t.exports=r.p+"metrics.1b099.wasm"},556:t=>{self,t.exports=(()=>{"use strict";var t={132:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bezkrovnySsim=void 0;var n=r(490),a=r(971);function i(t,e,r){var a=t.data,i=e.data,o=r.bitDepth,u=r.k1,d=r.k2,f=Math.pow(2,o)-1,c=Math.pow(u*f,2),h=Math.pow(d*f,2),s=n.average(a),l=n.average(i),v=n.variance(a,s),p=n.variance(i,l);return(2*s*l+c)*(2*n.covariance(a,i,s,l)+h)/((Math.pow(s,2)+Math.pow(l,2)+c)*(v+p+h))}e.bezkrovnySsim=function(t,e,r){for(var n=r.windowSize,o=Math.ceil(t.width/n),u=Math.ceil(t.height/n),d=new Array(o*u),f=0,c=0;c<t.height;c+=n)for(var h=0;h<t.width;h+=n){var s=Math.min(n,t.width-h),l=Math.min(n,t.height-c),v=a.sub(t,h,l,c,s),p=a.sub(e,h,l,c,s);d[f++]=i(v,p,r)}return{data:d,width:o,height:u}}},63:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaults=void 0,e.defaults={windowSize:11,k1:.01,k2:.03,bitDepth:8,downsample:"original",ssim:"weber",maxSize:256,rgb2grayVersion:"integer"}},441:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.downsample=void 0;var n=r(490),a=r(971);function i(t,e,r){var n=a.imfilter(t,e,"symmetric","same");return a.skip2d(n,[0,r,n.height],[0,r,n.width])}e.downsample=function(t,e){return"original"===e.downsample?function(t,e,r){void 0===r&&(r=256);var o=Math.min(t.width,e.height)/r,u=Math.round(o);if(u>1){var d=a.ones(u);t=i(t,d=n.divide2d(d,n.sum2d(d)),u),e=i(e,d,u)}return[t,e]}(t[0],t[1],e.maxSize):t}},607:function(t,e,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ssim=e.getOptions=void 0;var a=r(971),i=r(490),o=r(773),u=r(595),d=r(132),f=r(441),c=r(63),h=r(535),s={fast:o.ssim,original:u.originalSsim,bezkrovny:d.bezkrovnySsim,weber:h.weberSsim};function l(t){var e=n(n({},c.defaults),t);return function(t){if(Object.keys(t).forEach((function(t){if(!(t in c.defaults))throw new Error('"'+t+'" is not a valid option')})),"k1"in t&&("number"!=typeof t.k1||t.k1<0))throw new Error("Invalid k1 value. Default is "+c.defaults.k1);if("k2"in t&&("number"!=typeof t.k2||t.k2<0))throw new Error("Invalid k2 value. Default is "+c.defaults.k2);if(!(t.ssim in s))throw new Error("Invalid ssim option (use: "+Object.keys(s).join(", ")+")")}(e),e}function v(t,e,r){var n,o,u,d,c=(new Date).getTime(),h=function(t){var e=t[0],r=t[1],n=t[2];return s[n.ssim](e,r,n)}(function(t){var e=t[0],r=t[1],n=t[2],a=f.downsample([e,r],n);return[a[0],a[1],n]}((o=(n=function(t){var e=t[0],r=t[1],n=t[2];if(e.width!==r.width||e.height!==r.height)throw new Error("Image dimensions do not match");return[e,r,n]}([t,e,l(r)]))[0],u=n[1],"original"===(d=n[2]).rgb2grayVersion?[a.rgb2gray(o),a.rgb2gray(u),d]:[a.rgb2grayInteger(o),a.rgb2grayInteger(u),d])));return{mssim:void 0!==h.mssim?h.mssim:i.mean2d(h),ssim_map:h,performance:(new Date).getTime()-c}}e.getOptions=l,e.ssim=v,e.default=v},490:(t,e)=>{function r(t){return n(t)/t.length}function n(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function a(t){for(var e=t.data,r=0,n=0;n<e.length;n++)r+=e[n];return r}function i(t,e){for(var r=t.data,n=t.width,a=t.height,i=new Array(r.length),o=0;o<r.length;o++)i[o]=r[o]+e;return{data:i,width:n,height:a}}function o(t,e){return"number"==typeof e?function(t,e){for(var r=t.data,n=t.width,a=t.height,i=new Array(r.length),o=0;o<r.length;o++)i[o]=r[o]*e;return{data:i,width:n,height:a}}(t,e):function(t,e){for(var r=t.data,n=t.width,a=t.height,i=e.data,o=new Array(r.length),u=0;u<r.length;u++)o[u]=r[u]*i[u];return{data:o,width:n,height:a}}(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.covariance=e.variance=e.mean2d=e.square2d=e.multiply2d=e.divide2d=e.subtract2d=e.add2d=e.sum2d=e.floor=e.sum=e.average=void 0,e.average=r,e.sum=n,e.floor=function(t){for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=Math.floor(t[r]);return e},e.sum2d=a,e.add2d=function(t,e){return"number"==typeof e?i(t,e):function(t,e){for(var r=t.data,n=t.width,a=t.height,i=e.data,o=new Array(r.length),u=0;u<a;u++)for(var d=u*n,f=0;f<n;f++)o[d+f]=r[d+f]+i[d+f];return{data:o,width:n,height:a}}(t,e)},e.subtract2d=function(t,e){return"number"==typeof e?i(t,-e):function(t,e){for(var r=t.data,n=t.width,a=t.height,i=e.data,o=new Array(r.length),u=0;u<a;u++)for(var d=u*n,f=0;f<n;f++)o[d+f]=r[d+f]-i[d+f];return{data:o,width:n,height:a}}(t,e)},e.divide2d=function(t,e){return"number"==typeof e?function(t,e){for(var r=t.data,n=t.width,a=t.height,i=new Array(r.length),o=0;o<r.length;o++)i[o]=r[o]/e;return{data:i,width:n,height:a}}(t,e):function(t,e){for(var r=t.data,n=t.width,a=t.height,i=e.data,o=new Array(r.length),u=0;u<r.length;u++)o[u]=r[u]/i[u];return{data:o,width:n,height:a}}(t,e)},e.multiply2d=o,e.square2d=function(t){return o(t,t)},e.mean2d=function(t){return a(t)/t.data.length},e.variance=function(t,e){void 0===e&&(e=r(t));for(var n=0,a=t.length;a--;)n+=Math.pow(t[a]-e,2);return n/t.length},e.covariance=function(t,e,n,a){void 0===n&&(n=r(t)),void 0===a&&(a=r(e));for(var i=0,o=t.length;o--;)i+=(t[o]-n)*(e[o]-a);return i/t.length}},687:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2=void 0;var n=r(490),a=r(298),i=r(118),o=r(799);function u(t,e,r){var n=t.data,a=t.width,i=t.height;void 0===r&&(r="full");for(var u=a+e.width-1,d=i+e.height-1,f=o.zeros(d,u).data,c=0;c<e.height;c++)for(var s=0;s<e.width;s++){var l=e.data[c*e.width+s];if(l)for(var v=0;v<i;v++)for(var p=0;p<a;p++)f[(v+c)*u+p+s]+=n[v*a+p]*l}return h({data:f,width:u,height:d},r,i,e.height,a,e.width)}function d(t,e,r){var i=e.data,o=e.width,u=e.height;void 0===r&&(r="full");var d=c(t,a.ones(u,1),a.ones(1,o),r);return n.multiply2d(d,i[0])}function f(t){for(var e=t.data,r=e[0],n=1;n<e.length;n++)if(e[n]!==r)return!1;return!0}function c(t,e,r,n){void 0===n&&(n="full");var a=Math.max(e.height,e.width),i=Math.max(r.height,r.width),o=u(t,e,"full");return h(u(o,r,"full"),n,t.height,a,t.width,i)}function h(t,e,r,n,a,o){if("full"===e)return t;if("same"===e){var u=Math.ceil((t.height-r)/2),d=Math.ceil((t.width-a)/2);return i.sub(t,u,r,d,a)}return i.sub(t,n-1,r-n+1,o-1,a-o+1)}e.conv2=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[2]&&t[2].data?c.apply(void 0,t):f(t[1])?d.apply(void 0,t):u.apply(void 0,t)}},346:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter2=void 0;var n=r(687);e.filter2=function(t,e,r){return void 0===r&&(r="same"),n.conv2(e,function(t){for(var e=t.data,r=t.width,n=t.height,a=new Array(e.length),i=0;i<n;i++)for(var o=0;o<r;o++)a[i*r+o]=e[(n-1-i)*r+r-1-o];return{data:a,width:r,height:n}}(t),r)}},470:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fspecial=void 0;var n=r(490);e.fspecial=function(t,e,r){void 0===e&&(e=3),void 0===r&&(r=1.5);var a=function(t,e){for(var r=t.data,n=t.width,a=t.height,i=new Array(r.length),o=0;o<r.length;o++)i[o]=Math.exp(-r[o]/(2*Math.pow(e,2)));return{data:i,width:n,height:a}}(function(t){for(var e=2*t+1,r=new Array(Math.pow(e,2)),n=0;n<e;n++)for(var a=0;a<e;a++)r[n*e+a]=Math.pow(n-t,2)+Math.pow(a-t,2);return{data:r,width:e,height:e}}(e=(e-1)/2),r),i=n.sum2d(a);return n.divide2d(a,i)}},521:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.imfilter=void 0;var n=r(20),a=r(389),i=r(490),o=r(346);e.imfilter=function(t,e,r,u){return void 0===r&&(r="symmetric"),void 0===u&&(u="same"),t=function(t,e,r,o){if(t=a.padarray(t,i.floor([e/2,r/2]),o),0===n.mod(e,2)&&(t.data=t.data.slice(0,-t.width),t.height--),0===n.mod(r,2)){for(var u=[],d=0;d<t.data.length;d++)(d+1)%t.width!=0&&u.push(t.data[d]);t.data=u,t.width--}return t}(t,e.width,e.height,r),u=function(t){return"same"===t&&(t="valid"),t}(u),o.filter2(e,t,u)}},971:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),a(r(687),e),a(r(346),e),a(r(470),e),a(r(521),e),a(r(150),e),a(r(298),e),a(r(389),e),a(r(582),e),a(r(439),e),a(r(118),e),a(r(240),e),a(r(799),e)},928:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.numbers=void 0,e.numbers=function(t,e,r){for(var n=e*t,a=new Array(n),i=0;i<n;i++)a[i]=r;return{data:a,width:e,height:t}}},20:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mod=void 0,e.mod=function(t,e){return t-e*Math.floor(t/e)}},150:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.normpdf=void 0,e.normpdf=function(t,e,r){var n=t.data,a=t.width,i=t.height;void 0===e&&(e=0),void 0===r&&(r=1);for(var o=new Array(n.length),u=0;u<n.length;u++){var d=(n[u]-e)/r;o[u]=Math.exp(-Math.pow(d,2)/2)/(2.5066282746310007*r)}return{data:o,width:a,height:i}}},298:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ones=void 0;var n=r(928);e.ones=function(t,e){return void 0===e&&(e=t),n.numbers(t,e,1)}},389:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.padarray=void 0;var n=r(20);e.padarray=function(t,e,r,a){var i=e[0],o=e[1];return t.height>=i&&t.width>=o?function(t,e){for(var r=e[0],n=e[1],a=t.width+2*n,i=t.height+2*r,o=new Array(a*i),u=-r;u<0;u++){for(var d=-n;d<0;d++)o[(u+r)*a+d+n]=t.data[(Math.abs(u)-1)*t.width+Math.abs(d)-1];for(d=0;d<t.width;d++)o[(u+r)*a+d+n]=t.data[(Math.abs(u)-1)*t.width+d];for(d=t.width;d<t.width+n;d++)o[(u+r)*a+d+n]=t.data[(Math.abs(u)-1)*t.width+2*t.width-d-1]}for(u=0;u<t.height;u++){for(d=-n;d<0;d++)o[(u+r)*a+d+n]=t.data[u*t.width+Math.abs(d)-1];for(d=0;d<t.width;d++)o[(u+r)*a+d+n]=t.data[u*t.width+d];for(d=t.width;d<t.width+n;d++)o[(u+r)*a+d+n]=t.data[u*t.width+2*t.width-d-1]}for(u=t.height;u<t.height+r;u++){for(d=-n;d<0;d++)o[(u+r)*a+d+n]=t.data[(2*t.height-u-1)*t.width+Math.abs(d)-1];for(d=0;d<t.width;d++)o[(u+r)*a+d+n]=t.data[(2*t.height-u-1)*t.width+d];for(d=t.width;d<t.width+n;d++)o[(u+r)*a+d+n]=t.data[(2*t.height-u-1)*t.width+2*t.width-d-1]}return{data:o,width:a,height:i}}(t,[i,o]):function(t,e){for(var r=function(t,e){return{data:t.data.concat(e.data),height:t.height+e.height,width:t.width}}(t,function(t){for(var e=t.data,r=t.width,n=t.height,a=new Array(e.length),i=0;i<n;i++)for(var o=0;o<r;o++)a[i*r+o]=e[(n-1-i)*r+o];return{data:a,width:r,height:n}}(t)),a=t.height+2*e,i=new Array(t.width*a),o=-e;o<t.height+e;o++)for(var u=0;u<t.width;u++)i[(o+e)*t.width+u]=r.data[n.mod(o,r.height)*t.width+u];return{data:i,width:t.width,height:a}}(function(t,e){for(var r=t.width+2*e,a=new Array(r*t.height),i=function(t,e){for(var r=t.width+e.width,n=new Array(t.height*r),a=0;a<t.height;a++){for(var i=0;i<t.width;i++)n[a*r+i]=t.data[a*t.width+i];for(i=0;i<e.width;i++)n[a*r+i+t.width]=e.data[a*e.width+i]}return{data:n,width:r,height:t.height}}(t,function(t){for(var e=t.data,r=t.width,n=t.height,a=new Array(e.length),i=0;i<n;i++)for(var o=0;o<r;o++)a[i*r+o]=e[i*r+r-1-o];return{data:a,width:r,height:n}}(t)),o=0;o<t.height;o++)for(var u=-e;u<t.width+e;u++)a[o*r+u+e]=i.data[o*i.width+n.mod(u,i.width)];return{data:a,width:r,height:t.height}}(t,o),i)}},582:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rgb2grayInteger=e.rgb2gray=void 0,e.rgb2gray=function(t){for(var e=t.data,r=t.width,n=t.height,a=new Uint8Array(r*n),i=0;i<e.length;i+=4)a[i/4]=.29894*e[i]+.58704*e[i+1]+.11402*e[i+2]+.5;return{data:Array.from(a),width:r,height:n}},e.rgb2grayInteger=function(t){for(var e=t.data,r=t.width,n=t.height,a=new Array(r*n),i=0;i<e.length;i+=4)a[i/4]=77*e[i]+150*e[i+1]+29*e[i+2]+128>>8;return{data:a,width:r,height:n}}},439:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip2d=void 0,e.skip2d=function(t,e,r){for(var n=e[0],a=e[1],i=e[2],o=r[0],u=r[1],d=r[2],f=Math.ceil((d-o)/u),c=Math.ceil((i-n)/a),h=new Array(f*c),s=0;s<c;s++)for(var l=0;l<f;l++){var v=n+s*a,p=o+l*u;h[s*f+l]=t.data[v*t.width+p]}return{data:h,width:f,height:c}}},118:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sub=void 0,e.sub=function(t,e,r,n,a){for(var i=t.data,o=t.width,u=new Array(a*r),d=0;d<r;d++)for(var f=0;f<a;f++)u[d*a+f]=i[(n+d)*o+e+f];return{data:u,width:a,height:r}}},240:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.transpose=void 0,e.transpose=function(t){for(var e=t.data,r=t.width,n=t.height,a=new Array(r*n),i=0;i<n;i++)for(var o=0;o<r;o++)a[o*n+i]=e[i*r+o];return{data:a,height:r,width:n}}},799:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zeros=void 0;var n=r(928);e.zeros=function(t,e){return void 0===e&&(e=t),n.numbers(t,e,0)}},595:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.originalSsim=void 0;var n=r(490),a=r(971);e.originalSsim=function(t,e,r){var i=a.fspecial("gaussian",r.windowSize,1.5),o=Math.pow(2,r.bitDepth)-1,u=Math.pow(r.k1*o,2),d=Math.pow(r.k2*o,2);i=n.divide2d(i,n.sum2d(i));var f=a.filter2(i,t,"valid"),c=a.filter2(i,e,"valid"),h=n.square2d(f),s=n.square2d(c),l=n.multiply2d(f,c),v=n.square2d(t),p=n.square2d(e),g=n.subtract2d(a.filter2(i,v,"valid"),h),w=n.subtract2d(a.filter2(i,p,"valid"),s),y=n.subtract2d(a.filter2(i,n.multiply2d(t,e),"valid"),l);if(u>0&&d>0){var m=n.add2d(n.multiply2d(l,2),u),b=n.add2d(n.multiply2d(y,2),d),A=n.add2d(n.add2d(h,s),u),_=n.add2d(n.add2d(g,w),d);return n.divide2d(n.multiply2d(m,b),n.multiply2d(A,_))}var M=n.multiply2d(l,2),k=n.multiply2d(y,2),E=n.add2d(h,s),S=n.add2d(g,w);return n.divide2d(n.multiply2d(M,k),n.multiply2d(E,S))}},773:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ssim=void 0;var n=r(490),a=r(971);e.ssim=function(t,e,r){var i=a.normpdf(function(t){for(var e=Math.floor(t/2),r=new Array(2*e+1),n=-e;n<=e;n++)r[n+e]=Math.abs(n);return{data:r,width:r.length,height:1}}(r.windowSize),0,1.5),o=Math.pow(2,r.bitDepth)-1,u=Math.pow(r.k1*o,2),d=Math.pow(r.k2*o,2);i=n.divide2d(i,n.sum2d(i));var f=a.transpose(i),c=a.conv2(t,i,f,"valid"),h=a.conv2(e,i,f,"valid"),s=n.square2d(c),l=n.square2d(h),v=n.multiply2d(c,h),p=n.square2d(t),g=n.square2d(e),w=n.subtract2d(a.conv2(p,i,f,"valid"),s),y=n.subtract2d(a.conv2(g,i,f,"valid"),l),m=n.subtract2d(a.conv2(n.multiply2d(t,e),i,f,"valid"),v);return u>0&&d>0?function(t,e,r,a,i,o,u,d){var f=n.add2d(n.multiply2d(t,2),u),c=n.add2d(n.multiply2d(e,2),d),h=n.add2d(n.add2d(r,a),u),s=n.add2d(n.add2d(i,o),d);return n.divide2d(n.multiply2d(f,c),n.multiply2d(h,s))}(v,m,s,l,w,y,u,d):function(t,e,r,a,i,o){var u=n.multiply2d(t,2),d=n.multiply2d(e,2),f=n.add2d(r,a),c=n.add2d(i,o);return n.divide2d(n.multiply2d(u,d),n.multiply2d(f,c))}(v,m,s,l,w,y)}},535:function(t,e){var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function n(t,e,r,n){return{rightEdge:r[e*n+t+1],bottomEdge:r[(e+1)*n+t],bottomRightEdge:r[(e+1)*n+t+1]}}function a(t,e){for(var r=t.width,a=t.height,i=t.data,o=r+1,u=a+1,d=new Int32Array(o*u),f=a-1;f>=0;--f)for(var c=r-1;c>=0;--c){var h=n(c,f,d,o),s=h.rightEdge,l=h.bottomEdge,v=h.bottomRightEdge;d[f*o+c]=e(i[f*r+c],c,f)+s+l-v}return{data:d,height:u,width:o}}function i(t,e,r){for(var a=t.width,i=t.height,o=t.data,u=e.data,d=a+1,f=i+1,c=new Int32Array(d*f),h=i-1;h>=0;--h)for(var s=a-1;s>=0;--s){var l=n(s,h,c,d),v=l.rightEdge,p=l.bottomEdge,g=l.bottomRightEdge,w=h*a+s;c[h*d+s]=r(o[w],u[w],s,h)+v+p-g}return{data:c,height:f,width:d}}function o(t,e,r){for(var n=t.width,a=t.height,i=t.data,o=n-1,u=a-1,d=o-e+1,f=u-e+1,c=new Int32Array(d*f),h=0;h<u;++h)for(var s=0;s<o;++s)if(s<d&&h<f){var l=i[n*h+s]-i[n*h+s+e]-i[n*(h+e)+s]+i[n*(h+e)+s+e];c[h*d+s]=l/r}return{height:f,width:d,data:c}}function u(t,e){return o(a(t,(function(t){return t})),e,1)}function d(t,e,r){for(var n=r*r,i=o(a(t,(function(t){return t*t})),r,1),u=0;u<e.data.length;++u){var d=e.data[u]/n,f=i.data[u]/n,c=d*d;i.data[u]=1024*(f-c)}return i}function f(t,e,r,n,a){for(var u=a*a,d=o(i(t,e,(function(t,e){return t*e})),a,1),f=0;f<r.data.length;++f)d.data[f]=1024*(d.data[f]/u-r.data[f]/u*(n.data[f]/u));return d}Object.defineProperty(e,"__esModule",{value:!0}),e.weberSsim=e.windowCovariance=e.windowVariance=e.windowSums=e.windowMatrix=e.partialSumMatrix2=e.partialSumMatrix1=void 0,e.partialSumMatrix1=a,e.partialSumMatrix2=i,e.windowMatrix=o,e.windowSums=u,e.windowVariance=d,e.windowCovariance=f,e.weberSsim=function(t,e,n){for(var a=n.bitDepth,i=n.k1,o=n.k2,c=n.windowSize,h=Math.pow(2,a)-1,s=i*h*(i*h),l=o*h*(o*h),v=c*c,p=r(r({},t),{data:Int32Array.from(t.data,(function(t){return t+.5}))}),g=r(r({},e),{data:Int32Array.from(e.data,(function(t){return t+.5}))}),w=u(p,c),y=d(p,w,c),m=u(g,c),b=d(g,m,c),A=f(p,g,w,m,c),_=w.data.length,M=0,k=new Array(_),E=0;E<_;++E){var S=w.data[E]/v,P=m.data[E]/v,T=y.data[E]/1024,O=b.data[E]/1024,j=(2*S*P+s)*(A.data[E]/1024*2+l)/(S*S+P*P+s)/(T+O+l);k[E]=j,0==E?M=j:M+=(j-M)/(E+1)}return{data:k,width:w.width,height:w.height,mssim:M}}}},e={};return function r(n){if(e[n])return e[n].exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}(607)})()},993:()=>{},386:()=>{}},e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>t+".worker.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={429:1};r.f.i=(e,n)=>{t[e]||importScripts(""+r.u(e))};var e=self.webpackChunkic_analyze=self.webpackChunkic_analyze||[],n=e.push.bind(e);e.push=e=>{var[a,i,o]=e;for(var u in i)r.o(i,u)&&(r.m[u]=i[u]);for(o&&o(r);a.length;)t[a.pop()]=1;n(e)}})(),(()=>{"use strict";const t=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),n=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.thrown"),i=t=>"object"==typeof t&&null!==t||"function"==typeof t,o=new Map([["proxy",{canHandle:e=>i(e)&&e[t],serialize(t){const{port1:e,port2:r}=new MessageChannel;return u(t,e),[r,[r]]},deserialize:t=>(t.start(),c(t,[],undefined))}],["throw",{canHandle:t=>i(t)&&a in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function u(e,r=self){r.addEventListener("message",(function n(i){if(!i||!i.data)return;const{id:o,type:f,path:c}=Object.assign({path:[]},i.data),h=(i.data.argumentList||[]).map(v);let p;try{const r=c.slice(0,-1).reduce(((t,e)=>t[e]),e),n=c.reduce(((t,e)=>t[e]),e);switch(f){case 0:p=n;break;case 1:r[c.slice(-1)[0]]=v(i.data.value),p=!0;break;case 2:p=n.apply(r,h);break;case 3:p=function(e){return Object.assign(e,{[t]:!0})}(new n(...h));break;case 4:{const{port1:t,port2:r}=new MessageChannel;u(e,r),p=function(t,e){return s.set(t,e),t}(t,[t])}break;case 5:p=void 0}}catch(t){p={value:t,[a]:0}}Promise.resolve(p).catch((t=>({value:t,[a]:0}))).then((t=>{const[e,a]=l(t);r.postMessage(Object.assign(Object.assign({},e),{id:o}),a),5===f&&(r.removeEventListener("message",n),d(r))}))})),r.start&&r.start()}function d(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function f(t){if(t)throw new Error("Proxy has been released and is not useable")}function c(t,r=[],a=function(){}){let i=!1;const o=new Proxy(a,{get(e,a){if(f(i),a===n)return()=>p(t,{type:5,path:r.map((t=>t.toString()))}).then((()=>{d(t),i=!0}));if("then"===a){if(0===r.length)return{then:()=>o};const e=p(t,{type:0,path:r.map((t=>t.toString()))}).then(v);return e.then.bind(e)}return c(t,[...r,a])},set(e,n,a){f(i);const[o,u]=l(a);return p(t,{type:1,path:[...r,n].map((t=>t.toString())),value:o},u).then(v)},apply(n,a,o){f(i);const u=r[r.length-1];if(u===e)return p(t,{type:4}).then(v);if("bind"===u)return c(t,r.slice(0,-1));const[d,s]=h(o);return p(t,{type:2,path:r.map((t=>t.toString())),argumentList:d},s).then(v)},construct(e,n){f(i);const[a,o]=h(n);return p(t,{type:3,path:r.map((t=>t.toString())),argumentList:a},o).then(v)}});return o}function h(t){const e=t.map(l);return[e.map((t=>t[0])),(r=e.map((t=>t[1])),Array.prototype.concat.apply([],r))];var r}const s=new WeakMap;function l(t){for(const[e,r]of o)if(r.canHandle(t)){const[n,a]=r.serialize(t);return[{type:3,name:e,value:n},a]}return[{type:0,value:t},s.get(t)||[]]}function v(t){switch(t.type){case 3:return o.get(t.name).deserialize(t.value);case 0:return t.value}}function p(t,e,r){return new Promise((n=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(r){r.data&&r.data.id&&r.data.id===a&&(t.removeEventListener("message",e),n(r.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:a},e),r)}))}var g=r(964),w=r.n(g);r(556);const y={hfAsymmetry:1,goodQualitySeek:1.5,badQualitySeek:.5};let m;async function b(t){m||(m=t?await w()({locateFile:()=>t}):await w()())}function A(t){const{dataA:e,dataB:r,width:n,height:a}=t,i=e.byteLength/n/a;if(3!==i&&4!==i)throw new Error("Image must be RGB or RGBA in colors");if(e.byteLength!==r.byteLength)throw new Error(`Image data have different length ${e.byteLength} vs. ${r.byteLength}`)}function _(t){if(!m)throw new Error("Wasm module not loaded");A(t);const e=m.GetMSE(t);return 10*Math.log10(65025/e)}var M=r(936);let k;var E;!function(t){t[t.YUV400=0]="YUV400",t[t.YUV420=1]="YUV420",t[t.YUV422=2]="YUV422",t[t.YUV444=3]="YUV444"}(E||(E={})),u({setImageToEncode(t){k=t},calcPSNR:async t=>(await b(M),_({width:k.width,height:k.height,dataA:new Uint8Array(k.data),dataB:new Uint8Array(t.data)})),calcSSIM:async t=>(await b(M),_({width:k.width,height:k.height,dataA:new Uint8Array(k.data),dataB:new Uint8Array(t.data)})),calcButteraugli:async t=>(await b(M),function(t,e){if(!m)throw new Error("Wasm module not loaded");const r={...y,...void 0};if(r.badQualitySeek<0||r.badQualitySeek>=2)throw new Error("badQualitySeek must between 0, 2");if(r.goodQualitySeek<0||r.goodQualitySeek>=2)throw new Error("goodQualitySeek must between 0, 2");return A(t),m.GetButteraugli(t,r)}({width:k.width,height:k.height,dataA:new Uint8Array(k.data),dataB:new Uint8Array(t.data)})),webpEncode:async t=>(await r.e(553).then(r.bind(r,553))).encode(k,t),webpDecode:async t=>(await r.e(430).then(r.bind(r,430))).decode(t),avifEncode:async t=>(await r.e(197).then(r.bind(r,197))).encode(k,t),avifDecode:async t=>(await r.e(495).then(r.bind(r,495))).decode(t)})})()})();
//# sourceMappingURL=encoding.worker.js.map