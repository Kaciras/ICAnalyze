{"version":3,"sources":["webpack://ic-analyze/webpack/runtime/chunk loaded","webpack://ic-analyze/./lib/diff.js","webpack://ic-analyze/./deps/squoosh/src/client/lazy-app/util/index.ts","webpack://ic-analyze/./web/WorkerPool.ts","webpack://ic-analyze/./web/encode.ts","webpack://ic-analyze/./web/decode.ts","webpack://ic-analyze/./web/assets/check_box.svg","webpack://ic-analyze/./web/assets/check_box-checked.svg","webpack://ic-analyze/./web/assets/radio_box.svg","webpack://ic-analyze/./web/assets/radio_box-checked.svg","webpack://ic-analyze/./web/utils.ts","webpack://ic-analyze/./web/ui/CheckBoxBase.tsx","webpack://ic-analyze/./web/ui/CheckBoxBase.scss?048b","webpack://ic-analyze/./web/ui/RangeInput.tsx","webpack://ic-analyze/./web/ui/RangeInput.scss?b923","webpack://ic-analyze/./web/ui/Button.scss?b738","webpack://ic-analyze/./web/ui/Button.tsx","webpack://ic-analyze/./web/ui/NumberInput.scss?f1f3","webpack://ic-analyze/./web/ui/NumberInput.tsx","webpack://ic-analyze/./web/ui/Dialog.scss?56a5","webpack://ic-analyze/./web/ui/Dialog.tsx","webpack://ic-analyze/./web/ui/PinchZoom.tsx","webpack://ic-analyze/./web/ui/SelectBox.tsx","webpack://ic-analyze/./web/ui/SelectBox.scss?b068","webpack://ic-analyze/./web/ui/SwitchButton.tsx","webpack://ic-analyze/./web/ui/SwitchButton.scss?1593","webpack://ic-analyze/./web/ui/ControlField.tsx","webpack://ic-analyze/./web/ui/ControlField.scss?4031","webpack://ic-analyze/./web/ui/index.ts","webpack://ic-analyze/./web/app/DemoButton.tsx","webpack://ic-analyze/./web/app/DemoButton.scss?146a","webpack://ic-analyze/./web/app/SelectFileDialog.scss?b5f8","webpack://ic-analyze/./web/app/SelectFileDialog.tsx","webpack://ic-analyze/./web/app/ImageInfoPanel.tsx","webpack://ic-analyze/./web/app/ImageInfoPanel.scss?f428","webpack://ic-analyze/./lib/similarity.ts","webpack://ic-analyze/./web/app/MetricsPanel.scss?b436","webpack://ic-analyze/./web/app/MetricsPanel.tsx","webpack://ic-analyze/./web/form/BoolOption.tsx","webpack://ic-analyze/./web/form/BoolOption.scss?d0c7","webpack://ic-analyze/./web/form/EnumOption.scss?04e9","webpack://ic-analyze/./web/form/EnumOption.tsx","webpack://ic-analyze/./web/form/NumberOption.scss?8a9b","webpack://ic-analyze/./web/form/NumberOption.tsx","webpack://ic-analyze/./web/codecs/common.ts","webpack://ic-analyze/./web/codecs/mozjpeg/client.tsx","webpack://ic-analyze/./deps/squoosh/src/features/encoders/jxl/shared/meta.ts","webpack://ic-analyze/./web/codecs/jxl/client.tsx","webpack://ic-analyze/./deps/squoosh/src/features/encoders/webP/shared/meta.ts","webpack://ic-analyze/./web/codecs/webp/client.tsx","webpack://ic-analyze/./web/form/PresetOption.tsx","webpack://ic-analyze/./deps/squoosh/src/features/encoders/avif/shared/meta.ts","webpack://ic-analyze/./web/codecs/avif/client.tsx","webpack://ic-analyze/./web/codecs/webp2/client.tsx","webpack://ic-analyze/./web/codecs/index.ts","webpack://ic-analyze/./web/app/EncoderPanel.tsx","webpack://ic-analyze/./web/app/EncoderPanel.scss?4a80","webpack://ic-analyze/./web/app/ConfigDialog.tsx","webpack://ic-analyze/./web/app/ConfigDialog.scss?ed38","webpack://ic-analyze/./web/app/ProgressDialog.scss?dba9","webpack://ic-analyze/./web/app/ProgressDialog.tsx","webpack://ic-analyze/./web/app/CompressSession.tsx","webpack://ic-analyze/./web/app/IntroPage.scss?4c68","webpack://ic-analyze/./web/assets/github-logo.svg","webpack://ic-analyze/./web/app/IntroPage.tsx","webpack://ic-analyze/./web/app/ImageView.scss?64bf","webpack://ic-analyze/./web/app/ImageView.tsx","webpack://ic-analyze/./web/assets/lock.svg","webpack://ic-analyze/./web/app/ChartPanel.tsx","webpack://ic-analyze/./web/app/ChartPanel.scss?4fa2","webpack://ic-analyze/./web/app/ControlPanel.tsx","webpack://ic-analyze/./web/app/ControlPanel.scss?bb83","webpack://ic-analyze/./web/app/AnalyzePage.scss?ae88","webpack://ic-analyze/./web/app/AnalyzePage.tsx","webpack://ic-analyze/./web/index.tsx","webpack://ic-analyze/./web/app/index.tsx","webpack://ic-analyze/webpack/bootstrap","webpack://ic-analyze/webpack/runtime/compat get default export","webpack://ic-analyze/webpack/runtime/define property getters","webpack://ic-analyze/webpack/runtime/get javascript chunk filename","webpack://ic-analyze/webpack/runtime/global","webpack://ic-analyze/webpack/runtime/harmony module decorator","webpack://ic-analyze/webpack/runtime/hasOwnProperty shorthand","webpack://ic-analyze/webpack/runtime/make namespace object","webpack://ic-analyze/webpack/runtime/publicPath","webpack://ic-analyze/webpack/runtime/jsonp chunk loading","webpack://ic-analyze/webpack/startup"],"names":["deferred","_scriptDir","Module","document","currentScript","src","undefined","g","ba","ca","ready","Promise","a","b","q","ea","x","fa","ha","da","hasOwnProperty","window","importScripts","process","versions","node","ia","ja","ka","la","y","__dirname","normalize","readFileSync","buffer","Uint8Array","assert","argv","length","replace","slice","on","A","inspect","read","readbuffer","print","console","log","warn","error","printErr","self","location","href","indexOf","substr","lastIndexOf","XMLHttpRequest","open","send","responseText","responseType","response","na","ma","bind","B","wasmBinary","noExitRuntime","WebAssembly","oa","pa","qa","TextDecoder","ra","c","d","subarray","decode","e","f","String","fromCharCode","k","Ba","Ca","C","E","va","F","G","Da","Ea","ta","ua","wa","charCodeAt","xa","ya","za","Aa","Fa","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","Ga","Ha","Ia","Ja","Ka","La","preRun","shift","unshift","H","Ma","Na","onAbort","RuntimeError","Oa","I","prototype","startsWith","Pa","preloadedImages","preloadedAudios","Qa","locateFile","Ra","Ta","ga","get","Ua","this","O","Wa","Xa","pop","Ya","fromWireType","J","K","Za","$a","ab","Function","bb","Error","name","message","stack","toString","Object","create","constructor","cb","db","L","h","l","M","forEach","Array","push","eb","TypeError","fb","N","P","gb","count","Z","aa","R","S","T","hb","ib","jb","kb","value","X","lb","FinalizationGroup","next","done","unregister","register","mb","nb","ob","Q","pb","qb","W","arguments","apply","sb","$","U","tb","ub","vb","clone","wb","xb","yb","Ab","V","toWireType","concat","call","Eb","Fb","Gb","Hb","Ib","map","join","Jb","Kb","Lb","Y","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","globalThis","Vb","Xb","Yb","InternalError","Zb","$b","BindingError","isAliasOf","getPrototypeOf","isDeleted","deleteLater","sa","argPackAdvance","readValueFromPointer","deleteObject","zb","pointerType","getInheritedInstanceCount","keys","getLiveInheritedInstances","flushPendingDeletes","setDelayFunction","UnboundTypeError","count_emval_handles","get_first_emval","ac","cc","bc","i","m","n","r","u","z","t","w","p","write","D","v","rb","Db","s","className","Bb","Cb","split","ArrayBuffer","Uint8ClampedArray","o","Wb","Ub","copyWithin","Math","min","max","grow","byteLength","j","asm","exports","monitorRunDependencies","clearInterval","instance","fetch","resolve","then","credentials","ok","arrayBuffer","catch","instantiate","instantiateWasm","instantiateStreaming","dc","___wasm_call_ctors","_malloc","_free","___getTypeName","fc","calledRun","onRuntimeInitialized","postRun","setStatus","setTimeout","___embind_register_native_and_builtin_types","dynCall_jiji","ec","run","preInit","module","canDecodeCache","Map","async","blobToImg","blob","url","URL","createObjectURL","img","Image","decoding","loaded","reject","onload","onerror","decodeImage","revokeObjectURL","WorkerPool","factory","size","terminated","queue","waiters","workers","remotes","worker","fn","all","task","addJob","terminate","job","remote","runJob","splice","newWorker","Worker","BatchEncodeAnalyzer","image","measure","measureOptions","pool","workerCount","runOnEach","setImageToEncode","encoder","options","poll","time","encode","Blob","type","mimeType","data","onProgress","metrics","wrapper","SSIM","PSNR","butteraugli","calcPSNR","enabled","calcSSIM","source","raw","calcButteraugli","heatMap","width","height","ctx","createElement","getContext","imageData","createImageData","set","rgbaToImage","decodeImageNative","bitmap","createImageBitmap","canvas","drawImage","getImageData","svgToImageData","svgXml","DOMParser","parseFromString","svg","documentElement","getAttribute","viewBox","setAttribute","XMLSerializer","serializeToString","ensureSVGSize","drawable","opts","sx","sy","sw","sh","drawableToImageData","text","has","resultPromise","picture","srcset","append","currentSrc","canDecodeImageType","webpDecode","avifDecode","jxlDecode","webp2Decode","_extends","assign","target","key","_ref","fill","_ref2","props","xmlns","NOOP","SIZE_UNITS","bytes","fraction","abs","toFixed","log2","Icon","IconChecked","checked","disabled","onClick","onChange","onValueChange","children","currentTarget","step","cssVariables","style","valueAsNumber","active","title","classes","ButtonTag","htmlType","Number","MAX_SAFE_INTEGER","handleMouseDown","diff","timer","pow","getPrecision","round","update","current","newValue","addEventListener","onMouseUp","clearTimeout","removeEventListener","tabIndex","onMouseDown","hidePrevious","dialogs","body","querySelectorAll","previous","classList","add","remove","onClose","useEffect","handleKeyUp","event","stopImmediatePropagation","useLayoutEffect","createPortal","role","PinchZoom","state","updateOffset","dx","dy","scale","touchAction","onWheel","ctrlKey","deltaMode","clientX","clientY","deltaY","preventDefault","scaleDiff","rect","firstElementChild","getBoundingClientRect","left","top","onTouchStart","baseEvent","handler","basePointer","touches","handleMove","touch","pageX","pageY","handleEnd","watchTouchMove","nativeEvent","button","basePageX","basePageY","watchMouseMove","clazz","onFocus","CheckBox","RadioBox","description","icon","loading","setLoading","useState","alt","demos","artwork","initController","AbortController","onCancel","onFileChange","boundary","isInArea","setInArea","counter","useRef","enter","leave","reset","useBoundaryCounter","abortController","setError","accept","file","acceptUrl","newController","abort","signal","exec","pathname","timeHeader","headers","lastModified","Date","getTime","File","getFileFromUrl","demoButtons","demo","onDragEnter","onDragOver","onDrop","items","dataTransfer","getAsFile","onDragLeave","files","ratio","ref","el","putImageData","defaultButteraugliOptions","hfAsymmetry","goodQualitySeek","badQualitySeek","createMeasureState","saved","version","navigator","hardwareConcurrency","ButteraugliFields","handleChange","inputs","entries","boolOption","id","label","defaultValue","initControlValue","labels","newOptionState","Boolean","Controller","stopPropagation","OptionField","isVariable","onVariabilityChange","populate","generate","_","enumOption","enumObject","range","onRangeChange","handleChangeV","newVariables","filter","handleChangeC","includes","prev","numberOption","offset","sequence","ceil","ConstMode","VariableMode","Field","buildOptions","templates","varNames","values","ranges","reduce","list","mergeOptions","base","from","extension","ColorSpace","GRAYSCALE","RGB","YCbCr","Quantization","defaultOptions","quality","baseline","arithmetic","progressive","optimize_coding","smoothing","color_space","quant_table","ImageMagick","trellis_multipass","trellis_opt_zero","trellis_opt_table","trellis_loops","auto_subsample","chroma_subsample","separate_chroma_quality","chroma_quality","initControlState","init","initOptionsState","OptionsPanel","handleValueChange","handleRangeChange","handleVarChange","Controls","variableName","onVariableChange","fields","nval","getOptionsList","mozjpegEncode","speed","epf","nearLossless","lossyPalette","jxlEncode","target_size","target_PSNR","method","sns_strength","filter_strength","filter_sharpness","filter_type","partitions","segments","pass","show_compressed","preprocessing","autofilter","partition_limit","alpha_compression","alpha_filtering","alpha_quality","lossless","exact","image_hint","emulate_jpeg_size","thread_level","low_memory","near_lossless","use_delta_palette","use_sharp_yuv","parent","copy","presetOption","default","photo","drawing","Default","Picture","Photo","Graph","webpEncode","cqLevel","minQuantizerAlpha","tileColsLog2","tileRowsLog2","subsample","chromaDeltaQ","sharpness","targetSsim","Subsampling","YUV400","YUV420","YUV422","YUV444","avifEncode","UVMode","Csp","YCoCg","Custom","YIQ","effort","sns","uv_mode","Adapt","csp_type","error_diffusion","use_random_matrix","webp2Encode","ENCODERS","ENCODER_MAP","fromEntries","createEncodingConfig","encoders","enable","WebP","setCurrent","tabs","newState","initEncoderConfig","localStorage","getItem","JSON","parse","panels","onStart","onSelectFile","index","setIndex","setData","panel","some","setItem","stringify","formatter","Intl","RelativeTimeFormat","calcTime","start","performance","now","ms","useMemo","wait","func","result","disallow","args","debounce","debounced","remaining","isNaN","format","color","CompressSession","selectFile","setSelectFile","setFile","setImage","setEncoder","progress","initialMax","setMax","setValue","increase","useProgress","newFile","config","outputSize","enc","optList","calculations","warmup","eMap","initialize","optionsList","oMap","original","ViewType","output","setType","Compressed","brightness","setBrightness","pinchZoom","setPinchZoom","resetPinchZoom","initialState","useResettable","backCanvas","topCanvas","ImageViewTab","HeatMap","brightnessInput","brightnessVal","AbsDiff","wrapperCss","mixBlendMode","noHeatMap","heatMapTitle","Original","hidden","SeriesMapper","outputs","mapping","divisor","define","handleMouseover","chart","yAxis","axis","visible","redraw","addLegendListener","series","legendItem","setChart","locked","setLocked","mapper","convert","xAxis","setCategories","updateSeriesData","removePlotLine","addPlotLine","dashStyle","legend","displayValue","updatePlotLine","display","clear","opposite","firstRight","animation","styledMode","tooltip","borderRadius","verticalAlign","alignColumns","categories","exporting","buttons","contextButton","symbolSize","symbolX","symbolY","chartOptions","allItems","onMouseOver","addSeriesListener","variableType","encoderName","encoderState","Step","None","Encoder","selectOptions","Options","es","DownloadButton","filename","codec","newUrl","download","appendChild","click","removeChild","showChart","setShowChart","setState","useReducer","action","kvs","rv","createTODOState","encodings","op","CSS","supports","detectBrowserSupport","alert","integrations","tracesSampleRate","release","dsn","isOpen","setOpen","setResult","showDialog","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkIds","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","definition","defineProperty","enumerable","chunkId","hmd","obj","prop","Symbol","toStringTag","scriptUrl","scripts","getElementsByTagName","baseURI","installedChunks","826","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"mappings":"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","file":"index.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","\nvar Module = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(Module) {\n  Module = Module || {};\n\n\nvar g;g||(g=typeof Module !== 'undefined' ? Module : {});var ba,ca;g.ready=new Promise(function(a,b){ba=a;ca=b});var da={},q;for(q in g)g.hasOwnProperty(q)&&(da[q]=g[q]);var ea=!1,x=!1,fa=!1,ha=!1;ea=\"object\"===typeof window;x=\"function\"===typeof importScripts;fa=\"object\"===typeof process&&\"object\"===typeof process.versions&&\"string\"===typeof process.versions.node;ha=!ea&&!fa&&!x;var y=\"\",ia,ja,ka,la;\nif(fa)y=x?require(\"path\").dirname(y)+\"/\":__dirname+\"/\",ia=function(a,b){ka||(ka=require(\"fs\"));la||(la=require(\"path\"));a=la.normalize(a);return ka.readFileSync(a,b?null:\"utf8\")},ja=function(a){a=ia(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a},1<process.argv.length&&process.argv[1].replace(/\\\\/g,\"/\"),process.argv.slice(2),process.on(\"uncaughtException\",function(a){throw a;}),process.on(\"unhandledRejection\",A),g.inspect=function(){return\"[Emscripten Module object]\"};else if(ha)\"undefined\"!=\ntypeof read&&(ia=function(a){return read(a)}),ja=function(a){if(\"function\"===typeof readbuffer)return new Uint8Array(readbuffer(a));a=read(a,\"binary\");assert(\"object\"===typeof a);return a},\"undefined\"!==typeof print&&(\"undefined\"===typeof console&&(console={}),console.log=print,console.warn=console.error=\"undefined\"!==typeof printErr?printErr:print);else if(ea||x)x?y=self.location.href:\"undefined\"!==typeof document&&document.currentScript&&(y=document.currentScript.src),_scriptDir&&(y=_scriptDir),\n0!==y.indexOf(\"blob:\")?y=y.substr(0,y.lastIndexOf(\"/\")+1):y=\"\",ia=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.send(null);return b.responseText},x&&(ja=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.responseType=\"arraybuffer\";b.send(null);return new Uint8Array(b.response)});var ma=g.print||console.log.bind(console),B=g.printErr||console.warn.bind(console);for(q in da)da.hasOwnProperty(q)&&(g[q]=da[q]);da=null;var na;g.wasmBinary&&(na=g.wasmBinary);var noExitRuntime;\ng.noExitRuntime&&(noExitRuntime=g.noExitRuntime);\"object\"!==typeof WebAssembly&&A(\"no native wasm support detected\");var oa,pa=!1;function assert(a,b){a||A(\"Assertion failed: \"+b)}var qa=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction ra(a,b,c){var d=b+c;for(c=b;a[c]&&!(c>=d);)++c;if(16<c-b&&a.subarray&&qa)return qa.decode(a.subarray(b,c));for(d=\"\";b<c;){var e=a[b++];if(e&128){var f=a[b++]&63;if(192==(e&224))d+=String.fromCharCode((e&31)<<6|f);else{var k=a[b++]&63;e=224==(e&240)?(e&15)<<12|f<<6|k:(e&7)<<18|f<<12|k<<6|a[b++]&63;65536>e?d+=String.fromCharCode(e):(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023))}}else d+=String.fromCharCode(e)}return d}\nfunction sa(a,b,c){var d=C;if(0<c){c=b+c-1;for(var e=0;e<a.length;++e){var f=a.charCodeAt(e);if(55296<=f&&57343>=f){var k=a.charCodeAt(++e);f=65536+((f&1023)<<10)|k&1023}if(127>=f){if(b>=c)break;d[b++]=f}else{if(2047>=f){if(b+1>=c)break;d[b++]=192|f>>6}else{if(65535>=f){if(b+2>=c)break;d[b++]=224|f>>12}else{if(b+3>=c)break;d[b++]=240|f>>18;d[b++]=128|f>>12&63}d[b++]=128|f>>6&63}d[b++]=128|f&63}}d[b]=0}}var ta=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf-16le\"):void 0;\nfunction ua(a,b){var c=a>>1;for(var d=c+b/2;!(c>=d)&&va[c];)++c;c<<=1;if(32<c-a&&ta)return ta.decode(C.subarray(a,c));c=\"\";for(d=0;!(d>=b/2);++d){var e=E[a+2*d>>1];if(0==e)break;c+=String.fromCharCode(e)}return c}function wa(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var e=0;e<c;++e)E[b>>1]=a.charCodeAt(e),b+=2;E[b>>1]=0;return b-d}function xa(a){return 2*a.length}\nfunction ya(a,b){for(var c=0,d=\"\";!(c>=b/4);){var e=F[a+4*c>>2];if(0==e)break;++c;65536<=e?(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023)):d+=String.fromCharCode(e)}return d}function za(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var f=a.charCodeAt(e);if(55296<=f&&57343>=f){var k=a.charCodeAt(++e);f=65536+((f&1023)<<10)|k&1023}F[b>>2]=f;b+=4;if(b+4>c)break}F[b>>2]=0;return b-d}\nfunction Aa(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c;b+=4}return b}var Ba,Ca,C,E,va,F,G,Da,Ea;function Fa(){var a=oa.buffer;Ba=a;g.HEAP8=Ca=new Int8Array(a);g.HEAP16=E=new Int16Array(a);g.HEAP32=F=new Int32Array(a);g.HEAPU8=C=new Uint8Array(a);g.HEAPU16=va=new Uint16Array(a);g.HEAPU32=G=new Uint32Array(a);g.HEAPF32=Da=new Float32Array(a);g.HEAPF64=Ea=new Float64Array(a)}var Ga,Ha=[],Ia=[],Ja=[],Ka=[];function La(){var a=g.preRun.shift();Ha.unshift(a)}\nvar H=0,Ma=null,Na=null;g.preloadedImages={};g.preloadedAudios={};function A(a){if(g.onAbort)g.onAbort(a);B(a);pa=!0;a=new WebAssembly.RuntimeError(\"abort(\"+a+\"). Build with -s ASSERTIONS=1 for more info.\");ca(a);throw a;}function Oa(a){var b=I;return String.prototype.startsWith?b.startsWith(a):0===b.indexOf(a)}function Pa(){return Oa(\"data:application/octet-stream;base64,\")}var I=\"diff.wasm\";if(!Pa()){var Qa=I;I=g.locateFile?g.locateFile(Qa,y):y+Qa}\nfunction Ra(){var a=I;try{if(a==I&&na)return new Uint8Array(na);if(ja)return ja(a);throw\"both async and sync fetching of the wasm failed\";}catch(b){A(b)}}function Sa(){return na||!ea&&!x||\"function\"!==typeof fetch||Oa(\"file://\")?Promise.resolve().then(function(){return Ra()}):fetch(I,{credentials:\"same-origin\"}).then(function(a){if(!a.ok)throw\"failed to load wasm binary file at '\"+I+\"'\";return a.arrayBuffer()}).catch(function(){return Ra()})}\nfunction Ta(a){for(;0<a.length;){var b=a.shift();if(\"function\"==typeof b)b(g);else{var c=b.qa;\"number\"===typeof c?void 0===b.ga?Ga.get(c)():Ga.get(c)(b.ga):c(void 0===b.ga?null:b.ga)}}}function Ua(a){this.O=a-16;this.Ga=function(b){F[this.O+8>>2]=b};this.Da=function(b){F[this.O+0>>2]=b};this.Ea=function(){F[this.O+4>>2]=0};this.Ca=function(){Ca[this.O+12>>0]=0};this.Fa=function(){Ca[this.O+13>>0]=0};this.xa=function(b,c){this.Ga(b);this.Da(c);this.Ea();this.Ca();this.Fa()}}var Va=0,Wa={};\nfunction Xa(a){for(;a.length;){var b=a.pop();a.pop()(b)}}function Ya(a){return this.fromWireType(G[a>>2])}var J={},K={},Za={};function $a(a){if(void 0===a)return\"_unknown\";a=a.replace(/[^a-zA-Z0-9_]/g,\"$\");var b=a.charCodeAt(0);return 48<=b&&57>=b?\"_\"+a:a}function ab(a,b){a=$a(a);return(new Function(\"body\",\"return function \"+a+'() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n'))(b)}\nfunction bb(a){var b=Error,c=ab(a,function(d){this.name=a;this.message=d;d=Error(d).stack;void 0!==d&&(this.stack=this.toString()+\"\\n\"+d.replace(/^Error(:[^\\n]*)?\\n/,\"\"))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+\": \"+this.message};return c}var cb=void 0;function db(a){throw new cb(a);}\nfunction L(a,b,c){function d(h){h=c(h);h.length!==a.length&&db(\"Mismatched type converter count\");for(var l=0;l<a.length;++l)M(a[l],h[l])}a.forEach(function(h){Za[h]=b});var e=Array(b.length),f=[],k=0;b.forEach(function(h,l){K.hasOwnProperty(h)?e[l]=K[h]:(f.push(h),J.hasOwnProperty(h)||(J[h]=[]),J[h].push(function(){e[l]=K[h];++k;k===f.length&&d(e)}))});0===f.length&&d(e)}\nfunction eb(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(\"Unknown type size: \"+a);}}var fb=void 0;function N(a){for(var b=\"\";C[a];)b+=fb[C[a++]];return b}var O=void 0;function P(a){throw new O(a);}\nfunction M(a,b,c){c=c||{};if(!(\"argPackAdvance\"in b))throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");var d=b.name;a||P('type \"'+d+'\" must have a positive integer typeid pointer');if(K.hasOwnProperty(a)){if(c.wa)return;P(\"Cannot register type '\"+d+\"' twice\")}K[a]=b;delete Za[a];J.hasOwnProperty(a)&&(b=J[a],delete J[a],b.forEach(function(e){e()}))}function gb(a){return{count:a.count,Z:a.Z,aa:a.aa,O:a.O,R:a.R,S:a.S,T:a.T}}\nfunction hb(a){P(a.N.R.P.name+\" instance already deleted\")}var ib=!1;function jb(){}function kb(a){--a.count.value;0===a.count.value&&(a.S?a.T.X(a.S):a.R.P.X(a.O))}function lb(a){if(\"undefined\"===typeof FinalizationGroup)return lb=function(b){return b},a;ib=new FinalizationGroup(function(b){for(var c=b.next();!c.done;c=b.next())c=c.value,c.O?kb(c):console.warn(\"object already deleted: \"+c.O)});lb=function(b){ib.register(b,b.N,b.N);return b};jb=function(b){ib.unregister(b.N)};return lb(a)}\nvar mb=void 0,nb=[];function ob(){for(;nb.length;){var a=nb.pop();a.N.Z=!1;a[\"delete\"]()}}function Q(){}var pb={};function qb(a,b,c){if(void 0===a[b].W){var d=a[b];a[b]=function(){a[b].W.hasOwnProperty(arguments.length)||P(\"Function '\"+c+\"' called with an invalid number of arguments (\"+arguments.length+\") - expects one of (\"+a[b].W+\")!\");return a[b].W[arguments.length].apply(this,arguments)};a[b].W=[];a[b].W[d.da]=d}}\nfunction rb(a,b){g.hasOwnProperty(a)?(P(\"Cannot register public name '\"+a+\"' twice\"),qb(g,a,a),g.hasOwnProperty(void 0)&&P(\"Cannot register multiple overloads of a function with the same number of arguments (undefined)!\"),g[a].W[void 0]=b):g[a]=b}function sb(a,b,c,d,e,f,k,h){this.name=a;this.constructor=b;this.$=c;this.X=d;this.U=e;this.ra=f;this.ba=k;this.oa=h;this.Aa=[]}\nfunction tb(a,b,c){for(;b!==c;)b.ba||P(\"Expected null or instance of \"+c.name+\", got an instance of \"+b.name),a=b.ba(a),b=b.U;return a}function ub(a,b){if(null===b)return this.ha&&P(\"null is not a valid \"+this.name),0;b.N||P('Cannot pass \"'+T(b)+'\" as a '+this.name);b.N.O||P(\"Cannot pass deleted object as a pointer of type \"+this.name);return tb(b.N.O,b.N.R.P,this.P)}\nfunction vb(a,b){if(null===b){this.ha&&P(\"null is not a valid \"+this.name);if(this.fa){var c=this.ia();null!==a&&a.push(this.X,c);return c}return 0}b.N||P('Cannot pass \"'+T(b)+'\" as a '+this.name);b.N.O||P(\"Cannot pass deleted object as a pointer of type \"+this.name);!this.ea&&b.N.R.ea&&P(\"Cannot convert argument of type \"+(b.N.T?b.N.T.name:b.N.R.name)+\" to parameter type \"+this.name);c=tb(b.N.O,b.N.R.P,this.P);if(this.fa)switch(void 0===b.N.S&&P(\"Passing raw pointer to smart pointer is illegal\"),\nthis.Ka){case 0:b.N.T===this?c=b.N.S:P(\"Cannot convert argument of type \"+(b.N.T?b.N.T.name:b.N.R.name)+\" to parameter type \"+this.name);break;case 1:c=b.N.S;break;case 2:if(b.N.T===this)c=b.N.S;else{var d=b.clone();c=this.Ba(c,U(function(){d[\"delete\"]()}));null!==a&&a.push(this.X,c)}break;default:P(\"Unsupporting sharing policy\")}return c}\nfunction wb(a,b){if(null===b)return this.ha&&P(\"null is not a valid \"+this.name),0;b.N||P('Cannot pass \"'+T(b)+'\" as a '+this.name);b.N.O||P(\"Cannot pass deleted object as a pointer of type \"+this.name);b.N.R.ea&&P(\"Cannot convert argument of type \"+b.N.R.name+\" to parameter type \"+this.name);return tb(b.N.O,b.N.R.P,this.P)}function xb(a,b,c){if(b===c)return a;if(void 0===c.U)return null;a=xb(a,b,c.U);return null===a?null:c.oa(a)}var yb={};\nfunction zb(a,b){for(void 0===b&&P(\"ptr should not be undefined\");a.U;)b=a.ba(b),a=a.U;return yb[b]}function Ab(a,b){b.R&&b.O||db(\"makeClassHandle requires ptr and ptrType\");!!b.T!==!!b.S&&db(\"Both smartPtrType and smartPtr must be specified\");b.count={value:1};return lb(Object.create(a,{N:{value:b}}))}function V(a,b,c,d){this.name=a;this.P=b;this.ha=c;this.ea=d;this.fa=!1;this.X=this.Ba=this.ia=this.ma=this.Ka=this.za=void 0;void 0!==b.U?this.toWireType=vb:(this.toWireType=d?ub:wb,this.V=null)}\nfunction Db(a,b){g.hasOwnProperty(a)||db(\"Replacing nonexistant public symbol\");g[a]=b;g[a].da=void 0}function Eb(a,b){assert(0<=a.indexOf(\"j\"),\"getDynCaller should only be called with i64 sigs\");var c=[];return function(){c.length=arguments.length;for(var d=0;d<arguments.length;d++)c[d]=arguments[d];var e;-1!=a.indexOf(\"j\")?e=c&&c.length?g[\"dynCall_\"+a].apply(null,[b].concat(c)):g[\"dynCall_\"+a].call(null,b):e=Ga.get(b).apply(null,c);return e}}\nfunction W(a,b){a=N(a);var c=-1!=a.indexOf(\"j\")?Eb(a,b):Ga.get(b);\"function\"!==typeof c&&P(\"unknown function pointer with signature \"+a+\": \"+b);return c}var Fb=void 0;function Gb(a){a=Hb(a);var b=N(a);X(a);return b}function Ib(a,b){function c(f){e[f]||K[f]||(Za[f]?Za[f].forEach(c):(d.push(f),e[f]=!0))}var d=[],e={};b.forEach(c);throw new Fb(a+\": \"+d.map(Gb).join([\", \"]));}function Jb(a,b){for(var c=[],d=0;d<a;d++)c.push(F[(b>>2)+d]);return c}\nfunction Kb(a){var b=Function;if(!(b instanceof Function))throw new TypeError(\"new_ called with constructor type \"+typeof b+\" which is not a function\");var c=ab(b.name||\"unknownFunctionName\",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}var Lb=[],Y=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Mb(a){4<a&&0===--Y[a].ja&&(Y[a]=void 0,Lb.push(a))}\nfunction U(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=Lb.length?Lb.pop():Y.length;Y[b]={ja:1,value:a};return b}}function T(a){if(null===a)return\"null\";var b=typeof a;return\"object\"===b||\"array\"===b||\"function\"===b?a.toString():\"\"+a}function Nb(a,b){switch(b){case 2:return function(c){return this.fromWireType(Da[c>>2])};case 3:return function(c){return this.fromWireType(Ea[c>>3])};default:throw new TypeError(\"Unknown float type: \"+a);}}\nfunction Ob(a,b,c){switch(b){case 0:return c?function(d){return Ca[d]}:function(d){return C[d]};case 1:return c?function(d){return E[d>>1]}:function(d){return va[d>>1]};case 2:return c?function(d){return F[d>>2]}:function(d){return G[d>>2]};default:throw new TypeError(\"Unknown integer type: \"+a);}}var Pb={};function Qb(a){var b=Pb[a];return void 0===b?N(a):b}var Rb=[];function Sb(a){a||P(\"Cannot use deleted val. handle = \"+a);return Y[a].value}\nfunction Tb(){return\"object\"===typeof globalThis?globalThis:Function(\"return this\")()}function Ub(a){var b=Rb.length;Rb.push(a);return b}function Vb(a,b){var c=K[a];void 0===c&&P(b+\" has unknown type \"+Gb(a));return c}function Wb(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=Vb(F[(b>>2)+d],\"parameter \"+d);return c}var Xb={},Yb=[null,[],[]];cb=g.InternalError=bb(\"InternalError\");for(var Zb=Array(256),$b=0;256>$b;++$b)Zb[$b]=String.fromCharCode($b);fb=Zb;O=g.BindingError=bb(\"BindingError\");\nQ.prototype.isAliasOf=function(a){if(!(this instanceof Q&&a instanceof Q))return!1;var b=this.N.R.P,c=this.N.O,d=a.N.R.P;for(a=a.N.O;b.U;)c=b.ba(c),b=b.U;for(;d.U;)a=d.ba(a),d=d.U;return b===d&&c===a};Q.prototype.clone=function(){this.N.O||hb(this);if(this.N.aa)return this.N.count.value+=1,this;var a=lb(Object.create(Object.getPrototypeOf(this),{N:{value:gb(this.N)}}));a.N.count.value+=1;a.N.Z=!1;return a};\nQ.prototype[\"delete\"]=function(){this.N.O||hb(this);this.N.Z&&!this.N.aa&&P(\"Object already scheduled for deletion\");jb(this);kb(this.N);this.N.aa||(this.N.S=void 0,this.N.O=void 0)};Q.prototype.isDeleted=function(){return!this.N.O};Q.prototype.deleteLater=function(){this.N.O||hb(this);this.N.Z&&!this.N.aa&&P(\"Object already scheduled for deletion\");nb.push(this);1===nb.length&&mb&&mb(ob);this.N.Z=!0;return this};V.prototype.sa=function(a){this.ma&&(a=this.ma(a));return a};\nV.prototype.ka=function(a){this.X&&this.X(a)};V.prototype.argPackAdvance=8;V.prototype.readValueFromPointer=Ya;V.prototype.deleteObject=function(a){if(null!==a)a[\"delete\"]()};\nV.prototype.fromWireType=function(a){function b(){return this.fa?Ab(this.P.$,{R:this.za,O:c,T:this,S:a}):Ab(this.P.$,{R:this,O:a})}var c=this.sa(a);if(!c)return this.ka(a),null;var d=zb(this.P,c);if(void 0!==d){if(0===d.N.count.value)return d.N.O=c,d.N.S=a,d.clone();d=d.clone();this.ka(a);return d}d=this.P.ra(c);d=pb[d];if(!d)return b.call(this);d=this.ea?d.na:d.pointerType;var e=xb(c,this.P,d.P);return null===e?b.call(this):this.fa?Ab(d.P.$,{R:d,O:e,T:this,S:a}):Ab(d.P.$,{R:d,O:e})};\ng.getInheritedInstanceCount=function(){return Object.keys(yb).length};g.getLiveInheritedInstances=function(){var a=[],b;for(b in yb)yb.hasOwnProperty(b)&&a.push(yb[b]);return a};g.flushPendingDeletes=ob;g.setDelayFunction=function(a){mb=a;nb.length&&mb&&mb(ob)};Fb=g.UnboundTypeError=bb(\"UnboundTypeError\");g.count_emval_handles=function(){for(var a=0,b=5;b<Y.length;++b)void 0!==Y[b]&&++a;return a};g.get_first_emval=function(){for(var a=5;a<Y.length;++a)if(void 0!==Y[a])return Y[a];return null};Ia.push({qa:function(){ac()}});\nvar cc={b:function(a,b,c,d){A(\"Assertion failed: \"+(a?ra(C,a,void 0):\"\")+\", at: \"+[b?b?ra(C,b,void 0):\"\":\"unknown filename\",c,d?d?ra(C,d,void 0):\"\":\"unknown function\"])},B:function(a){return bc(a+16)+16},E:function(){},A:function(a,b,c){(new Ua(a)).xa(b,c);Va++;throw a;},i:function(a){var b=Wa[a];delete Wa[a];var c=b.ia,d=b.X,e=b.la,f=e.map(function(k){return k.va}).concat(e.map(function(k){return k.Ia}));L([a],f,function(k){var h={};e.forEach(function(l,m){var n=k[m],r=l.ta,u=l.ua,z=k[m+e.length],\nt=l.Ha,w=l.Ja;h[l.pa]={read:function(p){return n.fromWireType(r(u,p))},write:function(p,D){var v=[];t(w,p,z.toWireType(v,D));Xa(v)}}});return[{name:b.name,fromWireType:function(l){var m={},n;for(n in h)m[n]=h[n].read(l);d(l);return m},toWireType:function(l,m){for(var n in h)if(!(n in m))throw new TypeError('Missing field:  \"'+n+'\"');var r=c();for(n in h)h[n].write(r,m[n]);null!==l&&l.push(d,r);return r},argPackAdvance:8,readValueFromPointer:Ya,V:d}]})},y:function(a,b,c,d,e){var f=eb(c);b=N(b);M(a,\n{name:b,fromWireType:function(k){return!!k},toWireType:function(k,h){return h?d:e},argPackAdvance:8,readValueFromPointer:function(k){if(1===c)var h=Ca;else if(2===c)h=E;else if(4===c)h=F;else throw new TypeError(\"Unknown boolean type size: \"+b);return this.fromWireType(h[k>>f])},V:null})},t:function(a,b,c,d,e,f,k,h,l,m,n,r,u){n=N(n);f=W(e,f);h&&(h=W(k,h));m&&(m=W(l,m));u=W(r,u);var z=$a(n);rb(z,function(){Ib(\"Cannot construct \"+n+\" due to unbound types\",[d])});L([a,b,c],d?[d]:[],function(t){t=t[0];\nif(d){var w=t.P;var p=w.$}else p=Q.prototype;t=ab(z,function(){if(Object.getPrototypeOf(this)!==D)throw new O(\"Use 'new' to construct \"+n);if(void 0===v.Y)throw new O(n+\" has no accessible constructor\");var R=v.Y[arguments.length];if(void 0===R)throw new O(\"Tried to invoke ctor of \"+n+\" with invalid number of parameters (\"+arguments.length+\") - expected (\"+Object.keys(v.Y).toString()+\") parameters instead!\");return R.apply(this,arguments)});var D=Object.create(p,{constructor:{value:t}});t.prototype=\nD;var v=new sb(n,t,D,u,w,f,h,m);w=new V(n,v,!0,!1);p=new V(n+\"*\",v,!1,!1);var Z=new V(n+\" const*\",v,!1,!0);pb[a]={pointerType:p,na:Z};Db(z,t);return[w,p,Z]})},s:function(a,b,c,d,e,f){assert(0<b);var k=Jb(b,c);e=W(d,e);var h=[f],l=[];L([],[a],function(m){m=m[0];var n=\"constructor \"+m.name;void 0===m.P.Y&&(m.P.Y=[]);if(void 0!==m.P.Y[b-1])throw new O(\"Cannot register multiple constructors with identical number of parameters (\"+(b-1)+\") for class '\"+m.name+\"'! Overload resolution is currently only performed using the parameter count, not actual type info!\");\nm.P.Y[b-1]=function(){Ib(\"Cannot construct \"+m.name+\" due to unbound types\",k)};L([],k,function(r){m.P.Y[b-1]=function(){arguments.length!==b-1&&P(n+\" called with \"+arguments.length+\" arguments, expected \"+(b-1));l.length=0;h.length=b;for(var u=1;u<b;++u)h[u]=r[u].toWireType(l,arguments[u-1]);u=e.apply(null,h);Xa(l);return r[0].fromWireType(u)};return[]});return[]})},r:function(a,b,c,d,e,f,k,h){var l=Jb(c,d);b=N(b);f=W(e,f);L([],[a],function(m){function n(){Ib(\"Cannot call \"+r+\" due to unbound types\",\nl)}m=m[0];var r=m.name+\".\"+b;h&&m.P.Aa.push(b);var u=m.P.$,z=u[b];void 0===z||void 0===z.W&&z.className!==m.name&&z.da===c-2?(n.da=c-2,n.className=m.name,u[b]=n):(qb(u,b,r),u[b].W[c-2]=n);L([],l,function(t){var w=r,p=m,D=f,v=t.length;2>v&&P(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");var Z=null!==t[1]&&null!==p,R=!1;for(p=1;p<t.length;++p)if(null!==t[p]&&void 0===t[p].V){R=!0;break}var Bb=\"void\"!==t[0].name,S=\"\",aa=\"\";for(p=0;p<v-2;++p)S+=(0!==p?\", \":\"\")+\"arg\"+\np,aa+=(0!==p?\", \":\"\")+\"arg\"+p+\"Wired\";w=\"return function \"+$a(w)+\"(\"+S+\") {\\nif (arguments.length !== \"+(v-2)+\") {\\nthrowBindingError('function \"+w+\" called with ' + arguments.length + ' arguments, expected \"+(v-2)+\" args!');\\n}\\n\";R&&(w+=\"var destructors = [];\\n\");var Cb=R?\"destructors\":\"null\";S=\"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");D=[P,D,k,Xa,t[0],t[1]];Z&&(w+=\"var thisWired = classParam.toWireType(\"+Cb+\", this);\\n\");for(p=0;p<v-2;++p)w+=\"var arg\"+p+\"Wired = argType\"+\np+\".toWireType(\"+Cb+\", arg\"+p+\"); // \"+t[p+2].name+\"\\n\",S.push(\"argType\"+p),D.push(t[p+2]);Z&&(aa=\"thisWired\"+(0<aa.length?\", \":\"\")+aa);w+=(Bb?\"var rv = \":\"\")+\"invoker(fn\"+(0<aa.length?\", \":\"\")+aa+\");\\n\";if(R)w+=\"runDestructors(destructors);\\n\";else for(p=Z?1:2;p<t.length;++p)v=1===p?\"thisWired\":\"arg\"+(p-2)+\"Wired\",null!==t[p].V&&(w+=v+\"_dtor(\"+v+\"); // \"+t[p].name+\"\\n\",S.push(v+\"_dtor\"),D.push(t[p].V));Bb&&(w+=\"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");S.push(w+\"}\\n\");t=Kb(S).apply(null,\nD);void 0===u[b].W?(t.da=c-2,u[b]=t):u[b].W[c-2]=t;return[]});return[]})},x:function(a,b){b=N(b);M(a,{name:b,fromWireType:function(c){var d=Y[c].value;Mb(c);return d},toWireType:function(c,d){return U(d)},argPackAdvance:8,readValueFromPointer:Ya,V:null})},k:function(a,b,c){c=eb(c);b=N(b);M(a,{name:b,fromWireType:function(d){return d},toWireType:function(d,e){if(\"number\"!==typeof e&&\"boolean\"!==typeof e)throw new TypeError('Cannot convert \"'+T(e)+'\" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:Nb(b,\nc),V:null})},d:function(a,b,c,d,e){function f(m){return m}b=N(b);-1===e&&(e=4294967295);var k=eb(c);if(0===d){var h=32-8*c;f=function(m){return m<<h>>>h}}var l=-1!=b.indexOf(\"unsigned\");M(a,{name:b,fromWireType:f,toWireType:function(m,n){if(\"number\"!==typeof n&&\"boolean\"!==typeof n)throw new TypeError('Cannot convert \"'+T(n)+'\" to '+this.name);if(n<d||n>e)throw new TypeError('Passing a number \"'+T(n)+'\" from JS side to C/C++ side to an argument of type \"'+b+'\", which is outside the valid range ['+\nd+\", \"+e+\"]!\");return l?n>>>0:n|0},argPackAdvance:8,readValueFromPointer:Ob(b,k,0!==d),V:null})},c:function(a,b,c){function d(f){f>>=2;var k=G;return new e(Ba,k[f+1],k[f])}var e=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=N(c);M(a,{name:c,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{wa:!0})},l:function(a,b){b=N(b);var c=\"std::string\"===b;M(a,{name:b,fromWireType:function(d){var e=G[d>>2];if(c)for(var f=d+4,k=0;k<=e;++k){var h=d+4+\nk;if(k==e||0==C[h]){f=f?ra(C,f,h-f):\"\";if(void 0===l)var l=f;else l+=String.fromCharCode(0),l+=f;f=h+1}}else{l=Array(e);for(k=0;k<e;++k)l[k]=String.fromCharCode(C[d+4+k]);l=l.join(\"\")}X(d);return l},toWireType:function(d,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var f=\"string\"===typeof e;f||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||P(\"Cannot pass non-string to std::string\");var k=(c&&f?function(){for(var m=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);\n55296<=r&&57343>=r&&(r=65536+((r&1023)<<10)|e.charCodeAt(++n)&1023);127>=r?++m:m=2047>=r?m+2:65535>=r?m+3:m+4}return m}:function(){return e.length})(),h=bc(4+k+1);G[h>>2]=k;if(c&&f)sa(e,h+4,k+1);else if(f)for(f=0;f<k;++f){var l=e.charCodeAt(f);255<l&&(X(h),P(\"String has UTF-16 code units that do not fit in 8 bits\"));C[h+4+f]=l}else for(f=0;f<k;++f)C[h+4+f]=e[f];null!==d&&d.push(X,h);return h},argPackAdvance:8,readValueFromPointer:Ya,V:function(d){X(d)}})},g:function(a,b,c){c=N(c);if(2===b){var d=\nua;var e=wa;var f=xa;var k=function(){return va};var h=1}else 4===b&&(d=ya,e=za,f=Aa,k=function(){return G},h=2);M(a,{name:c,fromWireType:function(l){for(var m=G[l>>2],n=k(),r,u=l+4,z=0;z<=m;++z){var t=l+4+z*b;if(z==m||0==n[t>>h])u=d(u,t-u),void 0===r?r=u:(r+=String.fromCharCode(0),r+=u),u=t+b}X(l);return r},toWireType:function(l,m){\"string\"!==typeof m&&P(\"Cannot pass non-string to C++ string type \"+c);var n=f(m),r=bc(4+n+b);G[r>>2]=n>>h;e(m,r+4,n+b);null!==l&&l.push(X,r);return r},argPackAdvance:8,\nreadValueFromPointer:Ya,V:function(l){X(l)}})},m:function(a,b,c,d,e,f){Wa[a]={name:N(b),ia:W(c,d),X:W(e,f),la:[]}},e:function(a,b,c,d,e,f,k,h,l,m){Wa[a].la.push({pa:N(b),va:c,ta:W(d,e),ua:f,Ia:k,Ha:W(h,l),Ja:m})},z:function(a,b){b=N(b);M(a,{ya:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:function(a,b,c,d){a=Rb[a];b=Sb(b);c=Qb(c);a(b,c,null,d)},f:Mb,p:function(a){if(0===a)return U(Tb());a=Qb(a);return U(Tb()[a])},o:function(a,b){b=Wb(a,b);for(var c=b[0],d=c.name+\n\"_$\"+b.slice(1).map(function(m){return m.name}).join(\"_\")+\"$\",e=[\"retType\"],f=[c],k=\"\",h=0;h<a-1;++h)k+=(0!==h?\", \":\"\")+\"arg\"+h,e.push(\"argType\"+h),f.push(b[1+h]);d=\"return function \"+$a(\"methodCaller_\"+d)+\"(handle, name, destructors, args) {\\n\";var l=0;for(h=0;h<a-1;++h)d+=\"    var arg\"+h+\" = argType\"+h+\".readValueFromPointer(args\"+(l?\"+\"+l:\"\")+\");\\n\",l+=b[h+1].argPackAdvance;d+=\"    var rv = handle[name](\"+k+\");\\n\";for(h=0;h<a-1;++h)b[h+1].deleteObject&&(d+=\"    argType\"+h+\".deleteObject(arg\"+h+\n\");\\n\");c.ya||(d+=\"    return retType.toWireType(destructors, rv);\\n\");e.push(d+\"};\\n\");a=Kb(e).apply(null,f);return Ub(a)},h:function(a){4<a&&(Y[a].ja+=1)},D:function(a,b,c,d){a=Sb(a);var e=Xb[b];if(!e){e=\"\";for(var f=0;f<b;++f)e+=(0!==f?\", \":\"\")+\"arg\"+f;var k=\"return function emval_allocator_\"+b+\"(constructor, argTypes, args) {\\n\";for(f=0;f<b;++f)k+=\"var argType\"+f+\" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + \"+f+'], \"parameter '+f+'\");\\nvar arg'+f+\" = argType\"+f+\".readValueFromPointer(args);\\nargs += argType\"+\nf+\"['argPackAdvance'];\\n\";e=(new Function(\"requireRegisteredType\",\"Module\",\"__emval_register\",k+(\"var obj = new constructor(\"+e+\");\\nreturn __emval_register(obj);\\n}\\n\")))(Vb,g,U);Xb[b]=e}return e(a,c,d)},C:function(){return U([])},q:function(a,b){a=Vb(a,\"_emval_take_value\");a=a.readValueFromPointer(b);return U(a)},a:function(){A()},v:function(a,b,c){C.copyWithin(a,b,b+c)},w:function(a){a>>>=0;var b=C.length;if(2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);\nd=Math.max(16777216,a,d);0<d%65536&&(d+=65536-d%65536);a:{try{oa.grow(Math.min(2147483648,d)-Ba.byteLength+65535>>>16);Fa();var e=1;break a}catch(f){}e=void 0}if(e)return!0}return!1},j:function(a,b,c,d){for(var e=0,f=0;f<c;f++){for(var k=F[b+8*f>>2],h=F[b+(8*f+4)>>2],l=0;l<h;l++){var m=C[k+l],n=Yb[a];0===m||10===m?((1===a?ma:B)(ra(n,0)),n.length=0):n.push(m)}e+=h}F[d>>2]=e;return 0},u:function(){}};\n(function(){function a(e){g.asm=e.exports;oa=g.asm.F;Fa();Ga=g.asm.G;H--;g.monitorRunDependencies&&g.monitorRunDependencies(H);0==H&&(null!==Ma&&(clearInterval(Ma),Ma=null),Na&&(e=Na,Na=null,e()))}function b(e){a(e.instance)}function c(e){return Sa().then(function(f){return WebAssembly.instantiate(f,d)}).then(e,function(f){B(\"failed to asynchronously prepare wasm: \"+f);A(f)})}var d={a:cc};H++;g.monitorRunDependencies&&g.monitorRunDependencies(H);if(g.instantiateWasm)try{return g.instantiateWasm(d,\na)}catch(e){return B(\"Module.instantiateWasm callback failed with error: \"+e),!1}(function(){return na||\"function\"!==typeof WebAssembly.instantiateStreaming||Pa()||Oa(\"file://\")||\"function\"!==typeof fetch?c(b):fetch(I,{credentials:\"same-origin\"}).then(function(e){return WebAssembly.instantiateStreaming(e,d).then(b,function(f){B(\"wasm streaming compile failed: \"+f);B(\"falling back to ArrayBuffer instantiation\");return c(b)})})})().catch(ca);return{}})();\nvar ac=g.___wasm_call_ctors=function(){return(ac=g.___wasm_call_ctors=g.asm.H).apply(null,arguments)},bc=g._malloc=function(){return(bc=g._malloc=g.asm.I).apply(null,arguments)},X=g._free=function(){return(X=g._free=g.asm.J).apply(null,arguments)},Hb=g.___getTypeName=function(){return(Hb=g.___getTypeName=g.asm.K).apply(null,arguments)};g.___embind_register_native_and_builtin_types=function(){return(g.___embind_register_native_and_builtin_types=g.asm.L).apply(null,arguments)};\ng.dynCall_jiji=function(){return(g.dynCall_jiji=g.asm.M).apply(null,arguments)};var dc;Na=function ec(){dc||fc();dc||(Na=ec)};\nfunction fc(){function a(){if(!dc&&(dc=!0,g.calledRun=!0,!pa)){Ta(Ia);Ta(Ja);ba(g);if(g.onRuntimeInitialized)g.onRuntimeInitialized();if(g.postRun)for(\"function\"==typeof g.postRun&&(g.postRun=[g.postRun]);g.postRun.length;){var b=g.postRun.shift();Ka.unshift(b)}Ta(Ka)}}if(!(0<H)){if(g.preRun)for(\"function\"==typeof g.preRun&&(g.preRun=[g.preRun]);g.preRun.length;)La();Ta(Ha);0<H||(g.setStatus?(g.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){g.setStatus(\"\")},1);a()},1)):a())}}\ng.run=fc;if(g.preInit)for(\"function\"==typeof g.preInit&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();noExitRuntime=!0;fc();\n\n\n  return Module.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return Module; });\nelse if (typeof exports === 'object')\n  exports[\"Module\"] = Module;\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Compare two objects, returning a boolean indicating if\n * they have the same properties and strictly equal values.\n */\nexport function shallowEqual(one: any, two: any) {\n  for (const i in one) if (one[i] !== two[i]) return false;\n  for (const i in two) if (!(i in one)) return false;\n  return true;\n}\n\n/** Replace the contents of a canvas with the given data */\nexport function drawDataToCanvas(canvas: HTMLCanvasElement, data: ImageData) {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw Error('Canvas not initialized');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.putImageData(data, 0, 0);\n}\n\n/**\n * Encode some image data in a given format using the browser's encoders\n *\n * @param {ImageData} data\n * @param {string} type A mime type, eg image/jpeg.\n * @param {number} [quality] Between 0-1.\n */\nexport async function canvasEncode(\n  data: ImageData,\n  type: string,\n  quality?: number,\n): Promise<Blob> {\n  const canvas = document.createElement('canvas');\n  canvas.width = data.width;\n  canvas.height = data.height;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw Error('Canvas not initialized');\n  ctx.putImageData(data, 0, 0);\n\n  let blob: Blob | null;\n\n  if ('toBlob' in canvas) {\n    blob = await new Promise<Blob | null>((r) =>\n      canvas.toBlob(r, type, quality),\n    );\n  } else {\n    // Welcome to Edge.\n    // TypeScript thinks `canvas` is 'never', so it needs casting.\n    const dataUrl = (canvas as HTMLCanvasElement).toDataURL(type, quality);\n    const result = /data:([^;]+);base64,(.*)$/.exec(dataUrl);\n\n    if (!result) throw Error('Data URL reading failed');\n\n    const outputType = result[1];\n    const binaryStr = atob(result[2]);\n    const data = new Uint8Array(binaryStr.length);\n\n    for (let i = 0; i < data.length; i += 1) {\n      data[i] = binaryStr.charCodeAt(i);\n    }\n\n    blob = new Blob([data], { type: outputType });\n  }\n\n  if (!blob) throw Error('Encoding failed');\n  return blob;\n}\n\nasync function decodeImage(url: string): Promise<HTMLImageElement> {\n  const img = new Image();\n  img.decoding = 'async';\n  img.src = url;\n  const loaded = new Promise<void>((resolve, reject) => {\n    img.onload = () => resolve();\n    img.onerror = () => reject(Error('Image loading error'));\n  });\n\n  if (img.decode) {\n    // Nice off-thread way supported in Safari/Chrome.\n    // Safari throws on decode if the source is SVG.\n    // https://bugs.webkit.org/show_bug.cgi?id=188347\n    await img.decode().catch(() => null);\n  }\n\n  // Always await loaded, as we may have bailed due to the Safari bug above.\n  await loaded;\n  return img;\n}\n\n/** Caches results from canDecodeImageType */\nconst canDecodeCache = new Map<string, Promise<boolean>>();\n\n/**\n * Tests whether the browser supports a particular image mime type.\n *\n * @param type Mimetype\n * @example await canDecodeImageType('image/avif')\n */\nexport function canDecodeImageType(type: string): Promise<boolean> {\n  if (!canDecodeCache.has(type)) {\n    const resultPromise = (async () => {\n      const picture = document.createElement('picture');\n      const img = document.createElement('img');\n      const source = document.createElement('source');\n      source.srcset = 'data:,x';\n      source.type = type;\n      picture.append(source, img);\n\n      // Wait a single microtick just for the `img.currentSrc` to get populated.\n      await 0;\n      // At this point `img.currentSrc` will contain \"data:,x\" if format is supported and \"\"\n      // otherwise.\n      return !!img.currentSrc;\n    })();\n\n    canDecodeCache.set(type, resultPromise);\n  }\n\n  return canDecodeCache.get(type)!;\n}\n\nexport function blobToArrayBuffer(blob: Blob): Promise<ArrayBuffer> {\n  return new Response(blob).arrayBuffer();\n}\n\nexport function blobToText(blob: Blob): Promise<string> {\n  return new Response(blob).text();\n}\n\nconst magicNumberMapInput = [\n  [/^%PDF-/, 'application/pdf'],\n  [/^GIF87a/, 'image/gif'],\n  [/^GIF89a/, 'image/gif'],\n  [/^\\x89PNG\\x0D\\x0A\\x1A\\x0A/, 'image/png'],\n  [/^\\xFF\\xD8\\xFF/, 'image/jpeg'],\n  [/^BM/, 'image/bmp'],\n  [/^I I/, 'image/tiff'],\n  [/^II*/, 'image/tiff'],\n  [/^MM\\x00*/, 'image/tiff'],\n  [/^RIFF....WEBPVP8[LX ]/, 'image/webp'],\n  [/^\\xF4\\xFF\\x6F/, 'image/webp2'],\n  [/^\\x00\\x00\\x00 ftypavif\\x00\\x00\\x00\\x00/, 'image/avif'],\n  [/^\\xff\\x0a/, 'image/jxl'],\n  [/^\\x00\\x00\\x00\\x0cJXL \\x0d\\x0a\\x87\\x0a/, 'image/jxl'],\n] as const;\n\nexport type ImageMimeTypes = typeof magicNumberMapInput[number][1];\n\nconst magicNumberToMimeType = new Map<RegExp, ImageMimeTypes>(\n  magicNumberMapInput,\n);\n\nexport async function sniffMimeType(blob: Blob): Promise<ImageMimeTypes | ''> {\n  const firstChunk = await blobToArrayBuffer(blob.slice(0, 16));\n  const firstChunkString = Array.from(new Uint8Array(firstChunk))\n    .map((v) => String.fromCodePoint(v))\n    .join('');\n  for (const [detector, mimeType] of magicNumberToMimeType) {\n    if (detector.test(firstChunkString)) {\n      return mimeType;\n    }\n  }\n  return '';\n}\n\nexport async function blobToImg(blob: Blob): Promise<HTMLImageElement> {\n  const url = URL.createObjectURL(blob);\n\n  try {\n    return await decodeImage(url);\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\ninterface DrawableToImageDataOptions {\n  width?: number;\n  height?: number;\n  sx?: number;\n  sy?: number;\n  sw?: number;\n  sh?: number;\n}\n\nexport function drawableToImageData(\n  drawable: ImageBitmap | HTMLImageElement,\n  opts: DrawableToImageDataOptions = {},\n): ImageData {\n  const {\n    width = drawable.width,\n    height = drawable.height,\n    sx = 0,\n    sy = 0,\n    sw = drawable.width,\n    sh = drawable.height,\n  } = opts;\n\n  // Make canvas same size as image\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  // Draw image onto canvas\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw new Error('Could not create canvas context');\n  ctx.drawImage(drawable, sx, sy, sw, sh, 0, 0, width, height);\n  return ctx.getImageData(0, 0, width, height);\n}\n\nexport async function builtinDecode(blob: Blob): Promise<ImageData> {\n  // Prefer createImageBitmap as it's the off-thread option for Firefox.\n  const drawable =\n    'createImageBitmap' in self\n      ? await createImageBitmap(blob)\n      : await blobToImg(blob);\n\n  return drawableToImageData(drawable);\n}\n\nexport type BuiltinResizeMethod = 'pixelated' | 'low' | 'medium' | 'high';\n\nexport function builtinResize(\n  data: ImageData,\n  sx: number,\n  sy: number,\n  sw: number,\n  sh: number,\n  dw: number,\n  dh: number,\n  method: BuiltinResizeMethod,\n): ImageData {\n  const canvasSource = document.createElement('canvas');\n  canvasSource.width = data.width;\n  canvasSource.height = data.height;\n  drawDataToCanvas(canvasSource, data);\n\n  const canvasDest = document.createElement('canvas');\n  canvasDest.width = dw;\n  canvasDest.height = dh;\n  const ctx = canvasDest.getContext('2d');\n  if (!ctx) throw new Error('Could not create canvas context');\n\n  if (method === 'pixelated') {\n    ctx.imageSmoothingEnabled = false;\n  } else {\n    ctx.imageSmoothingQuality = method;\n  }\n\n  ctx.drawImage(canvasSource, sx, sy, sw, sh, 0, 0, dw, dh);\n  return ctx.getImageData(0, 0, dw, dh);\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldValueAsNumber(\n  field: any,\n  defaultVal: number = 0,\n): number {\n  if (!field) return defaultVal;\n  return Number(inputFieldValue(field));\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldCheckedAsNumber(\n  field: any,\n  defaultVal: number = 0,\n): number {\n  if (!field) return defaultVal;\n  return Number(inputFieldChecked(field));\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldChecked(\n  field: any,\n  defaultVal: boolean = false,\n): boolean {\n  if (!field) return defaultVal;\n  return (field as HTMLInputElement).checked;\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldValue(field: any, defaultVal: string = ''): string {\n  if (!field) return defaultVal;\n  return (field as HTMLInputElement).value;\n}\n\n/**\n * Creates a promise that resolves when the user types the konami code.\n */\nexport function konami(): Promise<void> {\n  return new Promise((resolve) => {\n    // Keycodes for:         B A\n    const expectedPattern = '38384040373937396665';\n    let rollingPattern = '';\n\n    const listener = (event: KeyboardEvent) => {\n      rollingPattern += event.keyCode;\n      rollingPattern = rollingPattern.slice(-expectedPattern.length);\n      if (rollingPattern === expectedPattern) {\n        window.removeEventListener('keydown', listener);\n        resolve();\n      }\n    };\n\n    window.addEventListener('keydown', listener);\n  });\n}\n\ninterface TransitionOptions {\n  from?: number;\n  to?: number;\n  duration?: number;\n  easing?: string;\n}\n\nexport async function transitionHeight(\n  el: HTMLElement,\n  opts: TransitionOptions,\n): Promise<void> {\n  const {\n    from = el.getBoundingClientRect().height,\n    to = el.getBoundingClientRect().height,\n    duration = 1000,\n    easing = 'ease-in-out',\n  } = opts;\n\n  if (from === to || duration === 0) {\n    el.style.height = to + 'px';\n    return;\n  }\n\n  el.style.height = from + 'px';\n  // Force a style calc so the browser picks up the start value.\n  getComputedStyle(el).transform;\n  el.style.transition = `height ${duration}ms ${easing}`;\n  el.style.height = to + 'px';\n\n  return new Promise<void>((resolve) => {\n    const listener = (event: Event) => {\n      if (event.target !== el) return;\n      el.style.transition = '';\n      el.removeEventListener('transitionend', listener);\n      el.removeEventListener('transitioncancel', listener);\n      resolve();\n    };\n\n    el.addEventListener('transitionend', listener);\n    el.addEventListener('transitioncancel', listener);\n  });\n}\n\n/**\n * Simple event listener that prevents the default.\n */\nexport function preventDefault(event: Event) {\n  event.preventDefault();\n}\n\n/**\n * Throw an abort error if a signal is aborted.\n */\nexport function assertSignal(signal: AbortSignal) {\n  if (signal.aborted) throw new DOMException('AbortError', 'AbortError');\n}\n\n/**\n * Take a signal and promise, and returns a promise that rejects with an AbortError if the abort is\n * signalled, otherwise resolves with the promise.\n */\nexport async function abortable<T>(\n  signal: AbortSignal,\n  promise: Promise<T>,\n): Promise<T> {\n  assertSignal(signal);\n  return Promise.race([\n    promise,\n    new Promise<T>((_, reject) => {\n      signal.addEventListener('abort', () =>\n        reject(new DOMException('AbortError', 'AbortError')),\n      );\n    }),\n  ]);\n}\n\n/**\n * Test whether <canvas> can encode to a particular type.\n */\nexport async function canvasEncodeTest(mimeType: string): Promise<boolean> {\n  try {\n    const blob = await canvasEncode(new ImageData(1, 1), mimeType);\n    // According to the spec, the blob should be null if the format isn't supported\n    if (!blob) return false;\n    // but Safari & Firefox fall back to PNG, so we need to check the mime type.\n    return blob.type === mimeType;\n  } catch (err) {\n    return false;\n  }\n}\n","import { Remote, wrap } from \"comlink\";\n\nexport type WorkerFactory = () => Worker;\n\nexport type TaskFn<T, R> = (remote: Remote<T>) => Promise<R>;\n\ninterface WorkerJob<T> {\n\ttask: TaskFn<T, any>;\n\tresolve: (value: any) => void;\n}\n\n// Is a worker pool necessary? Multiple consumer cycles can also works.\nexport default class WorkerPool<T> {\n\n\tterminated = false;\n\n\tprivate readonly queue: WorkerJob<T>[] = [];\n\n\tprivate readonly waiters: Array<() => void> = [];\n\n\t// Track workers for terminate\n\tprivate readonly workers: Worker[];\n\n\tprivate readonly remotes: Remote<T>[];\n\n\tconstructor(factory: WorkerFactory, size: number) {\n\t\tif (size < 1) {\n\t\t\tthrow new Error(\"Worker count must be at least 1\");\n\t\t}\n\t\tthis.workers = new Array(size);\n\t\tthis.remotes = new Array(size);\n\n\t\tfor (let i = 0; i < size; i++) {\n\t\t\tconst worker = factory();\n\t\t\tthis.workers[i] = worker;\n\t\t\tthis.remotes[i] = wrap<T>(worker);\n\t\t}\n\t}\n\n\t/**\n\t * Run a function with each worker.\n\t *\n\t * @param fn Function\n\t */\n\trunOnEach<R>(fn: TaskFn<T, R>) {\n\t\treturn Promise.all(this.remotes.map(fn));\n\t}\n\n\trun<R>(task: TaskFn<T, R>) {\n\t\treturn new Promise<R>(resolve => this.addJob({ task, resolve }));\n\t}\n\n\tjoin() {\n\t\tconst { queue, remotes, workers, waiters } = this;\n\t\tif (queue.length === 0 && remotes.length === workers.length) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\treturn new Promise<void>(resolve => waiters.push(resolve));\n\t}\n\n\tterminate() {\n\t\tthis.terminated = true;\n\t\tthis.workers.forEach(worker => worker.terminate());\n\t\tthis.waiters.forEach(resolve => resolve());\n\t}\n\n\tprivate addJob(job: WorkerJob<T>) {\n\t\tconst remote = this.remotes.pop();\n\t\tif (!remote) {\n\t\t\tthis.queue.push(job);\n\t\t} else {\n\t\t\treturn this.runJob(remote, job);\n\t\t}\n\t}\n\n\tprivate async runJob(remote: Remote<T>, job: WorkerJob<T>): Promise<void> {\n\t\tconst { task, resolve } = job;\n\t\tresolve(await task(remote));\n\n\t\tconst next = this.queue.pop();\n\t\tif (next) {\n\t\t\treturn this.runJob(remote, next);\n\t\t}\n\n\t\tconst { remotes, workers, waiters } = this;\n\t\tremotes.push(remote);\n\t\tif (remotes.length === workers.length) {\n\t\t\twaiters.splice(0, waiters.length).forEach(resolve => resolve());\n\t\t}\n\t}\n}\n","import { Remote } from \"comlink\";\nimport type { WorkerApi } from \"./worker\";\nimport { ImageEncoder } from \"./codecs\";\nimport { decode } from \"./decode\";\nimport WorkerPool from \"./WorkerPool\";\nimport { SSIMOptions } from \"../lib/similarity\";\n\nexport interface ButteraugliConfig {\n\thfAsymmetry: number;\n\tgoodQualitySeek: number;\n\tbadQualitySeek: number;\n}\n\nexport interface Optional<T> {\n\toptions: T;\n\tenabled: boolean;\n}\n\nexport interface MeasureOptions {\n\tversion: number;\n\tworkerCount: number;\n\ttime: boolean;\n\tPSNR: boolean;\n\tSSIM: Optional<SSIMOptions>;\n\tbutteraugli: Optional<ButteraugliConfig>;\n}\n\ninterface Metrics {\n\tSSIM?: number;\n\tPSNR?: number;\n\tbutteraugli?: {\n\t\tsource: number;\n\t\theatMap: ImageData;\n\t};\n}\n\nexport interface ConvertOutput {\n\ttime: number;\n\tbuffer: ArrayBuffer;\n\tdata: ImageData;\n\tmetrics: Metrics;\n}\n\nexport function newWorker() {\n\t// @ts-ignore ts-loader will convert the file to ES module.\n\treturn new Worker(new URL(\"./worker\", import.meta.url));\n}\n\nexport class BatchEncodeAnalyzer {\n\n\tprivate readonly image: ImageData;\n\tprivate readonly measureOptions: MeasureOptions;\n\n\treadonly pool: WorkerPool<WorkerApi>;\n\n\tconstructor(image: ImageData, measure: MeasureOptions) {\n\t\tthis.image = image;\n\t\tthis.measureOptions = measure;\n\t\tthis.pool = new WorkerPool(newWorker, measure.workerCount);\n\t}\n\n\tonProgress() {}\n\n\tasync initialize() {\n\t\tawait this.pool.runOnEach(remote => remote.setImageToEncode(this.image));\n\t}\n\n\tencode(encoder: ImageEncoder, options: any) {\n\t\treturn this.pool.run(remote => this.poll(remote, encoder, options));\n\t}\n\n\tterminate() {\n\t\tthis.pool.terminate();\n\t}\n\n\tprivate async poll(remote: Remote<WorkerApi>, encoder: ImageEncoder, options: any) {\n\t\tconst { buffer, time } = await encoder.encode(options, remote);\n\t\tconst blob = new Blob([buffer], { type: encoder.mimeType });\n\t\tconst data = await decode(blob, remote);\n\t\tthis.onProgress();\n\n\t\tconst metrics = await this.measure(remote, data);\n\t\treturn { time, buffer, data, metrics } as ConvertOutput;\n\t}\n\n\tasync measure(wrapper: Remote<WorkerApi>, data: ImageData) {\n\t\tconst { SSIM, PSNR, butteraugli } = this.measureOptions;\n\t\tconst metrics: Metrics = {};\n\n\t\tif (PSNR) {\n\t\t\tmetrics.PSNR = await wrapper.calcPSNR(data);\n\t\t\tthis.onProgress();\n\t\t}\n\t\tif (SSIM.enabled) {\n\t\t\tmetrics.SSIM = await wrapper.calcSSIM(data, SSIM.options);\n\t\t\tthis.onProgress();\n\t\t}\n\t\tif (butteraugli.enabled) {\n\t\t\tconst [source, raw] = await wrapper.calcButteraugli(data, butteraugli.options);\n\t\t\tthis.onProgress();\n\n\t\t\tconst heatMap = rgbaToImage(raw, data.width, data.height);\n\t\t\tmetrics.butteraugli = { source, heatMap };\n\t\t}\n\n\t\treturn metrics;\n\t}\n}\n\nfunction rgbaToImage(buffer: ArrayBufferLike, width: number, height: number) {\n\tconst channels = buffer.byteLength / width / height;\n\tif (channels !== 4) {\n\t\tthrow new Error(\"Buffer must be a 8-bit depth RGBA array\");\n\t}\n\tconst canvas = document.createElement(\"canvas\");\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) {\n\t\tthrow new Error(\"Could not create canvas context\");\n\t}\n\tconst imageData = ctx.createImageData(width, height);\n\timageData.data.set(new Uint8ClampedArray(buffer));\n\treturn imageData;\n}\n","import { Remote, wrap } from \"comlink\";\nimport { blobToImg, canDecodeImageType, drawableToImageData } from \"squoosh/src/client/lazy-app/util\";\nimport { WorkerApi } from \"./worker\";\nimport { newWorker } from \"./encode\";\n\nexport async function decodeImageNative(blob: Blob) {\n\tconst bitmap = \"createImageBitmap\" in self\n\t\t? await createImageBitmap(blob)\n\t\t: await blobToImg(blob);\n\n\tconst canvas = document.createElement(\"canvas\");\n\tconst { width, height } = bitmap;\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) {\n\t\tthrow new Error(\"Canvas not initialized\");\n\t}\n\tctx.drawImage(bitmap, 0, 0);\n\treturn ctx.getImageData(0, 0, width, height);\n}\n\nfunction ensureSVGSize(svgXml: string) {\n\tconst parser = new DOMParser();\n\tconst document = parser.parseFromString(svgXml, \"image/svg+xml\");\n\tconst svg = document.documentElement;\n\n\tif (svg.getAttribute(\"width\") && svg.getAttribute(\"height\")) {\n\t\treturn svgXml;\n\t}\n\n\tconst viewBox = svg.getAttribute(\"viewBox\");\n\tif (viewBox === null) {\n\t\tthrow Error(\"SVG must have width/height or viewBox\");\n\t}\n\tconst [, , width, height] = viewBox.split(/\\s+/);\n\tsvg.setAttribute(\"width\", width);\n\tsvg.setAttribute(\"height\", height);\n\n\treturn new XMLSerializer().serializeToString(document);\n}\n\nexport async function svgToImageData(svgXml: string) {\n\tsvgXml = ensureSVGSize(svgXml);\n\tconst blob = new Blob([svgXml], { type: \"image/svg+xml\" });\n\treturn drawableToImageData(await blobToImg(blob));\n}\n\nexport async function decode(blob: Blob, worker?: Remote<WorkerApi>) {\n\tconst { type } = blob;\n\n\tif (type === \"image/svg+xml\") {\n\t\treturn blob.text().then(svgToImageData);\n\t}\n\tif (await canDecodeImageType(type)) {\n\t\treturn decodeImageNative(blob);\n\t}\n\n\tworker ??= wrap<WorkerApi>(newWorker());\n\tconst buffer = await blob.arrayBuffer();\n\tswitch (type) {\n\t\tcase \"image/webp\":\n\t\t\treturn worker.webpDecode(buffer);\n\t\tcase \"image/avif\":\n\t\t\treturn worker.avifDecode(buffer);\n\t\tcase \"image/jxl\":\n\t\t\treturn worker.jxlDecode(buffer);\n\t\tcase \"image/webp2\":\n\t\t\treturn worker.webp2Decode(buffer);\n\t\tdefault:\n\t\t\treturn decodeImageNative(blob);\n\t}\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n});\n\nfunction SvgCheckBox(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgCheckBox;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n});\n\nfunction SvgCheckBoxChecked(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgCheckBoxChecked;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n});\n\nfunction SvgRadioBox(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgRadioBox;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n});\n\nfunction SvgRadioBoxChecked(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgRadioBoxChecked;","/**\n * No effect function with a clear name.\n */\nexport const NOOP = () => {};\n\nconst SIZE_UNITS = [\"\", \"K\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\"];\n\n/**\n * Convert bytes to a human readable string.\n *\n * @param value The number to format.\n * @param fraction\n */\nexport function bytes(value: number, fraction = 1024) {\n\tconst size = Math.abs(value);\n\n\tif (size === 0) {\n\t\treturn `${value.toFixed(2)} B`;\n\t}\n\n\tconst i = ~~(Math.log2(size) / Math.log2(fraction));\n\tconst v = value / (fraction ** i);\n\treturn `${v.toFixed(2)} ${SIZE_UNITS[i]}B`;\n}\n\n/** A generic replacement for Function */\ntype Fn<T, A extends any[], R> = (this: T, ...args: A) => R;\n\nexport function debounce<T, A extends any[], R>(wait: number, func: Fn<T, A, R>) {\n\tlet disallow = false;\n\tlet result: R;\n\n\treturn function debouncedFn(this: T, ...args: A) {\n\t\tif (disallow) {\n\t\t\treturn result;\n\t\t}\n\t\tdisallow = true;\n\t\tsetTimeout(() => disallow = false, wait);\n\t\treturn result = func.apply(this, args);\n\t};\n}\n\nexport async function getFileFromUrl(url: string, signal?: AbortSignal) {\n\tconst response = await fetch(url, { signal });\n\tconst blob = await response.blob();\n\n\t// Firefox doesn't like content types like 'image/png; charset=UTF-8', which Webpack's dev\n\t// server returns. https://bugzilla.mozilla.org/show_bug.cgi?id=1497925.\n\tconst type = /[^;]*/.exec(blob.type)![0];\n\tconst name = new URL(url).pathname.split(\"/\").pop() || \"image\";\n\n\tconst timeHeader = response.headers.get(\"last-modified\");\n\tconst lastModified = timeHeader ? new Date(timeHeader).getTime() : undefined;\n\n\treturn new File([blob], name, { type, lastModified });\n}\n","import { ChangeEvent, ChangeEventHandler, ComponentType, Dispatch, MouseEventHandler, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./CheckBoxBase.scss\";\n\nexport interface CheckBoxProps {\n\tchecked: boolean;\n\n\tclassName?: string;\n\tname?: string;\n\tvalue?: string;\n\tdisabled?: boolean;\n\n\tonValueChange?: Dispatch<boolean>;\n\n\tonClick?: MouseEventHandler;\n\tonChange?: ChangeEventHandler<HTMLInputElement>;\n\tchildren?: ReactNode;\n}\n\ninterface InternalProps extends CheckBoxProps {\n\ttype: string;\n\tIcon: ComponentType;\n\tIconChecked: ComponentType;\n}\n\nexport default function CheckBoxBase(props: InternalProps) {\n\tconst {\n\t\tclassName, type, Icon, IconChecked, name, value, checked, disabled,\n\t\tonClick, onChange = NOOP, onValueChange = NOOP, children,\n\t} = props;\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\tonChange(e);\n\t\tonValueChange(e.currentTarget.checked);\n\t}\n\n\treturn (\n\t\t<label className={clsx(styles.container, className)} onClick={onClick}>\n\t\t\t<input\n\t\t\t\ttype={type}\n\t\t\t\tclassName={styles.input}\n\t\t\t\tname={name}\n\t\t\t\tvalue={value}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t\t<span className={styles.mark}>\n\t\t\t\t{checked ? <IconChecked/> : <Icon/>}\n\t\t\t</span>\n\t\t\t{children && <span className={styles.label}>{children}</span>}\n\t\t</label>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2Ov17\",\"input\":\"_2IoHf\",\"mark\":\"_2H-Mw\",\"label\":\"_11H37\"};","import { ChangeEvent, ChangeEventHandler, CSSProperties, Dispatch, MouseEventHandler } from \"react\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./RangeInput.scss\";\nimport clsx from \"clsx\";\n\ninterface RangeInputProps {\n\tvalue: number;\n\tmin: number;\n\tmax: number;\n\tstep: number;\n\n\tclassName?: string;\n\tname?: string;\n\tdisabled?: boolean;\n\n\tonClick?: MouseEventHandler<HTMLInputElement>;\n\tonValueChange?: Dispatch<number>;\n\tonChange?: ChangeEventHandler<HTMLInputElement>;\n}\n\ninterface RangeInputCSS extends CSSProperties {\n\t\"--value-percent\": string;\n}\n\nexport default function RangeInput(props: RangeInputProps) {\n\tconst { className, name, value, min, max, step, disabled,\n\t\tonClick, onChange = NOOP, onValueChange = NOOP } = props;\n\n\tconst percent = (value - min) / (max - min);\n\tconst cssVariables: RangeInputCSS = {\n\t\t\"--value-percent\": `${percent * 100}%`,\n\t};\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\tonChange(e);\n\t\tonValueChange(e.currentTarget.valueAsNumber);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(styles.container, className)}\n\t\t\tstyle={cssVariables}\n\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tclassName={styles.input}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tvalue={value}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\tstep={step}\n\t\t\t\tonClick={onClick}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t\t<div className={styles.thumbRegion}>\n\t\t\t\t<div className={styles.thumb}/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2DhF4\",\"thumbRegion\":\"_2b567\",\"thumb\":\"_26ZKf\",\"input\":\"_3dzMs\"};","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"_3asye\",\"active\":\"_1lox2\",\"button\":\"_2wLkD\",\"outline\":\"_1UDsQ _2wLkD\",\"busy\":\"_3XmXG\"};","import { MouseEventHandler, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport styles from \"./Button.scss\";\n\nexport interface ButtonProps {\n\ttype?: \"button\" | \"text\" | \"outline\";\n\thref?: string;\n\tactive?: boolean;\n\n\ttitle?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n\n\tonClick?: MouseEventHandler;\n\tchildren?: ReactNode;\n}\n\nexport default function Button(props: ButtonProps) {\n\tconst { type = \"button\", href, active, title, className, disabled, onClick, children } = props;\n\n\tconst classes = clsx(\n\t\tstyles[type],\n\t\tclassName,\n\t\t{ [styles.active]: active },\n\t);\n\n\tconst ButtonTag = href ? \"a\" : \"button\";\n\tconst htmlType = href ? undefined : \"button\";\n\n\treturn (\n\t\t<ButtonTag\n\t\t\tclassName={classes}\n\t\t\thref={href}\n\t\t\ttitle={title}\n\t\t\tdisabled={disabled}\n\t\t\ttype={htmlType}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{children}\n\t\t</ButtonTag>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2dfjc\",\"input\":\"xI_9P\",\"button\":\"_1H0a4\",\"plus\":\"dBnP0\"};","import { Dispatch } from \"react\";\nimport clsx from \"clsx\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./NumberInput.scss\";\n\nconst UPDATE_SPEED = 50;\nconst UPDATE_DELAY = 400;\n\nfunction getPrecision(value: number) {\n\tconst s = value.toString();\n\tconst d = s.indexOf(\".\") + 1;\n\treturn d || s.length - d;\n}\n\nexport interface NumberInputProps {\n\tvalue: number;\n\tmin?: number;\n\tmax?: number;\n\tstep?: number;\n\n\tname?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n\n\tonValueChange?: Dispatch<number>;\n}\n\nexport default function NumberInput(props: NumberInputProps) {\n\tconst {\n\t\tname,\n\t\tclassName,\n\t\tdisabled,\n\t\tvalue,\n\t\tmin = 0,\n\t\tmax = Number.MAX_SAFE_INTEGER,\n\t\tstep = 1,\n\t\tonValueChange = NOOP,\n\t} = props;\n\n\tfunction handleMouseDown(diff: number) {\n\t\tlet timer = 0;\n\t\tconst q = Math.pow(10, getPrecision(step));\n\n\t\t/** get the next value, resolve precision problem */\n\t\tfunction next(n: number) {\n\t\t\tn += diff;\n\t\t\tn = Math.min(Math.max(n, min), max);\n\t\t\treturn Math.round(n * q) / q;\n\t\t}\n\n\t\tfunction update(current: number) {\n\t\t\tconst newValue = next(current);\n\t\t\tonValueChange(newValue);\n\t\t\ttimer = window.setTimeout(() => update(newValue), UPDATE_SPEED);\n\t\t}\n\n\t\tfunction onMouseUp() {\n\t\t\tclearTimeout(timer);\n\t\t\tdocument.removeEventListener(\"mouseup\", onMouseUp);\n\t\t}\n\n\t\tconst newValue = next(value);\n\t\tonValueChange(newValue);\n\t\ttimer = window.setTimeout(() => update(newValue), UPDATE_DELAY);\n\t\tdocument.addEventListener(\"mouseup\", onMouseUp);\n\t}\n\n\treturn (\n\t\t<div className={clsx(styles.container, className)}>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tclassName={styles.input}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tname={name}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\tstep={step}\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={e => onValueChange(e.currentTarget.valueAsNumber)}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={clsx(styles.button, styles.plus)}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMouseDown={() => handleMouseDown(step)}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={styles.button}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMouseDown={() => handleMouseDown(-step)}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dimmer\":\"_3_cLi\",\"hide\":\"_1p1yr\",\"dialog\":\"_1Vq87\"};","import { ReactNode, useEffect, useLayoutEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport clsx from \"clsx\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./Dialog.scss\";\n\ninterface DialogProps {\n\tclassName?: string;\n\tname?: string;\n\tchildren: ReactNode;\n\tonClose?: () => void;\n}\n\n/**\n * Hide non-top-level dialogs.\n *\n * there is no :last-of-class selector so use JS to implement.\n */\nfunction hidePrevious() {\n\tconst dialogs = document.body.querySelectorAll(\".\" + styles.dimmer);\n\tconst previous = dialogs[dialogs.length - 2];\n\tif (!previous) {\n\t\treturn;\n\t}\n\tprevious.classList.add(styles.hide);\n\treturn () => previous.classList.remove(styles.hide);\n}\n\nexport default function Dialog(props: DialogProps) {\n\tconst { className, name, onClose = NOOP, children } = props;\n\n\tfunction listenKeyboardClose() {\n\t\tfunction handleKeyUp(event: KeyboardEvent) {\n\t\t\tif (event.key === \"Escape\") {\n\t\t\t\tonClose();\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener(\"keyup\", handleKeyUp);\n\t\treturn () => window.removeEventListener(\"keyup\", handleKeyUp);\n\t}\n\n\tuseEffect(listenKeyboardClose, [onClose]);\n\tuseLayoutEffect(hidePrevious, []);\n\n\treturn createPortal(\n\t\t<div className={styles.dimmer}>\n\t\t\t<div\n\t\t\t\trole=\"dialog\"\n\t\t\t\taria-label={name}\n\t\t\t\tclassName={clsx(className, styles.dialog)}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>,\n\t\tdocument.body,\n\t);\n}\n","import { Dispatch, ReactNode } from \"react\";\n\ntype PointerMoveHandler = (dx: number, dy: number) => void;\n\nfunction watchMouseMove(baseEvent: MouseEvent, handler: PointerMoveHandler) {\n\tconst basePageX = baseEvent.pageX;\n\tconst basePageY = baseEvent.pageY;\n\n\tfunction handleMove(event: MouseEvent) {\n\t\thandler(event.pageX - basePageX, event.pageY - basePageY);\n\t}\n\n\tfunction handleEnd(event: Event) {\n\t\tevent.preventDefault();\n\t\tdocument.removeEventListener(\"mousemove\", handleMove);\n\t\tdocument.removeEventListener(\"mouseup\", handleEnd);\n\t}\n\n\tdocument.addEventListener(\"mousemove\", handleMove);\n\tdocument.addEventListener(\"mouseup\", handleEnd);\n}\n\nfunction watchTouchMove(baseEvent: TouchEvent, handler: PointerMoveHandler) {\n\tconst basePointer = baseEvent.touches[0];\n\n\tfunction handleMove(event: TouchEvent) {\n\t\tconst touch = event.touches[0];\n\t\thandler(touch.pageX - basePointer.pageX, touch.pageY - basePointer.pageY);\n\t}\n\n\tfunction handleEnd(event: Event) {\n\t\tevent.preventDefault();\n\t\tdocument.removeEventListener(\"touchmove\", handleMove);\n\t\tdocument.removeEventListener(\"touchend\", handleEnd);\n\t}\n\n\tdocument.addEventListener(\"touchmove\", handleMove);\n\tdocument.addEventListener(\"touchend\", handleEnd);\n}\n\nexport interface PinchZoomState {\n\tx: number;\n\ty: number;\n\tscale: number;\n}\n\nexport interface PinchZoomProps {\n\tstate: PinchZoomState;\n\tclassName?: string;\n\tchildren: ReactNode;\n\tonChange: Dispatch<PinchZoomState>;\n}\n\nexport default function PinchZoom(props: PinchZoomProps) {\n\tconst { state, className, children, onChange } = props;\n\n\tfunction handleWheel(event: React.WheelEvent) {\n\t\tconst { ctrlKey, deltaMode, clientX, clientY } = event;\n\t\tlet { deltaY } = event;\n\n\t\tevent.preventDefault();\n\n\t\t// 1 is \"lines\", 0 is \"pixels\"\n\t\tif (deltaMode === 1) {\n\t\t\tdeltaY *= 15;\n\t\t}\n\n\t\t// ctrlKey is true when pinch-zooming on a trackpad.\n\t\tconst divisor = ctrlKey ? 100 : 300;\n\t\tconst scaleDiff = 1 - deltaY / divisor;\n\n\t\tconst rect = event.currentTarget.firstElementChild!.getBoundingClientRect();\n\t\tconst dx = ((rect.left + rect.width / 2) - clientX) * (scaleDiff - 1);\n\t\tconst dy = ((rect.top + rect.height / 2) - clientY) * (scaleDiff - 1);\n\n\t\tonChange({\n\t\t\tx: state.x + dx,\n\t\t\ty: state.y + dy,\n\t\t\tscale: state.scale * scaleDiff,\n\t\t});\n\t}\n\n\tfunction updateOffset(dx: number, dy: number) {\n\t\tconst x = state.x + dx;\n\t\tconst y = state.y + dy;\n\t\tonChange({ scale: state.scale, x, y });\n\t}\n\n\tfunction handleMouseDown(e: React.MouseEvent) {\n\t\tif (e.button !== 0) {\n\t\t\treturn;\n\t\t}\n\t\twatchMouseMove(e.nativeEvent, updateOffset);\n\t}\n\n\tfunction handleTouchStart(e: React.TouchEvent) {\n\t\twatchTouchMove(e.nativeEvent, updateOffset);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{ touchAction: \"none\" }}\n\t\t\tclassName={className}\n\t\t\tonWheel={handleWheel}\n\t\t\tonTouchStart={handleTouchStart}\n\t\t\tonMouseDown={handleMouseDown}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n","import { SelectHTMLAttributes } from \"react\";\nimport CaretDownIcon from \"bootstrap-icons/icons/caret-down-fill.svg\";\nimport styles from \"./SelectBox.scss\";\n\ntype SelectBoxProps = SelectHTMLAttributes<HTMLSelectElement>;\n\nexport default function SelectBox(props: SelectBoxProps) {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<select {...props} className={styles.select}/>\n\t\t\t<CaretDownIcon className={styles.icon}/>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_3Neg9\",\"select\":\"_2rF3V\",\"icon\":\"_2Arv_\"};","import clsx from \"clsx\";\nimport { CheckBoxProps } from \"./CheckBoxBase\";\nimport { NOOP } from \"../utils\";\nimport { ChangeEvent } from \"react\";\nimport styles from \"./SwitchButton.scss\";\n\nexport type SwitchButtonProps = Omit<CheckBoxProps, \"children\">;\n\nexport default function SwitchButton(props: SwitchButtonProps) {\n\tconst { className, name, checked, disabled, onClick, onChange = NOOP, onValueChange = NOOP } = props;\n\n\tconst clazz = clsx(\n\t\tstyles.container,\n\t\tclassName,\n\t\t{ [styles.checked]: checked },\n\t);\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\tonChange(e);\n\t\tonValueChange(e.currentTarget.checked);\n\t}\n\n\treturn (\n\t\t<label className={clazz}>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tclassName={styles.input}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tchecked={checked}\n\t\t\t\tname={name}\n\t\t\t\tonClick={onClick}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t</label>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_23L3Q\",\"checked\":\"_38B3L\",\"input\":\"rBLkp\"};","import { MouseEventHandler, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport styles from \"./ControlField.scss\";\n\nexport interface ControlFieldProps {\n\tactive: boolean;\n\tclassName?: string;\n\n\tonFocus: MouseEventHandler;\n\tchildren: ReactNode;\n}\n\nexport default function ControlField(props: ControlFieldProps) {\n\tconst { active, className, onFocus, children } = props;\n\n\tconst clazz = clsx(\n\t\tstyles.container,\n\t\tclassName,\n\t\t{ [styles.active]: active },\n\t);\n\n\treturn <div className={clazz} onClick={onFocus}>{children}</div>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_7lvOB\",\"active\":\"_31kUg\"};","import CheckIcon from \"../assets/check_box.svg\";\nimport CheckIconActive from \"../assets/check_box-checked.svg\";\nimport RadioIcon from \"../assets/radio_box.svg\";\nimport RadioIconActive from \"../assets/radio_box-checked.svg\";\nimport CheckBoxBase, { CheckBoxProps } from \"./CheckBoxBase\";\n\nexport function CheckBox(props: CheckBoxProps) {\n\treturn CheckBoxBase({ ...props, type: \"checkbox\", Icon: CheckIcon, IconChecked: CheckIconActive });\n}\n\nexport function RadioBox(props: CheckBoxProps) {\n\treturn CheckBoxBase({ ...props, type: \"radio\", Icon: RadioIcon, IconChecked: RadioIconActive });\n}\n\nexport { default as RangeInput } from \"./RangeInput\";\nexport { default as Button } from \"./Button\";\nexport { default as NumberInput } from \"./NumberInput\";\nexport { default as Dialog } from \"./Dialog\";\nexport { default as PinchZoom } from \"./PinchZoom\";\nexport { default as SelectBox } from \"./SelectBox\";\nexport { default as SwitchButton } from \"./SwitchButton\";\nexport { default as ControlField } from \"./ControlField\";\n","import { useState } from \"react\";\nimport styles from \"./DemoButton.scss\";\n\ninterface DemoButtonProps {\n\tdescription: string;\n\turl: string;\n\ticon: string;\n\tonClick: (url: string) => Promise<void>;\n}\n\nexport default function DemoButton(props: DemoButtonProps) {\n\tconst { description, url, icon, onClick } = props;\n\n\tconst [loading, setLoading] = useState(false);\n\n\tasync function handleClick() {\n\t\tif (loading) {\n\t\t\treturn;\n\t\t}\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tawait onClick(url);\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\treturn (\n\t\t<button key={url} className={styles.card} onClick={handleClick}>\n\t\t\t<img\n\t\t\t\tsrc={icon}\n\t\t\t\talt=\"icon\"\n\t\t\t\tclassName={styles.demoIcon}\n\t\t\t/>\n\t\t\t{loading && <div className={styles.loading}/>}\n\t\t\t<span className={styles.demoDescription}>{description}</span>\n\t\t</button>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"_2Z_sH\",\"demoIcon\":\"ZflhA\",\"demoDescription\":\"_3fIXD\",\"loading\":\"_2BAvs\",\"lds-ripple\":\"_1nQz2\"};","// extracted by mini-css-extract-plugin\nexport default {\"uploadFile\":\"_3uHix\",\"dragging\":\"_2jvwR\",\"icon\":\"wYvdR\",\"text\":\"_3SDL7\",\"fileInput\":\"_3-brh\",\"demoLabel\":\"_2Sr67\",\"demo\":\"_3BC6E\",\"error\":\"Qed9H\"};","import { ChangeEvent, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport ImageIcon from \"bootstrap-icons/icons/image.svg\";\nimport largePhoto from \"../assets/demo/large-photo.jpg\";\nimport largePhotoIcon from \"../assets/demo/large-photo-icon.jpg\";\nimport artwork from \"../assets/demo/artwork.jpg\";\nimport artworkIcon from \"../assets/demo/artwork-icon.jpg\";\nimport colorfulTextIcon from \"../assets/demo/colorful-text-icon.png\";\nimport colorfulText from \"../assets/demo/colorful-text.png\";\nimport { Button, Dialog } from \"../ui\";\nimport { getFileFromUrl } from \"../utils\";\nimport { decode } from \"../decode\";\nimport DemoButton from \"./DemoButton\";\nimport styles from \"./SelectFileDialog.scss\";\n\nconst demos = [\n\t{\n\t\tdescription: \"Large photo (2.8MB)\",\n\t\turl: largePhoto,\n\t\ticon: largePhotoIcon,\n\t},\n\t{\n\t\tdescription: \"Artwork (408KB)\",\n\t\turl: artwork,\n\t\ticon: artworkIcon,\n\t},\n\t{\n\t\tdescription: \"Colorful text (68KB)\",\n\t\turl: colorfulText,\n\t\ticon: colorfulTextIcon,\n\t},\n];\n\n/**\n * dragenter & dragleave can be triggered on crossing children element boundary,\n */\nfunction useBoundaryCounter() {\n\tconst [isInArea, setInArea] = useState(false);\n\tconst counter = useRef(0);\n\n\tfunction enter() {\n\t\tsetInArea(++counter.current > 0);\n\t}\n\n\tfunction leave() {\n\t\tsetInArea(--counter.current > 0);\n\t}\n\n\tfunction reset() {\n\t\tcounter.current = 0;\n\t\tsetInArea(false);\n\t}\n\n\treturn { isInArea, enter, leave, reset };\n}\n\nconst initController = new AbortController();\n\ninterface Props {\n\tonCancel: () => void;\n\tonFileChange: (file: File, image: ImageData) => void;\n}\n\nexport default function SelectFileDialog(props: Props) {\n\tconst { onCancel, onFileChange } = props;\n\n\tconst boundary = useBoundaryCounter();\n\tconst abortController = useRef(initController);\n\tconst [error, setError] = useState(\"\");\n\n\tfunction accept(file: File) {\n\t\tdecode(file)\n\t\t\t.then(image => onFileChange(file, image))\n\t\t\t.catch(() => setError(\"Can not decode file as image.\"));\n\t}\n\n\tasync function acceptUrl(url: string) {\n\t\tconst newController = new AbortController();\n\t\tabortController.current.abort();\n\t\tabortController.current = newController;\n\n\t\tconst { signal } = newController;\n\t\ttry {\n\t\t\taccept(await getFileFromUrl(url, signal));\n\t\t} catch (e) {\n\t\t\tif (e.name !== \"AbortError\") throw e;\n\t\t}\n\t}\n\n\tfunction handleFileChange(event: ChangeEvent<HTMLInputElement>) {\n\t\tabortController.current.abort();\n\t\tconst { files } = event.currentTarget;\n\t\tif (files?.length) accept(files[0]);\n\t}\n\n\tfunction handleDrop(event: React.DragEvent) {\n\t\tevent.preventDefault();\n\t\tboundary.reset();\n\t\tabortController.current.abort();\n\n\t\tconst { items } = event.dataTransfer;\n\t\tconst file = items[0].getAsFile();\n\n\t\tif (file) {\n\t\t\taccept(file);\n\t\t} else {\n\t\t\tsetError(\"The dropped item is not a file\");\n\t\t}\n\t}\n\n\tconst demoButtons = demos.map(demo => <DemoButton {...demo} key={demo.url} onClick={acceptUrl}/>);\n\n\treturn (\n\t\t<Dialog onClose={onCancel}>\n\t\t\t<div className=\"dialog-content\">\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(styles.uploadFile, { [styles.dragging]: boundary.isInArea })}\n\t\t\t\t\ttabIndex={0}\n\t\t\t\t\tonDragEnter={boundary.enter}\n\t\t\t\t\tonDragOver={e => e.preventDefault()}\n\t\t\t\t\tonDrop={handleDrop}\n\t\t\t\t\tonDragLeave={boundary.leave}\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className={styles.icon}>\n\t\t\t\t\t\t\t<ImageIcon/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className={styles.text}>\n\t\t\t\t\t\t\tDrag & drop\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\tOr select an image\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName={styles.fileInput}\n\t\t\t\t\t\tname=\"file\"\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\t/>\n\t\t\t\t</label>\n\t\t\t\t<span className={styles.demoLabel}>\n\t\t\t\t\tOr try one of these:\n\t\t\t\t</span>\n\t\t\t\t<div className={styles.demo}>{demoButtons}</div>\n\t\t\t</div>\n\t\t\t<div className=\"dialog-actions\">\n\t\t\t\t<span className={styles.error}>{error}</span>\n\t\t\t\t<Button className=\"second\" onClick={onCancel}>Back</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","import { bytes } from \"../utils\";\nimport styles from \"./ImageInfoPanel.scss\";\n\ninterface Props {\n\tfile: File;\n\timage: ImageData;\n}\n\nexport default function ImageInfoPanel(props: Props) {\n\tconst { file } = props;\n\tconst { width, height, data } = props.image;\n\n\tconst ratio = (file.size / data.byteLength * 100).toFixed(2);\n\n\tfunction draw(el: HTMLCanvasElement | null) {\n\t\tif (!el) {\n\t\t\treturn;\n\t\t}\n\t\tconst ctx = el.getContext(\"2d\");\n\t\tctx?.putImageData(props.image, 0, 0);\n\t}\n\n\treturn (\n\t\t<div className=\"dialog-content\" role=\"tabpanel\">\n\t\t\t<canvas\n\t\t\t\tclassName={styles.canvas}\n\t\t\t\taria-label=\"Preview\"\n\t\t\t\tref={draw}\n\t\t\t\twidth={width}\n\t\t\t\theight={height}\n\t\t\t/>\n\t\t\t<dl className={styles.attributes}>\n\t\t\t\t<dt>File name:</dt>\n\t\t\t\t<dd>{file.name}</dd>\n\n\t\t\t\t<dt>Type:</dt>\n\t\t\t\t<dd>{file.type}</dd>\n\n\t\t\t\t<dt>Resolution:</dt>\n\t\t\t\t<dd>{width} x {height}</dd>\n\n\t\t\t\t<dt>Raw size:</dt>\n\t\t\t\t<dd>{bytes(data.byteLength)}</dd>\n\n\t\t\t\t<dt>File size (Ratio %):</dt>\n\t\t\t\t<dd>{bytes(file.size)} ({ratio}%)</dd>\n\t\t\t</dl>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"_3eH8J\",\"header\":\"_10jMI\",\"tab\":\"_1HnK8\",\"canvas\":\"WKrzW\",\"attributes\":\"lL9Er\"};","import metrics, { ButteraugliDiff, FullButteraugliOptions, MetricsModule } from \"./diff\";\nimport ssim, { Options } from \"ssim.js\";\n\nexport type ButteraugliOptions = Partial<FullButteraugliOptions>;\n\nexport type SSIMOptions = Partial<Options>;\n\nexport const defaultButteraugliOptions: FullButteraugliOptions = {\n\thfAsymmetry: 1.0,\n\tgoodQualitySeek: 1.5,\n\tbadQualitySeek: 0.5,\n};\n\nlet loadPromise: Promise<void> | undefined;\n\nlet wasmModule: MetricsModule;\n\n/**\n * Initialize WebAssembly module, you must call this function before butteraugli()\n *\n * @param wasmUrl Url of metrics.wasm, If omitted, use the file in the same directory.\n */\nexport function initWasmModule(wasmUrl?: string) {\n\tif (loadPromise) {\n\t\treturn loadPromise;\n\t}\n\tconst init = wasmUrl ? metrics({ locateFile: () => wasmUrl }) : metrics();\n\treturn loadPromise = init.then(m => { wasmModule = m; });\n}\n\nfunction check(image0: ImageData, image1: ImageData) {\n\tconst len0 = image0.data.byteLength;\n\tconst len1 = image1.data.byteLength;\n\n\tif (len0 !== len1) {\n\t\tthrow new Error(`Image data have different length ${len0} vs. ${len1}`);\n\t}\n\n\tconst channels = len0 / image0.width / image0.height;\n\tif (channels !== 3 && channels !== 4) {\n\t\tthrow new Error(\"Image must be RGB or RGBA in colors\");\n\t}\n\n\tif (image0.width !== image1.width) {\n\t\tthrow new Error(`Image have different width ${image0.width} vs. ${image1.width}`);\n\t}\n\tif (image0.height !== image1.height) {\n\t\tthrow new Error(`Image have different width ${image0.height} vs. ${image1.height}`);\n\t}\n}\n\nexport class Butteraugli {\n\n\tprivate readonly native: ButteraugliDiff;\n\tprivate readonly reference: ImageData;\n\n\tconstructor(image: ImageData) {\n\t\tthis.reference = image;\n\t\tthis.native = new wasmModule.ButteraugliDiff(image);\n\t}\n\n\tclose() {\n\t\tthis.native.delete();\n\t}\n\n\tdiff(image: ImageData, options?: ButteraugliOptions) {\n\t\tif (!loadPromise) {\n\t\t\tthrow new Error(\"Wasm module not load\");\n\t\t}\n\t\tcheck(this.reference, image);\n\n\t\tconst merged = { ...defaultButteraugliOptions, ...options };\n\n\t\tif (merged.badQualitySeek < 0 || merged.badQualitySeek >= 2) {\n\t\t\tthrow new Error(\"badQualitySeek must between 0, 2\");\n\t\t}\n\t\tif (merged.goodQualitySeek < 0 || merged.goodQualitySeek >= 2) {\n\t\t\tthrow new Error(\"goodQualitySeek must between 0, 2\");\n\t\t}\n\n\t\treturn this.native.Diff(image.data, merged);\n\t}\n}\n\nexport function getPSNR(image0: ImageData, image1: ImageData) {\n\tif (!wasmModule) {\n\t\tthrow new Error(\"Wasm module not loaded\");\n\t}\n\tcheck(image0, image1);\n\n\tconst dataA = image0.data;\n\tconst dataB = image1.data;\n\tconst { length } = dataA;\n\n\tlet sse = 0;\n\tfor (let i = 0; i < length; i++) {\n\t\tconst e = dataA[i] - dataB[i];\n\t\tsse += e * e;\n\t}\n\treturn 10 * Math.log10(255 * 255 / sse * length);\n}\n\nexport function getSSIM(image0: ImageData, image1: ImageData, options?: SSIMOptions) {\n\treturn ssim(image0, image1, options).mssim;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"_3_OKa dialog-content\",\"field\":\"_2vX3s\",\"inlineLabel\":\"_2MSGh\",\"label\":\"ba7J1\"};","import React, { ChangeEvent, Dispatch } from \"react\";\nimport * as ssimJs from \"ssim.js\";\nimport { defaultButteraugliOptions, SSIMOptions } from \"../../lib/similarity\";\nimport { CheckBox, NumberInput } from \"../ui\";\nimport { ButteraugliConfig, MeasureOptions, Optional } from \"../encode\";\nimport styles from \"./MetricsPanel.scss\";\n\nexport function createMeasureState(saved?: MeasureOptions): MeasureOptions {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\treturn {\n\t\tversion: 1,\n\t\tworkerCount: navigator.hardwareConcurrency,\n\t\ttime: true,\n\t\tPSNR: true,\n\t\tSSIM: {\n\t\t\tenabled: false,\n\t\t\toptions: ssimJs.getOptions(),\n\t\t},\n\t\tbutteraugli: {\n\t\t\tenabled: false,\n\t\t\toptions: defaultButteraugliOptions,\n\t\t},\n\t};\n}\n\ninterface ButteraugliProps {\n\tvalue: Optional<ButteraugliConfig>;\n\tonChange: Dispatch<Optional<ButteraugliConfig>>;\n}\n\nfunction ButteraugliFields(props: ButteraugliProps) {\n\tconst { value, onChange } = props;\n\n\tfunction handleChange(name: string, newValue: number) {\n\t\tconst options = { ...value.options, [name]: newValue };\n\t\tonChange({ ...value, options });\n\t}\n\n\tconst inputs = Object.entries(value.options).map(([name, value]) => (\n\t\t<label\n\t\t\tclassName={styles.field}\n\t\t\tkey={name}\n\t\t>\n\t\t\t<span className={styles.label}>\n\t\t\t\t{name}\n\t\t\t</span>\n\t\t\t<NumberInput\n\t\t\t\tclassName={styles.value}\n\t\t\t\tname={name}\n\t\t\t\tmin={0}\n\t\t\t\tmax={2}\n\t\t\t\tstep={0.1}\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={v => handleChange(name, v)}\n\t\t\t/>\n\t\t</label>\n\t));\n\n\treturn (\n\t\t<div>\n\t\t\t<CheckBox\n\t\t\t\tchecked={value.enabled}\n\t\t\t\tname=\"butteraugli\"\n\t\t\t\tonValueChange={v => onChange({ ...value, enabled: v })}\n\t\t\t>\n\t\t\t\tCalculate Butteraugli\n\t\t\t</CheckBox>\n\n\t\t\t<fieldset className=\"subfields\">\n\t\t\t\t{value.enabled && inputs}\n\t\t\t</fieldset>\n\t\t</div>\n\t);\n}\n\ninterface SSIMProps {\n\toptions: SSIMOptions;\n\tonChange: Dispatch<SSIMOptions>;\n}\n\nfunction SSIMFields(props: SSIMProps) {\n\treturn (\n\t\t<></>\n\t);\n}\n\ninterface MetricsPanelProps {\n\tvalue: MeasureOptions;\n\tonChange: Dispatch<MeasureOptions>;\n}\n\nexport default function MetricsPanel(props: MetricsPanelProps) {\n\tconst { value, onChange } = props;\n\tconst { workerCount,time, SSIM, PSNR, butteraugli } = value;\n\n\tfunction handleChange(event: ChangeEvent<HTMLInputElement>) {\n\t\tconst { name, checked } = event.currentTarget;\n\t\tonChange({ ...value, [name]: checked });\n\t}\n\n\tfunction handleWorkerCountChange(count: number) {\n\t\tonChange({ ...value, workerCount: count });\n\t}\n\n\tfunction handleBgChange(newValue: Optional<ButteraugliConfig>) {\n\t\tonChange({ ...value, butteraugli: newValue });\n\t}\n\n\treturn (\n\t\t<form className={styles.form} role=\"tabpanel\">\n\t\t\t<label>\n\t\t\t\t<span className={styles.inlineLabel}>\n\t\t\t\t\tWorker count:\n\t\t\t\t</span>\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={workerCount}\n\t\t\t\t\tmin={1}\n\t\t\t\t\tstep={1}\n\t\t\t\t\tonValueChange={handleWorkerCountChange}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<CheckBox\n\t\t\t\tchecked={time}\n\t\t\t\tname=\"time\"\n\t\t\t\tonChange={handleChange}\n\t\t\t>\n\t\t\t\tEncode time (Not very accurate)\n\t\t\t</CheckBox>\n\t\t\t<CheckBox\n\t\t\t\tchecked={PSNR}\n\t\t\t\tname=\"PSNR\"\n\t\t\t\tonChange={handleChange}\n\t\t\t>\n\t\t\t\tCalculate PSNR\n\t\t\t</CheckBox>\n\t\t\t<CheckBox\n\t\t\t\tchecked={SSIM.enabled}\n\t\t\t\tname=\"SSIM\"\n\t\t\t\tonChange={handleChange}\n\t\t\t>\n\t\t\t\tCalculate SSIM\n\t\t\t</CheckBox>\n\n\t\t\t<ButteraugliFields value={butteraugli} onChange={handleBgChange}/>\n\t\t</form>\n\t);\n}\n","import type { ControllerProps, OptionFieldProps, OptionType } from \".\";\nimport { CheckBox, ControlField, SwitchButton } from \"../ui\";\nimport styles from \"./BoolOption.scss\";\n\ninterface Metadata {\n\tid: string;\n\tlabel: string;\n\tdefaultValue: boolean | number;\n}\n\nexport default function boolOption(data: Metadata): OptionType<boolean, undefined> {\n\tconst { id, label, defaultValue } = data;\n\n\tfunction initControlValue() {\n\t\treturn { value: false, labels: [\"false\", \"true\"] };\n\t}\n\n\tfunction newOptionState() {\n\t\treturn [Boolean(defaultValue), undefined] as [boolean, never];\n\t}\n\n\tfunction Controller(props: ControllerProps<boolean, never>) {\n\t\tconst { value, onChange } = props;\n\n\t\treturn (\n\t\t\t<ControlField {...props} className={styles.control}>\n\t\t\t\t{label}\n\t\t\t\t<SwitchButton\n\t\t\t\t\tchecked={value}\n\t\t\t\t\tonValueChange={onChange}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t/>\n\t\t\t</ControlField>\n\t\t);\n\t}\n\n\tfunction OptionField(props: OptionFieldProps<boolean, undefined>) {\n\t\tconst { isVariable, value, onValueChange, onVariabilityChange } = props;\n\n\t\treturn (\n\t\t\t<fieldset className={styles.container}>\n\t\t\t\t<CheckBox\n\t\t\t\t\tclassName={styles.label}\n\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\tonValueChange={onVariabilityChange}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</CheckBox>\n\t\t\t\t{isVariable\n\t\t\t\t\t? <strong>OFF & ON</strong>\n\t\t\t\t\t: <SwitchButton name={id} checked={value} onValueChange={onValueChange}/>\n\t\t\t\t}\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\tfunction populate(value: boolean, options: any) {\n\t\toptions[id] = value;\n\t}\n\n\tfunction generate(_: never, options: any) {\n\t\treturn [{ ...options, [id]: false }, { ...options, [id]: true }];\n\t}\n\n\treturn { id, initControlValue, newOptionState, Controller, OptionField, populate, generate };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"_2a6H_\",\"numberInput\":\"Am5uv\",\"fieldset\":\"_3be6o\",\"header\":\"_3izR6\",\"controls\":\"_2bc6P\",\"label\":\"_3SupV\",\"body\":\"_2vou2\",\"container\":\"_1Whgl _3be6o\",\"control\":\"_1JOas\"};","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"_4bSt-\",\"numberInput\":\"_1uWIu\",\"fieldset\":\"_2g87T\",\"header\":\"_3Cf8v\",\"controls\":\"_3gET2\",\"label\":\"zSVpd\",\"body\":\"_38c4A\",\"item\":\"_2ds9S\"};","import type { ControllerProps, OptionFieldProps, OptionType } from \".\";\nimport { ChangeEvent } from \"react\";\nimport { CheckBox, ControlField, RadioBox } from \"../ui\";\nimport styles from \"./EnumOption.scss\";\n\ninterface EnumOptionConfig<T extends Record<string, any>> {\n\tid: string;\n\tlabel: string;\n\tenumObject: T;\n\tdefaultValue: keyof T;\n}\n\nexport default function enumOption<T>(data: EnumOptionConfig<T>): OptionType<keyof T, Array<keyof T>> {\n\tconst { id, label, enumObject, defaultValue } = data;\n\n\tfunction initControlValue(range: Array<keyof T>) {\n\t\treturn { value: range[0], labels: range };\n\t}\n\n\tfunction newOptionState() {\n\t\treturn [defaultValue, [defaultValue]] as [keyof T, Array<keyof T>];\n\t}\n\n\tfunction Controller(props: ControllerProps<keyof T, Array<keyof T>>) {\n\t\tconst { value, range, onChange } = props;\n\n\t\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tonChange(e.currentTarget.name as keyof T);\n\t\t}\n\n\t\tconst items = range.map(name =>\n\t\t\t<RadioBox\n\t\t\t\tkey={name}\n\t\t\t\tclassName={styles.item}\n\t\t\t\tchecked={name === value}\n\t\t\t\tname={id}\n\t\t\t\tonChange={handleChange}\n\t\t\t>\n\t\t\t\t{name}\n\t\t\t</RadioBox>,\n\t\t);\n\n\t\treturn (\n\t\t\t<ControlField {...props}>\n\t\t\t\t{label}\n\t\t\t\t<div className={styles.controls}>{items}</div>\n\t\t\t</ControlField>\n\t\t);\n\t}\n\n\tfunction OptionField(props: OptionFieldProps<keyof T, Array<keyof T>>) {\n\t\tconst { isVariable, value, range, onValueChange, onRangeChange, onVariabilityChange } = props;\n\n\t\tfunction handleChangeV(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tconst { checked, name } = e.currentTarget;\n\t\t\tlet newVariables = [...range];\n\n\t\t\tif (checked) {\n\t\t\t\tnewVariables.push(name as any);\n\t\t\t} else {\n\t\t\t\tnewVariables = range.filter(v => v !== name);\n\t\t\t}\n\n\t\t\tif (newVariables.length > 0) {\n\t\t\t\tonRangeChange(newVariables);\n\t\t\t}\n\t\t}\n\n\t\tfunction handleChangeC(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tonValueChange(e.currentTarget.value as keyof T);\n\t\t}\n\n\t\tlet items: any[];\n\t\tif (isVariable) {\n\t\t\titems = Object.keys(enumObject).map(name => {\n\t\t\t\treturn <CheckBox\n\t\t\t\t\tclassName={styles.item}\n\t\t\t\t\tkey={name}\n\t\t\t\t\tname={name}\n\t\t\t\t\tchecked={range.includes(name as any)}\n\t\t\t\t\tonChange={handleChangeV}\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</CheckBox>;\n\t\t\t});\n\t\t} else {\n\t\t\titems = Object.keys(enumObject).map(name => {\n\t\t\t\treturn <RadioBox\n\t\t\t\t\tclassName={styles.item}\n\t\t\t\t\tkey={name}\n\t\t\t\t\tname={id}\n\t\t\t\t\tvalue={name}\n\t\t\t\t\tchecked={value === name}\n\t\t\t\t\tonChange={handleChangeC}\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</RadioBox>;\n\t\t\t});\n\t\t}\n\n\t\treturn (\n\t\t\t<fieldset className={styles.fieldset}>\n\t\t\t\t<CheckBox\n\t\t\t\t\tclassName={styles.header}\n\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\tonValueChange={onVariabilityChange}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</CheckBox>\n\t\t\t\t<div className={styles.body}>{items}</div>\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\tfunction populate(value: keyof T, options: any) {\n\t\toptions[id] = enumObject[value];\n\t}\n\n\tfunction generate(range: Array<keyof T>, prev: any) {\n\t\treturn range.map(name => ({ ...prev, [id]: enumObject[name] }));\n\t}\n\n\treturn { id, initControlValue, newOptionState, Controller, OptionField, populate, generate };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"_1NEr4\",\"numberInput\":\"_2drmu\",\"fieldset\":\"_2eY19\",\"header\":\"_1DFIs\",\"controls\":\"_2NQPL\",\"label\":\"_2hMcD\",\"body\":\"_1QAox\"};","import type { ControllerProps, OptionFieldProps, OptionType } from \".\";\nimport { CheckBox, ControlField, NumberInput, RangeInput } from \"../ui\";\nimport styles from \"./NumberOption.scss\";\n\ninterface NumberRange {\n\tmin: number;\n\tmax: number;\n\tstep: number;\n}\n\ninterface Metadata extends NumberRange {\n\tid: string;\n\tlabel: string;\n\toffset?: number;\n\tdefaultValue: number;\n}\n\nexport default function numberOption(data: Metadata): OptionType<number, NumberRange> {\n\tconst { id, label, min, max, step, offset = 0, defaultValue } = data;\n\n\tfunction sequence(range: NumberRange) {\n\t\tconst { min, max, step } = range;\n\t\treturn new Array<number>(Math.ceil((max + 1 - min) / step))\n\t\t\t.fill(min)\n\t\t\t.map((v, i) => v + offset + i * step);\n\t}\n\n\tfunction initControlValue(range: NumberRange) {\n\t\tconst labels = sequence(range).map(v => v.toString());\n\t\treturn { value: range.min, labels };\n\t}\n\n\tfunction newOptionState() {\n\t\treturn [defaultValue, { min, max, step }] as [number, NumberRange];\n\t}\n\n\tfunction Controller(props: ControllerProps<number, NumberRange>) {\n\t\tconst { value, range, onChange } = props;\n\t\tconst { min, max, step } = range;\n\n\t\treturn (\n\t\t\t<ControlField {...props}>\n\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t<span className={styles.label}>{label}</span>\n\t\t\t\t\t{value}\n\t\t\t\t</div>\n\t\t\t\t<RangeInput\n\t\t\t\t\tname={id}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tstep={step}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t\tonValueChange={onChange}\n\t\t\t\t/>\n\t\t\t</ControlField>\n\t\t);\n\t}\n\n\tfunction ConstMode(props: OptionFieldProps<number, NumberRange>) {\n\t\tconst { value, onValueChange } = props;\n\n\t\treturn (\n\t\t\t<RangeInput\n\t\t\t\tclassName={styles.body}\n\t\t\t\tname={id}\n\t\t\t\tvalue={value}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\tstep={step}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t/>\n\t\t);\n\t}\n\n\tfunction VariableMode(props: OptionFieldProps<number, NumberRange>) {\n\t\tconst { range, onRangeChange } = props;\n\n\t\tfunction handleChange(name: keyof NumberRange, valueAsNumber: number) {\n\t\t\tonRangeChange({ ...range, [name]: valueAsNumber });\n\t\t}\n\n\t\tinterface FieldProps {\n\t\t\tname: keyof NumberRange;\n\t\t\tmin?: number;\n\t\t\tmax?: number;\n\t\t\tstep?: number;\n\t\t}\n\n\t\tconst Field = (props: FieldProps) => {\n\t\t\tconst { name, min, max, step } = { ...data, ...props };\n\n\t\t\treturn (\n\t\t\t\t<label className={styles.spinner}>\n\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tclassName={styles.numberInput}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={range[name]}\n\t\t\t\t\t\tmin={min}\n\t\t\t\t\t\tmax={max}\n\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\tonValueChange={v => handleChange(name, v)}\n\t\t\t\t\t/>\n\t\t\t\t</label>\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\t<div className={styles.body}>\n\t\t\t\t<Field name=\"min\" max={range.max}/>\n\t\t\t\t<Field name=\"max\" min={range.min}/>\n\t\t\t\t<Field name=\"step\" min={step}/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfunction OptionField(props: OptionFieldProps<number, NumberRange>) {\n\t\tconst { isVariable, value, onVariabilityChange } = props;\n\n\t\treturn (\n\t\t\t<fieldset className={styles.fieldset}>\n\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t<CheckBox\n\t\t\t\t\t\tclassName={styles.label}\n\t\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\t\tonValueChange={onVariabilityChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</CheckBox>\n\t\t\t\t\t{!isVariable && value}\n\t\t\t\t</div>\n\t\t\t\t{isVariable ? <VariableMode {...props}/> : <ConstMode {...props}/>}\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\tfunction populate(value: number, options: any) {\n\t\toptions[id] = offset + value;\n\t}\n\n\tfunction generate(range: NumberRange, options: any) {\n\t\treturn sequence(range).map(value => ({ ...options, [id]: value }));\n\t}\n\n\treturn { id, initControlValue, newOptionState, Controller, OptionField, populate, generate };\n}\n","import { OptionType } from \"../form\";\nimport { EncoderState } from \"./index\";\n\nexport function buildOptions(templates: OptionType[], state: EncoderState) {\n\tconst { varNames, values, ranges } = state;\n\n\tfunction map(list: any[], t: OptionType) {\n\t\treturn list\n\t\t\t.map(options => {\n\t\t\t\tif (varNames.includes(t.id)) {\n\t\t\t\t\treturn t.generate(ranges[t.id], options);\n\t\t\t\t}\n\t\t\t\tt.populate(values[t.id], options);\n\t\t\t\treturn [options];\n\t\t\t})\n\t\t\t.reduce((p, c) => p.concat(c), []);\n\t}\n\n\treturn templates.reduce(map, [{}]);\n}\n\nexport function mergeOptions<T>(base: T, from: Partial<T>) {\n\tconst invalidKey = process.env.NODE_ENV === \"production\"\n\t\t? undefined\n\t\t: Object.keys(from).find(k => !(k in base));\n\n\tif (invalidKey) {\n\t\tthrow new Error(`Unexpected options property: ${invalidKey}`);\n\t}\n\treturn { ...base, ...from } as T;\n}\n\nexport type EncodeModuleLoader<T> = () => Promise<EncodeModule<T>>;\n\nexport interface EncodeModule<T> {\n\tencode(data: BufferSource, width: number, height: number, options: T): Uint8Array | null;\n}\n\nexport function wasmEncodeFn<T>(loader: EncodeModuleLoader<T>) {\n\tlet module: Promise<EncodeModule<T>> | undefined;\n\n\treturn async (image: ImageData, options: T) => {\n\t\tconst { data, width, height } = image;\n\t\tif (!module) {\n\t\t\tmodule = loader();\n\t\t}\n\t\tconst result = (await module).encode(data, width, height, options);\n\t\tif (result) {\n\t\t\treturn result.buffer;\n\t\t}\n\t\tthrow new Error(\"Encoding error\");\n\t};\n}\n\nexport interface DecodeModule {\n\tdecode(data: BufferSource): ImageData | null;\n}\n\nexport type DecodeModuleLoader = () => Promise<DecodeModule>;\n\nexport function wasmDecodeFn(loader: DecodeModuleLoader) {\n\tlet module: Promise<DecodeModule> | undefined;\n\n\treturn async (data: ArrayBuffer) => {\n\t\tif (!module) {\n\t\t\tmodule = loader();\n\t\t}\n\t\tconst result = (await module).decode(data);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\tthrow new Error(\"Decoding error\");\n\t};\n}\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { boolOption, enumOption, numberOption, OptionType } from \"../../form\";\nimport { EncodeOptions } from \"./codec\";\nimport { ControlProps, ControlStateMap, EncoderState, OptionListProps } from \"../index\";\nimport { buildOptions, mergeOptions } from \"../common\";\n\nexport const name = \"MozJPEG\";\nexport const mimeType = \"image/jpeg\";\nexport const extension = \"jpg\";\n\nconst ColorSpace = {\n\tGRAYSCALE: 1,\n\tRGB: 2,\n\tYCbCr: 3,\n};\n\nconst Quantization = {\n\t\"JPEG Annex K\": 0,\n\t\"Flat\": 1,\n\t\"MSSIM-tuned Kodak\": 2,\n\t\"ImageMagick\": 3,\n\t\"PSNR-HVS-M-tuned Kodak\": 4,\n\t\"Klein et al\": 5,\n\t\"Watson et al\": 6,\n\t\"Ahumada et al\": 7,\n\t\"Peterson et al\": 8,\n};\n\nconst defaultOptions: EncodeOptions = {\n\tquality: 75,\n\tbaseline: false,\n\tarithmetic: false,\n\tprogressive: true,\n\toptimize_coding: true,\n\tsmoothing: 0,\n\tcolor_space: ColorSpace.YCbCr,\n\tquant_table: Quantization.ImageMagick,\n\ttrellis_multipass: false,\n\ttrellis_opt_zero: false,\n\ttrellis_opt_table: false,\n\ttrellis_loops: 1,\n\tauto_subsample: true,\n\tchroma_subsample: 2,\n\tseparate_chroma_quality: false,\n\tchroma_quality: 75,\n};\n\nconst templates: OptionType[] = [\n\tnumberOption({\n\t\tid: \"quality\",\n\t\tlabel: \"Quality (-q)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tenumOption({\n\t\tid: \"color_space\",\n\t\tlabel: \"Channels\",\n\t\tenumObject: ColorSpace,\n\t\tdefaultValue: \"YCbCr\",\n\t}),\n\tenumOption({\n\t\tid: \"quant_table\",\n\t\tlabel: \"Quantization\",\n\t\tenumObject: Quantization,\n\t\tdefaultValue: \"ImageMagick\",\n\t}),\n\tboolOption({\n\t\tid: \"arithmetic\",\n\t\tlabel: \"Arithmetic\",\n\t\tdefaultValue: defaultOptions.arithmetic,\n\t}),\n\tboolOption({\n\t\tid: \"auto_subsample\",\n\t\tlabel: \"Auto subsample chroma\",\n\t\tdefaultValue: defaultOptions.auto_subsample,\n\t}),\n\n\tboolOption({\n\t\tid: \"separate_chroma_quality\",\n\t\tlabel: \"Separate chroma quality\",\n\t\tdefaultValue: defaultOptions.separate_chroma_quality,\n\t}),\n\tnumberOption({\n\t\tid: \"chroma_quality\",\n\t\tlabel: \"Chroma quality\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.chroma_quality,\n\t}),\n\n\tnumberOption({\n\t\tid: \"smoothing\",\n\t\tlabel: \"Smoothing\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.smoothing,\n\t}),\n\n\tboolOption({\n\t\tid: \"baseline\",\n\t\tlabel: \"Pointless spec compliance\",\n\t\tdefaultValue: defaultOptions.baseline,\n\t}),\n\tboolOption({\n\t\tid: \"progressive\",\n\t\tlabel: \"Progressive\",\n\t\tdefaultValue: defaultOptions.progressive,\n\t}),\n\tboolOption({\n\t\tid: \"optimize_coding\",\n\t\tlabel: \"Optimize Huffman table\",\n\t\tdefaultValue: defaultOptions.optimize_coding,\n\t}),\n\n\tboolOption({\n\t\tid: \"trellis_multipass\",\n\t\tlabel: \"Trellis multipass\",\n\t\tdefaultValue: defaultOptions.trellis_multipass,\n\t}),\n\tboolOption({\n\t\tid: \"trellis_opt_zero\",\n\t\tlabel: \"Optimize zero block runs\",\n\t\tdefaultValue: defaultOptions.trellis_opt_zero,\n\t}),\n\tboolOption({\n\t\tid: \"trellis_opt_table\",\n\t\tlabel: \"Optimize after trellis quantization\",\n\t\tdefaultValue: defaultOptions.trellis_opt_table,\n\t}),\n\tnumberOption({\n\t\tid: \"trellis_loops\",\n\t\tlabel: \"Trellis quantization passes\",\n\t\tmin: 0,\n\t\tmax: 50,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.trellis_loops,\n\t}),\n];\n\nexport function initControlState(state: EncoderState): ControlStateMap {\n\tconst { varNames, ranges, values } = state;\n\tconst labels: Record<string, string[]> = {};\n\n\tfor (const t of templates) {\n\t\tif (!varNames.includes(t.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst init = t.initControlValue(ranges[t.id]);\n\t\tvalues[t.id] = init.value;\n\t\tlabels[t.id] = init.labels;\n\t}\n\treturn { values, labels };\n}\n\nexport function initOptionsState(saved?: EncoderState): EncoderState {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst values: Record<string, any> = {};\n\tconst ranges: Record<string, any> = {};\n\n\tfor (const t of templates) {\n\t\tconst [value, range] = t.newOptionState();\n\t\tvalues[t.id] = value;\n\t\tranges[t.id] = range;\n\t}\n\treturn { varNames: [], values, ranges };\n}\n\nexport function OptionsPanel(props: OptionListProps) {\n\tconst { state, onChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tfunction handleVarChange(id: string, value: boolean) {\n\t\tlet { varNames } = state;\n\t\tif (value) {\n\t\t\tvarNames.push(id);\n\t\t} else {\n\t\t\tvarNames = varNames.filter(v => v !== id);\n\t\t}\n\t\tonChange({ ...state, varNames });\n\t}\n\n\tfunction handleValueChange(id: string, value: any) {\n\t\tonChange({ ...state, values: { ...values, [id]: value } });\n\t}\n\n\tfunction handleRangeChange(id: string, range: any) {\n\t\tonChange({ ...state, ranges: { ...ranges, [id]: range } });\n\t}\n\n\tconst items = templates.map(({ id, OptionField }) =>\n\t\t<OptionField\n\t\t\tkey={id}\n\t\t\tisVariable={varNames.includes(id)}\n\t\t\tvalue={values[id]}\n\t\t\trange={ranges[id]}\n\t\t\tonValueChange={v => handleValueChange(id, v)}\n\t\t\tonRangeChange={v => handleRangeChange(id, v)}\n\t\t\tonVariabilityChange={v => handleVarChange(id, v)}\n\t\t/>,\n\t);\n\n\treturn <>{items}</>;\n}\n\nexport function Controls(props: ControlProps) {\n\tconst { state, variableName, onChange, onVariableChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tconst fields = templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(({ id, Controller }) => {\n\n\t\t\tfunction handleChange(nval: any) {\n\t\t\t\tonVariableChange(id);\n\t\t\t\tonChange({ ...values, [id]: nval });\n\t\t\t}\n\n\t\t\treturn <Controller\n\t\t\t\tkey={id}\n\t\t\t\tactive={id === variableName}\n\t\t\t\tvalue={values[id]}\n\t\t\t\trange={ranges[id]}\n\t\t\t\tonFocus={() => onVariableChange(id)}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>;\n\t\t});\n\n\treturn <>{fields}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.mozjpegEncode(mergeOptions(defaultOptions, options));\n}\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport type { EncodeOptions } from 'codecs/jxl/enc/jxl_enc';\n\nexport { EncodeOptions };\n\nexport const label = 'JPEG XL (beta)';\nexport const mimeType = 'image/jxl';\nexport const extension = 'jxl';\nexport const defaultOptions: EncodeOptions = {\n  speed: 4,\n  quality: 75,\n  progressive: false,\n  epf: -1,\n  nearLossless: 0,\n  lossyPalette: false,\n};\n","import { Remote } from \"comlink\";\nimport { defaultOptions } from \"squoosh/src/features/encoders/jxl/shared/meta\";\nimport { WorkerApi } from \"../../worker\";\nimport { boolOption, numberOption, OptionType } from \"../../form\";\nimport { buildOptions, mergeOptions } from \"../common\";\nimport { ControlProps, ControlStateMap, EncoderState, OptionListProps } from \"../index\";\nimport { EncodeOptions } from \"./codec\";\n\nexport const name = \"JPEG XL\";\nexport const mimeType = \"image/jxl\";\nexport const extension = \"jxl\";\n\nconst templates: OptionType[] = [\n\tnumberOption({ // 100 = lossless\n\t\tid: \"quality\",\n\t\tlabel: \"Quality\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 0.1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tboolOption({\n\t\tid: \"lossyPalette\",\n\t\tlabel: \"Slight loss\",\n\t\tdefaultValue: defaultOptions.lossyPalette,\n\t}),\n\tboolOption({\n\t\tid: \"progressive\",\n\t\tlabel: \"Progressive\",\n\t\tdefaultValue: defaultOptions.progressive,\n\t}),\n\tnumberOption({\n\t\tid: \"speed\",\n\t\tlabel: \"Speed\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.speed,\n\t}),\n\tnumberOption({\n\t\tid: \"epf\",\n\t\tlabel: \"Edge preserving filter\",\n\t\tmin: -1,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.epf,\n\t}),\n];\n\nexport function initControlState(state: EncoderState): ControlStateMap {\n\tconst { varNames, ranges, values } = state;\n\tconst labels: Record<string, string[]> = {};\n\n\tfor (const t of templates) {\n\t\tif (!varNames.includes(t.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst init = t.initControlValue(ranges[t.id]);\n\t\tvalues[t.id] = init.value;\n\t\tlabels[t.id] = init.labels;\n\t}\n\treturn { values, labels };\n}\n\nexport function initOptionsState(saved?: EncoderState): EncoderState {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst values: Record<string, any> = {};\n\tconst ranges: Record<string, any> = {};\n\n\tfor (const t of templates) {\n\t\tconst [value, range] = t.newOptionState();\n\t\tvalues[t.id] = value;\n\t\tranges[t.id] = range;\n\t}\n\treturn { varNames: [], values, ranges };\n}\n\nexport function OptionsPanel(props: OptionListProps) {\n\tconst { state, onChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tfunction handleVarChange(id: string, value: boolean) {\n\t\tlet { varNames } = state;\n\t\tif (value) {\n\t\t\tvarNames.push(id);\n\t\t} else {\n\t\t\tvarNames = varNames.filter(v => v !== id);\n\t\t}\n\t\tonChange({ ...state, varNames });\n\t}\n\n\tfunction handleValueChange(id: string, value: any) {\n\t\tonChange({ ...state, values: { ...values, [id]: value } });\n\t}\n\n\tfunction handleRangeChange(id: string, range: any) {\n\t\tonChange({ ...state, ranges: { ...ranges, [id]: range } });\n\t}\n\n\tconst items = templates.map(({ id, OptionField }) =>\n\t\t<OptionField\n\t\t\tkey={id}\n\t\t\tisVariable={varNames.includes(id)}\n\t\t\tvalue={values[id]}\n\t\t\trange={ranges[id]}\n\t\t\tonValueChange={v => handleValueChange(id, v)}\n\t\t\tonRangeChange={v => handleRangeChange(id, v)}\n\t\t\tonVariabilityChange={v => handleVarChange(id, v)}\n\t\t/>,\n\t);\n\n\treturn <>{items}</>;\n}\n\nexport function Controls(props: ControlProps) {\n\tconst { state, variableName, onChange, onVariableChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tconst fields = templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(({ id, Controller }) => {\n\n\t\t\tfunction handleChange(nval: any) {\n\t\t\t\tonVariableChange(id);\n\t\t\t\tonChange({ ...values, [id]: nval });\n\t\t\t}\n\n\t\t\treturn <Controller\n\t\t\t\tkey={id}\n\t\t\t\tactive={id === variableName}\n\t\t\t\tvalue={values[id]}\n\t\t\t\trange={ranges[id]}\n\t\t\t\tonFocus={() => onVariableChange(id)}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>;\n\t\t});\n\n\treturn <>{fields}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.jxlEncode(mergeOptions(defaultOptions, options));\n}\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport type { EncodeOptions } from 'codecs/webp/enc/webp_enc';\n\nexport { EncodeOptions };\n\nexport const label = 'WebP';\nexport const mimeType = 'image/webp';\nexport const extension = 'webp';\n// These come from struct WebPConfig in encode.h.\nexport const defaultOptions: EncodeOptions = {\n  quality: 75,\n  target_size: 0,\n  target_PSNR: 0,\n  method: 4,\n  sns_strength: 50,\n  filter_strength: 60,\n  filter_sharpness: 0,\n  filter_type: 1,\n  partitions: 0,\n  segments: 4,\n  pass: 1,\n  show_compressed: 0,\n  preprocessing: 0,\n  autofilter: 0,\n  partition_limit: 0,\n  alpha_compression: 1,\n  alpha_filtering: 1,\n  alpha_quality: 100,\n  lossless: 0,\n  exact: 0,\n  image_hint: 0,\n  emulate_jpeg_size: 0,\n  thread_level: 0,\n  low_memory: 0,\n  near_lossless: 100,\n  use_delta_palette: 0,\n  use_sharp_yuv: 0,\n};\n","import { Remote } from \"comlink\";\nimport { defaultOptions } from \"squoosh/src/features/encoders/webP/shared/meta\";\nimport { WorkerApi } from \"../../worker\";\nimport { boolOption, enumOption, numberOption, OptionType, presetOption } from \"../../form\";\nimport { EncodeOptions } from \"./codec\";\nimport { ControlProps, ControlStateMap, EncoderState, OptionListProps } from \"../index\";\nimport { buildOptions, mergeOptions } from \"../common\";\n\nexport const name = \"WebP\";\nexport const mimeType = \"image/webp\";\nexport const extension = \"webp\";\n\nconst WebPImageHint = {\n\tDefault: 0,\n\tPicture: 1,\n\tPhoto: 2,\n\tGraph: 3,\n};\n\n// https://github.com/webmproject/libwebp/blob/83604bf3ac2212a353c53d8c9df35d94fa9ab000/src/enc/config_enc.c#L62\nconst WebPPreset = {\n\tdefault: {\n\t\t// nothing to do.\n\t},\n\tphoto: {\n\t\tsns_strength: 80,\n\t\tfilter_sharpness: 3,\n\t\tfilter_strength: 30,\n\t\tpreprocessing: (v: number) => v | 2,\n\t},\n\tpicture: {\n\t\tsns_strength: 80,\n\t\tfilter_sharpness: 4,\n\t\tfilter_strength: 35,\n\t\tpreprocessing: (v: number) => v & ~2,\n\t},\n\tdrawing: {\n\t\tsns_strength: 25,\n\t\tfilter_sharpness: 6,\n\t\tfilter_strength: 10,\n\t},\n\ticon: {\n\t\tsns_strength: 25,\n\t\tfilter_strength: 10,\n\t\tpreprocessing: (v: number) => v & ~2,\n\t},\n\ttext: {\n\t\tsns_strength: 0,\n\t\tfilter_strength: 0,\n\t\tsegments: 2,\n\t\tpreprocessing: (v: number) => v & ~2,\n\t},\n};\n\nconst templates: OptionType[] = [\n\tboolOption({\n\t\tid: \"lossless\",\n\t\tlabel: \"lossless\",\n\t\tdefaultValue: defaultOptions.lossless,\n\t}),\n\tnumberOption({\n\t\tid: \"quality\",\n\t\tlabel: \"Quality (-q)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tnumberOption({\n\t\tid: \"near_lossless\",\n\t\tlabel: \"Near lossless (-near_lossless)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.near_lossless,\n\t}),\n\tnumberOption({\n\t\tid: \"method\",\n\t\tlabel: \"Method (-m)\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.method,\n\t}),\n\tpresetOption({\n\t\tid: \"preset\",\n\t\tlabel: \"Preset (-preset)\",\n\t\tenumObject: WebPPreset,\n\t\tdefaultValue: \"default\",\n\t}),\n\tnumberOption({\n\t\tid: \"sns_strength\",\n\t\tlabel: \"Spatial noise shaping (-sns)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.sns_strength,\n\t}),\n\tboolOption({\n\t\tid: \"filter_type\",\n\t\tlabel: \"User strong filter (-strong)\",\n\t\tdefaultValue: defaultOptions.filter_type,\n\t}),\n\n\tboolOption({\n\t\tid: \"autofilter\",\n\t\tlabel: \"Auto adjust filter strength (-af)\",\n\t\tdefaultValue: defaultOptions.autofilter,\n\t}),\n\tnumberOption({\n\t\tid: \"filter_strength\",\n\t\tlabel: \"Filter strength (-f)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.filter_strength,\n\t}),\n\tnumberOption({\n\t\tid: \"filter_sharpness\",\n\t\tlabel: \"Filter sharpness (-sharpness)\",\n\t\tmin: 0,\n\t\tmax: 7,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.filter_sharpness,\n\t}),\n\tboolOption({\n\t\tid: \"use_sharp_yuv\",\n\t\tlabel: \"Sharp YUV\",\n\t\tdefaultValue: defaultOptions.use_sharp_yuv,\n\t}),\n\tenumOption({\n\t\tid: \"image_hint\",\n\t\tlabel: \"Hint (-hint)\",\n\t\tenumObject: WebPImageHint,\n\t\tdefaultValue: \"Default\",\n\t}),\n];\n\nexport function initControlState(state: EncoderState): ControlStateMap {\n\tconst { varNames, ranges, values } = state;\n\tconst labels: Record<string, string[]> = {};\n\n\tfor (const t of templates) {\n\t\tif (!varNames.includes(t.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst init = t.initControlValue(ranges[t.id]);\n\t\tvalues[t.id] = init.value;\n\t\tlabels[t.id] = init.labels;\n\t}\n\treturn { values, labels };\n}\n\nexport function initOptionsState(saved?: EncoderState): EncoderState {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst values: Record<string, any> = {};\n\tconst ranges: Record<string, any> = {};\n\n\tfor (const t of templates) {\n\t\tconst [value, range] = t.newOptionState();\n\t\tvalues[t.id] = value;\n\t\tranges[t.id] = range;\n\t}\n\t(ranges.quality as any).step = 5;\n\treturn { varNames: [\"quality\"], values, ranges };\n}\n\nexport function OptionsPanel(props: OptionListProps) {\n\tconst { state, onChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tfunction handleVarChange(id: string, value: boolean) {\n\t\tlet { varNames } = state;\n\t\tif (value) {\n\t\t\tvarNames.push(id);\n\t\t} else {\n\t\t\tvarNames = varNames.filter(v => v !== id);\n\t\t}\n\t\tonChange({ ...state, varNames });\n\t}\n\n\tfunction handleValueChange(id: string, value: any) {\n\t\tonChange({ ...state, values: { ...values, [id]: value } });\n\t}\n\n\tfunction handleRangeChange(id: string, range: any) {\n\t\tonChange({ ...state, ranges: { ...ranges, [id]: range } });\n\t}\n\n\tconst items = templates.map(({ id, OptionField }) =>\n\t\t<OptionField\n\t\t\tkey={id}\n\t\t\tisVariable={varNames.includes(id)}\n\t\t\tvalue={values[id]}\n\t\t\trange={ranges[id]}\n\t\t\tonValueChange={v => handleValueChange(id, v)}\n\t\t\tonRangeChange={v => handleRangeChange(id, v)}\n\t\t\tonVariabilityChange={v => handleVarChange(id, v)}\n\t\t/>,\n\t);\n\n\treturn <>{items}</>;\n}\n\nexport function Controls(props: ControlProps) {\n\tconst { state, variableName, onChange, onVariableChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tconst fields = templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(({ id, Controller }) => {\n\n\t\t\tfunction handleChange(nval: any) {\n\t\t\t\tonVariableChange(id);\n\t\t\t\tonChange({ ...values, [id]: nval });\n\t\t\t}\n\n\t\t\treturn <Controller\n\t\t\t\tkey={id}\n\t\t\t\tactive={id === variableName}\n\t\t\t\tvalue={values[id]}\n\t\t\t\trange={ranges[id]}\n\t\t\t\tonFocus={() => onVariableChange(id)}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>;\n\t\t});\n\n\treturn <>{fields}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.webpEncode(mergeOptions(defaultOptions, options));\n}\n","import enumOption, { Metadata } from \"./EnumOption\";\n\nexport default function presetOption<T>(data: Metadata<T>) {\n\tconst { enumObject } = data;\n\tconst parent = enumOption(data);\n\n\tparent.generate = (range, options) => range.map(name => {\n\t\tconst copy = { ...options };\n\t\tparent.populate(name, copy);\n\t\treturn copy;\n\t});\n\n\n\tparent.populate = (name, options) => {\n\t\tObject.entries(enumObject[name])\n\t\t\t.forEach(([k, v]) => options[k] = (typeof v === \"function\") ? v(options[k]) : v);\n\t};\n\n\treturn parent;\n}\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport type { EncodeOptions } from 'codecs/avif/enc/avif_enc';\n\nexport { EncodeOptions };\n\nexport const label = 'AVIF';\nexport const mimeType = 'image/avif';\nexport const extension = 'avif';\nexport const defaultOptions: EncodeOptions = {\n  cqLevel: 33,\n  minQuantizerAlpha: 0,\n  tileColsLog2: 0,\n  tileRowsLog2: 0,\n  speed: 8,\n  subsample: 1,\n  chromaDeltaQ: false,\n  sharpness: 0,\n  targetSsim: false,\n};\n","import { Remote } from \"comlink\";\nimport { defaultOptions, EncodeOptions } from \"squoosh/src/features/encoders/avif/shared/meta\";\nimport { WorkerApi } from \"../../worker\";\nimport { enumOption, numberOption, OptionType } from \"../../form\";\nimport { ControlProps, ControlStateMap, EncoderState, OptionListProps } from \"../index\";\nimport { buildOptions } from \"../common\";\n\nexport const name = \"AVIF\";\nexport const mimeType = \"image/avif\";\nexport const extension = \"avif\";\n\nexport const Subsampling = {\n\tYUV400: 0,\n\tYUV420: 1,\n\tYUV422: 2,\n\tYUV444: 3,\n};\n\nconst templates: OptionType[] = [\n\tnumberOption({\n\t\tid: \"minQuantizer\",\n\t\tlabel: \"Min quality\",\n\t\tmin: 0,\n\t\tmax: 63,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.minQuantizer,\n\t}),\n\tnumberOption({\n\t\tid: \"maxQuantizer\",\n\t\tlabel: \"Max quality\",\n\t\tmin: 0,\n\t\tmax: 63,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.maxQuantizer,\n\t}),\n\tnumberOption({\n\t\tid: \"minQuantizerAlpha\",\n\t\tlabel: \"Min alpha quality\",\n\t\tmin: 0,\n\t\tmax: 63,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.minQuantizerAlpha,\n\t}),\n\tnumberOption({\n\t\tid: \"maxQuantizerAlpha\",\n\t\tlabel: \"Max alpha quality\",\n\t\tmin: 0,\n\t\tmax: 63,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.maxQuantizerAlpha,\n\t}),\n\tnumberOption({\n\t\tid: \"tileRowsLog2\",\n\t\tlabel: \"Log2 of tile rows\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.tileRowsLog2,\n\t}),\n\tnumberOption({\n\t\tid: \"tileColsLog2\",\n\t\tlabel: \"Log2 of tile cols\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.tileColsLog2,\n\t}),\n\tnumberOption({\n\t\tid: \"speed\",\n\t\tlabel: \"Speed\",\n\t\tmin: 0,\n\t\tmax: 10,\n\t\tstep: 8,\n\t\tdefaultValue: defaultOptions.speed,\n\t}),\n\tenumOption({\n\t\tid: \"subsample\",\n\t\tlabel: \"Subsample\",\n\t\tenumObject: Subsampling,\n\t\tdefaultValue: \"YUV420\",\n\t}),\n];\nexport function initControlState(state: EncoderState): ControlStateMap {\n\tconst { varNames, ranges, values } = state;\n\tconst labels: Record<string, string[]> = {};\n\n\tfor (const t of templates) {\n\t\tif (!varNames.includes(t.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst init = t.initControlValue(ranges[t.id]);\n\t\tvalues[t.id] = init.value;\n\t\tlabels[t.id] = init.labels;\n\t}\n\treturn { values, labels };\n}\n\nexport function initOptionsState(saved: EncodeOptions) {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst values: Record<string, any> = {};\n\tconst ranges: Record<string, any> = {};\n\n\tfor (const t of templates) {\n\t\tconst [value, range] = t.newOptionState();\n\t\tvalues[t.id] = value;\n\t\tranges[t.id] = range;\n\t}\n\treturn { varNames: [], values, ranges };\n}\n\nexport function OptionsPanel(props: OptionListProps) {\n\tconst { state, onChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tfunction handleVarChange(id: string, value: boolean) {\n\t\tlet { varNames } = state;\n\t\tif (value) {\n\t\t\tvarNames.push(id);\n\t\t} else {\n\t\t\tvarNames = varNames.filter(v => v !== id);\n\t\t}\n\t\tonChange({ ...state, varNames });\n\t}\n\n\tfunction handleValueChange(id: string, value: any) {\n\t\tonChange({ ...state, values: { ...values, [id]: value } });\n\t}\n\n\tfunction handleRangeChange(id: string, range: any) {\n\t\tonChange({ ...state, ranges: { ...ranges, [id]: range } });\n\t}\n\n\tconst items = templates.map(({ id, OptionField }) =>\n\t\t<OptionField\n\t\t\tkey={id}\n\t\t\tisVariable={varNames.includes(id)}\n\t\t\tvalue={values[id]}\n\t\t\trange={ranges[id]}\n\t\t\tonValueChange={v => handleValueChange(id, v)}\n\t\t\tonRangeChange={v => handleRangeChange(id, v)}\n\t\t\tonVariabilityChange={v => handleVarChange(id, v)}\n\t\t/>,\n\t);\n\n\treturn <>{items}</>;\n}\n\nexport function Controls(props: ControlProps) {\n\tconst { state, variableName, onChange, onVariableChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tconst fields = templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(({ id, Controller }) => {\n\n\t\t\tfunction handleChange(nval: any) {\n\t\t\t\tonVariableChange(id);\n\t\t\t\tonChange({ ...values, [id]: nval });\n\t\t\t}\n\n\t\t\treturn <Controller\n\t\t\t\tkey={id}\n\t\t\t\tactive={id === variableName}\n\t\t\t\tvalue={values[id]}\n\t\t\t\trange={ranges[id]}\n\t\t\t\tonFocus={() => onVariableChange(id)}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>;\n\t\t});\n\n\treturn <>{fields}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function encode(options: any, worker: Remote<WorkerApi>) {\n\treturn worker.avifEncode({ ...defaultOptions, ...options });\n}\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { boolOption, enumOption, numberOption, OptionType } from \"../../form\";\nimport { EncodeOptions } from \"./codec\";\nimport { ControlProps, ControlStateMap, EncoderState, OptionListProps } from \"../index\";\nimport { buildOptions, mergeOptions } from \"../common\";\n\nexport const name = \"WebP v2\";\nexport const mimeType = \"image/webp2\";\nexport const extension = \"wp2\";\n\nexport const UVMode = {\n\t\"Adapt\": 0,\n\t\"420\": 1,\n\t\"444\": 2,\n\t\"Auto\": 3,\n};\n\nexport const Csp = {\n\tYCoCg: 0,\n\tYCbCr: 1,\n\tCustom: 2,\n\tYIQ: 3,\n};\n\nconst defaultOptions: EncodeOptions = {\n\tquality: 75,\n\talpha_quality: 75,\n\teffort: 5,\n\tpass: 1,\n\tsns: 50,\n\tuv_mode: UVMode.Adapt,\n\tcsp_type: Csp.YCoCg,\n\terror_diffusion: 0,\n\tuse_random_matrix: false,\n};\n\nconst templates: OptionType[] = [\n\t// boolOption({\n\t// \tid: \"lossless\",\n\t// \tlabel: \"lossless\",\n\t// \tdefaultValue: defaultOptions.lossless,\n\t// }),\n\tnumberOption({\n\t\tid: \"quality\",\n\t\tlabel: \"Quality\",\n\t\tmin: 0,\n\t\tmax: 95,\n\t\tstep: 0.1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tnumberOption({\n\t\tid: \"alpha_quality\",\n\t\tlabel: \"Alpha Quality\",\n\t\tmin: 0,\n\t\tmax: 95,\n\t\tstep: 0.1,\n\t\tdefaultValue: defaultOptions.alpha_quality,\n\t}),\n\tnumberOption({\n\t\tid: \"effort\",\n\t\tlabel: \"Effort\",\n\t\tmin: 0,\n\t\tmax: 9,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.effort,\n\t}),\n\tnumberOption({\n\t\tid: \"pass\",\n\t\tlabel: \"Passes\",\n\t\tmin: 0,\n\t\tmax: 9,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.pass,\n\t}),\n\tnumberOption({\n\t\tid: \"sns\",\n\t\tlabel: \"Spatial noise shaping\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.sns,\n\t}),\n\tnumberOption({\n\t\tid: \"error_diffusion\",\n\t\tlabel: \"Error diffusion\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.error_diffusion,\n\t}),\n\tenumOption({\n\t\tid: \"uv_mode\",\n\t\tlabel: \"UVMode\",\n\t\tenumObject: UVMode,\n\t\tdefaultValue: \"Adapt\",\n\t}),\n\tenumOption({\n\t\tid: \"csp_type\",\n\t\tlabel: \"Color space\",\n\t\tenumObject: Csp,\n\t\tdefaultValue: \"YCoCg\",\n\t}),\n\tboolOption({\n\t\tid: \"use_random_matrix\",\n\t\tlabel: \"Random matrix\",\n\t\tdefaultValue: defaultOptions.use_random_matrix,\n\t}),\n];\nexport function initControlState(state: EncoderState): ControlStateMap {\n\tconst { varNames, ranges, values } = state;\n\tconst labels: Record<string, string[]> = {};\n\n\tfor (const t of templates) {\n\t\tif (!varNames.includes(t.id)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst init = t.initControlValue(ranges[t.id]);\n\t\tvalues[t.id] = init.value;\n\t\tlabels[t.id] = init.labels;\n\t}\n\treturn { values, labels };\n}\n\nexport function initOptionsState(saved?: EncoderState): EncoderState {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst values: Record<string, any> = {};\n\tconst ranges: Record<string, any> = {};\n\n\tfor (const t of templates) {\n\t\tconst [value, range] = t.newOptionState();\n\t\tvalues[t.id] = value;\n\t\tranges[t.id] = range;\n\t}\n\treturn { varNames: [], values, ranges };\n}\n\nexport function OptionsPanel(props: OptionListProps) {\n\tconst { state, onChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tfunction handleVarChange(id: string, value: boolean) {\n\t\tlet { varNames } = state;\n\t\tif (value) {\n\t\t\tvarNames.push(id);\n\t\t} else {\n\t\t\tvarNames = varNames.filter(v => v !== id);\n\t\t}\n\t\tonChange({ ...state, varNames });\n\t}\n\n\tfunction handleValueChange(id: string, value: any) {\n\t\tonChange({ ...state, values: { ...values, [id]: value } });\n\t}\n\n\tfunction handleRangeChange(id: string, range: any) {\n\t\tonChange({ ...state, ranges: { ...ranges, [id]: range } });\n\t}\n\n\tconst items = templates.map(({ id, OptionField }) =>\n\t\t<OptionField\n\t\t\tkey={id}\n\t\t\tisVariable={varNames.includes(id)}\n\t\t\tvalue={values[id]}\n\t\t\trange={ranges[id]}\n\t\t\tonValueChange={v => handleValueChange(id, v)}\n\t\t\tonRangeChange={v => handleRangeChange(id, v)}\n\t\t\tonVariabilityChange={v => handleVarChange(id, v)}\n\t\t/>,\n\t);\n\n\treturn <>{items}</>;\n}\n\nexport function Controls(props: ControlProps) {\n\tconst { state, variableName, onChange, onVariableChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tconst fields = templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(({ id, Controller }) => {\n\n\t\t\tfunction handleChange(nval: any) {\n\t\t\t\tonVariableChange(id);\n\t\t\t\tonChange({ ...values, [id]: nval });\n\t\t\t}\n\n\t\t\treturn <Controller\n\t\t\t\tkey={id}\n\t\t\t\tactive={id === variableName}\n\t\t\t\tvalue={values[id]}\n\t\t\t\trange={ranges[id]}\n\t\t\t\tonFocus={() => onVariableChange(id)}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>;\n\t\t});\n\n\treturn <>{fields}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.webp2Encode(mergeOptions(defaultOptions, options));\n}\n","import { Dispatch } from \"react\";\nimport { Remote } from \"comlink\";\nimport { WorkerApi } from \"../worker\";\nimport * as MozJPEG from \"./mozjpeg/client\";\nimport * as JXL from \"./jxl/client\";\nimport * as WebP from \"./webp/client\";\nimport * as AVIF from \"./avif/client\";\nimport * as WebP2 from \"./webp2/client\";\n\nexport interface EncoderState {\n\tvarNames: string[];\n\tvalues: Record<string, unknown>;\n\tranges: Record<string, unknown>;\n}\n\nexport interface EncodeResult {\n\ttime: number;\n\tbuffer: ArrayBuffer;\n}\n\nexport interface OptionListProps {\n\tstate: EncoderState;\n\tonChange: Dispatch<EncoderState>;\n}\n\nexport interface ControlProps {\n\tstate: EncoderState;\n\tvariableName: string | false;\n\tonChange: Dispatch<Record<string, unknown>>;\n\tonVariableChange: Dispatch<string>;\n}\n\nexport interface ControlStateMap {\n\tvalues: Record<string, unknown>;\n\tlabels: Record<string, string[]>;\n}\n\nexport interface ImageEncoder {\n\tname: string;\n\textension: string;\n\tmimeType: string;\n\n\tinitControlState(ranges: EncoderState): ControlStateMap;\n\n\tControls(props: ControlProps): JSX.Element;\n\n\tinitOptionsState(saved?: EncoderState): any;\n\n\tOptionsPanel(props: OptionListProps): JSX.Element;\n\n\tgetOptionsList(state: EncoderState): any[];\n\n\tencode(options: any, worker: Remote<WorkerApi>): Promise<EncodeResult>;\n}\n\nexport const ENCODERS: ImageEncoder[] = [MozJPEG, JXL, WebP, AVIF, WebP2];\n\nexport const ENCODER_MAP = Object.fromEntries(ENCODERS.map(e => [e.name, e]));\n","import { ChangeEvent, Dispatch, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { CheckBox } from \"../ui\";\nimport { ENCODER_MAP, ENCODERS, EncoderState } from \"../codecs\";\nimport styles from \"./EncoderPanel.scss\";\n\nexport interface EncoderConfig {\n\tenable: boolean;\n\tstate: EncoderState;\n}\n\nexport type EncodingConfig = Record<string, EncoderConfig>;\n\nexport function createEncodingConfig(saved?: EncodingConfig): EncodingConfig {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst encoders: Record<string, EncoderConfig> = {};\n\tfor (const e of ENCODERS) {\n\t\tencoders[e.name] = {\n\t\t\tenable: false,\n\t\t\tstate: e.initOptionsState(),\n\t\t};\n\t}\n\tencoders.WebP.enable = true;\n\treturn encoders;\n}\n\nexport interface EncoderPanelProps {\n\tvalue: Record<string, EncoderConfig>;\n\tonChange: Dispatch<Record<string, EncoderConfig>>;\n}\n\nexport default function EncoderPanel(props: EncoderPanelProps) {\n\tconst { value, onChange } = props;\n\n\tconst [current, setCurrent] = useState(\"WebP\");\n\n\tconst tabs = ENCODERS.map(e => {\n\t\tconst { name } = e;\n\n\t\tconst classes = clsx(\n\t\t\tstyles.tab,\n\t\t\t{ [styles.active]: name === current },\n\t\t);\n\n\t\tfunction handleEnableChange(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tconst x = { ...value[name], enable: e.currentTarget.checked };\n\t\t\tonChange({ ...value, [name]: x });\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={classes}\n\t\t\t\tkey={name}\n\t\t\t\tonClick={() => setCurrent(name)}\n\t\t\t>\n\t\t\t\t<CheckBox\n\t\t\t\t\tchecked={value[name].enable}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t\tonChange={handleEnableChange}\n\t\t\t\t/>\n\t\t\t\t<span className={styles.name}>{name}</span>\n\t\t\t</button>\n\t\t);\n\t});\n\n\tfunction handleOptionChange(newState: any) {\n\t\tconst c = { ...value[current], state: newState };\n\t\tonChange({ ...value, [current]: c });\n\t}\n\n\tconst { OptionsPanel } = ENCODER_MAP[current];\n\n\treturn (\n\t\t<div className={styles.container} role=\"tabpanel\">\n\t\t\t<div className={styles.tablist}>\n\t\t\t\t{tabs}\n\t\t\t</div>\n\t\t\t<form className={styles.form}>\n\t\t\t\t<OptionsPanel\n\t\t\t\t\tstate={value[current].state}\n\t\t\t\t\tonChange={handleOptionChange}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_1LeZ1 dialog-content\",\"tablist\":\"_1sBf2\",\"tab\":\"_3rUeO\",\"active\":\"_1krxL\",\"name\":\"_2G5o7\",\"form\":\"_3GSpr\"};","import { useState } from \"react\";\nimport { MeasureOptions } from \"../encode\";\nimport { Button, Dialog } from \"../ui\";\nimport ImageInfoPanel from \"./ImageInfoPanel\";\nimport MetricsPanel, { createMeasureState } from \"./MetricsPanel\";\nimport EncoderPanel, { createEncodingConfig, EncodingConfig } from \"./EncoderPanel\";\nimport styles from \"./ConfigDialog.scss\";\n\nexport interface AnalyzeConfig {\n\tencoders: EncodingConfig;\n\tmeasure: MeasureOptions;\n}\n\nfunction initEncoderConfig(): AnalyzeConfig {\n\tconst saved = localStorage.getItem(\"Config\");\n\tif (saved) {\n\t\treturn JSON.parse(saved);\n\t}\n\treturn {\n\t\tencoders: createEncodingConfig(),\n\t\tmeasure: createMeasureState(),\n\t};\n}\n\ninterface ConfigDialogProps {\n\timage: ImageData;\n\tfile: File;\n\tonStart: (config: AnalyzeConfig) => void;\n\tonClose: () => void;\n\tonSelectFile: () => void;\n}\n\nconst panels = [\"Information\", \"Encoding\", \"Measure\"];\n\nexport default function ConfigDialog(props: ConfigDialogProps) {\n\tconst { file, image, onStart, onClose, onSelectFile } = props;\n\n\tconst [index, setIndex] = useState(0);\n\tconst [data, setData] = useState(initEncoderConfig);\n\n\tfunction start() {\n\t\tonStart(data);\n\t\tlocalStorage.setItem(\"Config\", JSON.stringify(data));\n\t}\n\n\tconst tabs = panels.map((name, i) =>\n\t\t<div\n\t\t\tclassName={styles.tab}\n\t\t\tkey={i}\n\t\t\trole=\"tab\"\n\t\t\taria-selected={i === index}\n\t\t\tonClick={() => setIndex(i)}\n\t\t>\n\t\t\t{name}\n\t\t</div>);\n\n\tlet panel;\n\n\tswitch (index) {\n\t\tcase 0:\n\t\t\tpanel = <ImageInfoPanel\n\t\t\t\tfile={file}\n\t\t\t\timage={image}\n\t\t\t/>;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tpanel = <EncoderPanel\n\t\t\t\tvalue={data.encoders}\n\t\t\t\tonChange={v => setData({ ...data, encoders: v })}\n\t\t\t/>;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tpanel = <MetricsPanel\n\t\t\t\tvalue={data.measure}\n\t\t\t\tonChange={v => setData({ ...data, measure: v })}\n\t\t\t/>;\n\t\t\tbreak;\n\t}\n\n\tconst ready = file && Object.values(data.encoders).some(e => e.enable);\n\n\treturn (\n\t\t<Dialog\n\t\t\tname=\"Analysis config\"\n\t\t\tclassName={styles.dialog}\n\t\t\tonClose={onClose}\n\t\t>\n\t\t\t<div className={styles.header} role=\"tablist\">{tabs}</div>\n\t\t\t{panel}\n\t\t\t<div className=\"dialog-actions\">\n\t\t\t\t<Button onClick={onSelectFile}>Select file...</Button>\n\t\t\t\t<Button className=\"second\" onClick={onClose}>Cancel</Button>\n\t\t\t\t<Button disabled={!ready} onClick={start}>Start</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"_6sryz\",\"header\":\"_3x7vU\",\"tab\":\"_29qBc\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_1RFbq dialog-content\",\"text\":\"_3vxdS\",\"error\":\"O-Yz-\",\"progress\":\"mrzz8\",\"buttons\":\"_3UNgR dialog-actions\"};","import { useMemo, useState } from \"react\";\nimport { Button, Dialog } from \"../ui\";\nimport { debounce } from \"../utils\";\nimport styles from \"./ProgressDialog.scss\";\n\nconst formatter = new Intl.RelativeTimeFormat(\"en\");\n\ninterface ProgressPanelProps {\n\terror?: string;\n\tmax: number;\n\tvalue: number;\n\tonCancel: () => void;\n}\n\nfunction calcTime(start: number, value: number, max: number) {\n\tconst duration = performance.now() - start;\n\treturn (max - value) / value * duration;\n}\n\nexport default function ProgressDialog(props: ProgressPanelProps) {\n\tconst { error, value, max, onCancel } = props;\n\n\tconst [start] = useState(() => performance.now());\n\tconst debounced = useMemo(() => debounce(500, calcTime), []);\n\n\tconst ms = debounced(start, value, max);\n\tconst remaining = Number.isNaN(ms)\n\t\t? \"----\"\n\t\t: formatter.format(~~(ms / 1000), \"seconds\");\n\n\treturn (\n\t\t<Dialog>\n\t\t\t<div className={styles.content}>\n\t\t\t\t<h1>Encoding...</h1>\n\n\t\t\t\t{error && <p className={styles.error}>Error: {error}</p>}\n\n\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t<span>{value} / {max}</span>\n\t\t\t\t\t<span>{remaining}</span>\n\t\t\t\t</div>\n\n\t\t\t\t<progress\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tclassName={styles.progress}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t<Button color=\"second\" onClick={onCancel}> Cancel </Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","import { Dispatch, useState } from \"react\";\nimport { decode } from \"../decode\";\nimport { BatchEncodeAnalyzer, ConvertOutput } from \"../encode\";\nimport type { Result } from \".\";\nimport SelectFileDialog from \"./SelectFileDialog\";\nimport ConfigDialog, { AnalyzeConfig } from \"./ConfigDialog\";\nimport ProgressDialog from \"./ProgressDialog\";\nimport { ENCODERS, ImageEncoder } from \"../codecs\";\n\nfunction useProgress(initialMax = 1) {\n\tconst [max, setMax] = useState(initialMax);\n\tconst [value, setValue] = useState(0);\n\n\tfunction reset(value: number) {\n\t\tsetValue(0);\n\t\tsetMax(value);\n\t}\n\n\tfunction increase() {\n\t\tsetValue(v => v + 1);\n\t}\n\n\treturn { value, max, increase, reset };\n}\n\ninterface CompressSessionProps {\n\topen: boolean;\n\tonChange: Dispatch<Result>;\n\tonClose: () => void;\n}\n\nexport type OptionsToResult = Record<string, ConvertOutput>;\nexport type EncoderNameToOptions = Record<string, OptionsToResult>;\n\nexport default function CompressSession(props: CompressSessionProps) {\n\tconst { open, onClose, onChange } = props;\n\n\tconst [selectFile, setSelectFile] = useState(true);\n\n\tconst [file, setFile] = useState<File>();\n\tconst [image, setImage] = useState<ImageData>();\n\n\tconst [encoder, setEncoder] = useState<BatchEncodeAnalyzer>();\n\n\tconst progress = useProgress();\n\tconst [error, setError] = useState<string>();\n\n\tfunction cancelSelectFile() {\n\t\tif (file) {\n\t\t\tsetSelectFile(false);\n\t\t} else {\n\t\t\tonClose();\n\t\t}\n\t}\n\n\tasync function handleFileChange(newFile: File) {\n\t\tconst image = await decode(newFile);\n\t\tsetFile(newFile);\n\t\tsetImage(image);\n\t\tsetSelectFile(false);\n\t}\n\n\tasync function handleStart(config: AnalyzeConfig) {\n\t\tif (!file) {\n\t\t\tthrow new Error(\"File is null\");\n\t\t}\n\t\tconst { encoders, measure } = config;\n\t\tconst image = await decode(file);\n\n\t\tlet outputSize = 0;\n\t\tconst queue: [ImageEncoder, any[]][] = [];\n\n\t\tfor (const enc of ENCODERS) {\n\t\t\tconst { name, getOptionsList } = enc;\n\t\t\tconst config = encoders[name];\n\t\t\tif (!config.enable) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst optList = getOptionsList(config.state);\n\t\t\tqueue.push([enc, optList]);\n\t\t\toutputSize += optList.length;\n\t\t}\n\n\t\tlet calculations = 1;\n\t\tif (measure.butteraugli.enabled) calculations++;\n\t\tif (measure.PSNR) calculations++;\n\t\tif (measure.SSIM.enabled) calculations++;\n\n\t\tconst warmup = measure.time ? measure.workerCount : 0;\n\n\t\tprogress.reset(outputSize * calculations + warmup);\n\n\t\tconst eMap: EncoderNameToOptions = {};\n\t\tconst worker = new BatchEncodeAnalyzer(image, measure);\n\n\t\tsetEncoder(worker);\n\t\tworker.onProgress = progress.increase;\n\n\t\ttry {\n\t\t\tawait worker.initialize();\n\n\t\t\t// Warmup workers to avoid disturbance of initialize time\n\t\t\tif (measure.time) {\n\t\t\t\tfor (const [encoder, optionsList] of queue) {\n\t\t\t\t\tawait worker.pool.runOnEach(async remote => {\n\t\t\t\t\t\treturn encoder.encode(remote, optionsList[0]).then(progress.increase);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [encoder, optionsList] of queue) {\n\t\t\t\tconst oMap: OptionsToResult = {};\n\t\t\t\teMap[encoder.name] = oMap;\n\n\t\t\t\tfor (let i = 0; i < optionsList.length; i++) {\n\t\t\t\t\tconst options = optionsList[i];\n\t\t\t\t\tworker.encode(encoder, options).then(o => oMap[JSON.stringify(options)] = o);\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait worker.pool.join();\n\n\t\t\tif (!worker.pool.terminated) {\n\t\t\t\tsetEncoder(undefined);\n\t\t\t\tonChange({ config, map: eMap, original: { file, data: image! } });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// Some browsers will crash the page on OOM.\n\t\t\tconsole.error(e);\n\t\t\tsetError(e.message);\n\t\t}\n\n\t\tworker.terminate();\n\t}\n\n\tfunction stop() {\n\t\tencoder!.terminate();\n\t}\n\n\tif (!open) {\n\t\treturn null;\n\t} else if (encoder) {\n\t\treturn (\n\t\t\t<ProgressDialog\n\t\t\t\tvalue={progress.value}\n\t\t\t\tmax={progress.max}\n\t\t\t\terror={error}\n\t\t\t\tonCancel={stop}\n\t\t\t/>\n\t\t);\n\t} else if (selectFile) {\n\t\treturn (\n\t\t\t<SelectFileDialog\n\t\t\t\tonCancel={cancelSelectFile}\n\t\t\t\tonFileChange={handleFileChange}\n\t\t\t/>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<ConfigDialog\n\t\t\t\timage={image!}\n\t\t\t\tfile={file!}\n\t\t\t\tonStart={handleStart}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonSelectFile={() => setSelectFile(true)}\n\t\t\t/>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"Tt2Yp\",\"banner\":\"_2g3gN\",\"title\":\"_2UBpq\",\"bigButton\":\"_3YpNu\",\"unsplash\":\"_3tP01\",\"link\":\"_3c5c0\",\"section\":\"_2SF9G\"};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z\"\n});\n\nfunction SvgGithubLogo(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 438.549 438.549\",\n    fill: \"currentColor\"\n  }, props), _ref);\n}\n\nexport default SvgGithubLogo;","import { Button } from \"../ui\";\nimport styles from \"./IntroPage.scss\";\nimport GitHubIcon from \"../assets/github-logo.svg\";\nimport banner from \"../assets/intro-banner.png\";\n\ninterface IntroPageProps {\n\tonStart: () => void;\n}\n\nexport default function IntroPage(props: IntroPageProps) {\n\tconst { onStart } = props;\n\n\treturn (\n\t\t<div>\n\t\t\t<section className={styles.header}>\n\t\t\t\t<img className={styles.banner} alt=\"banner\" src={banner}/>\n\n\t\t\t\t<div>\n\t\t\t\t\t<h1 className={styles.title}>ICAnalyze</h1>\n\t\t\t\t\t<h2>Image Codec & Quality analyze tool</h2>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"outline\"\n\t\t\t\t\t\tclassName={styles.bigButton}\n\t\t\t\t\t\tonClick={onStart}\n\t\t\t\t\t>\n\t\t\t\t\t\tTry it!\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"outline\"\n\t\t\t\t\t\tclassName={styles.bigButton + \" second\"}\n\t\t\t\t\t\thref=\"https://github.com/Kaciras/ICAnalyze\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<GitHubIcon/>\n\t\t\t\t\t\tSource Code\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={styles.unsplash}>\n\t\t\t\t\tPhoto by\n\t\t\t\t\t<a className={styles.link} href=\"https://unsplash.com/@veverkolog?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Duan veverkolog</a>\n\t\t\t\t\ton\n\t\t\t\t\t<a className={styles.link} href=\"https://unsplash.com/s/photos/eagle?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className={styles.section}>\n\t\t\t\tTODO\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_3kS7K\",\"inputs\":\"_1Tvc7 controls\",\"option\":\"_92kbo\",\"imageView\":\"_1iZci\",\"wrapper\":\"_2sQef\",\"canvas\":\"_1YBWC\"};","import { CSSProperties, Dispatch, RefObject, useEffect, useRef, useState } from \"react\";\nimport { Button, NumberInput, PinchZoom } from \"../ui\";\nimport { PinchZoomState } from \"../ui/PinchZoom\";\nimport { ConvertOutput } from \"../encode\";\nimport { InputImage } from \"./index\";\nimport styles from \"./ImageView.scss\";\nimport { ButtonProps } from \"../ui/Button\";\n\nexport enum ViewType {\n\tOriginal,\n\tCompressed,\n\tAbsDiff,\n\tHeatMap,\n}\n\ninterface ImageViewCSS extends CSSProperties {\n\t\"--x\": string;\n\t\"--y\": string;\n\t\"--scale\": number;\n\t\"--brightness\": string;\n}\n\nfunction useResettable<T>(initialState: T): [T, Dispatch<T>, () => void] {\n\tconst [value, setValue] = useState(initialState);\n\treturn [value, setValue, () => setValue(initialState)];\n}\n\nfunction drawDataToCanvas(data: ImageData, canvas: RefObject<HTMLCanvasElement>) {\n\tif (canvas.current === null) {\n\t\tthrow new Error(\"Canvas is null\");\n\t}\n\tconst ctx = canvas.current.getContext(\"2d\");\n\tif (!ctx) {\n\t\tthrow new Error(\"Canvas not initialized\");\n\t}\n\tctx.putImageData(data, 0, 0);\n}\n\ninterface ImageViewProps {\n\toriginal: InputImage;\n\toutput: ConvertOutput;\n}\n\nexport default function ImageView(props: ImageViewProps) {\n\tconst { original, output } = props;\n\tconst { width = 0, height = 0 } = original.data || {};\n\n\tconst [type, setType] = useState(ViewType.Compressed);\n\tconst [brightness, setBrightness] = useState(100);\n\n\tconst [pinchZoom, setPinchZoom, resetPinchZoom] = useResettable<PinchZoomState>({\n\t\tx: 0,\n\t\ty: 0,\n\t\tscale: 1,\n\t});\n\n\tconst backCanvas = useRef<HTMLCanvasElement>(null);\n\tconst topCanvas = useRef<HTMLCanvasElement>(null);\n\n\tfunction refreshBottomCanvas() {\n\t\tresetPinchZoom();\n\t\tdrawDataToCanvas(original.data, backCanvas);\n\t}\n\n\tfunction refreshTopCanvas() {\n\t\tconst { metrics, data } = output;\n\n\t\tconst image = type === ViewType.HeatMap ? metrics.butteraugli!.heatMap : data;\n\t\tdrawDataToCanvas(image, topCanvas);\n\t}\n\n\tuseEffect(refreshBottomCanvas, [original]);\n\tuseEffect(refreshTopCanvas, [type, output]);\n\n\tinterface ImageViewTabProps extends ButtonProps {\n\t\ttarget: ViewType;\n\t}\n\n\tfunction ImageViewTab(props: ImageViewTabProps) {\n\t\tconst { children, target, disabled, title } = props;\n\t\treturn (\n\t\t\t<Button\n\t\t\t\ttype=\"text\"\n\t\t\t\tactive={type === target}\n\t\t\t\tdisabled={disabled}\n\t\t\t\ttitle={title}\n\t\t\t\tonClick={() => setType(target)}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tlet brightnessInput = null;\n\tlet brightnessVal = 100;\n\n\tif (type === ViewType.AbsDiff) {\n\t\tbrightnessVal = brightness;\n\t\tbrightnessInput = (\n\t\t\t<label className={styles.option}>\n\t\t\t\tBrightness %:\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={brightness}\n\t\t\t\t\tmin={100}\n\t\t\t\t\tstep={50}\n\t\t\t\t\tonValueChange={setBrightness}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t);\n\t}\n\n\tconst wrapperCss: ImageViewCSS = {\n\t\twidth, height,\n\t\t\"--scale\": pinchZoom.scale,\n\t\t\"--x\": pinchZoom.x + \"px\",\n\t\t\"--y\": pinchZoom.y + \"px\",\n\t\t\"--brightness\": `${brightnessVal}%`,\n\t};\n\n\tconst mixBlendMode = type === ViewType.AbsDiff ? \"difference\" : undefined;\n\n\tconst noHeatMap = !output.metrics.butteraugli;\n\tconst heatMapTitle = noHeatMap ? \"Require enable butteraugli\" : undefined;\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div className={styles.inputs}>\n\t\t\t\t<div>\n\t\t\t\t\t<ImageViewTab\n\t\t\t\t\t\ttarget={ViewType.Original}\n\t\t\t\t\t>\n\t\t\t\t\t\tOriginal\n\t\t\t\t\t</ImageViewTab>\n\t\t\t\t\t<ImageViewTab\n\t\t\t\t\t\ttarget={ViewType.Compressed}\n\t\t\t\t\t>\n\t\t\t\t\t\tOutput\n\t\t\t\t\t</ImageViewTab>\n\t\t\t\t\t<ImageViewTab\n\t\t\t\t\t\ttarget={ViewType.AbsDiff}\n\t\t\t\t\t>\n\t\t\t\t\t\tDifference\n\t\t\t\t\t</ImageViewTab>\n\t\t\t\t\t<ImageViewTab\n\t\t\t\t\t\tdisabled={noHeatMap}\n\t\t\t\t\t\ttitle={heatMapTitle}\n\t\t\t\t\t\ttarget={ViewType.HeatMap}\n\t\t\t\t\t>\n\t\t\t\t\t\tHeatMap\n\t\t\t\t\t</ImageViewTab>\n\t\t\t\t</div>\n\t\t\t\t{brightnessInput}\n\t\t\t</div>\n\t\t\t<div className={styles.controls}>\n\n\t\t\t</div>\n\t\t\t<PinchZoom\n\t\t\t\tclassName={styles.imageView}\n\t\t\t\tstate={pinchZoom}\n\t\t\t\tonChange={setPinchZoom}\n\t\t\t>\n\t\t\t\t<div className={styles.wrapper} style={wrapperCss}>\n\t\t\t\t\t<canvas\n\t\t\t\t\t\tclassName={styles.canvas}\n\t\t\t\t\t\tref={backCanvas}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t/>\n\t\t\t\t\t<canvas\n\t\t\t\t\t\tclassName={styles.canvas}\n\t\t\t\t\t\tref={topCanvas}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\tstyle={{ mixBlendMode }}\n\t\t\t\t\t\thidden={type === ViewType.Original}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</PinchZoom>\n\t\t</div>\n\t);\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M403.88 196.563h-9.484v-44.388c0-82.099-65.151-150.681-146.582-152.145-2.225-.04-6.671-.04-8.895 0C157.486 1.494 92.336 70.076 92.336 152.175v44.388h-9.485c-14.616 0-26.538 15.082-26.538 33.709v222.632c0 18.606 11.922 33.829 26.539 33.829H403.88c14.616 0 26.539-15.223 26.539-33.829V230.272c0-18.626-11.922-33.709-26.539-33.709zM273.442 341.362v67.271c0 7.703-6.449 14.222-14.158 14.222H227.45c-7.71 0-14.159-6.519-14.159-14.222v-67.271c-7.477-7.36-11.83-17.537-11.83-28.795 0-21.334 16.491-39.666 37.459-40.513 2.222-.09 6.673-.09 8.895 0 20.968.847 37.459 19.179 37.459 40.513-.002 11.258-4.355 21.435-11.832 28.795zm58.444-144.799H154.847v-44.388c0-48.905 39.744-89.342 88.519-89.342 48.775 0 88.521 40.437 88.521 89.342v44.388z\"\n});\n\nfunction SvgLock(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 486.733 486.733\",\n    fill: \"currentColor\"\n  }, props), _ref);\n}\n\nexport default SvgLock;","import { useEffect, useMemo, useState } from \"react\";\nimport Highcharts, { Chart, Options, SeriesLineOptions, YAxisOptions } from \"highcharts\";\nimport Export from \"highcharts/modules/exporting\";\nimport ExportOffline from \"highcharts/modules/offline-exporting\";\nimport { ConvertOutput } from \"../encode\";\nimport { InputImage } from \"./index\";\nimport styles from \"./ChartPanel.scss\";\nimport { Button } from \"../ui\";\nimport LockIcon from \"../assets/lock.svg\";\n\nExport(Highcharts);\nExportOffline(Highcharts);\n\ntype MapFn = (output: ConvertOutput) => number | undefined;\n\nclass SeriesMapper {\n\n\tprivate readonly mapping: MapFn[] = [];\n\tprivate readonly divisor: number;\n\n\treadonly labels: string[] = [];\n\n\tconstructor(original: InputImage, outputs: ConvertOutput[]) {\n\t\tthis.divisor = original.file.size / 100;\n\n\t\tconst { labels, mapping, divisor } = this;\n\t\tconst [output] = outputs;\n\n\t\tfunction define(name: string, fn: MapFn) {\n\t\t\tif (fn(output) !== undefined) {\n\t\t\t\tmapping.push(fn);\n\t\t\t\tlabels.push(name);\n\t\t\t}\n\t\t}\n\n\t\tdefine(\"Compression Ratio %\", v => v.buffer.byteLength / divisor);\n\t\tdefine(\"Encode Time (s)\", v => v.time);\n\t\tdefine(\"SSIM\", v => v.metrics.SSIM);\n\t\tdefine(\"PSNR (db)\", v => v.metrics.PSNR);\n\t\tdefine(\"Butteraugli Source\", v => v.metrics.butteraugli?.source);\n\t}\n\n\tconvert(outputs: ConvertOutput[]) {\n\t\treturn this.mapping.map(fn => outputs.map(output => fn(output)!));\n\t}\n}\n\nfunction handleMouseover(chart: Chart, i: number) {\n\tchart.yAxis.forEach((axis, j) => {\n\t\tif (j === 0) return;\n\t\taxis.update({ visible: i === j }, false);\n\t});\n\tchart.redraw();\n}\n\nfunction addSeriesListener(chart: Chart) {\n\tchart.legend.allItems.forEach((s, i) => {\n\t\tif (i === 0) return;\n\t\ts.onMouseOver = () => handleMouseover(chart, i);\n\t});\n}\n\nfunction addLegendListener(chart: Chart) {\n\tchart.series.forEach((s, i) => {\n\t\tif (i === 0) return;\n\t\t(s as any).legendItem.on(\"mouseover\", () => handleMouseover(chart, i));\n\t});\n}\n\nexport interface ChartProps {\n\tvisible: boolean;\n\toriginal: InputImage;\n\tindex: number;\n\tvalues: string[];\n\toutputs: ConvertOutput[];\n}\n\nexport default function ChartPanel(props: ChartProps) {\n\tconst { visible, original, outputs, index, values } = props;\n\n\tconst [chart, setChart] = useState<Chart>();\n\tconst [locked, setLocked] = useState<boolean>(false);\n\n\tconst mapper = useMemo(() => new SeriesMapper(original, outputs), [original]);\n\n\tfunction initHighcharts(el: HTMLDivElement | null) {\n\t\tif (!el || chart) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = mapper.convert(outputs);\n\t\tconst series = new Array<SeriesLineOptions>(data.length);\n\t\tconst yAxis = new Array<YAxisOptions>(data.length);\n\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tconst name = mapper.labels[i];\n\t\t\tseries[i] = {\n\t\t\t\tname,\n\t\t\t\ttype: \"line\",\n\t\t\t\tdata: data[i],\n\t\t\t\tyAxis: i,\n\t\t\t};\n\t\t\tyAxis[i] = {\n\t\t\t\ttitle: {\n\t\t\t\t\ttext: name,\n\t\t\t\t},\n\t\t\t\tvisible: false,\n\t\t\t\topposite: true,\n\t\t\t};\n\t\t}\n\n\t\tconst [left, firstRight] = yAxis;\n\t\tleft.visible = true;\n\t\tleft.opposite = false;\n\t\tif (firstRight) {\n\t\t\tfirstRight.visible = true;\n\t\t}\n\n\t\tconst options: Options = {\n\t\t\tseries,\n\t\t\tyAxis,\n\t\t\tchart: {\n\t\t\t\tanimation: false,\n\t\t\t\tstyledMode: true,\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\ttext: \"\",\n\t\t\t},\n\t\t\ttooltip: {\n\t\t\t\tborderRadius: 0,\n\t\t\t},\n\t\t\tlegend: {\n\t\t\t\tverticalAlign: \"top\",\n\t\t\t\twidth: 450,\n\n\t\t\t\t// Since legend item vary widely in width, disable align to use space more efficiently\n\t\t\t\talignColumns: false,\n\t\t\t},\n\t\t\txAxis: {\n\t\t\t\tcategories: values,\n\n\t\t\t\t// Avoid layout shift on Y axis changes\n\t\t\t\twidth: 430,\n\t\t\t},\n\t\t\texporting: {\n\t\t\t\tbuttons: {\n\t\t\t\t\tcontextButton: {\n\t\t\t\t\t\ty: 5,\n\t\t\t\t\t\tx: -5,\n\t\t\t\t\t\theight: 32,\n\t\t\t\t\t\twidth: 32,\n\t\t\t\t\t\tsymbolSize: 16,\n\t\t\t\t\t\tsymbolX: 17,\n\t\t\t\t\t\tsymbolY: 16,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tchartOptions: {\n\t\t\t\t\tchart: {\n\t\t\t\t\t\tclassName: \"exporting_chart_class\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tsetChart(Highcharts.chart(el, options, instance => {\n\t\t\taddSeriesListener(instance);\n\t\t\taddLegendListener(instance);\n\t\t}));\n\t}\n\n\tfunction updateSeriesData(chart: Chart) {\n\t\tconst data = mapper.convert(outputs);\n\t\tchart.xAxis[0].setCategories(values, false);\n\t\tchart.series.forEach((s, i) => s.setData(data[i], false));\n\t}\n\n\tfunction updatePlotLine(chart: Chart) {\n\t\tconst [xAxis] = chart.xAxis;\n\t\txAxis.removePlotLine(\"MarkLine\");\n\t\txAxis.addPlotLine({\n\t\t\tid: \"MarkLine\",\n\t\t\tvalue: index,\n\t\t\tdashStyle: \"Dash\",\n\t\t});\n\n\t\tchart.legend.update({\n\t\t\tlabelFormatter() {\n\t\t\t\tconst { name, options } = this as any;\n\t\t\t\tconst value = options.data[index];\n\t\t\t\tlet displayValue;\n\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase +Infinity:\n\t\t\t\t\t\tdisplayValue = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase -Infinity:\n\t\t\t\t\t\tdisplayValue = \"-\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tdisplayValue = value.toFixed(2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn `${name}: <b>${displayValue}</b>`;\n\t\t\t},\n\t\t});\n\t\taddLegendListener(chart);\n\t}\n\n\tuseEffect(() => chart && updateSeriesData(chart), [outputs]);\n\tuseEffect(() => chart && updatePlotLine(chart));\n\n\tfunction handleLockChange() {\n\t\tif (locked) {\n\t\t\tconst clear = { min: null, max: null };\n\t\t\tchart!.yAxis.forEach(y => y.update(clear, false));\n\t\t\tsetLocked(false);\n\t\t} else {\n\t\t\tsetLocked(true);\n\t\t\tchart!.yAxis.forEach(y => y.update({ min: y.min, max: y.max }), false);\n\t\t}\n\t\tchart!.redraw();\n\t}\n\n\t// High cost of rendering chart, so keep the element\n\tconst display = visible ? {} : { display: \"none\" };\n\n\treturn (\n\t\t<section className={styles.container} style={display}>\n\t\t\t<Button\n\t\t\t\ttitle=\"Lock Y axis range\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName={styles.lock}\n\t\t\t\tactive={locked}\n\t\t\t\tonClick={handleLockChange}\n\t\t\t>\n\t\t\t\t<LockIcon/>\n\t\t\t</Button>\n\t\t\t<div className={styles.chart} ref={initHighcharts}/>\n\t\t</section>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_120CL\",\"chart\":\"N21M3\",\"lock\":\"_2SMWc\"};","import { ChangeEvent, Dispatch } from \"react\";\nimport { ControlField, SelectBox } from \"../ui\";\nimport { ENCODER_MAP, ENCODERS } from \"../codecs\";\nimport { AnalyzeConfig } from \"./ConfigDialog\";\nimport { ControlState, Step } from \"./AnalyzePage\";\nimport styles from \"./ControlPanel.scss\";\n\nexport interface ControlPanelProps {\n\tconfig: AnalyzeConfig;\n\tvalue: ControlState\n\tonChange: Dispatch<Partial<ControlState>>;\n}\n\nexport default function ControlPanel(props: ControlPanelProps) {\n\tconst { config, value, onChange } = props;\n\tconst { variableType, variableName, encoderName, encoderState } = value;\n\n\tif (variableType === Step.None) {\n\t\treturn null;\n\t}\n\n\tfunction handleCodecChange(e: ChangeEvent<HTMLSelectElement>) {\n\t\tonChange({ encoderName: e.currentTarget.value });\n\t}\n\n\tfunction handleVarChange(variableType: Step, variableName: string) {\n\t\tonChange({ variableType, variableName });\n\t}\n\n\tfunction handleValueChange(values: Record<string, unknown>) {\n\t\tconst { varNames, ranges, labels } = encoderState[encoderName];\n\t\tconst es = { ...encoderState, [encoderName]: { varNames, values, ranges, labels } };\n\t\tonChange({ encoderState: es });\n\t}\n\n\tconst Encoder = ENCODER_MAP[encoderName];\n\tconst selectOptions = ENCODERS.filter(e => config.encoders[e.name].enable)\n\t\t.map(({ name }) => <option key={name} value={name}>{name}</option>);\n\n\treturn (\n\t\t<form className={styles.variableGroup}>\n\t\t\t<Encoder.Controls\n\t\t\t\tstate={encoderState[encoderName]}\n\t\t\t\tvariableName={variableType === Step.Options && variableName}\n\t\t\t\tonChange={handleValueChange}\n\t\t\t\tonVariableChange={name => handleVarChange(Step.Options, name)}\n\t\t\t/>\n\t\t\t{\n\t\t\t\tselectOptions.length > 1 &&\n\t\t\t\t<ControlField\n\t\t\t\t\tactive={variableType === Step.Encoder}\n\t\t\t\t\tonFocus={() => handleVarChange(Step.Encoder, \"Encoder\")}\n\t\t\t\t>\n\t\t\t\t\t<SelectBox\n\t\t\t\t\t\tvalue={encoderName}\n\t\t\t\t\t\tonChange={handleCodecChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{selectOptions}\n\t\t\t\t\t</SelectBox>\n\t\t\t\t</ControlField>\n\t\t\t}\n\t\t</form>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"variableGroup\":\"_33pnL controls\",\"radioButtonGroup\":\"_1SeOc\"};","// extracted by mini-css-extract-plugin\nexport default {\"buttonGroup\":\"_3BYoV controls\",\"iconButton\":\"_3RfWA\",\"optionValue\":\"_34M9m\"};","import { ReactNode, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\nimport UploadIcon from \"bootstrap-icons/icons/cloud-upload.svg\";\nimport ChartIcon from \"bootstrap-icons/icons/bar-chart-line.svg\";\nimport DownloadIcon from \"bootstrap-icons/icons/download.svg\";\nimport CloseIcon from \"bootstrap-icons/icons/x.svg\";\nimport { Button } from \"../ui\";\nimport { ENCODER_MAP, ENCODERS, EncoderState, ImageEncoder } from \"../codecs\";\nimport { Result } from \"./index\";\nimport ImageView from \"./ImageView\";\nimport ChartPanel from \"./ChartPanel\";\nimport ControlPanel from \"./ControlPanel\";\nimport { EncodingConfig } from \"./EncoderPanel\";\nimport styles from \"./AnalyzePage.scss\";\n\ninterface DownloadButtonProps {\n\ttitle?: string;\n\tbuffer: ArrayBuffer;\n\tfilename: string;\n\tcodec: ImageEncoder;\n\tchildren: ReactNode;\n}\n\nfunction DownloadButton(props: DownloadButtonProps) {\n\tconst { title, buffer, filename, children } = props;\n\tconst { mimeType, extension } = props.codec;\n\n\tconst url = useRef(\"\");\n\n\tuseEffect(() => () => URL.revokeObjectURL(url.current), []);\n\n\tfunction downloadImage() {\n\t\tconst blob = new Blob([buffer], { type: mimeType });\n\n\t\tURL.revokeObjectURL(url.current);\n\t\tconst newUrl = URL.createObjectURL(blob);\n\t\turl.current = newUrl;\n\n\t\tconst a = document.createElement(\"a\");\n\t\ta.href = newUrl;\n\t\ta.download = filename.replace(/.[^.]*$/, `.${extension}`);\n\t\tdocument.body.appendChild(a);\n\t\ta.click();\n\t\tdocument.body.removeChild(a);\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={styles.iconButton}\n\t\t\ttype=\"text\"\n\t\t\ttitle={title}\n\t\t\tonClick={downloadImage}\n\t\t>\n\t\t\t{children}\n\t\t</Button>\n\t);\n}\n\nexport enum Step {\n\tNone,\n\tEncoder,\n\tOptions,\n}\n\ninterface EncoderControlState extends EncoderState {\n\tlabels: Record<string, string[]>;\n}\n\nexport interface ControlState {\n\tencoderName: string;\n\tencoderState: Record<string, EncoderControlState>;\n\n\tvariableType: Step;\n\tvariableName: string;\n}\n\nfunction createTODOState(encoders: EncodingConfig): Record<string, EncoderControlState> {\n\tconst rv: Record<string, EncoderControlState> = {};\n\n\tfor (const [name, data] of Object.entries(encoders)) {\n\t\tif (!data.enable) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst s = ENCODER_MAP[name].initControlState(data.state);\n\t\trv[name] = { ...data.state, ...s };\n\t}\n\n\treturn rv;\n}\n\ninterface AnalyzePageProps {\n\tresult: Result;\n\tonStart: () => void;\n\tonClose: () => void;\n}\n\nexport default function AnalyzePage(props: AnalyzePageProps) {\n\tconst { result, onStart, onClose } = props;\n\tconst { original, config, map } = result;\n\n\tfunction createControlState(): ControlState {\n\t\tconst { encoders } = config;\n\t\tlet variableType = Step.None;\n\t\tlet variableName = \"\";\n\n\t\tconst kvs = Object.entries(encoders).filter(e => e[1].enable);\n\t\tif (kvs.length > 1) {\n\t\t\tvariableType = Step.Encoder;\n\t\t\tvariableName = \"\";\n\t\t}\n\n\t\tconst encoderState = createTODOState(encoders);\n\n\t\tconst [encoderName, state] = kvs[0];\n\t\tif (state.state.varNames.length > 0) {\n\t\t\tvariableType = Step.Options;\n\t\t\tvariableName = state.state.varNames[0];\n\t\t}\n\n\t\treturn { variableType, variableName, encoderName, encoderState };\n\t}\n\n\tfunction updateControlState(state: ControlState, action: Partial<ControlState>){\n\t\treturn { ...state, ...action };\n\t}\n\n\tconst [showChart, setShowChart] = useState(true);\n\tconst [state, setState] = useReducer(updateControlState, null, createControlState);\n\n\tconst { variableType, variableName, encoderName, encoderState } = state;\n\n\tconst encoder = ENCODER_MAP[encoderName];\n\n\tconst [options] = encoder.getOptionsList({\n\t\tvarNames: [],\n\t\tvalues: encoderState[encoderName].values,\n\t\tranges: encoderState[encoderName].ranges,\n\t});\n\n\tconst output = map[encoderName][JSON.stringify(options)];\n\n\tconst [labels, series] = useMemo(() => {\n\t\tif (variableType === Step.Encoder) {\n\t\t\tconst encodings = ENCODERS.filter(e => e.name in map);\n\t\t\tconst s = encodings.map(e => {\n\t\t\t\tconst op = e.getOptionsList({\n\t\t\t\t\tvarNames: [],\n\t\t\t\t\tvalues: encoderState[e.name].values,\n\t\t\t\t\tranges: encoderState[e.name].ranges,\n\t\t\t\t});\n\t\t\t\treturn map[e.name][JSON.stringify(op[0])];\n\t\t\t});\n\t\t\treturn [encodings.map(e => e.name), s];\n\t\t} else if (variableType === Step.Options) {\n\t\t\tconst x = map[encoderName];\n\t\t\tconst list = encoder.getOptionsList({\n\t\t\t\tvarNames: [variableName],\n\t\t\t\tvalues: encoderState[encoderName].values,\n\t\t\t\tranges: encoderState[encoderName].ranges,\n\t\t\t});\n\n\t\t\tconst s = list.map(op => x[JSON.stringify(op)]);\n\t\t\tconst l = encoderState[encoderName].labels[variableName];\n\t\t\treturn [l, s];\n\t\t} else {\n\t\t\treturn [[\"\"], [output]];\n\t\t}\n\t}, [options, result, variableType, variableName]);\n\n\tconst index = series.indexOf(output);\n\n\treturn (\n\t\t<>\n\t\t\t<ImageView original={original} output={output}/>\n\n\t\t\t<ChartPanel\n\t\t\t\tvisible={showChart}\n\t\t\t\toriginal={original}\n\t\t\t\tindex={index}\n\t\t\t\tvalues={labels}\n\t\t\t\toutputs={series}\n\t\t\t/>\n\n\t\t\t<div className={styles.buttonGroup}>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Back\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tonClick={onClose}\n\t\t\t\t>\n\t\t\t\t\t<CloseIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Select an image\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tonClick={onStart}\n\t\t\t\t>\n\t\t\t\t\t<UploadIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Show chart\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tactive={showChart}\n\t\t\t\t\tonClick={() => setShowChart(!showChart)}\n\t\t\t\t>\n\t\t\t\t\t<ChartIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<DownloadButton\n\t\t\t\t\ttitle=\"Download compressed image\"\n\t\t\t\t\tfilename={original.file.name}\n\t\t\t\t\tcodec={encoder}\n\t\t\t\t\tbuffer={output.buffer}\n\t\t\t\t>\n\t\t\t\t\t<DownloadIcon/>\n\t\t\t\t</DownloadButton>\n\t\t\t</div>\n\n\t\t\t<ControlPanel value={state} onChange={setState} config={config}/>\n\t\t</>\n\t);\n}\n","import ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\nimport \"./index.scss\";\nimport App from \"./app\";\n\nfunction detectBrowserSupport() {\n\ttry {\n\t\tnew File([], \"\");\n\t} catch {\n\t\treturn false;\n\t}\n\tif (!CSS.supports(\"mix-blend-mode: difference\")) {\n\t\treturn false;\n\t}\n\treturn \"AbortController\" in window;\n}\n\nif (!detectBrowserSupport()) {\n\talert(\"ICAnalyze does not support this browser, please switch to a modern one\");\n}\n\nif (process.env.NODE_ENV === \"production\") {\n\tSentry.init({\n\t\tintegrations: [\n\t\t\tnew Integrations.BrowserTracing(),\n\t\t],\n\t\ttracesSampleRate: 0.2,\n\t\trelease: \"ic-analyze@\" + process.env.npm_package_version,\n\t\tdsn: \"https://d101904fac2c486ea6f8563c2cf054af@o253601.ingest.sentry.io/5499968\",\n\t});\n}\n\nReactDOM.render(<App/>, document.getElementById(\"root\"));\n","import { useState } from \"react\";\nimport CompressSession, { EncoderNameToOptions } from \"./CompressSession\";\nimport IntroPage from \"./IntroPage\";\nimport AnalyzePage from \"./AnalyzePage\";\nimport { AnalyzeConfig } from \"./ConfigDialog\";\n\nexport interface InputImage {\n\tfile: File;\n\tdata: ImageData;\n}\n\nexport interface Result {\n\toriginal: InputImage;\n\tconfig: AnalyzeConfig;\n\tmap: EncoderNameToOptions;\n}\n\ninterface ResultWithId extends Result {\n\tid: number;\n}\n\nexport default function App() {\n\tconst [isOpen, setOpen] = useState(false);\n\tconst [result, setResult] = useState<ResultWithId>();\n\n\tfunction handleChange(value: Result) {\n\t\tsetOpen(false);\n\t\t(value as ResultWithId).id = (result?.id || 1) + 1;\n\t\tsetResult(value as ResultWithId);\n\t}\n\n\tconst showDialog = () => setOpen(true);\n\n\treturn (\n\t\t<>\n\t\t\t{result\n\t\t\t\t? <AnalyzePage\n\t\t\t\t\tkey={result.id} // force\n\t\t\t\t\tresult={result}\n\t\t\t\t\tonStart={showDialog}\n\t\t\t\t\tonClose={() => setResult(undefined)}\n\t\t\t\t/>\n\t\t\t\t: <IntroPage onStart={showDialog}/>\n\t\t\t}\n\t\t\t<CompressSession\n\t\t\t\topen={isOpen}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\t__webpack_require__.O();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkic_analyze\"] = self[\"webpackChunkic_analyze\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [983], () => (__webpack_require__(9006)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}