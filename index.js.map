{"version":3,"sources":["webpack://ic-analyze/./web/component/IconButton.tsx","webpack://ic-analyze/./web/component/IconButton.scss","webpack://ic-analyze/./web/worker.ts","webpack://ic-analyze/./web/utils.ts","webpack://ic-analyze/./deps/squoosh/src/lib/util.ts","webpack://ic-analyze/./web/encoding.ts","webpack://ic-analyze/./web/component/ProgressPanel.tsx","webpack://ic-analyze/./web/component/ConfigPanel.scss","webpack://ic-analyze/./web/component/NumberInput.scss","webpack://ic-analyze/./web/component/NumberInput.tsx","webpack://ic-analyze/./web/component/OptionTemplate.tsx","webpack://ic-analyze/./web/options/webp.ts","webpack://ic-analyze/./deps/squoosh/src/codecs/webp/encoder-meta.ts","webpack://ic-analyze/./web/component/SelectFilePanel.scss","webpack://ic-analyze/./web/component/SelectFilePanel.tsx","webpack://ic-analyze/./web/component/CheckBoxInput.tsx","webpack://ic-analyze/./web/component/CheckBoxInput.scss","webpack://ic-analyze/./web/component/RadioInput.tsx","webpack://ic-analyze/./web/component/RadioInput.scss","webpack://ic-analyze/./web/component/OptionsPanel.tsx","webpack://ic-analyze/./web/component/ConfigPanel.tsx","webpack://ic-analyze/./web/component/CompressDialog.tsx","webpack://ic-analyze/./web/component/CompressDialog.scss","webpack://ic-analyze/./web/component/Chart.tsx","webpack://ic-analyze/./web/component/Chart.scss","webpack://ic-analyze/./web/component/App.scss","webpack://ic-analyze/./web/component/RangeInput.scss","webpack://ic-analyze/./web/component/RangeInput.tsx","webpack://ic-analyze/./web/component/ImageView.tsx","webpack://ic-analyze/./web/component/ImageView.scss","webpack://ic-analyze/./web/component/App.tsx","webpack://ic-analyze/./web/index.tsx","webpack://ic-analyze/webpack/bootstrap","webpack://ic-analyze/webpack/runtime/compat get default export","webpack://ic-analyze/webpack/runtime/define property getters","webpack://ic-analyze/webpack/runtime/global","webpack://ic-analyze/webpack/runtime/hasOwnProperty shorthand","webpack://ic-analyze/webpack/runtime/publicPath","webpack://ic-analyze/webpack/runtime/jsonp chunk loading","webpack://ic-analyze/webpack/startup"],"names":["avoidMouseFocus","event","currentTarget","blur","props","className","children","title","disabled","active","onClick","classes","type","onMouseUp","NOOP","drawableToImageData","drawable","opts","width","height","sx","sy","sw","sh","canvas","document","createElement","ctx","getContext","Error","drawImage","getImageData","Map","BatchEncoder","url","index","workers","this","value","image","optionsList","measure","threadCount","length","Math","min","results","Array","tasks","i","worker","Worker","wrapper","setImageToEncode","push","poll","Promise","all","then","forEach","terminate","onProgress","buffer","webpEncode","data","bitmap","decodeWebP","metrics","PSNR","calcPSNR","SSIM","calcSSIM","butteraugli","source","raw","calcButteraugli","heatMap","createImageBitmap","Uint8ClampedArray","async","blob","decodeFn","checkFn","native","polyfill","bestDecodeFn","Image","src","resolve","onload","onerror","Blob","imageData","webpDecode","decodeAVIF","avifDecode","svgToImageData","svgXml","DOMParser","parseFromString","svg","documentElement","getAttribute","viewBox","split","setAttribute","XMLSerializer","serializeToString","ensureSVGSize","URL","createObjectURL","img","decoding","loaded","reject","decode","catch","decodeImage","revokeObjectURL","blobToImg","ProgressPanel","max","onCancel","id","localValue","setLocalValue","init","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","precision","setValue","useState","newValue","s","isInteger","round","useLimitedValue","onChange","e","target","valueAsNumber","tabIndex","step","NumberRangeTemplate","defaultValue","name","WebPOptionsTemplate","label","defaultVariable","WebPImageHint","defaultOptions","quality","target_size","target_PSNR","method","sns_strength","filter_strength","filter_sharpness","filter_type","partitions","segments","pass","show_compressed","preprocessing","autofilter","partition_limit","alpha_compression","alpha_filtering","alpha_quality","lossless","exact","image_hint","emulate_jpeg_size","thread_level","low_memory","near_lossless","use_delta_palette","use_sharp_yuv","accept","setFile","files","checked","OptionsPanel","vars","options","onVarsChange","fields","template","option","isVariable","includes","element","variable","createVariableState","createVariableInput","fixed","createFixedState","createFixedInput","key","MetricsPanel","workerCount","yAxis","bOptions","file","setVars","t","map","setOptions","setWorkerCount","setMeasure","setIndex","panels","tabs","clazz","panel","onClose","fetch","pathname","pop","f","File","onStart","encoder","setEncoder","setMax","progress","setProgress","undefined","stop","text","arrayBuffer","outputs","encode","start","chart","setChart","useEffect","setOption","tooltip","trigger","legend","xAxis","_","series","ref","el","renderer","dragging","setDragging","cssVariables","style","ViewType","original","optimized","setType","Compressed","brightness","setBrightness","originalUrl","setOriginalUrl","zoom","setZoom","offset","setOffset","x","y","canvasRef","useRef","ImageViewTab","offsetUpdater","baseX","baseY","dx","dy","current","HeatMap","brightnessInput","brightnessVal","AbsDiff","wrapperCss","blend","butteraugliAvailable","onWheel","ctrlKey","deltaMode","deltaY","preventDefault","Original","onMouseDown","button","baseEvent","handler","basePageX","pageX","basePageY","pageY","handleMove","addEventListener","handleEnd","removeEventListener","watchMouseMove","nativeEvent","onTouchStart","basePointer","touches","touch","watchTouchMove","mixBlendMode","hidden","PLACEHOLDER","DownloadButton","filename","setUrl","newUrl","a","href","download","body","appendChild","click","removeChild","showDialog","setShowDialog","showChart","setShowChart","setResults","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","m","n","getter","__esModule","d","definition","o","Object","defineProperty","enumerable","get","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","currentScript","scripts","getElementsByTagName","replace","p","installedChunks","826","deferredModules","checkDeferredModules","checkDeferredModulesImpl","result","deferredModule","fulfilled","j","depId","splice","chunkLoadingGlobal","slice","webpackJsonpCallback","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","parentChunkLoadingFunction","shift","apply","self","bind"],"mappings":"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","file":"index.js","sourcesContent":["import React, { MouseEvent, MouseEventHandler, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport Styles from \"./IconButton.scss\";\n\ninterface Props {\n\ttitle?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n\tactive?: boolean;\n\tonClick?: MouseEventHandler;\n\tchildren?: ReactNode;\n}\n\nfunction avoidMouseFocus(event: MouseEvent<HTMLElement>) {\n\tevent.currentTarget.blur();\n}\n\nexport default function IconButton(props: Props) {\n\tconst { className, children, title, disabled, active, onClick } = props;\n\n\tconst classes = clsx(\n\t\tStyles.iconButton,\n\t\tclassName,\n\t\t{ [Styles.active]: active },\n\t);\n\n\treturn (\n\t\t<button\n\t\t\tclassName={classes}\n\t\t\ttitle={title}\n\t\t\tdisabled={disabled}\n\t\t\ttype=\"button\"\n\t\t\tonClick={onClick}\n\t\t\tonMouseUp={avoidMouseFocus}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"iconButton\":\"_3zWOC\",\"active\":\"_2gza9\"};","export default __webpack_public_path__ + \"encoding.worker.js\"","/**\n * No effect function with a clear name.\n */\nexport const NOOP = () => {};\n\n/**\n * Detect if browser support display AVIF image.\n *\n * @return true if supported, otherwise false.\n */\nexport function detectAVIFSupport() {\n\tconst image = new Image();\n\timage.src = \"data:image/avif;base64,\" +\n\t\t\"AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAG\" +\n\t\t\"xpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABYAAAAoaWluZgAAAAAAAQAAABppbmZlAgAA\" +\n\t\t\"AAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgS\" +\n\t\t\"0AAAAAABNjb2xybmNseAABAAQAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB5tZGF0EgAKBzgADtAQQBkyCRAAAAAP+I9ngw==\";\n\treturn new Promise<boolean>(resolve => {\n\t\timage.onload = () => resolve(true);\n\t\timage.onerror = () => resolve(false);\n\t});\n}\n\n/**\n * Detect if browser support display WebP image.\n *\n * @return true if supported, otherwise false.\n */\nexport function detectWebPSupport() {\n\tconst image = new Image();\n\timage.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\";\n\treturn new Promise<boolean>(resolve => {\n\t\timage.onload = () => resolve(true);\n\t\timage.onerror = () => resolve(false);\n\t});\n}\n","/** Compare two objects, returning a boolean indicating if\n *  they have the same properties and strictly equal values.\n */\nexport function shallowEqual(one: any, two: any) {\n  for (const i in one) if (one[i] !== two[i]) return false;\n  for (const i in two) if (!(i in one)) return false;\n  return true;\n}\n\n/** Replace the contents of a canvas with the given data */\nexport function drawDataToCanvas(canvas: HTMLCanvasElement, data: ImageData) {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw Error('Canvas not initialized');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.putImageData(data, 0, 0);\n}\n\n/**\n * Encode some image data in a given format using the browser's encoders\n *\n * @param {ImageData} data\n * @param {string} type A mime type, eg image/jpeg.\n * @param {number} [quality] Between 0-1.\n */\nexport async function canvasEncode(data: ImageData, type: string, quality?: number): Promise<Blob> {\n  const canvas = document.createElement('canvas');\n  canvas.width = data.width;\n  canvas.height = data.height;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw Error('Canvas not initialized');\n  ctx.putImageData(data, 0, 0);\n\n  let blob: Blob | null;\n\n  if ('toBlob' in canvas) {\n    blob = await new Promise<Blob | null>(r => canvas.toBlob(r, type, quality));\n  } else {\n    // Welcome to Edge.\n    // TypeScript thinks `canvas` is 'never', so it needs casting.\n    const dataUrl = (canvas as HTMLCanvasElement).toDataURL(type, quality);\n    const result = /data:([^;]+);base64,(.*)$/.exec(dataUrl);\n\n    if (!result) throw Error('Data URL reading failed');\n\n    const outputType = result[1];\n    const binaryStr = atob(result[2]);\n    const data = new Uint8Array(binaryStr.length);\n\n    for (let i = 0; i < data.length; i += 1) {\n      data[i] = binaryStr.charCodeAt(i);\n    }\n\n    blob = new Blob([data], { type: outputType });\n  }\n\n  if (!blob) throw Error('Encoding failed');\n  return blob;\n}\n\nasync function decodeImage(url: string): Promise<HTMLImageElement> {\n  const img = new Image();\n  img.decoding = 'async';\n  img.src = url;\n  const loaded = new Promise((resolve, reject) => {\n    img.onload = () => resolve();\n    img.onerror = () => reject(Error('Image loading error'));\n  });\n\n  if (img.decode) {\n    // Nice off-thread way supported in Safari/Chrome.\n    // Safari throws on decode if the source is SVG.\n    // https://bugs.webkit.org/show_bug.cgi?id=188347\n    await img.decode().catch(() => null);\n  }\n\n  // Always await loaded, as we may have bailed due to the Safari bug above.\n  await loaded;\n  return img;\n}\n\n/** Caches results from canDecodeImageType */\nconst canDecodeCache = new Map<string, Promise<boolean>>();\n\n/**\n * Tests whether the browser supports a particular image mime type.\n *\n * @param type Mimetype\n * @example await canDecodeImageType('image/avif')\n */\nexport function canDecodeImageType(type: string): Promise<boolean> {\n  if (!canDecodeCache.has(type)) {\n    const resultPromise = (async () => {\n      const picture = document.createElement('picture');\n      const img = document.createElement('img');\n      const source = document.createElement('source');\n      source.srcset = 'data:,x';\n      source.type = type;\n      picture.append(source, img);\n\n      // Wait a single microtick just for the `img.currentSrc` to get populated.\n      await 0;\n      // At this point `img.currentSrc` will contain \"data:,x\" if format is supported and \"\"\n      // otherwise.\n      return !!img.currentSrc;\n    })();\n\n    canDecodeCache.set(type, resultPromise);\n  }\n\n  return canDecodeCache.get(type)!;\n}\n\nexport function blobToArrayBuffer(blob: Blob): Promise<ArrayBuffer> {\n  return new Response(blob).arrayBuffer();\n}\n\nexport function blobToText(blob: Blob): Promise<string> {\n  return new Response(blob).text();\n}\n\nconst magicNumberToMimeType = new Map<RegExp, string>([\n  [/^%PDF-/, 'application/pdf'],\n  [/^GIF87a/, 'image/gif'],\n  [/^GIF89a/, 'image/gif'],\n  [/^\\x89PNG\\x0D\\x0A\\x1A\\x0A/, 'image/png'],\n  [/^\\xFF\\xD8\\xFF/, 'image/jpeg'],\n  [/^BM/, 'image/bmp'],\n  [/^I I/, 'image/tiff'],\n  [/^II*/, 'image/tiff'],\n  [/^MM\\x00*/, 'image/tiff'],\n  [/^RIFF....WEBPVP8[LX ]/, 'image/webp'],\n  [/^\\x00\\x00\\x00 ftypavif\\x00\\x00\\x00\\x00/, 'image/avif'],\n]);\n\nexport async function sniffMimeType(blob: Blob): Promise<string> {\n  const firstChunk = await blobToArrayBuffer(blob.slice(0, 16));\n  const firstChunkString =\n    Array.from(new Uint8Array(firstChunk))\n      .map(v => String.fromCodePoint(v))\n      .join('');\n  for (const [detector, mimeType] of magicNumberToMimeType) {\n    if (detector.test(firstChunkString)) {\n      return mimeType;\n    }\n  }\n  return '';\n}\n\nexport async function blobToImg(blob: Blob): Promise<HTMLImageElement> {\n  const url = URL.createObjectURL(blob);\n\n  try {\n    return await decodeImage(url);\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\ninterface DrawableToImageDataOptions {\n  width?: number;\n  height?: number;\n  sx?: number;\n  sy?: number;\n  sw?: number;\n  sh?: number;\n}\n\nexport function drawableToImageData(\n  drawable: ImageBitmap | HTMLImageElement,\n  opts: DrawableToImageDataOptions = {},\n): ImageData {\n  const {\n    width = drawable.width,\n    height = drawable.height,\n    sx = 0,\n    sy = 0,\n    sw = drawable.width,\n    sh = drawable.height,\n  } = opts;\n\n  // Make canvas same size as image\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  // Draw image onto canvas\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw new Error('Could not create canvas context');\n  ctx.drawImage(drawable, sx, sy, sw, sh, 0, 0, width, height);\n  return ctx.getImageData(0, 0, width, height);\n}\n\nexport async function builtinDecode(blob: Blob): Promise<ImageData> {\n  // Prefer createImageBitmap as it's the off-thread option for Firefox.\n  const drawable = 'createImageBitmap' in self ?\n    await createImageBitmap(blob) : await blobToImg(blob);\n\n  return drawableToImageData(drawable);\n}\n\nexport type BuiltinResizeMethod = 'pixelated' | 'low' | 'medium' | 'high';\n\nexport function builtinResize(\n  data: ImageData,\n  sx: number, sy: number, sw: number, sh: number,\n  dw: number, dh: number,\n  method: BuiltinResizeMethod,\n): ImageData {\n  const canvasSource = document.createElement('canvas');\n  canvasSource.width = data.width;\n  canvasSource.height = data.height;\n  drawDataToCanvas(canvasSource, data);\n\n  const canvasDest = document.createElement('canvas');\n  canvasDest.width = dw;\n  canvasDest.height = dh;\n  const ctx = canvasDest.getContext('2d');\n  if (!ctx) throw new Error('Could not create canvas context');\n\n  if (method === 'pixelated') {\n    ctx.imageSmoothingEnabled = false;\n  } else {\n    ctx.imageSmoothingQuality = method;\n  }\n\n  ctx.drawImage(canvasSource, sx, sy, sw, sh, 0, 0, dw, dh);\n  return ctx.getImageData(0, 0, dw, dh);\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldValueAsNumber(field: any, defaultVal: number = 0): number {\n  if (!field) return defaultVal;\n  return Number(inputFieldValue(field));\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldCheckedAsNumber(field: any, defaultVal: number = 0): number {\n  if (!field) return defaultVal;\n  return Number(inputFieldChecked(field));\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldChecked(field: any, defaultVal: boolean = false): boolean {\n  if (!field) return defaultVal;\n  return (field as HTMLInputElement).checked;\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldValue(field: any, defaultVal: string = ''): string {\n  if (!field) return defaultVal;\n  return (field as HTMLInputElement).value;\n}\n\n/**\n * Creates a promise that resolves when the user types the konami code.\n */\nexport function konami(): Promise<void> {\n  return new Promise((resolve) => {\n    // Keycodes for: ↑ ↑ ↓ ↓ ← → ← → B A\n    const expectedPattern = '38384040373937396665';\n    let rollingPattern = '';\n\n    const listener = (event: KeyboardEvent) => {\n      rollingPattern += event.keyCode;\n      rollingPattern = rollingPattern.slice(-expectedPattern.length);\n      if (rollingPattern === expectedPattern) {\n        window.removeEventListener('keydown', listener);\n        resolve();\n      }\n    };\n\n    window.addEventListener('keydown', listener);\n  });\n}\n\ninterface TransitionOptions {\n  from?: number;\n  to?: number;\n  duration?: number;\n  easing?: string;\n}\n\nexport async function transitionHeight(el: HTMLElement, opts: TransitionOptions): Promise<void> {\n  const {\n    from = el.getBoundingClientRect().height,\n    to = el.getBoundingClientRect().height,\n    duration = 1000,\n    easing = 'ease-in-out',\n  } = opts;\n\n  if (from === to || duration === 0) {\n    el.style.height = to + 'px';\n    return;\n  }\n\n  el.style.height = from + 'px';\n  // Force a style calc so the browser picks up the start value.\n  getComputedStyle(el).transform;\n  el.style.transition = `height ${duration}ms ${easing}`;\n  el.style.height = to + 'px';\n\n  return new Promise<void>((resolve) => {\n    const listener = (event: Event) => {\n      if (event.target !== el) return;\n      el.style.transition = '';\n      el.removeEventListener('transitionend', listener);\n      el.removeEventListener('transitioncancel', listener);\n      resolve();\n    };\n\n    el.addEventListener('transitionend', listener);\n    el.addEventListener('transitioncancel', listener);\n  });\n}\n\n/**\n * Simple event listener that prevents the default.\n */\nexport function preventDefault(event: Event) {\n  event.preventDefault();\n}\n","import * as Comlink from \"comlink\";\nimport WorkerUrl from \"worker-plugin/loader?esModule&name=encoding!./worker\";\nimport type { WorkerApi } from \"./worker\";\nimport { detectAVIFSupport, detectWebPSupport } from \"./utils\";\nimport { ButteraugliOptions } from \"../lib/metrics\";\nimport { blobToImg, drawableToImageData } from \"squoosh/src/lib/util\";\n\nexport interface MeasureOptions {\n\tPSNR: boolean;\n\tSSIM: boolean;\n\tbutteraugli: false | ButteraugliOptions;\n}\n\ninterface Metrics {\n\tSSIM?: number;\n\tPSNR?: number;\n\tbutteraugli?: {\n\t\tsource: number;\n\t\theatMap: ImageBitmap;\n\t};\n}\n\nexport interface ConvertOutput {\n\tbuffer: ArrayBuffer;\n\tmetrics: Metrics;\n\tbitmap: ImageBitmap;\n}\n\nexport class BatchEncoder<T> {\n\n\tprivate readonly url: string;\n\n\tprivate image?: ImageData;\n\tprivate optionsList!: T[];\n\tprivate measure!: MeasureOptions;\n\n\tprivate index = 0;\n\tprivate workers: Worker[] = [];\n\n\tprivate results!: ConvertOutput[];\n\n\tconstructor(url: string) {\n\t\tthis.url = url;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tonProgress(value: number) {\n\t\t// noop by default\n\t}\n\n\tencode(image: ImageData, optionsList: T[], measure: MeasureOptions) {\n\t\tthis.image = image;\n\t\tthis.optionsList = optionsList;\n\t\tthis.measure = measure;\n\t\treturn this;\n\t}\n\n\tasync start(threadCount = 4) {\n\t\tif (!this.image) {\n\t\t\tthrow new Error(\"You should call encode() before start.\");\n\t\t}\n\t\tif (threadCount < 1) {\n\t\t\tthrow new Error(\"Thread count must be at least 1\");\n\t\t}\n\n\t\tconst length = this.optionsList.length;\n\t\tthreadCount = Math.min(threadCount, length);\n\n\t\tthis.results = new Array<ConvertOutput>(length);\n\n\t\tconst tasks = new Array(threadCount);\n\n\t\tfor (let i = 0; i < threadCount; i++) {\n\t\t\tconst worker = new Worker(this.url);\n\t\t\tconst wrapper = Comlink.wrap<WorkerApi>(worker);\n\t\t\tawait wrapper.setImageToEncode(this.image);\n\n\t\t\tthis.workers.push(worker);\n\t\t\ttasks.push(this.poll(wrapper));\n\t\t}\n\n\t\treturn Promise.all(tasks).then(() => this.results);\n\t}\n\n\tstop() {\n\t\tthis.workers.forEach(worker => worker.terminate());\n\t}\n\n\tprivate async poll(wrapper: Comlink.Remote<WorkerApi>) {\n\t\tconst { results, optionsList, measure } = this;\n\n\t\twhile (this.index < optionsList.length) {\n\t\t\tconst i = this.index++;\n\t\t\tthis.onProgress(i);\n\n\t\t\tconst buffer = await wrapper.webpEncode(optionsList[i]);\n\t\t\t// const data = await wrapper.webpDecode(buffer);\n\t\t\t// const bitmap = await createImageBitmap(data);\n\t\t\tconst [data, bitmap] = await decodeWebP(buffer);\n\n\t\t\tconst metrics: Metrics = {};\n\t\t\tif (measure.PSNR) {\n\t\t\t\tmetrics.PSNR = await wrapper.calcPSNR(data);\n\t\t\t}\n\t\t\tif (measure.SSIM) {\n\t\t\t\tmetrics.SSIM = await wrapper.calcSSIM(data);\n\t\t\t}\n\t\t\tif (measure.butteraugli) {\n\t\t\t\tconst [source, raw] = await wrapper.calcButteraugli(data);\n\t\t\t\tconst heatMap = await createImageBitmap({\n\t\t\t\t\twidth: bitmap.width,\n\t\t\t\t\theight: bitmap.height,\n\t\t\t\t\tdata: new Uint8ClampedArray(raw),\n\t\t\t\t});\n\t\t\t\tmetrics.butteraugli = { source, heatMap };\n\t\t\t}\n\n\t\t\tresults[i] = { buffer, bitmap, metrics };\n\t\t}\n\t}\n}\n\nexport function createWorkers() {\n\treturn new BatchEncoder(WorkerUrl);\n}\n\ntype DecodeResult = [ImageData, ImageBitmap];\n\nexport async function decodeImage(blob: Blob) {\n\tconst bitmap = await createImageBitmap(blob);\n\n\tconst canvas = document.createElement(\"canvas\");\n\tconst { width, height } = bitmap;\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tconst ctx = canvas.getContext(\"2d\")!;\n\tctx.drawImage(bitmap, 0, 0);\n\tconst imageData = ctx.getImageData(0, 0, width, height);\n\n\treturn [imageData, bitmap] as DecodeResult;\n}\n\ntype featureDetector = () => Promise<boolean>;\ntype DecodeFunction = (buffer: ArrayBuffer) => Promise<DecodeResult>;\n\nfunction decodeFn(\n\tcheckFn: featureDetector,\n\tnative: DecodeFunction,\n\tpolyfill: DecodeFunction,\n) {\n\tlet bestDecodeFn;\n\n\treturn async function choose(buffer: ArrayBuffer) {\n\t\tif (await checkFn()) {\n\t\t\tbestDecodeFn = native;\n\t\t} else {\n\t\t\tbestDecodeFn = polyfill;\n\t\t}\n\t\treturn await bestDecodeFn(buffer);\n\t};\n}\n\nfunction decodeAVIFNative(buffer: ArrayBuffer) {\n\treturn decodeImage(new Blob([buffer], { type: \"image/avif\" }));\n}\n\nasync function decodeAVIFWorker(buffer: ArrayBuffer) {\n\tconst worker = Comlink.wrap<WorkerApi>(new Worker(WorkerUrl));\n\tconst imageData = await worker.avifDecode(buffer);\n\tconst bitmap = await createImageBitmap(imageData);\n\treturn [imageData, bitmap] as DecodeResult;\n}\n\nfunction decodeWebPNative(buffer: ArrayBuffer) {\n\treturn decodeImage(new Blob([buffer], { type: \"image/webp\" }));\n}\n\nasync function decodeWebPWorker(buffer: ArrayBuffer) {\n\tconst worker = Comlink.wrap<WorkerApi>(new Worker(WorkerUrl));\n\tconst imageData = await worker.webpDecode(buffer);\n\tconst bitmap = await createImageBitmap(imageData);\n\treturn [imageData, bitmap] as DecodeResult;\n}\n\nexport const decodeWebP = decodeFn(detectWebPSupport, decodeWebPNative, decodeWebPWorker);\nexport const decodeAVIF = decodeFn(detectAVIFSupport, decodeAVIFNative, decodeAVIFWorker);\n\nfunction ensureSVGSize(svgXml: string) {\n\tconst parser = new DOMParser();\n\tconst document = parser.parseFromString(svgXml, \"image/svg+xml\");\n\tconst svg = document.documentElement;\n\n\tif (svg.getAttribute(\"width\") && svg.getAttribute(\"height\")) {\n\t\treturn svgXml;\n\t}\n\n\tconst viewBox = svg.getAttribute(\"viewBox\");\n\tif (viewBox === null) {\n\t\tthrow Error(\"SVG must have width/height or viewBox\");\n\t}\n\tconst [, , width, height] = viewBox.split(/\\s+/);\n\tsvg.setAttribute(\"width\", width);\n\tsvg.setAttribute(\"height\", height);\n\n\treturn new XMLSerializer().serializeToString(document);\n}\n\nexport function svgToImageData(svgXml: string) {\n\tsvgXml = ensureSVGSize(svgXml);\n\tconst blob = new Blob([svgXml], { type: \"image/svg+xml\" });\n\treturn blobToImg(blob).then(drawableToImageData);\n}\n","import React from \"react\";\n\ninterface ProgressPanelProps {\n\tmax: number;\n\tvalue: number;\n\tonCancel: () => void;\n}\n\nexport default function ProgressPanel(props: ProgressPanelProps) {\n\tconst { value, max, onCancel } = props;\n\treturn (\n\t\t<>\n\t\t\t<span>{value}/{max}</span>\n\t\t\t<progress id=\"progress\" value={value} max={max}/>\n\t\t\t<button onClick={onCancel}>Cancel</button>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"fieldset\":\"_3JA-S\",\"header\":\"_3BPBV\",\"tab\":\"_3h0pZ\",\"active\":\"_3_HaH\",\"footer\":\"_1cBY-\",\"button\":\"_2GyfY\",\"primary\":\"_2SWb5\",\"minor\":\"_1lm_d\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_35DMS\",\"input\":\"ak06L\",\"button\":\"YGikD\",\"plus\":\"_1cxWb\"};","import React, { useState } from \"react\";\nimport clsx from \"clsx\";\nimport Style from \"./NumberInput.scss\";\n\ninterface Props {\n\tvalue?: number;\n\tmin?: number;\n\tmax?: number;\n\tstep?: number;\n\tprecision?: number;\n\n\tdisabled?: boolean;\n\n\tonChange?(value: number): void;\n}\n\nfunction useLimitedValue(\n\tinit = 0,\n\tmin: number = Number.NEGATIVE_INFINITY,\n\tmax: number = Number.POSITIVE_INFINITY,\n\tprecision = 0,\n): [number, (v: number) => number] {\n\n\tconst [value, setValue] = useState(init);\n\n\tfunction setValueLimited(newValue: number) {\n\t\tif (newValue > max) {\n\t\t\tnewValue = max;\n\t\t} else if (newValue < min) {\n\t\t\tnewValue = min;\n\t\t} else if (precision !== 0) {\n\t\t\tconst s = newValue / precision;\n\t\t\tif (!Number.isInteger(s)) {\n\t\t\t\tnewValue = Math.round(s) * precision;\n\t\t\t}\n\t\t}\n\t\tsetValue(newValue);\n\t\treturn newValue;\n\t}\n\n\treturn [value, setValueLimited];\n}\n\nexport default function NumberInput(props: Props) {\n\tconst [localValue, setLocalValue] = useLimitedValue(props.value, props.min, props.max, 0.5);\n\n\tconst value = typeof props.value === \"undefined\" ? props.value : localValue;\n\n\tfunction setValue(newValue: number) {\n\t\tnewValue = setLocalValue(newValue);\n\t\tif (props.onChange) {\n\t\t\tprops.onChange(newValue);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={Style.container}>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tclassName={Style.input}\n\t\t\t\tdisabled={props.disabled}\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={(e) => setValue(e.target.valueAsNumber)}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={clsx(Style.button, Style.plus)}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tdisabled={props.disabled}\n\t\t\t\tonClick={() => setValue(value + (props.step || 1))}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={Style.button}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tdisabled={props.disabled}\n\t\t\t\tonClick={() => setValue(value - (props.step || 1))}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport NumberInput from \"./NumberInput\";\n\n// 互斥mode\n\nexport interface OptionType<F, V> {\n\n\tcreateFixedState(): F;\n\n\tcreateFixedInput(name: string, value: F): React.ReactElement;\n\n\tcreateVariableState(): V;\n\n\tcreateVariableInput(name: string, value: V): React.ReactElement;\n}\n\nexport class NumberRangeTemplate implements OptionType<any, any> {\n\n\treadonly min: number;\n\treadonly max: number;\n\treadonly defaultValue: number;\n\n\tconstructor(min: number, max: number, defaultValue: number) {\n\t\tthis.min = min;\n\t\tthis.max = max;\n\t\tthis.defaultValue = defaultValue;\n\t}\n\n\tcreateFixedState() {\n\t\treturn this.defaultValue;\n\t}\n\n\tcreateFixedInput(name: string, value: number) {\n\t\tconst { min, max } = this;\n\t\treturn (\n\t\t\t<label>\n\t\t\t\t<p>{name}</p>\n\t\t\t\t<input type=\"number\" min={min} max={max} value={value}/>\n\t\t\t</label>\n\t\t);\n\t}\n\n\tcreateVariableState() {\n\t\treturn {\n\t\t\tmin: this.min,\n\t\t\tmax: this.max,\n\t\t\tstep: 1,\n\t\t};\n\t}\n\n\tcreateVariableInput(name: string, value: any) {\n\t\tconst { min, max } = this;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<p>{name}</p>\n\t\t\t\t<label>\n\t\t\t\t\t<span>min: </span>\n\t\t\t\t\t<NumberInput value={value.min} min={min} max={max}/>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>max: </span>\n\t\t\t\t\t<input type=\"number\" min={min} max={max} value={value.max}/>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>step: </span>\n\t\t\t\t\t<input type=\"number\" min={min} max={max} value={value.step}/>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport class BooleanTemplate {\n\n}\n\nexport class EnumTemplate implements OptionType<any, any> {\n\n\tprivate readonly names: string[];\n\tprivate readonly defaultValue: string;\n\n\tconstructor(names: string[], defaultValue: string) {\n\t\tthis.names = names;\n\t\tthis.defaultValue = defaultValue;\n\t}\n\n\tcreateFixedInput(name: string, value: any): React.ReactElement {\n\t\treturn null;\n\t}\n\n\tcreateFixedState() {\n\t\treturn this.defaultValue;\n\t}\n\n\tcreateVariableInput(name: string, value: any): React.ReactElement {\n\t\treturn null;\n\t}\n\n\tcreateVariableState(): any {\n\t\treturn this.names;\n\t}\n}\n\n","import { OptionTemplate } from \"./index\";\nimport { NumberRangeTemplate } from \"../component/OptionTemplate\";\n\nexport const WebPOptionsTemplate: OptionTemplate[] = [\n\t{\n\t\tlabel: \"Quality (-q)\",\n\t\tname: \"quality\",\n\t\ttype: new NumberRangeTemplate(0, 100, 75),\n\t\tdefaultVariable: true,\n\t},\n\t{\n\t\tlabel: \"Method (-m)\",\n\t\tname: \"method\",\n\t\ttype: new NumberRangeTemplate(0, 6, 4),\n\t},\n\t{\n\t\tlabel: \"Spatial noise shaping (-sns)\",\n\t\tname: \"sns\",\n\t\ttype: new NumberRangeTemplate(0, 6, 4),\n\t},\n\t{\n\t\tlabel: \"Filter sharpness (-f)\",\n\t\tname: \"filter_sharpness\",\n\t\ttype: new NumberRangeTemplate(0, 100, 4),\n\t},\n];\n","export enum WebPImageHint {\n  WEBP_HINT_DEFAULT, // default preset.\n  WEBP_HINT_PICTURE, // digital picture, like portrait, inner shot\n  WEBP_HINT_PHOTO,   // outdoor photograph, with natural lighting\n  WEBP_HINT_GRAPH,   // Discrete tone image (graph, map-tile etc).\n}\n\nexport interface EncodeOptions {\n  quality: number;\n  target_size: number;\n  target_PSNR: number;\n  method: number;\n  sns_strength: number;\n  filter_strength: number;\n  filter_sharpness: number;\n  filter_type: number;\n  partitions: number;\n  segments: number;\n  pass: number;\n  show_compressed: number;\n  preprocessing: number;\n  autofilter: number;\n  partition_limit: number;\n  alpha_compression: number;\n  alpha_filtering: number;\n  alpha_quality: number;\n  lossless: number;\n  exact: number;\n  image_hint: number;\n  emulate_jpeg_size: number;\n  thread_level: number;\n  low_memory: number;\n  near_lossless: number;\n  use_delta_palette: number;\n  use_sharp_yuv: number;\n}\nexport interface EncoderState { type: typeof type; options: EncodeOptions; }\n\nexport const type = 'webp';\nexport const label = 'WebP';\nexport const mimeType = 'image/webp';\nexport const extension = 'webp';\n// These come from struct WebPConfig in encode.h.\nexport const defaultOptions: EncodeOptions = {\n  quality: 75,\n  target_size: 0,\n  target_PSNR: 0,\n  method: 4,\n  sns_strength: 50,\n  filter_strength: 60,\n  filter_sharpness: 0,\n  filter_type: 1,\n  partitions: 0,\n  segments: 4,\n  pass: 1,\n  show_compressed: 0,\n  preprocessing: 0,\n  autofilter: 0,\n  partition_limit: 0,\n  alpha_compression: 1,\n  alpha_filtering: 1,\n  alpha_quality: 100,\n  lossless: 0,\n  exact: 0,\n  image_hint: 0,\n  emulate_jpeg_size: 0,\n  thread_level: 0,\n  low_memory: 0,\n  near_lossless: 100,\n  use_delta_palette: 0,\n  use_sharp_yuv: 0,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"_25ukj\",\"uploadFile\":\"_3bhac\",\"icon\":\"_3eDV2\",\"text\":\"_32mqE\",\"fileInput\":\"g-JHc\"};","import React, { ChangeEvent, Dispatch } from \"react\";\nimport ImageIcon from \"bootstrap-icons/icons/image.svg\";\nimport Styles from \"./SelectFilePanel.scss\";\n\ninterface SFProps {\n\tsetFile: Dispatch<File | string>\n}\n\nexport default function SelectFilePanel(props: SFProps) {\n\n\tfunction handleFileChange(event: ChangeEvent<HTMLInputElement>) {\n\t\tprops.setFile(event.currentTarget.files![0]);\n\t}\n\n\tfunction handleUrlChange(event: ChangeEvent<HTMLInputElement>) {\n\t\tprops.setFile(event.currentTarget.value);\n\t}\n\n\treturn (\n\t\t<form className={Styles.form}>\n\t\t\t<label className={Styles.uploadFile} tabIndex={0}>\n\t\t\t\t<div className={Styles.icon}>\n\t\t\t\t\t<ImageIcon/>\n\t\t\t\t</div>\n\t\t\t\t<div className={Styles.text}>\n\t\t\t\t\tDrag & drop\n\t\t\t\t</div>\n\t\t\t\t<div className={Styles.text}>\n\t\t\t\t\tOr select an image\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tclassName={Styles.fileInput}\n\t\t\t\t\tname=\"file\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>Or image url</span>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"text-box\"\n\t\t\t\t\tname=\"url\"\n\t\t\t\t\tonChange={handleUrlChange}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</form>\n\t);\n}\n","import React, { Dispatch, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport CheckIcon from \"bootstrap-icons/icons/check2.svg\";\nimport { NOOP } from \"../utils\";\nimport Styles from \"./CheckBoxInput.scss\";\n\ninterface Props {\n\tchecked: boolean;\n\tname?: string;\n\tdisabled?: boolean;\n\tonChange?: Dispatch<boolean>;\n\tchildren?: ReactNode;\n}\n\nexport default function CheckBoxInput(props: Props) {\n\tconst { name, children, checked, disabled, onChange = NOOP } = props;\n\treturn (\n\t\t<label className={Styles.container}>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tclassName={Styles.input}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonChange={e => onChange(e.currentTarget.checked)}\n\t\t\t/>\n\t\t\t<span\n\t\t\t\tclassName={clsx(Styles.mark, { [Styles.checked]: checked })}\n\t\t\t>\n\t\t\t\t<CheckIcon/>\n\t\t\t</span>\n\t\t\t<span className={Styles.label}>{children}</span>\n\t\t</label>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ZwHw2\",\"input\":\"_243y6\",\"mark\":\"_2YZFR\",\"checked\":\"_3zJKg\",\"label\":\"_3oYw0\"};","import React, { Dispatch, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport Styles from \"./RadioInput.scss\";\nimport { NOOP } from \"../utils\";\n\ninterface Props {\n\tchecked: boolean;\n\tname: string;\n\tdisabled?: boolean;\n\tonChange?: Dispatch<boolean>;\n\tchildren?: ReactNode;\n}\n\nexport default function RadioInput(props: Props) {\n\tconst { name, children, checked, disabled, onChange = NOOP } = props;\n\n\treturn (\n\t\t<label className={Styles.container}>\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tclassName={Styles.input}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonChange={e => onChange(e.currentTarget.checked)}\n\t\t\t/>\n\t\t\t<span className={clsx(Styles.mark, { [Styles.checked]: checked })}/>\n\t\t\t<span className={Styles.label}>{children}</span>\n\t\t</label>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2BtPq\",\"input\":\"fvDDZ\",\"mark\":\"_2osl6\",\"checked\":\"_3g4e_\",\"label\":\"_2H8a2\"};","import React, { Dispatch, FormEvent } from \"react\";\nimport { WebPOptionsTemplate } from \"../options\";\nimport RadioInput from \"./RadioInput\";\nimport Styles from \"./ConfigPanel.scss\";\n\nexport interface OptionsInstance {\n\t[key: string]: {\n\t\tfixed?: any;\n\t\tvariable?: any;\n\t}\n}\n\ninterface Props {\n\tvars: string[];\n\tonVarsChange: Dispatch<string[]>;\n\toptions: any;\n}\n\nexport default function OptionsPanel(props: Props) {\n\tconst { vars, options, onVarsChange } = props;\n\n\tconst fields: React.ReactElement[] = [];\n\n\tfor (const template of WebPOptionsTemplate) {\n\t\tconst { name, type } = template;\n\t\tconst option = options[name] ||= {};\n\n\t\tconst isVariable = vars.includes(name);\n\t\tlet element;\n\n\t\tif (isVariable) {\n\t\t\tif (!(\"variable\" in option)) {\n\t\t\t\toption.variable = type.createVariableState();\n\t\t\t}\n\t\t\telement = type.createVariableInput(name, option.variable);\n\t\t} else {\n\t\t\tif (!(\"fixed\" in option)) {\n\t\t\t\toption.fixed = type.createFixedState();\n\t\t\t}\n\t\t\telement = type.createFixedInput(name, option.fixed);\n\t\t}\n\n\t\tconst radioChange = (e: FormEvent<HTMLInputElement>) => {\n\t\t\tif (e.currentTarget.checked) onVarsChange([name]);\n\t\t};\n\n\t\tfields.push(\n\t\t\t<div key={name}>\n\t\t\t\t<RadioInput\n\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\tname=\"vars\"\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</RadioInput>\n\t\t\t\t{element}\n\t\t\t</div>);\n\t}\n\n\treturn <form className={Styles.form}>{fields}</form>;\n}\n","import React, { FormEvent, useState } from \"react\";\nimport clsx from \"clsx\";\nimport Styles from \"./ConfigPanel.scss\";\nimport { WebPOptionsTemplate } from \"../options\";\nimport { defaultOptions, EncodeOptions } from \"squoosh/src/codecs/webp/encoder-meta\";\nimport SelectFilePanel from \"./SelectFilePanel\";\nimport { MeasureOptions } from \"../encoding\";\nimport CheckBoxInput from \"./CheckBoxInput\";\nimport OptionsPanel, { OptionsInstance } from \"./OptionsPanel\";\nimport NumberInput from \"./NumberInput\";\n\ninterface MProps {\n\tworkerCount: number;\n\tyAxis: string[];\n\toptions: MeasureOptions;\n}\n\nfunction MetricsPanel(props: MProps) {\n\tconst { workerCount, yAxis } = props;\n\tconst { SSIM, PSNR, butteraugli } = props.options;\n\n\tlet bOptions;\n\tif (butteraugli) {\n\t\tbOptions = (\n\t\t\t<fieldset>\n\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\treturn (\n\t\t<form className={Styles.form}>\n\t\t\t<label>\n\t\t\t\tWorker count:\n\t\t\t\t<NumberInput min={1} value={workerCount}/>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>Use pervious Y axis</span>\n\t\t\t\t<select>\n\t\t\t\t\t<option>(None)</option>\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t\t<CheckBoxInput checked={SSIM}>Calculate SSIM</CheckBoxInput>\n\t\t\t<CheckBoxInput checked={PSNR}>Calculate PSNR</CheckBoxInput>\n\t\t\t<CheckBoxInput checked={!!butteraugli}>Calculate Butteraugli</CheckBoxInput>\n\t\t\t{bOptions}\n\t\t</form>\n\t);\n}\n\ninterface Props {\n\tonStart: (file: File, optionsList: any[], measure: MeasureOptions, workerCount: number) => void;\n\tonClose: () => void;\n}\n\nexport default function ConfigPanel(props: Props) {\n\tconst [file, setFile] = useState<File | string>();\n\n\tconst [vars, setVars] = useState<string[]>(() => WebPOptionsTemplate\n\t\t.filter(t => t.defaultVariable).map(t => t.name));\n\n\tconst [options, setOptions] = useState<OptionsInstance>({});\n\n\tconst [workerCount, setWorkerCount] = useState(4);\n\tconst [measure, setMeasure] = useState<MeasureOptions>({\n\t\tSSIM: false,\n\t\tPSNR: true,\n\t\tbutteraugli: false,\n\t});\n\n\tfunction loadFile(event: FormEvent<HTMLInputElement>) {\n\t\tsetFile(event.currentTarget.files![0]);\n\t}\n\n\t// TODO: stub options\n\tasync function start() {\n\t\tconst optionsList = new Array<EncodeOptions>(101);\n\t\tfor (let i = 0; i < 101; i++) {\n\t\t\toptionsList[i] = { ...defaultOptions, quality: i };\n\t\t}\n\t\tif (typeof file === \"string\") {\n\t\t\tconst blob = await (await fetch(file)).blob();\n\t\t\tconst name = new URL(file).pathname.split(\"/\").pop()!;\n\t\t\tconst f = new File([blob], name);\n\t\t\tprops.onStart(f, optionsList, measure, workerCount);\n\t\t} else {\n\t\t\tprops.onStart(file!, optionsList, measure, workerCount);\n\t\t}\n\t}\n\n\tconst [index, setIndex] = useState(0);\n\n\tconst panels = [\"Select File\", \"Options\", \"Metrics\"];\n\n\tconst tabs = [];\n\tfor (let i = 0; i < panels.length; i++) {\n\t\tconst name = panels[i];\n\t\tconst clazz = i === index ? clsx(Styles.tab, Styles.active) : Styles.tab;\n\t\ttabs.push(<div key={i} className={clazz} onClick={() => setIndex(i)}>{name}</div>);\n\t}\n\n\tlet panel;\n\n\tswitch (index) {\n\t\tcase 0:\n\t\t\tpanel = <SelectFilePanel setFile={setFile}/>;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tpanel = <OptionsPanel\n\t\t\t\tvars={vars}\n\t\t\t\toptions={options}\n\t\t\t\tonVarsChange={setVars}\n\t\t\t/>;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tpanel = <MetricsPanel\n\t\t\t\tworkerCount={workerCount}\n\t\t\t\tyAxis={[]}\n\t\t\t\toptions={measure}\n\t\t\t/>;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error();\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div className={Styles.header}>{tabs}</div>\n\t\t\t{panel}\n\t\t\t<div className={Styles.footer}>\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx(Styles.button, Styles.minor)}\n\t\t\t\t\tonClick={props.onClose}\n\t\t\t\t>\n\t\t\t\t\t威威威威阿斯顿\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx(Styles.button, Styles.primary)}\n\t\t\t\t\tdisabled={!file}\n\t\t\t\t\tonClick={start}\n\t\t\t\t>\n\t\t\t\t\tStart\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { useState } from \"react\";\nimport Styles from \"./CompressDialog.scss\";\nimport {\n\tBatchEncoder,\n\tConvertOutput,\n\tcreateWorkers,\n\tdecodeAVIF,\n\tdecodeImage,\n\tdecodeWebP,\n\tMeasureOptions,\n\tsvgToImageData,\n} from \"../encoding\";\nimport ProgressPanel from \"./ProgressPanel\";\nimport ConfigPanel from \"./ConfigPanel\";\n\ninterface Props {\n\tonChange: (file: File, results: ConvertOutput[]) => void;\n\tonClose: () => void;\n}\n\nexport default function CompressDialog(props: Props) {\n\tconst [encoder, setEncoder] = useState<BatchEncoder<unknown>>();\n\n\tconst [max, setMax] = useState(1);\n\tconst [progress, setProgress] = useState(0);\n\n\tasync function handleStart(file: File, optionsList: any[], measure: MeasureOptions, workerCount: number) {\n\t\tif (!file) {\n\t\t\tthrow new Error(\"File is null\");\n\t\t}\n\n\t\tlet image: ImageData;\n\t\tswitch (file.type) {\n\t\t\tcase \"image/svg+xml\":\n\t\t\t\timage = await svgToImageData(await file.text());\n\t\t\t\tbreak;\n\t\t\tcase \"image/webp\":\n\t\t\t\t[image] = await decodeWebP(await file.arrayBuffer());\n\t\t\t\tbreak;\n\t\t\tcase \"image/avif\":\n\t\t\t\t[image] = await decodeAVIF(await file.arrayBuffer());\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t[image] = await decodeImage(file);\n\t\t}\n\n\t\tconst encoder = createWorkers();\n\n\t\tsetEncoder(encoder);\n\t\tsetMax(optionsList.length);\n\t\tsetProgress(0);\n\n\t\tencoder.onProgress = setProgress;\n\t\tconst outputs = await encoder.encode(image, optionsList, measure).start(workerCount);\n\n\t\tprops.onChange(file, outputs);\n\t}\n\n\tfunction stop() {\n\t\tsetEncoder(undefined);\n\t\tencoder!.stop();\n\t}\n\n\tlet panel;\n\n\tif (encoder) {\n\t\tpanel = <ProgressPanel value={progress} max={max} onCancel={stop}/>;\n\t} else {\n\t\tpanel = <ConfigPanel onStart={handleStart} onClose={props.onClose}/>;\n\t}\n\n\treturn (\n\t\t<div className={Styles.dimmer}>\n\t\t\t<div className={Styles.dialog}>\n\t\t\t\t{panel}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dimmer\":\"_3YekE\",\"dialog\":\"_3xBTO\"};","import React, { useEffect, useState } from \"react\";\nimport echarts, { ECharts } from \"echarts\";\nimport Styles from \"./Chart.scss\";\n\ninterface Props {\n\toptions: any;\n}\n\n// setChartOptions({\n// \ttitle: {\n// \t\ttext: \"Quality (-q)\",\n// \t},\n// \ttooltip: {\n// \t\ttrigger: \"axis\",\n// \t},\n// \tlegend: {\n// \t\tdata: [\"Compression Ratio\"],\n// \t},\n// \txAxis: {\n// \t\tdata: encodedFiles.map((_, i) => i),\n// \t},\n// \tyAxis: {},\n// \tseries: [{\n// \t\tname: \"Compression Ratio %\",\n// \t\ttype: \"line\",\n// \t\tdata: encodedFiles.map(({ length }) => length / file.size * 100),\n// \t}],\n// });\n\nexport default function Chart(props: Props) {\n\tconst { options } = props;\n\tconst [chart, setChart] = useState<ECharts>();\n\n\tfunction initEchart(el: HTMLDivElement | null) {\n\t\tif (!el) {\n\t\t\treturn;\n\t\t}\n\t\tsetChart(echarts.init(el, { renderer: \"svg\" }));\n\t}\n\n\tuseEffect(() => chart?.setOption({\n\t\ttitle: {\n\t\t\ttext: \"Quality (-q)\",\n\t\t},\n\t\ttooltip: {\n\t\t\ttrigger: \"axis\",\n\t\t},\n\t\tlegend: {\n\t\t\tdata: [\"Compression Ratio\"],\n\t\t},\n\t\txAxis: {\n\t\t\tdata: options.metrics.map((_, i) => i),\n\t\t},\n\t\tyAxis: {},\n\t\tseries: [{\n\t\t\tname: \"Compression Ratio %\",\n\t\t\ttype: \"line\",\n\t\t\tdata: options.metrics,\n\t\t}],\n\t}), [options]);\n\n\treturn <div className={Styles.container}><div className={Styles.chart} ref={initEchart}/></div>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"erTiL\",\"chart\":\"_2TFU8\"};","// extracted by mini-css-extract-plugin\nexport default {\"buttonGroup\":\"qRI2y controls\",\"variableGroup\":\"UCi6D controls\",\"iconButton\":\"O8zNb\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Kom7G\",\"thumbRegion\":\"_3L2lQ\",\"thumb\":\"_3iPBZ\",\"input\":\"_2IK1v\"};","import React, { CSSProperties, FormEvent, useState } from \"react\";\nimport clsx from \"clsx\";\nimport Styles from \"./RangeInput.scss\";\n\ninterface Props {\n\tvalue?: number;\n\tmin?: number;\n\tmax?: number;\n\tstep?: number;\n\n\tdisabled?: boolean;\n\n\tonChange(e: FormEvent<HTMLInputElement>):void\n}\n\ninterface RangeInputCSS extends CSSProperties {\n\t\"--value-percent\": string;\n}\n\nexport default function RangeInput(props: Props) {\n\tconst [dragging, setDragging] = useState(false);\n\n\tfunction mouseMove() {\n\t\tsetDragging(true);\n\n\t\tfunction moveEnd(event: Event) {\n\t\t\tevent.preventDefault();\n\t\t\tsetDragging(false);\n\t\t\tdocument.removeEventListener(\"mouseup\", moveEnd);\n\t\t}\n\n\t\tdocument.addEventListener(\"mouseup\", moveEnd);\n\t}\n\n\tfunction touchMove() {\n\t\tsetDragging(true);\n\n\t\tfunction moveEnd(event: Event) {\n\t\t\tevent.preventDefault();\n\t\t\tsetDragging(false);\n\t\t\tdocument.removeEventListener(\"touchend\", moveEnd);\n\t\t}\n\n\t\tdocument.addEventListener(\"touchend\", moveEnd);\n\t}\n\n\tconst classes = clsx(\n\t\tStyles.thumb,\n\t\t{ [Styles.active]: dragging },\n\t);\n\n\tconst cssVariables: RangeInputCSS = {\n\t\t\"--value-percent\": `${props.value ?? 0}%`,\n\t};\n\n\treturn (\n\t\t<span\n\t\t\tclassName={Styles.container}\n\t\t\tstyle={cssVariables}\n\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tclassName={Styles.input}\n\t\t\t\tvalue={props.value}\n\t\t\t\tmin={props.min}\n\t\t\t\tmax={props.max}\n\t\t\t\tstep={props.step}\n\t\t\t\tonChange={props.onChange}\n\t\t\t/>\n\n\t\t\t<span className={Styles.thumbRegion}>\n\t\t\t\t<span className={classes}/>\n\t\t\t</span>\n\t\t</span>\n\t);\n}\n","import React, { CSSProperties, ReactNode, useEffect, useRef, useState, WheelEvent } from \"react\";\nimport IconButton from \"./IconButton\";\nimport NumberInput from \"./NumberInput\";\nimport Styles from \"./ImageView.scss\";\nimport { ConvertOutput } from \"../encoding\";\n\ninterface Props {\n\toriginal?: File;\n\twidth: number;\n\theight: number;\n\toptimized?: ConvertOutput;\n}\n\nexport enum ViewType {\n\tOriginal,\n\tCompressed,\n\tAbsDiff,\n\tHeatMap,\n}\n\ninterface ImageViewCSS extends CSSProperties {\n\t\"--original\": string;\n\t\"--x\": string;\n\t\"--y\": string;\n\t\"--scale\": number;\n\t\"--brightness\": string;\n}\n\ntype PointerMoveHandler = (dx: number, dy: number) => void;\n\nfunction watchMouseMove(baseEvent: MouseEvent, handler: PointerMoveHandler) {\n\tconst basePageX = baseEvent.pageX;\n\tconst basePageY = baseEvent.pageY;\n\n\tfunction handleMove(event: MouseEvent) {\n\t\thandler(event.pageX - basePageX, event.pageY - basePageY);\n\t}\n\n\tfunction handleEnd(event: Event) {\n\t\tevent.preventDefault();\n\t\tdocument.removeEventListener(\"mousemove\", handleMove);\n\t\tdocument.removeEventListener(\"mouseup\", handleEnd);\n\t}\n\n\tdocument.addEventListener(\"mousemove\", handleMove);\n\tdocument.addEventListener(\"mouseup\", handleEnd);\n}\n\nfunction watchTouchMove(baseEvent: TouchEvent, handler: PointerMoveHandler) {\n\tconst basePointer = baseEvent.touches[0];\n\n\tfunction handleMove(event: TouchEvent) {\n\t\tconst touch = event.touches[0];\n\t\thandler(touch.pageX - basePointer.pageX, touch.pageY - basePointer.pageY);\n\t}\n\n\tfunction handleEnd(event: Event) {\n\t\tevent.preventDefault();\n\t\tdocument.removeEventListener(\"touchmove\", handleMove);\n\t\tdocument.removeEventListener(\"touchend\", handleEnd);\n\t}\n\n\tdocument.addEventListener(\"touchmove\", handleMove);\n\tdocument.addEventListener(\"touchend\", handleEnd);\n}\n\nexport default function ImageView(props: Props) {\n\tconst { original, width, height, optimized } = props;\n\n\tconst [type, setType] = useState(ViewType.Compressed);\n\tconst [brightness, setBrightness] = useState(100);\n\tconst [originalUrl, setOriginalUrl] = useState(\"\");\n\n\tconst [zoom, setZoom] = useState(1);\n\tconst [offset, setOffset] = useState({ x: 0, y: 0 });\n\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\n\tfunction refreshCanvas() {\n\t\tif (!optimized) {\n\t\t\treturn;\n\t\t}\n\t\tconst { metrics, bitmap } = optimized;\n\t\tconst ctx = canvasRef.current!.getContext(\"2d\");\n\t\tif (!ctx) {\n\t\t\tthrow new Error(\"Could not create canvas context\");\n\t\t}\n\t\tif (type === ViewType.HeatMap) {\n\t\t\tctx.drawImage(metrics.butteraugli!.heatMap, 0, 0);\n\t\t} else {\n\t\t\tctx.drawImage(bitmap!, 0, 0);\n\t\t}\n\t}\n\n\tfunction refreshBackground() {\n\t\tif(!original) {\n\t\t\treturn;\n\t\t}\n\t\tconst url = URL.createObjectURL(original);\n\t\tsetOriginalUrl(url);\n\t\treturn () => URL.revokeObjectURL(url);\n\t}\n\n\tuseEffect(refreshBackground, [original]);\n\tuseEffect(refreshCanvas, [type, optimized]);\n\n\tinterface ImageViewTabProps {\n\t\ttarget: ViewType;\n\t\tdisabled?: boolean;\n\t\tchildren: ReactNode;\n\t}\n\n\tfunction ImageViewTab(props: ImageViewTabProps) {\n\t\tconst { children, target, disabled } = props;\n\t\treturn (\n\t\t\t<IconButton\n\t\t\t\tactive={type === target}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonClick={() => setType(target)}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</IconButton>\n\t\t);\n\t}\n\n\tfunction handleWheel(event: WheelEvent) {\n\t\tconst { ctrlKey, deltaMode } = event;\n\t\tlet { deltaY } = event;\n\n\t\tevent.preventDefault();\n\n\t\t// 1 is \"lines\", 0 is \"pixels\"\n\t\tif (deltaMode === 1) {\n\t\t\tdeltaY *= 15; // Firefox uses \"lines\" for some types of mouse\n\t\t}\n\n\t\t// ctrlKey is true when pinch-zooming on a trackpad.\n\t\tconst divisor = ctrlKey ? 100 : 300;\n\t\tsetZoom(zoom * (1 - deltaY / divisor));\n\t}\n\n\tfunction offsetUpdater() {\n\t\tconst baseX = offset.x;\n\t\tconst baseY = offset.y;\n\n\t\treturn (dx: number, dy: number) => {\n\t\t\tconst x = baseX + dx;\n\t\t\tconst y = baseY + dy;\n\t\t\tsetOffset({ x, y });\n\t\t};\n\t}\n\n\tlet brightnessInput = null;\n\tlet brightnessVal = 100;\n\n\tif (type === ViewType.AbsDiff) {\n\t\tbrightnessVal = brightness;\n\t\tbrightnessInput = (\n\t\t\t<label>\n\t\t\t\tBrightness:\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={brightness}\n\t\t\t\t\tmin={100}\n\t\t\t\t\tstep={50}\n\t\t\t\t\tonChange={setBrightness}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t);\n\t}\n\n\tconst wrapperCss: ImageViewCSS = {\n\t\twidth, height,\n\t\t\"--original\": `url(\"${originalUrl}\")`,\n\t\t\"--scale\": zoom,\n\t\t\"--x\": offset.x + \"px\",\n\t\t\"--y\": offset.y + \"px\",\n\t\t\"--brightness\": `${brightnessVal}%`,\n\t};\n\n\tconst blend = type === ViewType.AbsDiff ? \"difference\" : undefined;\n\tconst butteraugliAvailable = !optimized?.metrics.butteraugli;\n\n\treturn (\n\t\t<div\n\t\t\tclassName={Styles.container}\n\t\t\tonWheel={handleWheel}\n\t\t>\n\t\t\t<aside className={Styles.inputs}>\n\t\t\t\t<div>\n\t\t\t\t\t<ImageViewTab target={ViewType.Original}>Original</ImageViewTab>\n\t\t\t\t\t<ImageViewTab target={ViewType.Compressed}>Compressed</ImageViewTab>\n\t\t\t\t\t<ImageViewTab target={ViewType.AbsDiff}>Difference</ImageViewTab>\n\t\t\t\t\t<ImageViewTab disabled={butteraugliAvailable} target={ViewType.HeatMap}>HeatMap</ImageViewTab>\n\t\t\t\t</div>\n\t\t\t\t{brightnessInput}\n\t\t\t</aside>\n\t\t\t<div\n\t\t\t\tclassName={Styles.wrapper}\n\t\t\t\tstyle={wrapperCss}\n\t\t\t\tonMouseDown={e => e.button === 0 && watchMouseMove(e.nativeEvent, offsetUpdater())}\n\t\t\t\tonTouchStart={e => watchTouchMove(e.nativeEvent, offsetUpdater())}\n\t\t\t>\n\t\t\t\t<canvas\n\t\t\t\t\tclassName={Styles.canvas}\n\t\t\t\t\tstyle={{ mixBlendMode: blend }}\n\t\t\t\t\tref={canvasRef}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\thidden={type === ViewType.Original}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_3rEMC\",\"inputs\":\"_36o9S controls\",\"wrapper\":\"_1me0h\",\"canvas\":\"_3BNiC\"};","import React, { FormEvent, ReactNode, useEffect, useState } from \"react\";\nimport UploadIcon from \"bootstrap-icons/icons/cloud-upload.svg\";\nimport ChartIcon from \"bootstrap-icons/icons/bar-chart-line.svg\";\nimport DownloadIcon from \"bootstrap-icons/icons/download.svg\";\nimport IconButton from \"./IconButton\";\nimport CompressDialog from \"./CompressDialog\";\nimport Chart from \"./Chart\";\nimport style from \"./App.scss\";\nimport RangeInput from \"./RangeInput\";\nimport ImageView from \"./ImageView\";\nimport { ConvertOutput } from \"../encoding\";\n\ninterface Result {\n\toriginal?: File;\n\twidth: number;\n\theight: number;\n\n\toutputs: ConvertOutput[];\n}\n\nconst PLACEHOLDER: Result = {\n\toriginal: undefined,\n\twidth: 0,\n\theight: 0,\n\toutputs: [],\n};\n\ninterface DownloadButtonProps {\n\ttitle?: string;\n\tbuffer?: ArrayBuffer;\n\tfilename?: string;\n\tchildren: ReactNode;\n}\n\nfunction DownloadButton(props: DownloadButtonProps) {\n\tconst { title, buffer, filename, children } = props;\n\n\tconst [url, setUrl] = useState(\"\");\n\tuseEffect(() => () => URL.revokeObjectURL(url), []);\n\n\tfunction downloadImage() {\n\t\tconst blob = new Blob([buffer!], { type: \"image/webp\" });\n\n\t\tURL.revokeObjectURL(url);\n\t\tconst newUrl = URL.createObjectURL(blob);\n\t\tsetUrl(newUrl);\n\n\t\tconst a = document.createElement(\"a\");\n\t\ta.href = url;\n\t\ta.download = filename!.split(\".\").pop()!;\n\t\tdocument.body.appendChild(a);\n\t\ta.click();\n\t\tdocument.body.removeChild(a);\n\t}\n\n\treturn (\n\t\t<IconButton\n\t\t\tclassName={style.iconButton}\n\t\t\ttitle={title}\n\t\t\tdisabled={!buffer}\n\t\t\tonClick={downloadImage}\n\t\t>\n\t\t\t{children}\n\t\t</IconButton>\n\t);\n}\n\nexport default function App() {\n\tconst [showDialog, setShowDialog] = useState(false);\n\tconst [showChart, setShowChart] = useState(false);\n\tconst [index, setIndex] = useState(0);\n\tconst [results, setResults] = useState(PLACEHOLDER);\n\n\tasync function showResult(original: File, outputs: ConvertOutput[]) {\n\t\tsetResults({\n\t\t\toutputs,\n\t\t\toriginal,\n\t\t\twidth: outputs[0].bitmap.width,\n\t\t\theight: outputs[0].bitmap.height,\n\t\t});\n\t\tsetIndex(75);\n\t\tsetShowDialog(false);\n\t}\n\n\tfunction handleIndexChange(e: FormEvent<HTMLInputElement>) {\n\t\tconst i = e.currentTarget.valueAsNumber;\n\t\tsetIndex(i);\n\t\t// setOptimized(results[i]);\n\t\t// canvasRef.current!.getContext(\"2d\")!.drawImage(results[i], 0, 0);\n\t\t// chart.dispatchAction({ type: \"showTip\", x: i, y: 0,position: [\"50%\", \"50%\"] });\n\t}\n\n\t// Show chart on result change, but skip the first.\n\tuseEffect(() => setShowChart(results !== PLACEHOLDER), [results]);\n\n\treturn (\n\t\t<>\n\t\t\t<ImageView {...results} optimized={results.outputs[index]}/>\n\n\t\t\t{showChart && <Chart {...results}/>}\n\n\t\t\t<div className={style.buttonGroup}>\n\t\t\t\t<IconButton\n\t\t\t\t\ttitle=\"Select an image\"\n\t\t\t\t\tclassName={style.iconButton}\n\t\t\t\t\tonClick={() => setShowDialog(true)}\n\t\t\t\t>\n\t\t\t\t\t<UploadIcon/>\n\t\t\t\t</IconButton>\n\t\t\t\t<IconButton\n\t\t\t\t\ttitle=\"Show chart\"\n\t\t\t\t\tclassName={style.iconButton}\n\t\t\t\t\tdisabled={results === PLACEHOLDER}\n\t\t\t\t\tactive={showChart}\n\t\t\t\t\tonClick={() => setShowChart(!showChart)}\n\t\t\t\t>\n\t\t\t\t\t<ChartIcon/>\n\t\t\t\t</IconButton>\n\t\t\t\t<DownloadButton\n\t\t\t\t\ttitle=\"Download compressed image\"\n\t\t\t\t\tfilename={results.original?.name}\n\t\t\t\t\tbuffer={results.outputs[index]?.buffer}\n\t\t\t\t>\n\t\t\t\t\t<DownloadIcon/>\n\t\t\t\t</DownloadButton>\n\t\t\t</div>\n\n\t\t\t<div className={style.variableGroup}>\n\t\t\t\t<label>\n\t\t\t\t\t<p>Quality (-q) {index}</p>\n\t\t\t\t\t<RangeInput\n\t\t\t\t\t\tvalue={index}\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\tonChange={handleIndexChange}\n\t\t\t\t\t/>\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t{showDialog && <CompressDialog onClose={() => setShowDialog(false)} onChange={showResult}/>}\n\t\t</>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./component/App\";\n\nReactDOM.render(<App/>, document.getElementById(\"root\"));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\nvar deferredModules = [\n\t[37329,823]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = () => {\n\n};\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = () => {\n\n\t\t}\n\t}\n\treturn result;\n}\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = () => {\n\n\t}\n\tchunkLoadingGlobal = chunkLoadingGlobal.slice();\n\tfor(var i = 0; i < chunkLoadingGlobal.length; i++) webpackJsonpCallback(chunkLoadingGlobal[i]);\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tparentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkic_analyze\"] = self[\"webpackChunkic_analyze\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = webpackJsonpCallback;","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}