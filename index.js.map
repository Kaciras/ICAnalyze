{"version":3,"sources":["webpack://ic-analyzer/webpack/runtime/chunk loaded","webpack://ic-analyzer/webpack/runtime/load script","webpack://ic-analyzer/./lib/diff.js","webpack://ic-analyzer/./deps/squoosh/src/client/lazy-app/util/index.ts","webpack://ic-analyzer/./deps/squoosh/src/client/lazy-app/util/canvas.ts","webpack://ic-analyzer/./web/decode.ts","webpack://ic-analyzer/./web/analyzing.ts","webpack://ic-analyzer/./web/assets/check_box.svg","webpack://ic-analyzer/./web/assets/check_box-checked.svg","webpack://ic-analyzer/./web/assets/radio_box.svg","webpack://ic-analyzer/./web/assets/radio_box-checked.svg","webpack://ic-analyzer/./web/utils.ts","webpack://ic-analyzer/./web/ui/CheckBoxBase.tsx","webpack://ic-analyzer/./web/ui/CheckBoxBase.scss?1054","webpack://ic-analyzer/./web/ui/RangeInput.tsx","webpack://ic-analyzer/./web/ui/RangeInput.scss?b9ef","webpack://ic-analyzer/./web/ui/Button.scss?d60e","webpack://ic-analyzer/./web/ui/Button.tsx","webpack://ic-analyzer/./web/assets/add.svg","webpack://ic-analyzer/./web/assets/remove.svg","webpack://ic-analyzer/./web/assets/arrow_up.svg","webpack://ic-analyzer/./web/assets/arrow_down.svg","webpack://ic-analyzer/./web/ui/NumberInput.scss?c5c8","webpack://ic-analyzer/./web/ui/NumberInput.tsx","webpack://ic-analyzer/./web/ui/Dialog.scss?a879","webpack://ic-analyzer/./web/ui/Dialog.tsx","webpack://ic-analyzer/./web/ui/PinchZoom.tsx","webpack://ic-analyzer/./web/ui/SelectBox.tsx","webpack://ic-analyzer/./web/ui/SelectBox.scss?2c23","webpack://ic-analyzer/./web/ui/SwitchButton.tsx","webpack://ic-analyzer/./web/ui/SwitchButton.scss?0e8b","webpack://ic-analyzer/./web/ui/ControlField.tsx","webpack://ic-analyzer/./web/ui/ControlField.scss?23fc","webpack://ic-analyzer/./web/ui/FileDrop.scss?ed9d","webpack://ic-analyzer/./web/ui/FileDrop.tsx","webpack://ic-analyzer/./web/ui/index.ts","webpack://ic-analyzer/./web/form/RangeControl.scss?fb6d","webpack://ic-analyzer/./web/form/RangeControl.tsx","webpack://ic-analyzer/./web/form/EnumControl.scss?6bff","webpack://ic-analyzer/./web/form/EnumControl.tsx","webpack://ic-analyzer/./web/form/SwitchControl.tsx","webpack://ic-analyzer/./web/form/SwitchControl.scss?84b0","webpack://ic-analyzer/./web/form/BoolOption.tsx","webpack://ic-analyzer/./web/form/EnumOption.tsx","webpack://ic-analyzer/./web/form/NumberOption.tsx","webpack://ic-analyzer/./deps/squoosh/src/features/worker-utils/index.ts","webpack://ic-analyzer/./web/codecs/common.tsx","webpack://ic-analyzer/./web/codecs/mozjpeg/codec.ts","webpack://ic-analyzer/./web/codecs/mozjpeg/client.tsx","webpack://ic-analyzer/./deps/squoosh/src/features/encoders/jxl/shared/meta.ts","webpack://ic-analyzer/./web/codecs/jxl/client.tsx","webpack://ic-analyzer/./web/codecs/jxl/codec.ts","webpack://ic-analyzer/./deps/squoosh/src/features/encoders/webP/shared/meta.ts","webpack://ic-analyzer/./web/codecs/webp/client.tsx","webpack://ic-analyzer/./web/codecs/webp/codec.ts","webpack://ic-analyzer/./web/form/PresetOption.tsx","webpack://ic-analyzer/./web/codecs/avif/codec.ts","webpack://ic-analyzer/./web/codecs/avif/client.tsx","webpack://ic-analyzer/./web/codecs/webp2/codec.ts","webpack://ic-analyzer/./web/codecs/webp2/client.tsx","webpack://ic-analyzer/./web/codecs/index.ts","webpack://ic-analyzer/./web/WorkerPool.ts","webpack://ic-analyzer/./web/app/SelectFileDialog.scss?8652","webpack://ic-analyzer/./web/app/SelectFileDialog.tsx","webpack://ic-analyzer/./web/app/ImageInfoPanel.tsx","webpack://ic-analyzer/./web/app/ImageInfoPanel.scss?cdc3","webpack://ic-analyzer/./lib/similarity.ts","webpack://ic-analyzer/./web/app/MeasurePanel.scss?c87a","webpack://ic-analyzer/./web/app/MeasurePanel.tsx","webpack://ic-analyzer/./web/app/EncoderPanel.tsx","webpack://ic-analyzer/./web/app/EncoderPanel.scss?a4e6","webpack://ic-analyzer/./web/app/ConfigDialog.scss?8532","webpack://ic-analyzer/./web/app/ConfigDialog.tsx","webpack://ic-analyzer/./web/app/ProgressDialog.tsx","webpack://ic-analyzer/./web/app/ProgressDialog.scss?53d5","webpack://ic-analyzer/./web/app/CompressSession.tsx","webpack://ic-analyzer/./web/app/IntroPage.scss?4d6d","webpack://ic-analyzer/./web/assets/github-logo.svg","webpack://ic-analyzer/./web/app/IntroPage.tsx","webpack://ic-analyzer/./web/app/ColorPicker.tsx","webpack://ic-analyzer/./web/app/ColorPicker.scss?f00d","webpack://ic-analyzer/./web/app/ImageView.scss?25ea","webpack://ic-analyzer/./web/app/ImageView.tsx","webpack://ic-analyzer/./web/assets/lock.svg","webpack://ic-analyzer/./web/app/ChartPanel.tsx","webpack://ic-analyzer/./web/app/ChartPanel.scss?f9cd","webpack://ic-analyzer/./web/app/ControlPanel.tsx","webpack://ic-analyzer/./web/app/ControlPanel.scss?cb18","webpack://ic-analyzer/./web/app/AnalyzePage.scss?67a6","webpack://ic-analyzer/./web/app/AnalyzePage.tsx","webpack://ic-analyzer/./web/app/ComparePage.tsx","webpack://ic-analyzer/./web/app/CompareDialog.scss?1f5c","webpack://ic-analyzer/./web/app/CompareDialog.tsx","webpack://ic-analyzer/./web/app/CompareSession.tsx","webpack://ic-analyzer/./web/app/index.tsx","webpack://ic-analyzer/./web/index.tsx","webpack://ic-analyzer/webpack/bootstrap","webpack://ic-analyzer/webpack/runtime/compat get default export","webpack://ic-analyzer/webpack/runtime/define property getters","webpack://ic-analyzer/webpack/runtime/ensure chunk","webpack://ic-analyzer/webpack/runtime/get javascript chunk filename","webpack://ic-analyzer/webpack/runtime/get mini-css chunk filename","webpack://ic-analyzer/webpack/runtime/global","webpack://ic-analyzer/webpack/runtime/harmony module decorator","webpack://ic-analyzer/webpack/runtime/hasOwnProperty shorthand","webpack://ic-analyzer/webpack/runtime/make namespace object","webpack://ic-analyzer/webpack/runtime/publicPath","webpack://ic-analyzer/webpack/runtime/jsonp chunk loading","webpack://ic-analyzer/webpack/startup"],"names":["deferred","inProgress","dataWebpackPrefix","_scriptDir","Module","document","currentScript","src","undefined","g","ba","ca","ready","Promise","a","b","q","ea","x","fa","ha","da","hasOwnProperty","window","importScripts","process","versions","node","ia","ja","ka","la","ma","y","__dirname","normalize","readFileSync","buffer","Uint8Array","assert","argv","length","replace","slice","on","A","inspect","read","readbuffer","print","console","log","warn","error","printErr","self","location","href","indexOf","substr","lastIndexOf","XMLHttpRequest","open","send","responseText","responseType","response","c","d","onload","status","onerror","oa","na","bind","B","wasmBinary","noExitRuntime","WebAssembly","pa","qa","ra","TextDecoder","sa","subarray","decode","e","f","String","fromCharCode","k","Ca","Da","C","E","wa","F","G","Ea","Fa","ua","va","xa","charCodeAt","ya","za","Aa","Ba","Ga","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","Ha","Ia","Ja","Ka","La","Ma","preRun","shift","unshift","H","Na","Oa","onAbort","RuntimeError","Pa","I","prototype","startsWith","Qa","preloadedImages","preloadedAudios","Ra","locateFile","Sa","Ua","ga","get","Va","this","O","Xa","Ya","pop","Za","fromWireType","J","K","$a","ab","bb","Function","cb","Error","name","message","stack","toString","Object","create","constructor","db","eb","L","h","l","M","forEach","Array","push","fb","TypeError","gb","N","P","hb","R","ib","jb","kb","count","value","S","T","X","lb","FinalizationGroup","next","done","unregister","register","mb","nb","ob","Z","Q","pb","qb","W","arguments","apply","sb","$","U","tb","ub","vb","clone","wb","xb","yb","Ab","V","toWireType","concat","call","Eb","Fb","Gb","Hb","Ib","map","join","Jb","Kb","Lb","Y","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","globalThis","Vb","Xb","Yb","InternalError","Zb","$b","BindingError","isAliasOf","aa","getPrototypeOf","isDeleted","deleteLater","argPackAdvance","readValueFromPointer","deleteObject","zb","pointerType","getInheritedInstanceCount","keys","getLiveInheritedInstances","flushPendingDeletes","setDelayFunction","UnboundTypeError","count_emval_handles","get_first_emval","bc","ac","i","m","n","r","u","ta","z","t","w","p","write","D","v","rb","Db","s","className","Bb","Cb","split","ArrayBuffer","Uint8ClampedArray","o","Wb","Ub","copyWithin","Math","min","max","grow","byteLength","j","asm","exports","monitorRunDependencies","clearInterval","instance","fetch","credentials","then","ok","arrayBuffer","catch","resolve","Ta","instantiate","instantiateWasm","instantiateStreaming","___wasm_call_ctors","cc","_malloc","_free","___getTypeName","ec","calledRun","onRuntimeInitialized","postRun","setStatus","setTimeout","___embind_register_native_and_builtin_types","dynCall_jiji","dc","run","preInit","module","canDecodeCache","Map","async","blobToImg","blob","url","URL","createObjectURL","img","Image","decoding","loaded","reject","decodeImage","revokeObjectURL","getWidth","drawable","displayWidth","width","getHeight","displayHeight","height","decodeImageNative","bitmap","createImageBitmap","canvas","createElement","ctx","getContext","drawImage","getImageData","svgToImageData","svgXml","DOMParser","parseFromString","svg","documentElement","getAttribute","viewBox","setAttribute","XMLSerializer","serializeToString","ensureSVGSize","Blob","type","opts","sx","sy","sw","sh","worker","text","has","resultPromise","picture","source","srcset","append","currentSrc","set","canDecodeImageType","newWorker","webpDecode","avifDecode","jxlDecode","webp2Decode","ObjectKeyMap","table","key","JSON","stringify","Worker","Analyzer","pool","measureOpts","onProgress","setOriginalImage","input","raw","shared","image","data","SharedArrayBuffer","view","share","runOnEach","setImageToEncode","getMetricsMeta","SSIM","PSNR","butteraugli","calculations","metricsMeta","enabled","remote","encoder","options","time","encode","mimeType","measure","output","metrics","queueTask","func","score","heatMap","calcButteraugli","imageData","createImageData","rgbaToImage","psnr","calcPSNR","ssim","calcSSIM","_path","_path2","_extends","assign","target","props","xmlns","fill","NOOP","IDENTITY","SIZE_UNITS","bytes","fraction","size","abs","toFixed","log2","useProgress","initialMax","setMax","useState","setValue","increase","reset","Icon","IconChecked","checked","disabled","onClick","onChange","onValueChange","children","CheckMark","currentTarget","step","cssVariables","style","valueAsNumber","active","autoFocus","title","classes","ButtonTag","htmlType","inputId","minMaxButton","Number","MAX_SAFE_INTEGER","increment","handleMouseDown","event","diff","button","timer","pow","getPrecision","round","update","current","newValue","addEventListener","onMouseUp","clearTimeout","removeEventListener","tabIndex","onMouseDown","shapeRendering","id","hidePrevious","dialogs","body","querySelectorAll","previous","classList","add","remove","onClose","useEffect","handleKeyUp","stopImmediatePropagation","useLayoutEffect","createPortal","role","PinchZoom","state","updateOffset","dx","dy","scale","touchAction","onWheel","ctrlKey","deltaMode","clientX","clientY","deltaY","preventDefault","scaleDiff","rect","firstElementChild","getBoundingClientRect","left","top","onTouchStart","baseEvent","handler","basePointer","touches","handleMove","touch","pageX","pageY","handleEnd","watchTouchMove","nativeEvent","basePageX","basePageY","watchMouseMove","clazz","onFocus","onStart","onError","boundary","isInArea","setInArea","counter","useRef","enter","leave","useBoundaryCounter","dragStarted","onDragEnter","handleDragEnd","onDragOver","onDrop","items","dataTransfer","file","getAsFile","onDragLeave","accept","files","CheckBox","RadioBox","sequence","range","ceil","RangeControl","Input","createState","label","tempValue","setTempValue","required","checkValidity","stopPropagation","EnumControl","names","SwitchControl","BoolOption","OptionField","createControl","Boolean","defaultValue","isVariable","onVariabilityChange","populate","generate","_","EnumOption","enumObject","onRangeChange","handleChangeV","newVariables","filter","handleChangeC","includes","NumberOption","VariableMode","ConstMode","RangePart","reachableMax","floor","mapFn","newOpts","initEmscriptenModule","moduleFactory","noInitialRun","templates","values","ranges","varNames","renderOption","template","buildOptions","reduce","list","newList","generated","mergeOptions","base","from","wasmEncodeFn","loader","result","wasmDecodeFn","ColorSpace","GRAYSCALE","RGB","YCbCr","Quantization","defaultOptions","quality","baseline","arithmetic","progressive","optimize_coding","smoothing","color_space","quant_table","ImageMagick","trellis_multipass","trellis_opt_zero","trellis_opt_table","trellis_loops","auto_subsample","chroma_subsample","separate_chroma_quality","chroma_quality","default","extension","getState","saved","OptionsPanel","getOptionsList","getControls","mozjpegEncode","speed","epf","nearLossless","lossyPalette","decodingSpeedTier","jxlEncode","target_size","target_PSNR","method","sns_strength","filter_strength","filter_sharpness","filter_type","partitions","segments","pass","show_compressed","preprocessing","autofilter","partition_limit","alpha_compression","alpha_filtering","alpha_quality","lossless","exact","image_hint","emulate_jpeg_size","thread_level","low_memory","near_lossless","use_delta_palette","use_sharp_yuv","newKey","copy","entries","photo","drawing","icon","Default","Picture","Photo","Graph","webpEncode","Subsampling","YUV400","YUV420","YUV422","YUV444","cqLevel","cqAlphaLevel","denoiseLevel","tileColsLog2","tileRowsLog2","subsample","chromaDeltaQ","sharpness","tune","avifEncode","UVMode","Csp","YCoCg","Custom","YIQ","effort","sns","uv_mode","Adapt","csp_type","error_diffusion","use_random_matrix","webp2Encode","ENCODERS","ENCODER_MAP","fromEntries","WorkerPool","terminated","queue","waiters","workers","remotes","factory","fn","all","task","addJob","terminate","job","runJob","splice","demos","description","artwork","DemoButton","loading","setLoading","alt","onCancel","abortController","AbortController","setError","acceptUrl","newController","abort","signal","exec","pathname","timeHeader","headers","lastModified","Date","getTime","File","getFileFromUrl","demoButtons","demo","ratio","ref","el","putImageData","defaultButteraugliOptions","hfAsymmetry","goodQualitySeek","badQualitySeek","getMeasureOptions","version","workerCount","navigator","hardwareConcurrency","LabelWrapper","ButteraugliFields","handleChange","inputs","deepSet","path","parts","recurs","index","localValue","SSIMOptionsSet","k1","k2","windowSize","encodeTime","getEncodingOptions","config","enable","WebP","setCurrent","tabs","newState","loadOptions","processor","localStorage","getItem","parse","panels","onSelectFile","setIndex","encoding","setEncoding","setMeasure","panel","some","setItem","startTime","performance","now","timeUsage","setTimeUsage","setInterval","ms","date","toISOString","CompressSession","isOpen","selectFile","setSelectFile","setInput","setEncoder","progress","controlsMap","taskQueue","optionsList","getTasks","outputMap","analyzer","seriesMeta","taskCount","onEncode","onCompare","getPixel","ColorItem","color","pad","toUpperCase","substring","imageA","imageB","pixelA","pixelB","pixelDiff","ViewType","viewTypeNames","original","setType","Output","picking","setPicking","inRegion","setInRegion","brightness","setBrightness","mousePos","setMousePos","pinchZoom","setPinchZoom","resetPinchZoom","initialState","useResettable","backCanvas","topCanvas","topImage","HeatMap","tabData","imageViewTabs","brightnessInput","brightnessVal","Difference","wrapperCSS","px","innerWidth","py","innerHeight","pickerCSS","mixBlendMode","onMouseOver","onMouseMove","onMouseOut","hidden","Original","prev","baseOptions","chart","animation","styledMode","tooltip","borderRadius","legend","verticalAlign","alignColumns","xAxis","exporting","menuItemDefinitions","downloadExpand","onclick","yAxis","visible","optionsMixin","plotLines","labelFormat","labelFormatter","exportChartLocal","buttons","contextButton","symbolSize","symbolX","symbolY","menuItems","sourceWidth","sourceHeight","chartOptions","handleMouseover","redraw","addLegendListener","series","legendItem","outputs","setChart","locked","setLocked","setCategories","setData","updateSeriesData","removePlotLine","addPlotLine","dashStyle","displayValue","updatePlotLine","display","clear","dataPart","opposite","initialRight","categories","toChartData","newChart","allItems","addSeriesListener","variableType","variableName","encoderName","encoderState","Step","None","handleVarChange","selectOptions","controls","Options","es","handleValueChange","Encoder","DownloadButton","filename","codec","newUrl","download","appendChild","click","removeChild","createControlState","kvs","updateControlState","action","showChart","setShowChart","setState","useReducer","labels","useMemo","find","getSeries","MetricsPanel","metas","ComparePage","UploadBox","PreviewBox","memo","onAccept","setOriginal","changed","setChanged","section","isValid","CompareSession","setWorkers","dw","dh","canvasSource","clearRect","drawDataToCanvas","canvasDest","imageSmoothingEnabled","imageSmoothingQuality","builtinResize","Mode","displayName","CSS","supports","detectBrowserSupport","alert","dsn","integrations","tracesSampleRate","release","mode","setMode","setOpen","setResult","createSession","Session","Page","Compare","Compress","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkIds","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","definition","defineProperty","enumerable","chunkId","promises","miniCssF","hmd","obj","prop","script","needAttach","scripts","getElementsByTagName","charset","timeout","nc","onScriptComplete","doneFns","parentNode","head","Symbol","toStringTag","scriptUrl","baseURI","installedChunks","installedChunkData","promise","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"mappings":"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","file":"index.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"ic-analyzer:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","\nvar Module = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(Module) {\n  Module = Module || {};\n\n\nvar g;g||(g=typeof Module !== 'undefined' ? Module : {});var ba,ca;g.ready=new Promise(function(a,b){ba=a;ca=b});var da={},q;for(q in g)g.hasOwnProperty(q)&&(da[q]=g[q]);var ea=!1,x=!1,fa=!1,ha=!1;ea=\"object\"===typeof window;x=\"function\"===typeof importScripts;fa=\"object\"===typeof process&&\"object\"===typeof process.versions&&\"string\"===typeof process.versions.node;ha=!ea&&!fa&&!x;var y=\"\",ia,ja,ka,la,ma;\nif(fa)y=x?require(\"path\").dirname(y)+\"/\":__dirname+\"/\",ia=function(a,b){la||(la=require(\"fs\"));ma||(ma=require(\"path\"));a=ma.normalize(a);return la.readFileSync(a,b?null:\"utf8\")},ka=function(a){a=ia(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a},1<process.argv.length&&process.argv[1].replace(/\\\\/g,\"/\"),process.argv.slice(2),process.on(\"uncaughtException\",function(a){throw a;}),process.on(\"unhandledRejection\",A),g.inspect=function(){return\"[Emscripten Module object]\"};else if(ha)\"undefined\"!=\ntypeof read&&(ia=function(a){return read(a)}),ka=function(a){if(\"function\"===typeof readbuffer)return new Uint8Array(readbuffer(a));a=read(a,\"binary\");assert(\"object\"===typeof a);return a},\"undefined\"!==typeof print&&(\"undefined\"===typeof console&&(console={}),console.log=print,console.warn=console.error=\"undefined\"!==typeof printErr?printErr:print);else if(ea||x)x?y=self.location.href:\"undefined\"!==typeof document&&document.currentScript&&(y=document.currentScript.src),_scriptDir&&(y=_scriptDir),\n0!==y.indexOf(\"blob:\")?y=y.substr(0,y.lastIndexOf(\"/\")+1):y=\"\",ia=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.send(null);return b.responseText},x&&(ka=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.responseType=\"arraybuffer\";b.send(null);return new Uint8Array(b.response)}),ja=function(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a,!0);d.responseType=\"arraybuffer\";d.onload=function(){200==d.status||0==d.status&&d.response?b(d.response):c()};d.onerror=c;d.send(null)};\nvar na=g.print||console.log.bind(console),B=g.printErr||console.warn.bind(console);for(q in da)da.hasOwnProperty(q)&&(g[q]=da[q]);da=null;var oa;g.wasmBinary&&(oa=g.wasmBinary);var noExitRuntime=g.noExitRuntime||!0;\"object\"!==typeof WebAssembly&&A(\"no native wasm support detected\");var pa,qa=!1;function assert(a,b){a||A(\"Assertion failed: \"+b)}var ra=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction sa(a,b,c){var d=b+c;for(c=b;a[c]&&!(c>=d);)++c;if(16<c-b&&a.subarray&&ra)return ra.decode(a.subarray(b,c));for(d=\"\";b<c;){var e=a[b++];if(e&128){var f=a[b++]&63;if(192==(e&224))d+=String.fromCharCode((e&31)<<6|f);else{var k=a[b++]&63;e=224==(e&240)?(e&15)<<12|f<<6|k:(e&7)<<18|f<<12|k<<6|a[b++]&63;65536>e?d+=String.fromCharCode(e):(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023))}}else d+=String.fromCharCode(e)}return d}\nfunction ta(a,b,c){var d=C;if(0<c){c=b+c-1;for(var e=0;e<a.length;++e){var f=a.charCodeAt(e);if(55296<=f&&57343>=f){var k=a.charCodeAt(++e);f=65536+((f&1023)<<10)|k&1023}if(127>=f){if(b>=c)break;d[b++]=f}else{if(2047>=f){if(b+1>=c)break;d[b++]=192|f>>6}else{if(65535>=f){if(b+2>=c)break;d[b++]=224|f>>12}else{if(b+3>=c)break;d[b++]=240|f>>18;d[b++]=128|f>>12&63}d[b++]=128|f>>6&63}d[b++]=128|f&63}}d[b]=0}}var ua=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf-16le\"):void 0;\nfunction va(a,b){var c=a>>1;for(var d=c+b/2;!(c>=d)&&wa[c];)++c;c<<=1;if(32<c-a&&ua)return ua.decode(C.subarray(a,c));c=\"\";for(d=0;!(d>=b/2);++d){var e=E[a+2*d>>1];if(0==e)break;c+=String.fromCharCode(e)}return c}function xa(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var e=0;e<c;++e)E[b>>1]=a.charCodeAt(e),b+=2;E[b>>1]=0;return b-d}function ya(a){return 2*a.length}\nfunction za(a,b){for(var c=0,d=\"\";!(c>=b/4);){var e=F[a+4*c>>2];if(0==e)break;++c;65536<=e?(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023)):d+=String.fromCharCode(e)}return d}function Aa(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var f=a.charCodeAt(e);if(55296<=f&&57343>=f){var k=a.charCodeAt(++e);f=65536+((f&1023)<<10)|k&1023}F[b>>2]=f;b+=4;if(b+4>c)break}F[b>>2]=0;return b-d}\nfunction Ba(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c;b+=4}return b}var Ca,Da,C,E,wa,F,G,Ea,Fa;function Ga(){var a=pa.buffer;Ca=a;g.HEAP8=Da=new Int8Array(a);g.HEAP16=E=new Int16Array(a);g.HEAP32=F=new Int32Array(a);g.HEAPU8=C=new Uint8Array(a);g.HEAPU16=wa=new Uint16Array(a);g.HEAPU32=G=new Uint32Array(a);g.HEAPF32=Ea=new Float32Array(a);g.HEAPF64=Fa=new Float64Array(a)}var Ha,Ia=[],Ja=[],Ka=[],La=[];function Ma(){var a=g.preRun.shift();Ia.unshift(a)}\nvar H=0,Na=null,Oa=null;g.preloadedImages={};g.preloadedAudios={};function A(a){if(g.onAbort)g.onAbort(a);B(a);qa=!0;a=new WebAssembly.RuntimeError(\"abort(\"+a+\"). Build with -s ASSERTIONS=1 for more info.\");ca(a);throw a;}function Pa(a){var b=I;return String.prototype.startsWith?b.startsWith(a):0===b.indexOf(a)}function Qa(){return Pa(\"data:application/octet-stream;base64,\")}var I=\"diff.wasm\";if(!Qa()){var Ra=I;I=g.locateFile?g.locateFile(Ra,y):y+Ra}\nfunction Sa(){var a=I;try{if(a==I&&oa)return new Uint8Array(oa);if(ka)return ka(a);throw\"both async and sync fetching of the wasm failed\";}catch(b){A(b)}}\nfunction Ta(){if(!oa&&(ea||x)){if(\"function\"===typeof fetch&&!Pa(\"file://\"))return fetch(I,{credentials:\"same-origin\"}).then(function(a){if(!a.ok)throw\"failed to load wasm binary file at '\"+I+\"'\";return a.arrayBuffer()}).catch(function(){return Sa()});if(ja)return new Promise(function(a,b){ja(I,function(c){a(new Uint8Array(c))},b)})}return Promise.resolve().then(function(){return Sa()})}\nfunction Ua(a){for(;0<a.length;){var b=a.shift();if(\"function\"==typeof b)b(g);else{var c=b.Ka;\"number\"===typeof c?void 0===b.ga?Ha.get(c)():Ha.get(c)(b.ga):c(void 0===b.ga?null:b.ga)}}}function Va(a){this.O=a-16;this.Fa=function(b){F[this.O+8>>2]=b};this.Ca=function(b){F[this.O+0>>2]=b};this.Da=function(){F[this.O+4>>2]=0};this.Ba=function(){Da[this.O+12>>0]=0};this.Ea=function(){Da[this.O+13>>0]=0};this.wa=function(b,c){this.Fa(b);this.Ca(c);this.Da();this.Ba();this.Ea()}}var Wa=0,Xa={};\nfunction Ya(a){for(;a.length;){var b=a.pop();a.pop()(b)}}function Za(a){return this.fromWireType(G[a>>2])}var J={},K={},$a={};function ab(a){if(void 0===a)return\"_unknown\";a=a.replace(/[^a-zA-Z0-9_]/g,\"$\");var b=a.charCodeAt(0);return 48<=b&&57>=b?\"_\"+a:a}function bb(a,b){a=ab(a);return(new Function(\"body\",\"return function \"+a+'() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n'))(b)}\nfunction cb(a){var b=Error,c=bb(a,function(d){this.name=a;this.message=d;d=Error(d).stack;void 0!==d&&(this.stack=this.toString()+\"\\n\"+d.replace(/^Error(:[^\\n]*)?\\n/,\"\"))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+\": \"+this.message};return c}var db=void 0;function eb(a){throw new db(a);}\nfunction L(a,b,c){function d(h){h=c(h);h.length!==a.length&&eb(\"Mismatched type converter count\");for(var l=0;l<a.length;++l)M(a[l],h[l])}a.forEach(function(h){$a[h]=b});var e=Array(b.length),f=[],k=0;b.forEach(function(h,l){K.hasOwnProperty(h)?e[l]=K[h]:(f.push(h),J.hasOwnProperty(h)||(J[h]=[]),J[h].push(function(){e[l]=K[h];++k;k===f.length&&d(e)}))});0===f.length&&d(e)}\nfunction fb(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(\"Unknown type size: \"+a);}}var gb=void 0;function N(a){for(var b=\"\";C[a];)b+=gb[C[a++]];return b}var O=void 0;function P(a){throw new O(a);}\nfunction M(a,b,c){c=c||{};if(!(\"argPackAdvance\"in b))throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");var d=b.name;a||P('type \"'+d+'\" must have a positive integer typeid pointer');if(K.hasOwnProperty(a)){if(c.va)return;P(\"Cannot register type '\"+d+\"' twice\")}K[a]=b;delete $a[a];J.hasOwnProperty(a)&&(b=J[a],delete J[a],b.forEach(function(e){e()}))}function hb(a){P(a.N.R.P.name+\" instance already deleted\")}var ib=!1;function jb(){}\nfunction kb(a){--a.count.value;0===a.count.value&&(a.S?a.T.X(a.S):a.R.P.X(a.O))}function lb(a){if(\"undefined\"===typeof FinalizationGroup)return lb=function(b){return b},a;ib=new FinalizationGroup(function(b){for(var c=b.next();!c.done;c=b.next())c=c.value,c.O?kb(c):console.warn(\"object already deleted: \"+c.O)});lb=function(b){ib.register(b,b.N,b.N);return b};jb=function(b){ib.unregister(b.N)};return lb(a)}var mb=void 0,nb=[];function ob(){for(;nb.length;){var a=nb.pop();a.N.Z=!1;a[\"delete\"]()}}\nfunction Q(){}var pb={};function qb(a,b,c){if(void 0===a[b].W){var d=a[b];a[b]=function(){a[b].W.hasOwnProperty(arguments.length)||P(\"Function '\"+c+\"' called with an invalid number of arguments (\"+arguments.length+\") - expects one of (\"+a[b].W+\")!\");return a[b].W[arguments.length].apply(this,arguments)};a[b].W=[];a[b].W[d.da]=d}}\nfunction rb(a,b){g.hasOwnProperty(a)?(P(\"Cannot register public name '\"+a+\"' twice\"),qb(g,a,a),g.hasOwnProperty(void 0)&&P(\"Cannot register multiple overloads of a function with the same number of arguments (undefined)!\"),g[a].W[void 0]=b):g[a]=b}function sb(a,b,c,d,e,f,k,h){this.name=a;this.constructor=b;this.$=c;this.X=d;this.U=e;this.qa=f;this.ba=k;this.oa=h;this.za=[]}\nfunction tb(a,b,c){for(;b!==c;)b.ba||P(\"Expected null or instance of \"+c.name+\", got an instance of \"+b.name),a=b.ba(a),b=b.U;return a}function ub(a,b){if(null===b)return this.ha&&P(\"null is not a valid \"+this.name),0;b.N||P('Cannot pass \"'+T(b)+'\" as a '+this.name);b.N.O||P(\"Cannot pass deleted object as a pointer of type \"+this.name);return tb(b.N.O,b.N.R.P,this.P)}\nfunction vb(a,b){if(null===b){this.ha&&P(\"null is not a valid \"+this.name);if(this.fa){var c=this.ia();null!==a&&a.push(this.X,c);return c}return 0}b.N||P('Cannot pass \"'+T(b)+'\" as a '+this.name);b.N.O||P(\"Cannot pass deleted object as a pointer of type \"+this.name);!this.ea&&b.N.R.ea&&P(\"Cannot convert argument of type \"+(b.N.T?b.N.T.name:b.N.R.name)+\" to parameter type \"+this.name);c=tb(b.N.O,b.N.R.P,this.P);if(this.fa)switch(void 0===b.N.S&&P(\"Passing raw pointer to smart pointer is illegal\"),\nthis.Ja){case 0:b.N.T===this?c=b.N.S:P(\"Cannot convert argument of type \"+(b.N.T?b.N.T.name:b.N.R.name)+\" to parameter type \"+this.name);break;case 1:c=b.N.S;break;case 2:if(b.N.T===this)c=b.N.S;else{var d=b.clone();c=this.Aa(c,U(function(){d[\"delete\"]()}));null!==a&&a.push(this.X,c)}break;default:P(\"Unsupporting sharing policy\")}return c}\nfunction wb(a,b){if(null===b)return this.ha&&P(\"null is not a valid \"+this.name),0;b.N||P('Cannot pass \"'+T(b)+'\" as a '+this.name);b.N.O||P(\"Cannot pass deleted object as a pointer of type \"+this.name);b.N.R.ea&&P(\"Cannot convert argument of type \"+b.N.R.name+\" to parameter type \"+this.name);return tb(b.N.O,b.N.R.P,this.P)}function xb(a,b,c){if(b===c)return a;if(void 0===c.U)return null;a=xb(a,b,c.U);return null===a?null:c.oa(a)}var yb={};\nfunction zb(a,b){for(void 0===b&&P(\"ptr should not be undefined\");a.U;)b=a.ba(b),a=a.U;return yb[b]}function Ab(a,b){b.R&&b.O||eb(\"makeClassHandle requires ptr and ptrType\");!!b.T!==!!b.S&&eb(\"Both smartPtrType and smartPtr must be specified\");b.count={value:1};return lb(Object.create(a,{N:{value:b}}))}function V(a,b,c,d){this.name=a;this.P=b;this.ha=c;this.ea=d;this.fa=!1;this.X=this.Aa=this.ia=this.ma=this.Ja=this.ya=void 0;void 0!==b.U?this.toWireType=vb:(this.toWireType=d?ub:wb,this.V=null)}\nfunction Db(a,b){g.hasOwnProperty(a)||eb(\"Replacing nonexistant public symbol\");g[a]=b;g[a].da=void 0}function Eb(a,b){var c=[];return function(){c.length=arguments.length;for(var d=0;d<arguments.length;d++)c[d]=arguments[d];-1!=a.indexOf(\"j\")?(d=g[\"dynCall_\"+a],d=c&&c.length?d.apply(null,[b].concat(c)):d.call(null,b)):d=Ha.get(b).apply(null,c);return d}}\nfunction W(a,b){a=N(a);var c=-1!=a.indexOf(\"j\")?Eb(a,b):Ha.get(b);\"function\"!==typeof c&&P(\"unknown function pointer with signature \"+a+\": \"+b);return c}var Fb=void 0;function Gb(a){a=Hb(a);var b=N(a);X(a);return b}function Ib(a,b){function c(f){e[f]||K[f]||($a[f]?$a[f].forEach(c):(d.push(f),e[f]=!0))}var d=[],e={};b.forEach(c);throw new Fb(a+\": \"+d.map(Gb).join([\", \"]));}function Jb(a,b){for(var c=[],d=0;d<a;d++)c.push(F[(b>>2)+d]);return c}\nfunction Kb(a){var b=Function;if(!(b instanceof Function))throw new TypeError(\"new_ called with constructor type \"+typeof b+\" which is not a function\");var c=bb(b.name||\"unknownFunctionName\",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}var Lb=[],Y=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Mb(a){4<a&&0===--Y[a].ja&&(Y[a]=void 0,Lb.push(a))}\nfunction U(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=Lb.length?Lb.pop():Y.length;Y[b]={ja:1,value:a};return b}}function T(a){if(null===a)return\"null\";var b=typeof a;return\"object\"===b||\"array\"===b||\"function\"===b?a.toString():\"\"+a}function Nb(a,b){switch(b){case 2:return function(c){return this.fromWireType(Ea[c>>2])};case 3:return function(c){return this.fromWireType(Fa[c>>3])};default:throw new TypeError(\"Unknown float type: \"+a);}}\nfunction Ob(a,b,c){switch(b){case 0:return c?function(d){return Da[d]}:function(d){return C[d]};case 1:return c?function(d){return E[d>>1]}:function(d){return wa[d>>1]};case 2:return c?function(d){return F[d>>2]}:function(d){return G[d>>2]};default:throw new TypeError(\"Unknown integer type: \"+a);}}var Pb={};function Qb(a){var b=Pb[a];return void 0===b?N(a):b}var Rb=[];function Sb(a){a||P(\"Cannot use deleted val. handle = \"+a);return Y[a].value}\nfunction Tb(){return\"object\"===typeof globalThis?globalThis:Function(\"return this\")()}function Ub(a){var b=Rb.length;Rb.push(a);return b}function Vb(a,b){var c=K[a];void 0===c&&P(b+\" has unknown type \"+Gb(a));return c}function Wb(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=Vb(F[(b>>2)+d],\"parameter \"+d);return c}var Xb={},Yb=[null,[],[]];db=g.InternalError=cb(\"InternalError\");for(var Zb=Array(256),$b=0;256>$b;++$b)Zb[$b]=String.fromCharCode($b);gb=Zb;O=g.BindingError=cb(\"BindingError\");\nQ.prototype.isAliasOf=function(a){if(!(this instanceof Q&&a instanceof Q))return!1;var b=this.N.R.P,c=this.N.O,d=a.N.R.P;for(a=a.N.O;b.U;)c=b.ba(c),b=b.U;for(;d.U;)a=d.ba(a),d=d.U;return b===d&&c===a};Q.prototype.clone=function(){this.N.O||hb(this);if(this.N.aa)return this.N.count.value+=1,this;var a=lb,b=Object,c=b.create,d=Object.getPrototypeOf(this),e=this.N;a=a(c.call(b,d,{N:{value:{count:e.count,Z:e.Z,aa:e.aa,O:e.O,R:e.R,S:e.S,T:e.T}}}));a.N.count.value+=1;a.N.Z=!1;return a};\nQ.prototype[\"delete\"]=function(){this.N.O||hb(this);this.N.Z&&!this.N.aa&&P(\"Object already scheduled for deletion\");jb(this);kb(this.N);this.N.aa||(this.N.S=void 0,this.N.O=void 0)};Q.prototype.isDeleted=function(){return!this.N.O};Q.prototype.deleteLater=function(){this.N.O||hb(this);this.N.Z&&!this.N.aa&&P(\"Object already scheduled for deletion\");nb.push(this);1===nb.length&&mb&&mb(ob);this.N.Z=!0;return this};V.prototype.ra=function(a){this.ma&&(a=this.ma(a));return a};\nV.prototype.ka=function(a){this.X&&this.X(a)};V.prototype.argPackAdvance=8;V.prototype.readValueFromPointer=Za;V.prototype.deleteObject=function(a){if(null!==a)a[\"delete\"]()};\nV.prototype.fromWireType=function(a){function b(){return this.fa?Ab(this.P.$,{R:this.ya,O:c,T:this,S:a}):Ab(this.P.$,{R:this,O:a})}var c=this.ra(a);if(!c)return this.ka(a),null;var d=zb(this.P,c);if(void 0!==d){if(0===d.N.count.value)return d.N.O=c,d.N.S=a,d.clone();d=d.clone();this.ka(a);return d}d=this.P.qa(c);d=pb[d];if(!d)return b.call(this);d=this.ea?d.na:d.pointerType;var e=xb(c,this.P,d.P);return null===e?b.call(this):this.fa?Ab(d.P.$,{R:d,O:e,T:this,S:a}):Ab(d.P.$,{R:d,O:e})};\ng.getInheritedInstanceCount=function(){return Object.keys(yb).length};g.getLiveInheritedInstances=function(){var a=[],b;for(b in yb)yb.hasOwnProperty(b)&&a.push(yb[b]);return a};g.flushPendingDeletes=ob;g.setDelayFunction=function(a){mb=a;nb.length&&mb&&mb(ob)};Fb=g.UnboundTypeError=cb(\"UnboundTypeError\");g.count_emval_handles=function(){for(var a=0,b=5;b<Y.length;++b)void 0!==Y[b]&&++a;return a};g.get_first_emval=function(){for(var a=5;a<Y.length;++a)if(void 0!==Y[a])return Y[a];return null};\nvar bc={b:function(a,b,c,d){A(\"Assertion failed: \"+(a?sa(C,a,void 0):\"\")+\", at: \"+[b?b?sa(C,b,void 0):\"\":\"unknown filename\",c,d?d?sa(C,d,void 0):\"\":\"unknown function\"])},B:function(a){return ac(a+16)+16},E:function(){},A:function(a,b,c){(new Va(a)).wa(b,c);Wa++;throw a;},i:function(a){var b=Xa[a];delete Xa[a];var c=b.ia,d=b.X,e=b.la,f=e.map(function(k){return k.ua}).concat(e.map(function(k){return k.Ha}));L([a],f,function(k){var h={};e.forEach(function(l,m){var n=k[m],r=l.sa,u=l.ta,z=k[m+e.length],\nt=l.Ga,w=l.Ia;h[l.pa]={read:function(p){return n.fromWireType(r(u,p))},write:function(p,D){var v=[];t(w,p,z.toWireType(v,D));Ya(v)}}});return[{name:b.name,fromWireType:function(l){var m={},n;for(n in h)m[n]=h[n].read(l);d(l);return m},toWireType:function(l,m){for(var n in h)if(!(n in m))throw new TypeError('Missing field:  \"'+n+'\"');var r=c();for(n in h)h[n].write(r,m[n]);null!==l&&l.push(d,r);return r},argPackAdvance:8,readValueFromPointer:Za,V:d}]})},y:function(a,b,c,d,e){var f=fb(c);b=N(b);M(a,\n{name:b,fromWireType:function(k){return!!k},toWireType:function(k,h){return h?d:e},argPackAdvance:8,readValueFromPointer:function(k){if(1===c)var h=Da;else if(2===c)h=E;else if(4===c)h=F;else throw new TypeError(\"Unknown boolean type size: \"+b);return this.fromWireType(h[k>>f])},V:null})},t:function(a,b,c,d,e,f,k,h,l,m,n,r,u){n=N(n);f=W(e,f);h&&(h=W(k,h));m&&(m=W(l,m));u=W(r,u);var z=ab(n);rb(z,function(){Ib(\"Cannot construct \"+n+\" due to unbound types\",[d])});L([a,b,c],d?[d]:[],function(t){t=t[0];\nif(d){var w=t.P;var p=w.$}else p=Q.prototype;t=bb(z,function(){if(Object.getPrototypeOf(this)!==D)throw new O(\"Use 'new' to construct \"+n);if(void 0===v.Y)throw new O(n+\" has no accessible constructor\");var R=v.Y[arguments.length];if(void 0===R)throw new O(\"Tried to invoke ctor of \"+n+\" with invalid number of parameters (\"+arguments.length+\") - expected (\"+Object.keys(v.Y).toString()+\") parameters instead!\");return R.apply(this,arguments)});var D=Object.create(p,{constructor:{value:t}});t.prototype=\nD;var v=new sb(n,t,D,u,w,f,h,m);w=new V(n,v,!0,!1);p=new V(n+\"*\",v,!1,!1);var Z=new V(n+\" const*\",v,!1,!0);pb[a]={pointerType:p,na:Z};Db(z,t);return[w,p,Z]})},s:function(a,b,c,d,e,f){assert(0<b);var k=Jb(b,c);e=W(d,e);var h=[f],l=[];L([],[a],function(m){m=m[0];var n=\"constructor \"+m.name;void 0===m.P.Y&&(m.P.Y=[]);if(void 0!==m.P.Y[b-1])throw new O(\"Cannot register multiple constructors with identical number of parameters (\"+(b-1)+\") for class '\"+m.name+\"'! Overload resolution is currently only performed using the parameter count, not actual type info!\");\nm.P.Y[b-1]=function(){Ib(\"Cannot construct \"+m.name+\" due to unbound types\",k)};L([],k,function(r){m.P.Y[b-1]=function(){arguments.length!==b-1&&P(n+\" called with \"+arguments.length+\" arguments, expected \"+(b-1));l.length=0;h.length=b;for(var u=1;u<b;++u)h[u]=r[u].toWireType(l,arguments[u-1]);u=e.apply(null,h);Ya(l);return r[0].fromWireType(u)};return[]});return[]})},r:function(a,b,c,d,e,f,k,h){var l=Jb(c,d);b=N(b);f=W(e,f);L([],[a],function(m){function n(){Ib(\"Cannot call \"+r+\" due to unbound types\",\nl)}m=m[0];var r=m.name+\".\"+b;h&&m.P.za.push(b);var u=m.P.$,z=u[b];void 0===z||void 0===z.W&&z.className!==m.name&&z.da===c-2?(n.da=c-2,n.className=m.name,u[b]=n):(qb(u,b,r),u[b].W[c-2]=n);L([],l,function(t){var w=r,p=m,D=f,v=t.length;2>v&&P(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");var Z=null!==t[1]&&null!==p,R=!1;for(p=1;p<t.length;++p)if(null!==t[p]&&void 0===t[p].V){R=!0;break}var Bb=\"void\"!==t[0].name,S=\"\",aa=\"\";for(p=0;p<v-2;++p)S+=(0!==p?\", \":\"\")+\"arg\"+\np,aa+=(0!==p?\", \":\"\")+\"arg\"+p+\"Wired\";w=\"return function \"+ab(w)+\"(\"+S+\") {\\nif (arguments.length !== \"+(v-2)+\") {\\nthrowBindingError('function \"+w+\" called with ' + arguments.length + ' arguments, expected \"+(v-2)+\" args!');\\n}\\n\";R&&(w+=\"var destructors = [];\\n\");var Cb=R?\"destructors\":\"null\";S=\"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");D=[P,D,k,Ya,t[0],t[1]];Z&&(w+=\"var thisWired = classParam.toWireType(\"+Cb+\", this);\\n\");for(p=0;p<v-2;++p)w+=\"var arg\"+p+\"Wired = argType\"+\np+\".toWireType(\"+Cb+\", arg\"+p+\"); // \"+t[p+2].name+\"\\n\",S.push(\"argType\"+p),D.push(t[p+2]);Z&&(aa=\"thisWired\"+(0<aa.length?\", \":\"\")+aa);w+=(Bb?\"var rv = \":\"\")+\"invoker(fn\"+(0<aa.length?\", \":\"\")+aa+\");\\n\";if(R)w+=\"runDestructors(destructors);\\n\";else for(p=Z?1:2;p<t.length;++p)v=1===p?\"thisWired\":\"arg\"+(p-2)+\"Wired\",null!==t[p].V&&(w+=v+\"_dtor(\"+v+\"); // \"+t[p].name+\"\\n\",S.push(v+\"_dtor\"),D.push(t[p].V));Bb&&(w+=\"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");S.push(w+\"}\\n\");t=Kb(S).apply(null,\nD);void 0===u[b].W?(t.da=c-2,u[b]=t):u[b].W[c-2]=t;return[]});return[]})},x:function(a,b){b=N(b);M(a,{name:b,fromWireType:function(c){var d=Y[c].value;Mb(c);return d},toWireType:function(c,d){return U(d)},argPackAdvance:8,readValueFromPointer:Za,V:null})},k:function(a,b,c){c=fb(c);b=N(b);M(a,{name:b,fromWireType:function(d){return d},toWireType:function(d,e){if(\"number\"!==typeof e&&\"boolean\"!==typeof e)throw new TypeError('Cannot convert \"'+T(e)+'\" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:Nb(b,\nc),V:null})},d:function(a,b,c,d,e){function f(m){return m}b=N(b);-1===e&&(e=4294967295);var k=fb(c);if(0===d){var h=32-8*c;f=function(m){return m<<h>>>h}}var l=-1!=b.indexOf(\"unsigned\");M(a,{name:b,fromWireType:f,toWireType:function(m,n){if(\"number\"!==typeof n&&\"boolean\"!==typeof n)throw new TypeError('Cannot convert \"'+T(n)+'\" to '+this.name);if(n<d||n>e)throw new TypeError('Passing a number \"'+T(n)+'\" from JS side to C/C++ side to an argument of type \"'+b+'\", which is outside the valid range ['+\nd+\", \"+e+\"]!\");return l?n>>>0:n|0},argPackAdvance:8,readValueFromPointer:Ob(b,k,0!==d),V:null})},c:function(a,b,c){function d(f){f>>=2;var k=G;return new e(Ca,k[f+1],k[f])}var e=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=N(c);M(a,{name:c,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{va:!0})},l:function(a,b){b=N(b);var c=\"std::string\"===b;M(a,{name:b,fromWireType:function(d){var e=G[d>>2];if(c)for(var f=d+4,k=0;k<=e;++k){var h=d+4+\nk;if(k==e||0==C[h]){f=f?sa(C,f,h-f):\"\";if(void 0===l)var l=f;else l+=String.fromCharCode(0),l+=f;f=h+1}}else{l=Array(e);for(k=0;k<e;++k)l[k]=String.fromCharCode(C[d+4+k]);l=l.join(\"\")}X(d);return l},toWireType:function(d,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var f=\"string\"===typeof e;f||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||P(\"Cannot pass non-string to std::string\");var k=(c&&f?function(){for(var m=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);\n55296<=r&&57343>=r&&(r=65536+((r&1023)<<10)|e.charCodeAt(++n)&1023);127>=r?++m:m=2047>=r?m+2:65535>=r?m+3:m+4}return m}:function(){return e.length})(),h=ac(4+k+1);G[h>>2]=k;if(c&&f)ta(e,h+4,k+1);else if(f)for(f=0;f<k;++f){var l=e.charCodeAt(f);255<l&&(X(h),P(\"String has UTF-16 code units that do not fit in 8 bits\"));C[h+4+f]=l}else for(f=0;f<k;++f)C[h+4+f]=e[f];null!==d&&d.push(X,h);return h},argPackAdvance:8,readValueFromPointer:Za,V:function(d){X(d)}})},g:function(a,b,c){c=N(c);if(2===b){var d=\nva;var e=xa;var f=ya;var k=function(){return wa};var h=1}else 4===b&&(d=za,e=Aa,f=Ba,k=function(){return G},h=2);M(a,{name:c,fromWireType:function(l){for(var m=G[l>>2],n=k(),r,u=l+4,z=0;z<=m;++z){var t=l+4+z*b;if(z==m||0==n[t>>h])u=d(u,t-u),void 0===r?r=u:(r+=String.fromCharCode(0),r+=u),u=t+b}X(l);return r},toWireType:function(l,m){\"string\"!==typeof m&&P(\"Cannot pass non-string to C++ string type \"+c);var n=f(m),r=ac(4+n+b);G[r>>2]=n>>h;e(m,r+4,n+b);null!==l&&l.push(X,r);return r},argPackAdvance:8,\nreadValueFromPointer:Za,V:function(l){X(l)}})},m:function(a,b,c,d,e,f){Xa[a]={name:N(b),ia:W(c,d),X:W(e,f),la:[]}},e:function(a,b,c,d,e,f,k,h,l,m){Xa[a].la.push({pa:N(b),ua:c,sa:W(d,e),ta:f,Ha:k,Ga:W(h,l),Ia:m})},z:function(a,b){b=N(b);M(a,{xa:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:function(a,b,c,d){a=Rb[a];b=Sb(b);c=Qb(c);a(b,c,null,d)},f:Mb,p:function(a){if(0===a)return U(Tb());a=Qb(a);return U(Tb()[a])},o:function(a,b){b=Wb(a,b);for(var c=b[0],d=c.name+\n\"_$\"+b.slice(1).map(function(m){return m.name}).join(\"_\")+\"$\",e=[\"retType\"],f=[c],k=\"\",h=0;h<a-1;++h)k+=(0!==h?\", \":\"\")+\"arg\"+h,e.push(\"argType\"+h),f.push(b[1+h]);d=\"return function \"+ab(\"methodCaller_\"+d)+\"(handle, name, destructors, args) {\\n\";var l=0;for(h=0;h<a-1;++h)d+=\"    var arg\"+h+\" = argType\"+h+\".readValueFromPointer(args\"+(l?\"+\"+l:\"\")+\");\\n\",l+=b[h+1].argPackAdvance;d+=\"    var rv = handle[name](\"+k+\");\\n\";for(h=0;h<a-1;++h)b[h+1].deleteObject&&(d+=\"    argType\"+h+\".deleteObject(arg\"+h+\n\");\\n\");c.xa||(d+=\"    return retType.toWireType(destructors, rv);\\n\");e.push(d+\"};\\n\");a=Kb(e).apply(null,f);return Ub(a)},h:function(a){4<a&&(Y[a].ja+=1)},D:function(a,b,c,d){a=Sb(a);var e=Xb[b];if(!e){e=\"\";for(var f=0;f<b;++f)e+=(0!==f?\", \":\"\")+\"arg\"+f;var k=\"return function emval_allocator_\"+b+\"(constructor, argTypes, args) {\\n\";for(f=0;f<b;++f)k+=\"var argType\"+f+\" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + \"+f+'], \"parameter '+f+'\");\\nvar arg'+f+\" = argType\"+f+\".readValueFromPointer(args);\\nargs += argType\"+\nf+\"['argPackAdvance'];\\n\";e=(new Function(\"requireRegisteredType\",\"Module\",\"__emval_register\",k+(\"var obj = new constructor(\"+e+\");\\nreturn __emval_register(obj);\\n}\\n\")))(Vb,g,U);Xb[b]=e}return e(a,c,d)},C:function(){return U([])},q:function(a,b){a=Vb(a,\"_emval_take_value\");a=a.readValueFromPointer(b);return U(a)},a:function(){A()},v:function(a,b,c){C.copyWithin(a,b,b+c)},w:function(a){var b=C.length;a>>>=0;if(2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);\nd=Math.max(a,d);0<d%65536&&(d+=65536-d%65536);a:{try{pa.grow(Math.min(2147483648,d)-Ca.byteLength+65535>>>16);Ga();var e=1;break a}catch(f){}e=void 0}if(e)return!0}return!1},j:function(a,b,c,d){for(var e=0,f=0;f<c;f++){for(var k=F[b+8*f>>2],h=F[b+(8*f+4)>>2],l=0;l<h;l++){var m=C[k+l],n=Yb[a];0===m||10===m?((1===a?na:B)(sa(n,0)),n.length=0):n.push(m)}e+=h}F[d>>2]=e;return 0},u:function(){}};\n(function(){function a(e){g.asm=e.exports;pa=g.asm.F;Ga();Ha=g.asm.I;Ja.unshift(g.asm.G);H--;g.monitorRunDependencies&&g.monitorRunDependencies(H);0==H&&(null!==Na&&(clearInterval(Na),Na=null),Oa&&(e=Oa,Oa=null,e()))}function b(e){a(e.instance)}function c(e){return Ta().then(function(f){return WebAssembly.instantiate(f,d)}).then(e,function(f){B(\"failed to asynchronously prepare wasm: \"+f);A(f)})}var d={a:bc};H++;g.monitorRunDependencies&&g.monitorRunDependencies(H);if(g.instantiateWasm)try{return g.instantiateWasm(d,\na)}catch(e){return B(\"Module.instantiateWasm callback failed with error: \"+e),!1}(function(){return oa||\"function\"!==typeof WebAssembly.instantiateStreaming||Qa()||Pa(\"file://\")||\"function\"!==typeof fetch?c(b):fetch(I,{credentials:\"same-origin\"}).then(function(e){return WebAssembly.instantiateStreaming(e,d).then(b,function(f){B(\"wasm streaming compile failed: \"+f);B(\"falling back to ArrayBuffer instantiation\");return c(b)})})})().catch(ca);return{}})();\ng.___wasm_call_ctors=function(){return(g.___wasm_call_ctors=g.asm.G).apply(null,arguments)};var ac=g._malloc=function(){return(ac=g._malloc=g.asm.H).apply(null,arguments)},X=g._free=function(){return(X=g._free=g.asm.J).apply(null,arguments)},Hb=g.___getTypeName=function(){return(Hb=g.___getTypeName=g.asm.K).apply(null,arguments)};g.___embind_register_native_and_builtin_types=function(){return(g.___embind_register_native_and_builtin_types=g.asm.L).apply(null,arguments)};\ng.dynCall_jiji=function(){return(g.dynCall_jiji=g.asm.M).apply(null,arguments)};var cc;Oa=function dc(){cc||ec();cc||(Oa=dc)};\nfunction ec(){function a(){if(!cc&&(cc=!0,g.calledRun=!0,!qa)){Ua(Ja);Ua(Ka);ba(g);if(g.onRuntimeInitialized)g.onRuntimeInitialized();if(g.postRun)for(\"function\"==typeof g.postRun&&(g.postRun=[g.postRun]);g.postRun.length;){var b=g.postRun.shift();La.unshift(b)}Ua(La)}}if(!(0<H)){if(g.preRun)for(\"function\"==typeof g.preRun&&(g.preRun=[g.preRun]);g.preRun.length;)Ma();Ua(Ia);0<H||(g.setStatus?(g.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){g.setStatus(\"\")},1);a()},1)):a())}}\ng.run=ec;if(g.preInit)for(\"function\"==typeof g.preInit&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();ec();\n\n\n  return Module.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return Module; });\nelse if (typeof exports === 'object')\n  exports[\"Module\"] = Module;\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as WebCodecs from '../util/web-codecs';\nimport { drawableToImageData } from './canvas';\n\n/**\n * Compare two objects, returning a boolean indicating if\n * they have the same properties and strictly equal values.\n */\nexport function shallowEqual(one: any, two: any) {\n  for (const i in one) if (one[i] !== two[i]) return false;\n  for (const i in two) if (!(i in one)) return false;\n  return true;\n}\n\nasync function decodeImage(url: string): Promise<HTMLImageElement> {\n  const img = new Image();\n  img.decoding = 'async';\n  img.src = url;\n  const loaded = new Promise<void>((resolve, reject) => {\n    img.onload = () => resolve();\n    img.onerror = () => reject(Error('Image loading error'));\n  });\n\n  if (img.decode) {\n    // Nice off-thread way supported in Safari/Chrome.\n    // Safari throws on decode if the source is SVG.\n    // https://bugs.webkit.org/show_bug.cgi?id=188347\n    await img.decode().catch(() => null);\n  }\n\n  // Always await loaded, as we may have bailed due to the Safari bug above.\n  await loaded;\n  return img;\n}\n\n/** Caches results from canDecodeImageType */\nconst canDecodeCache = new Map<string, Promise<boolean>>();\n\n/**\n * Tests whether the browser supports a particular image mime type.\n *\n * @param type Mimetype\n * @example await canDecodeImageType('image/avif')\n */\nexport function canDecodeImageType(type: string): Promise<boolean> {\n  if (!canDecodeCache.has(type)) {\n    const resultPromise = (async () => {\n      const picture = document.createElement('picture');\n      const img = document.createElement('img');\n      const source = document.createElement('source');\n      source.srcset = 'data:,x';\n      source.type = type;\n      picture.append(source, img);\n\n      // Wait a single microtick just for the `img.currentSrc` to get populated.\n      await 0;\n      // At this point `img.currentSrc` will contain \"data:,x\" if format is supported and \"\"\n      // otherwise.\n      return !!img.currentSrc;\n    })();\n\n    canDecodeCache.set(type, resultPromise);\n  }\n\n  return canDecodeCache.get(type)!;\n}\n\nexport function blobToArrayBuffer(blob: Blob): Promise<ArrayBuffer> {\n  return new Response(blob).arrayBuffer();\n}\n\nexport function blobToText(blob: Blob): Promise<string> {\n  return new Response(blob).text();\n}\n\nconst magicNumberMapInput = [\n  [/^%PDF-/, 'application/pdf'],\n  [/^GIF87a/, 'image/gif'],\n  [/^GIF89a/, 'image/gif'],\n  [/^\\x89PNG\\x0D\\x0A\\x1A\\x0A/, 'image/png'],\n  [/^\\xFF\\xD8\\xFF/, 'image/jpeg'],\n  [/^BM/, 'image/bmp'],\n  [/^I I/, 'image/tiff'],\n  [/^II*/, 'image/tiff'],\n  [/^MM\\x00*/, 'image/tiff'],\n  [/^RIFF....WEBPVP8[LX ]/s, 'image/webp'],\n  [/^\\xF4\\xFF\\x6F/, 'image/webp2'],\n  [/^\\x00\\x00\\x00 ftypavif\\x00\\x00\\x00\\x00/, 'image/avif'],\n  [/^\\xff\\x0a/, 'image/jxl'],\n  [/^\\x00\\x00\\x00\\x0cJXL \\x0d\\x0a\\x87\\x0a/, 'image/jxl'],\n] as const;\n\nexport type ImageMimeTypes = typeof magicNumberMapInput[number][1];\n\nconst magicNumberToMimeType = new Map<RegExp, ImageMimeTypes>(\n  magicNumberMapInput,\n);\n\nexport async function sniffMimeType(blob: Blob): Promise<ImageMimeTypes | ''> {\n  const firstChunk = await blobToArrayBuffer(blob.slice(0, 16));\n  const firstChunkString = Array.from(new Uint8Array(firstChunk))\n    .map((v) => String.fromCodePoint(v))\n    .join('');\n  for (const [detector, mimeType] of magicNumberToMimeType) {\n    if (detector.test(firstChunkString)) {\n      return mimeType;\n    }\n  }\n  return '';\n}\n\nexport async function blobToImg(blob: Blob): Promise<HTMLImageElement> {\n  const url = URL.createObjectURL(blob);\n\n  try {\n    return await decodeImage(url);\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\nexport async function builtinDecode(\n  signal: AbortSignal,\n  blob: Blob,\n  mimeType: string,\n): Promise<ImageData> {\n  // If WebCodecs are supported, use that.\n  if (await WebCodecs.isTypeSupported(mimeType)) {\n    assertSignal(signal);\n    try {\n      return await abortable(signal, WebCodecs.decode(blob, mimeType));\n    } catch (e) {}\n  }\n  assertSignal(signal);\n\n  // Prefer createImageBitmap as it's the off-thread option for Firefox.\n  const drawable = await abortable<HTMLImageElement | ImageBitmap>(\n    signal,\n    'createImageBitmap' in self ? createImageBitmap(blob) : blobToImg(blob),\n  );\n  return drawableToImageData(drawable);\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldValueAsNumber(\n  field: any,\n  defaultVal: number = 0,\n): number {\n  if (!field) return defaultVal;\n  return Number(inputFieldValue(field));\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldCheckedAsNumber(\n  field: any,\n  defaultVal: number = 0,\n): number {\n  if (!field) return defaultVal;\n  return Number(inputFieldChecked(field));\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldChecked(\n  field: any,\n  defaultVal: boolean = false,\n): boolean {\n  if (!field) return defaultVal;\n  return (field as HTMLInputElement).checked;\n}\n\n/**\n * @param field An HTMLInputElement, but the casting is done here to tidy up onChange.\n * @param defaultVal Value to return if 'field' doesn't exist.\n */\nexport function inputFieldValue(field: any, defaultVal: string = ''): string {\n  if (!field) return defaultVal;\n  return (field as HTMLInputElement).value;\n}\n\n/**\n * Creates a promise that resolves when the user types the konami code.\n */\nexport function konami(): Promise<void> {\n  return new Promise((resolve) => {\n    // Keycodes for:         B A\n    const expectedPattern = '38384040373937396665';\n    let rollingPattern = '';\n\n    const listener = (event: KeyboardEvent) => {\n      rollingPattern += event.keyCode;\n      rollingPattern = rollingPattern.slice(-expectedPattern.length);\n      if (rollingPattern === expectedPattern) {\n        window.removeEventListener('keydown', listener);\n        resolve();\n      }\n    };\n\n    window.addEventListener('keydown', listener);\n  });\n}\n\ninterface TransitionOptions {\n  from?: number;\n  to?: number;\n  duration?: number;\n  easing?: string;\n}\n\nexport async function transitionHeight(\n  el: HTMLElement,\n  opts: TransitionOptions,\n): Promise<void> {\n  const {\n    from = el.getBoundingClientRect().height,\n    to = el.getBoundingClientRect().height,\n    duration = 1000,\n    easing = 'ease-in-out',\n  } = opts;\n\n  if (from === to || duration === 0) {\n    el.style.height = to + 'px';\n    return;\n  }\n\n  el.style.height = from + 'px';\n  // Force a style calc so the browser picks up the start value.\n  getComputedStyle(el).transform;\n  el.style.transition = `height ${duration}ms ${easing}`;\n  el.style.height = to + 'px';\n\n  return new Promise<void>((resolve) => {\n    const listener = (event: Event) => {\n      if (event.target !== el) return;\n      el.style.transition = '';\n      el.removeEventListener('transitionend', listener);\n      el.removeEventListener('transitioncancel', listener);\n      resolve();\n    };\n\n    el.addEventListener('transitionend', listener);\n    el.addEventListener('transitioncancel', listener);\n  });\n}\n\n/**\n * Simple event listener that prevents the default.\n */\nexport function preventDefault(event: Event) {\n  event.preventDefault();\n}\n\n/**\n * Throw an abort error if a signal is aborted.\n */\nexport function assertSignal(signal: AbortSignal) {\n  if (signal.aborted) throw new DOMException('AbortError', 'AbortError');\n}\n\n/**\n * Take a signal and promise, and returns a promise that rejects with an AbortError if the abort is\n * signalled, otherwise resolves with the promise.\n */\nexport async function abortable<T>(\n  signal: AbortSignal,\n  promise: Promise<T>,\n): Promise<T> {\n  assertSignal(signal);\n  return Promise.race([\n    promise,\n    new Promise<T>((_, reject) => {\n      signal.addEventListener('abort', () =>\n        reject(new DOMException('AbortError', 'AbortError')),\n      );\n    }),\n  ]);\n}\n","/** Replace the contents of a canvas with the given data */\nexport function drawDataToCanvas(canvas: HTMLCanvasElement, data: ImageData) {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw Error('Canvas not initialized');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.putImageData(data, 0, 0);\n}\n\n/**\n * Encode some image data in a given format using the browser's encoders\n *\n * @param {ImageData} data\n * @param {string} type A mime type, eg image/jpeg.\n * @param {number} [quality] Between 0-1.\n */\nexport async function canvasEncode(\n  data: ImageData,\n  type: string,\n  quality?: number,\n): Promise<Blob> {\n  const canvas = document.createElement('canvas');\n  canvas.width = data.width;\n  canvas.height = data.height;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw Error('Canvas not initialized');\n  ctx.putImageData(data, 0, 0);\n\n  let blob: Blob | null;\n\n  if ('toBlob' in canvas) {\n    blob = await new Promise<Blob | null>((r) =>\n      canvas.toBlob(r, type, quality),\n    );\n  } else {\n    // Welcome to Edge.\n    // TypeScript thinks `canvas` is 'never', so it needs casting.\n    const dataUrl = (canvas as HTMLCanvasElement).toDataURL(type, quality);\n    const result = /data:([^;]+);base64,(.*)$/.exec(dataUrl);\n\n    if (!result) throw Error('Data URL reading failed');\n\n    const outputType = result[1];\n    const binaryStr = atob(result[2]);\n    const data = new Uint8Array(binaryStr.length);\n\n    for (let i = 0; i < data.length; i += 1) {\n      data[i] = binaryStr.charCodeAt(i);\n    }\n\n    blob = new Blob([data], { type: outputType });\n  }\n\n  if (!blob) throw Error('Encoding failed');\n  return blob;\n}\n\ninterface DrawableToImageDataOptions {\n  width?: number;\n  height?: number;\n  sx?: number;\n  sy?: number;\n  sw?: number;\n  sh?: number;\n}\n\nfunction getWidth(\n  drawable: ImageBitmap | HTMLImageElement | VideoFrame,\n): number {\n  if ('displayWidth' in drawable) {\n    return drawable.displayWidth;\n  }\n  return drawable.width;\n}\n\nfunction getHeight(\n  drawable: ImageBitmap | HTMLImageElement | VideoFrame,\n): number {\n  if ('displayHeight' in drawable) {\n    return drawable.displayHeight;\n  }\n  return drawable.height;\n}\n\nexport function drawableToImageData(\n  drawable: ImageBitmap | HTMLImageElement | VideoFrame,\n  opts: DrawableToImageDataOptions = {},\n): ImageData {\n  const {\n    width = getWidth(drawable),\n    height = getHeight(drawable),\n    sx = 0,\n    sy = 0,\n    sw = getWidth(drawable),\n    sh = getHeight(drawable),\n  } = opts;\n\n  // Make canvas same size as image\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  // Draw image onto canvas\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw new Error('Could not create canvas context');\n  ctx.drawImage(drawable, sx, sy, sw, sh, 0, 0, width, height);\n  return ctx.getImageData(0, 0, width, height);\n}\n\nexport type BuiltinResizeMethod = 'pixelated' | 'low' | 'medium' | 'high';\n\nexport function builtinResize(\n  data: ImageData,\n  sx: number,\n  sy: number,\n  sw: number,\n  sh: number,\n  dw: number,\n  dh: number,\n  method: BuiltinResizeMethod,\n): ImageData {\n  const canvasSource = document.createElement('canvas');\n  canvasSource.width = data.width;\n  canvasSource.height = data.height;\n  drawDataToCanvas(canvasSource, data);\n\n  const canvasDest = document.createElement('canvas');\n  canvasDest.width = dw;\n  canvasDest.height = dh;\n  const ctx = canvasDest.getContext('2d');\n  if (!ctx) throw new Error('Could not create canvas context');\n\n  if (method === 'pixelated') {\n    ctx.imageSmoothingEnabled = false;\n  } else {\n    ctx.imageSmoothingQuality = method;\n  }\n\n  ctx.drawImage(canvasSource, sx, sy, sw, sh, 0, 0, dw, dh);\n  return ctx.getImageData(0, 0, dw, dh);\n}\n\n/**\n * Test whether <canvas> can encode to a particular type.\n */\nexport async function canvasEncodeTest(mimeType: string): Promise<boolean> {\n  try {\n    const blob = await canvasEncode(new ImageData(1, 1), mimeType);\n    // According to the spec, the blob should be null if the format isn't supported\n    if (!blob) return false;\n    // but Safari & Firefox fall back to PNG, so we need to check the mime type.\n    return blob.type === mimeType;\n  } catch (err) {\n    return false;\n  }\n}\n","import { Remote, wrap } from \"comlink\";\nimport { blobToImg, canDecodeImageType } from \"squoosh/src/client/lazy-app/util\";\nimport { drawableToImageData } from \"squoosh/src/client/lazy-app/util/canvas\";\nimport { WorkerApi } from \"./worker\";\nimport { newWorker } from \"./analyzing\";\n\nexport async function decodeImageNative(blob: Blob) {\n\tconst bitmap = \"createImageBitmap\" in self\n\t\t? await createImageBitmap(blob)\n\t\t: await blobToImg(blob);\n\n\tconst canvas = document.createElement(\"canvas\");\n\tconst { width, height } = bitmap;\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) {\n\t\tthrow new Error(\"Canvas not initialized\");\n\t}\n\tctx.drawImage(bitmap, 0, 0);\n\treturn ctx.getImageData(0, 0, width, height);\n}\n\n/**\n * Firefox throws if you try to draw an SVG to canvas that doesn't have width/height.\n * In Chrome it loads, but drawImage behaves weirdly.\n * This function sets width/height if it isn't already set.\n *\n * @param svgXml The SVG image with width/height attributes\n */\nfunction ensureSVGSize(svgXml: string) {\n\tconst parser = new DOMParser();\n\tconst document = parser.parseFromString(svgXml, \"image/svg+xml\");\n\tconst svg = document.documentElement;\n\n\tif (svg.getAttribute(\"width\") && svg.getAttribute(\"height\")) {\n\t\treturn svgXml;\n\t}\n\n\tconst viewBox = svg.getAttribute(\"viewBox\");\n\tif (viewBox === null) {\n\t\tthrow Error(\"SVG must have width/height or viewBox\");\n\t}\n\tconst [, , width, height] = viewBox.split(/\\s+/);\n\tsvg.setAttribute(\"width\", width);\n\tsvg.setAttribute(\"height\", height);\n\n\treturn new XMLSerializer().serializeToString(document);\n}\n\nexport async function svgToImageData(svgXml: string) {\n\tsvgXml = ensureSVGSize(svgXml);\n\tconst blob = new Blob([svgXml], { type: \"image/svg+xml\" });\n\treturn drawableToImageData(await blobToImg(blob));\n}\n\nexport async function decode(blob: Blob, worker?: Remote<WorkerApi>) {\n\tconst { type } = blob;\n\n\tif (type === \"image/svg+xml\") {\n\t\treturn blob.text().then(svgToImageData);\n\t}\n\tif (await canDecodeImageType(type)) {\n\t\treturn decodeImageNative(blob);\n\t}\n\n\tworker ??= wrap<WorkerApi>(newWorker());\n\tconst buffer = await blob.arrayBuffer();\n\tswitch (type) {\n\t\tcase \"image/webp\":\n\t\t\treturn worker.webpDecode(buffer);\n\t\tcase \"image/avif\":\n\t\t\treturn worker.avifDecode(buffer);\n\t\tcase \"image/jxl\":\n\t\t\treturn worker.jxlDecode(buffer);\n\t\tcase \"image/webp2\":\n\t\t\treturn worker.webp2Decode(buffer);\n\t\tdefault:\n\t\t\treturn decodeImageNative(blob);\n\t}\n}\n","import { Remote } from \"comlink\";\nimport * as SSIM from \"ssim.js\";\nimport { ButteraugliOptions } from \"../lib/diff\";\nimport { ImageEncoder } from \"./codecs\";\nimport { decode } from \"./decode\";\nimport type { WorkerApi } from \"./worker\";\nimport { InputImage, MetricMeta } from \"./app\";\nimport WorkerPool, { TaskFn } from \"./WorkerPool\";\n\nexport interface Optional<T> {\n\toptions: T;\n\tenabled: boolean;\n}\n\nexport interface MeasureOptions {\n\tversion: number;\n\tworkerCount: number;\n\ttime: boolean;\n\tPSNR: boolean;\n\tSSIM: Optional<SSIM.Options>;\n\tbutteraugli: Optional<ButteraugliOptions>;\n}\n\ninterface EncodeOutput {\n\ttime: number;\n\tbuffer: ArrayBuffer;\n\tdata: ImageData;\n}\n\nexport interface AnalyzeResult {\n\tbuffer: ArrayBuffer;\n\tdata: ImageData;\n\theatMap?: ImageData;\n\tmetrics: Record<string, number>;\n}\n\n// JSON.stringify is not deterministic, be careful with the properties order.\nexport class ObjectKeyMap<K, V> {\n\n\tprivate readonly table: Record<string, V> = {};\n\n\tget(key: K) {\n\t\treturn this.table[JSON.stringify(key)];\n\t}\n\n\tset(key: K, value: V) {\n\t\tthis.table[JSON.stringify(key)] = value;\n\t}\n}\n\n/**\n * Create a new object compatible with ImageData type from an ImageData,\n * with convert the data to SharedArrayBuffer.\n *\n * NOTE: the returned value is not an ImageData and can't be put into canvas.\n *\n * @param image original image data\n * @return the image data with shared\n */\nexport function share(image: ImageData): ImageData {\n\tconst { width, height, data } = image;\n\tconst buffer = new SharedArrayBuffer(data.byteLength);\n\tconst view = new Uint8ClampedArray(buffer);\n\tview.set(data);\n\treturn { width: width, height: height, data: view };\n}\n\nfunction rgbaToImage(buffer: ArrayBufferLike, width: number, height: number) {\n\tconst channels = buffer.byteLength / width / height;\n\tif (channels !== 4) {\n\t\tthrow new Error(\"Buffer must be a 8-bit depth RGBA array\");\n\t}\n\tconst canvas = document.createElement(\"canvas\");\n\tconst ctx = canvas.getContext(\"2d\");\n\tif (!ctx) {\n\t\tthrow new Error(\"Could not create canvas context\");\n\t}\n\tconst imageData = ctx.createImageData(width, height);\n\timageData.data.set(new Uint8ClampedArray(buffer));\n\treturn imageData;\n}\n\nexport function newWorker() {\n\t// @ts-ignore ts-loader will convert the file to ES module.\n\treturn new Worker(new URL(\"./worker\", import.meta.url));\n}\n\nexport class Analyzer {\n\n\tprivate readonly pool: WorkerPool<WorkerApi>;\n\tprivate readonly measureOpts: MeasureOptions;\n\n\tconstructor(pool: WorkerPool<WorkerApi>, measureOpts: MeasureOptions) {\n\t\tthis.pool = pool;\n\t\tthis.measureOpts = measureOpts;\n\t}\n\n\tonProgress() {}\n\n\tsetOriginalImage(input: InputImage) {\n\t\tconst { raw } = input;\n\n\t\tif (\"SharedArrayBuffer\" in window) {\n\t\t\tconst shared = share(raw);\n\t\t\treturn this.pool.runOnEach(r => r.setImageToEncode(shared));\n\t\t} else {\n\t\t\treturn this.pool.runOnEach(r => r.setImageToEncode(raw));\n\t\t}\n\t}\n\n\tgetMetricsMeta() {\n\t\tconst { SSIM, PSNR, butteraugli } = this.measureOpts;\n\t\tlet calculations = 0;\n\t\tconst metricsMeta: MetricMeta[] = [];\n\n\t\tif (PSNR) {\n\t\t\tcalculations++;\n\t\t\tmetricsMeta.push({ key: \"psnr\", name: \"PSNR (db)\" });\n\t\t}\n\t\tif (SSIM.enabled) {\n\t\t\tcalculations++;\n\t\t\tmetricsMeta.push({ key: \"ssim\", name: \"SSIM %\" });\n\t\t}\n\t\tif (butteraugli.enabled) {\n\t\t\tcalculations++;\n\t\t\tmetricsMeta.push({ key: \"butteraugli\", name: \"Butteraugli Score\" });\n\t\t}\n\n\t\treturn { calculations, metricsMeta };\n\t}\n\n\tasync encode(remote: Remote<WorkerApi>, encoder: ImageEncoder, options: any) {\n\t\tconst { buffer, time } = await encoder.encode(options, remote);\n\t\tthis.onProgress();\n\n\t\tconst blob = new Blob([buffer], { type: encoder.mimeType });\n\t\treturn { time, buffer, data: await decode(blob, remote) } as EncodeOutput;\n\t}\n\n\tmeasure(output: AnalyzeResult) {\n\t\tconst { pool, onProgress } = this;\n\t\tconst { SSIM, PSNR, butteraugli } = this.measureOpts;\n\t\tconst { data, metrics } = output;\n\n\t\tfunction queueTask(func: TaskFn<WorkerApi, any>) {\n\t\t\tpool.run(async remote => func(remote).then(onProgress));\n\t\t}\n\n\t\tif (butteraugli.enabled) {\n\t\t\tqueueTask(async r => {\n\t\t\t\tconst { score, heatMap } = await r.calcButteraugli(data, butteraugli.options);\n\t\t\t\tmetrics.butteraugli = score;\n\t\t\t\toutput.heatMap = rgbaToImage(heatMap, data.width, data.height);\n\t\t\t});\n\t\t}\n\t\tif (PSNR) {\n\t\t\tqueueTask(async r => metrics.psnr = await r.calcPSNR(data));\n\t\t}\n\t\tif (SSIM.enabled) {\n\t\t\tqueueTask(async r => metrics.ssim = await r.calcSSIM(data, SSIM.options) * 100);\n\t\t}\n\t}\n}\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCheckBox(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n  })));\n}\n\nexport default SvgCheckBox;","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCheckBoxChecked(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n  })));\n}\n\nexport default SvgCheckBoxChecked;","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgRadioBox(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n  })));\n}\n\nexport default SvgRadioBox;","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgRadioBoxChecked(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n  })));\n}\n\nexport default SvgRadioBoxChecked;","import { useState } from \"react\";\n\n/**\n * No effect function with a clear name.\n */\nexport const NOOP = () => {};\n\nexport const IDENTITY = (v: any) => v;\n\nconst SIZE_UNITS = [\"\", \"K\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\"];\n\n/**\n * Convert bytes to a human readable string.\n *\n * @param value The number to format.\n * @param fraction\n */\nexport function bytes(value: number, fraction = 1024) {\n\tconst size = Math.abs(value);\n\n\tif (size === 0) {\n\t\treturn `${value.toFixed(2)} B`;\n\t}\n\n\tconst i = ~~(Math.log2(size) / Math.log2(fraction));\n\tconst v = value / (fraction ** i);\n\treturn `${v.toFixed(2)} ${SIZE_UNITS[i]}B`;\n}\n\nexport async function getFileFromUrl(url: string, signal?: AbortSignal) {\n\tconst response = await fetch(url, { signal });\n\tconst blob = await response.blob();\n\n\t// Firefox doesn't like content types like 'image/png; charset=UTF-8', which Webpack's dev\n\t// server returns. https://bugzilla.mozilla.org/show_bug.cgi?id=1497925.\n\tconst type = /[^;]*/.exec(blob.type)![0];\n\tconst name = new URL(url).pathname.split(\"/\").pop() || \"image\";\n\n\tconst timeHeader = response.headers.get(\"last-modified\");\n\tconst lastModified = timeHeader ? new Date(timeHeader).getTime() : undefined;\n\n\treturn new File([blob], name, { type, lastModified });\n}\n\nexport function useProgress(initialMax = 1) {\n\tconst [max, setMax] = useState(initialMax);\n\tconst [value, setValue] = useState(0);\n\n\tfunction reset(value: number) {\n\t\tsetValue(0);\n\t\tsetMax(value);\n\t}\n\n\tfunction increase() {\n\t\tsetValue(v => v + 1);\n\t}\n\n\treturn { value, max, increase, reset };\n}\n","import {\n\tChangeEvent,\n\tChangeEventHandler,\n\tComponentType,\n\tDispatch,\n\tMouseEventHandler,\n\tReactNode,\n\tSVGProps,\n} from \"react\";\nimport clsx from \"clsx\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./CheckBoxBase.scss\";\n\nexport interface CheckBoxProps {\n\tchecked: boolean;\n\n\tclassName?: string;\n\tname?: string;\n\tvalue?: string;\n\tdisabled?: boolean;\n\n\tonValueChange?: Dispatch<boolean>;\n\n\tonClick?: MouseEventHandler;\n\tonChange?: ChangeEventHandler<HTMLInputElement>;\n\tchildren?: ReactNode;\n}\n\ninterface InternalProps extends CheckBoxProps {\n\ttype: string;\n\tIcon: ComponentType<SVGProps<SVGSVGElement>>;\n\tIconChecked: ComponentType<SVGProps<SVGSVGElement>>;\n}\n\nexport default function CheckBoxBase(props: InternalProps) {\n\tconst {\n\t\tclassName, type, Icon, IconChecked, name, value, checked, disabled,\n\t\tonClick, onChange = NOOP, onValueChange = NOOP, children,\n\t} = props;\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\tonChange(e);\n\t\tonValueChange(e.currentTarget.checked);\n\t}\n\n\tconst CheckMark = checked ? IconChecked : Icon;\n\n\treturn (\n\t\t<label className={clsx(styles.container, className)} onClick={onClick}>\n\t\t\t<input\n\t\t\t\ttype={type}\n\t\t\t\tclassName={styles.input}\n\t\t\t\tname={name}\n\t\t\t\tvalue={value}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t\t<CheckMark className={styles.mark}/>\n\t\t\t{children && <span className={styles.label}>{children}</span>}\n\t\t</label>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2Ov17\",\"input\":\"_2IoHf\",\"mark\":\"_2H-Mw\",\"label\":\"_11H37\"};","import { ChangeEvent, ChangeEventHandler, CSSProperties, Dispatch, MouseEventHandler } from \"react\";\nimport clsx from \"clsx\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./RangeInput.scss\";\n\ninterface RangeInputProps {\n\tvalue: number;\n\tmin: number;\n\tmax: number;\n\tstep: number;\n\n\tclassName?: string;\n\tname?: string;\n\tdisabled?: boolean;\n\n\tonClick?: MouseEventHandler<HTMLInputElement>;\n\tonValueChange?: Dispatch<number>;\n\tonChange?: ChangeEventHandler<HTMLInputElement>;\n}\n\ninterface RangeInputCSS extends CSSProperties {\n\t\"--value-percent\": string;\n}\n\nexport default function RangeInput(props: RangeInputProps) {\n\tconst {\n\t\tclassName, name, value, min, max, step, disabled,\n\t\tonClick, onChange = NOOP, onValueChange = NOOP,\n\t} = props;\n\n\tconst percent = (value - min) / (max - min);\n\tconst cssVariables: RangeInputCSS = {\n\t\t\"--value-percent\": `${percent * 100}%`,\n\t};\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\tonChange(e);\n\t\tonValueChange(e.currentTarget.valueAsNumber);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(styles.container, className)}\n\t\t\tstyle={cssVariables}\n\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tclassName={styles.input}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tvalue={value}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\tstep={step}\n\t\t\t\tonClick={onClick}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t\t<div className={styles.thumbRegion}>\n\t\t\t\t<div className={styles.thumb}/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2DhF4\",\"thumbRegion\":\"_2b567\",\"thumb\":\"_26ZKf\",\"input\":\"_3dzMs\"};","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"_3asye\",\"active\":\"_1lox2\",\"button\":\"_2wLkD\",\"outline\":\"_1UDsQ _2wLkD\",\"busy\":\"_3XmXG\"};","import { MouseEventHandler, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport styles from \"./Button.scss\";\n\nexport interface ButtonProps {\n\t/**\n\t * The basic style of the button, default is \"button\".\n\t */\n\ttype?: \"button\" | \"text\" | \"outline\";\n\n\tactive?: boolean;\n\tdisabled?: boolean;\n\n\t/**\n\t * If set, will render an anchor with href attribute instead of a button.\n\t */\n\thref?: string;\n\n\tautoFocus?: boolean;\n\ttitle?: string;\n\tclassName?: string;\n\n\tonClick?: MouseEventHandler;\n\tchildren?: ReactNode;\n}\n\nexport default function Button(props: ButtonProps) {\n\tconst { type = \"button\", href, active, autoFocus, title, className, disabled, onClick, children } = props;\n\n\tconst classes = clsx(\n\t\tstyles[type],\n\t\tclassName,\n\t\t{ [styles.active]: active },\n\t);\n\n\tconst ButtonTag = href ? \"a\" : \"button\";\n\tconst htmlType = href ? undefined : \"button\";\n\n\treturn (\n\t\t<ButtonTag\n\t\t\tclassName={classes}\n\t\t\thref={href}\n\t\t\ttitle={title}\n\t\t\tautoFocus={autoFocus}\n\t\t\tdisabled={disabled}\n\t\t\ttype={htmlType}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{children}\n\t\t</ButtonTag>\n\t);\n}\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgAdd(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    width: \"1em\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n  })));\n}\n\nexport default SvgAdd;","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgRemove(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    width: \"1em\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 13H5v-2h14v2z\"\n  })));\n}\n\nexport default SvgRemove;","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgArrowUp(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    width: \"1em\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"\n  })));\n}\n\nexport default SvgArrowUp;","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgArrowDown(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"1em\",\n    viewBox: \"0 0 24 24\",\n    width: \"1em\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\"\n  })));\n}\n\nexport default SvgArrowDown;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_2dfjc\",\"input\":\"xI_9P no-spinner\",\"button\":\"_1H0a4\"};","import { Dispatch, MouseEvent } from \"react\";\nimport clsx from \"clsx\";\nimport PlusIcon from \"../assets/add.svg\";\nimport MinusIcon from \"../assets/remove.svg\";\nimport ArrowUpIcon from \"../assets/arrow_up.svg\";\nimport ArrowDownIcon from \"../assets/arrow_down.svg\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./NumberInput.scss\";\n\nconst UPDATE_SPEED = 50;\nconst UPDATE_DELAY = 400;\n\nfunction getPrecision(value: number) {\n\tconst s = value.toString();\n\tconst d = s.indexOf(\".\") + 1;\n\treturn d || s.length - d;\n}\n\nexport interface NumberInputProps {\n\tvalue: number;\n\tmin?: number;\n\tmax?: number;\n\tstep?: number;\n\n\t/**\n\t * Set the stepping interval to use when using up and down arrows to adjust the value,\n\t * The difference with step is that this attribute is not used for validation.\n\t *\n\t * @default same as step\n\t */\n\tincrement?: number;\n\n\tminMaxButton?: boolean;\n\n\tinputId?: string;\n\ttitle?: string;\n\tname?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n\n\tonValueChange?: Dispatch<number>;\n}\n\nexport default function NumberInput(props: NumberInputProps) {\n\tconst {\n\t\tinputId,\n\t\ttitle,\n\t\tname,\n\t\tclassName,\n\t\tdisabled,\n\t\tminMaxButton,\n\t\tvalue,\n\t\tmin = 0,\n\t\tmax = Number.MAX_SAFE_INTEGER,\n\t\tstep = 1,\n\t\tincrement = step,\n\t\tonValueChange = NOOP,\n\t} = props;\n\n\tfunction handleMouseDown(event: MouseEvent, diff: number) {\n\t\tif (event.button !== 0) {\n\t\t\treturn;\n\t\t}\n\t\tlet timer = 0;\n\t\tconst q = Math.pow(10, getPrecision(step));\n\n\t\t/** get the next value, resolve precision problem */\n\t\tfunction next(n: number) {\n\t\t\tn += diff;\n\t\t\tn = Math.min(Math.max(n, min), max);\n\t\t\treturn Math.round(n * q) / q;\n\t\t}\n\n\t\tfunction update(current: number) {\n\t\t\tconst newValue = next(current);\n\t\t\tonValueChange(newValue);\n\t\t\ttimer = window.setTimeout(() => update(newValue), UPDATE_SPEED);\n\t\t}\n\n\t\tfunction onMouseUp() {\n\t\t\tclearTimeout(timer);\n\t\t\tdocument.removeEventListener(\"mouseup\", onMouseUp);\n\t\t}\n\n\t\tconst newValue = next(value);\n\t\tonValueChange(newValue);\n\t\ttimer = window.setTimeout(() => update(newValue), UPDATE_DELAY);\n\t\tdocument.addEventListener(\"mouseup\", onMouseUp);\n\t}\n\n\treturn (\n\t\t<div title={title} className={clsx(styles.container, className)}>\n\t\t\t{\n\t\t\t\tminMaxButton &&\n\t\t\t\t<button\n\t\t\t\t\ttitle=\"Min\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName={styles.button}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonClick={() => onValueChange(min)}\n\t\t\t\t>\n\t\t\t\t\t<ArrowDownIcon/>\n\t\t\t\t</button>\n\t\t\t}\n\t\t\t<button\n\t\t\t\ttitle=\"Decrease\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={styles.button}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMouseDown={e => handleMouseDown(e, -increment)}\n\t\t\t>\n\t\t\t\t<MinusIcon shapeRendering=\"crispEdges\"/>\n\t\t\t</button>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tid={inputId}\n\t\t\t\tclassName={styles.input}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tname={name}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\tstep={step}\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={e => onValueChange(e.currentTarget.valueAsNumber)}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttitle=\"Increase\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={styles.button}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMouseDown={e => handleMouseDown(e, increment)}\n\t\t\t>\n\t\t\t\t<PlusIcon shapeRendering=\"crispEdges\"/>\n\t\t\t</button>\n\t\t\t{\n\t\t\t\tminMaxButton &&\n\t\t\t\t<button\n\t\t\t\t\ttitle=\"Max\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName={styles.button}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonClick={() => onValueChange(max)}\n\t\t\t\t>\n\t\t\t\t\t<ArrowUpIcon/>\n\t\t\t\t</button>\n\t\t\t}\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dimmer\":\"_3_cLi\",\"hide\":\"_1p1yr\",\"dialog\":\"_1Vq87\"};","import { ReactNode, useEffect, useLayoutEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport clsx from \"clsx\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./Dialog.scss\";\n\ninterface DialogProps {\n\tclassName?: string;\n\tname?: string;\n\tchildren: ReactNode;\n\tonClose?: () => void;\n}\n\n/**\n * Hide non-top-level dialogs.\n *\n * there is no :last-of-class selector so use JS to implement.\n */\nfunction hidePrevious() {\n\tconst dialogs = document.body.querySelectorAll(\".\" + styles.dimmer);\n\tconst previous = dialogs[dialogs.length - 2];\n\tif (!previous) {\n\t\treturn;\n\t}\n\tprevious.classList.add(styles.hide);\n\treturn () => previous.classList.remove(styles.hide);\n}\n\nexport default function Dialog(props: DialogProps) {\n\tconst { className, name, onClose = NOOP, children } = props;\n\n\tfunction listenKeyboardClose() {\n\t\tfunction handleKeyUp(event: KeyboardEvent) {\n\t\t\tif (event.key === \"Escape\") {\n\t\t\t\tonClose();\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener(\"keyup\", handleKeyUp);\n\t\treturn () => window.removeEventListener(\"keyup\", handleKeyUp);\n\t}\n\n\tuseEffect(listenKeyboardClose, [onClose]);\n\tuseLayoutEffect(hidePrevious, []);\n\n\treturn createPortal(\n\t\t<div className={styles.dimmer}>\n\t\t\t<div\n\t\t\t\trole=\"dialog\"\n\t\t\t\taria-label={name}\n\t\t\t\tclassName={clsx(className, styles.dialog)}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>,\n\t\tdocument.body,\n\t);\n}\n","import { Dispatch, ReactNode } from \"react\";\n\ntype PointerMoveHandler = (dx: number, dy: number) => void;\n\nfunction watchMouseMove(baseEvent: MouseEvent, handler: PointerMoveHandler) {\n\tconst basePageX = baseEvent.pageX;\n\tconst basePageY = baseEvent.pageY;\n\n\tfunction handleMove(event: MouseEvent) {\n\t\thandler(event.pageX - basePageX, event.pageY - basePageY);\n\t}\n\n\tfunction handleEnd(event: Event) {\n\t\tevent.preventDefault();\n\t\tdocument.removeEventListener(\"mousemove\", handleMove);\n\t\tdocument.removeEventListener(\"mouseup\", handleEnd);\n\t}\n\n\tdocument.addEventListener(\"mousemove\", handleMove);\n\tdocument.addEventListener(\"mouseup\", handleEnd);\n}\n\nfunction watchTouchMove(baseEvent: TouchEvent, handler: PointerMoveHandler) {\n\tconst basePointer = baseEvent.touches[0];\n\n\tfunction handleMove(event: TouchEvent) {\n\t\tconst touch = event.touches[0];\n\t\thandler(touch.pageX - basePointer.pageX, touch.pageY - basePointer.pageY);\n\t}\n\n\tfunction handleEnd(event: Event) {\n\t\tevent.preventDefault();\n\t\tdocument.removeEventListener(\"touchmove\", handleMove);\n\t\tdocument.removeEventListener(\"touchend\", handleEnd);\n\t}\n\n\tdocument.addEventListener(\"touchmove\", handleMove);\n\tdocument.addEventListener(\"touchend\", handleEnd);\n}\n\nexport interface PinchZoomState {\n\tx: number;\n\ty: number;\n\tscale: number;\n}\n\nexport interface PinchZoomProps {\n\tstate: PinchZoomState;\n\tclassName?: string;\n\tchildren: ReactNode;\n\tonChange: Dispatch<PinchZoomState>;\n}\n\nexport default function PinchZoom(props: PinchZoomProps) {\n\tconst { state, className, children, onChange } = props;\n\n\tfunction handleWheel(event: React.WheelEvent) {\n\t\tconst { ctrlKey, deltaMode, clientX, clientY } = event;\n\t\tlet { deltaY } = event;\n\n\t\tevent.preventDefault();\n\n\t\t// 1 is \"lines\", 0 is \"pixels\"\n\t\tif (deltaMode === 1) {\n\t\t\tdeltaY *= 15;\n\t\t}\n\n\t\t// ctrlKey is true when pinch-zooming on a trackpad.\n\t\tconst divisor = ctrlKey ? 100 : 300;\n\t\tconst scaleDiff = 1 - deltaY / divisor;\n\n\t\tconst rect = event.currentTarget.firstElementChild!.getBoundingClientRect();\n\t\tconst dx = ((rect.left + rect.width / 2) - clientX) * (scaleDiff - 1);\n\t\tconst dy = ((rect.top + rect.height / 2) - clientY) * (scaleDiff - 1);\n\n\t\tonChange({\n\t\t\tx: state.x + dx,\n\t\t\ty: state.y + dy,\n\t\t\tscale: state.scale * scaleDiff,\n\t\t});\n\t}\n\n\tfunction updateOffset(dx: number, dy: number) {\n\t\tconst x = state.x + dx;\n\t\tconst y = state.y + dy;\n\t\tonChange({ scale: state.scale, x, y });\n\t}\n\n\tfunction handleMouseDown(e: React.MouseEvent) {\n\t\tif (e.button !== 0) {\n\t\t\treturn;\n\t\t}\n\t\twatchMouseMove(e.nativeEvent, updateOffset);\n\t}\n\n\tfunction handleTouchStart(e: React.TouchEvent) {\n\t\twatchTouchMove(e.nativeEvent, updateOffset);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{ touchAction: \"none\" }}\n\t\t\tclassName={className}\n\t\t\tonWheel={handleWheel}\n\t\t\tonTouchStart={handleTouchStart}\n\t\t\tonMouseDown={handleMouseDown}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n","import { SelectHTMLAttributes } from \"react\";\nimport CaretDownIcon from \"bootstrap-icons/icons/caret-down-fill.svg\";\nimport styles from \"./SelectBox.scss\";\n\ntype SelectBoxProps = SelectHTMLAttributes<HTMLSelectElement>;\n\nexport default function SelectBox(props: SelectBoxProps) {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<select {...props} className={styles.select}/>\n\t\t\t<CaretDownIcon className={styles.icon}/>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_3Neg9\",\"select\":\"_2rF3V\",\"icon\":\"_2Arv_\"};","import { ChangeEvent } from \"react\";\nimport clsx from \"clsx\";\nimport { CheckBoxProps } from \"./CheckBoxBase\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./SwitchButton.scss\";\n\nexport type SwitchButtonProps = Omit<CheckBoxProps, \"children\">;\n\nexport default function SwitchButton(props: SwitchButtonProps) {\n\tconst { className, name, checked, disabled, onClick, onChange = NOOP, onValueChange = NOOP } = props;\n\n\tconst clazz = clsx(\n\t\tstyles.container,\n\t\tclassName,\n\t\t{ [styles.checked]: checked },\n\t);\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>) {\n\t\tonChange(e);\n\t\tonValueChange(e.currentTarget.checked);\n\t}\n\n\treturn (\n\t\t<label className={clazz}>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tclassName={styles.input}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tchecked={checked}\n\t\t\t\tname={name}\n\t\t\t\tonClick={onClick}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t</label>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_23L3Q\",\"checked\":\"_38B3L\",\"input\":\"rBLkp\"};","import { MouseEventHandler, ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport styles from \"./ControlField.scss\";\n\nexport interface ControlFieldProps {\n\tactive: boolean;\n\tclassName?: string;\n\n\tonFocus: MouseEventHandler;\n\tchildren: ReactNode;\n}\n\nexport default function ControlField(props: ControlFieldProps) {\n\tconst { active, className, onFocus, children } = props;\n\n\tconst clazz = clsx(\n\t\tstyles.container,\n\t\tclassName,\n\t\t{ [styles.active]: active },\n\t);\n\n\treturn <div className={clazz} onClick={onFocus}>{children}</div>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_7lvOB\",\"active\":\"_31kUg\"};","// extracted by mini-css-extract-plugin\nexport default {\"uploadFile\":\"_1QfF_\",\"dragging\":\"_2NkFn\",\"text\":\"_5050B\",\"icon\":\"_1uubp _5050B\",\"fileInput\":\"_1wDkd\"};","import { ChangeEvent, Dispatch, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport ImageIcon from \"bootstrap-icons/icons/image.svg\";\nimport { NOOP } from \"../utils\";\nimport styles from \"./FileDrop.scss\";\n\n/**\n * Since dragenter & dragleave can be triggered on crossing children element boundary,\n * we count the number of entries and leaves to determine whether it is within the drag area.\n */\nfunction useBoundaryCounter() {\n\tconst [isInArea, setInArea] = useState(false);\n\tconst counter = useRef(0);\n\n\tfunction enter() {\n\t\tsetInArea(++counter.current > 0);\n\t}\n\n\tfunction leave() {\n\t\tsetInArea(--counter.current > 0);\n\t}\n\n\tfunction reset() {\n\t\tcounter.current = 0;\n\t\tsetInArea(false);\n\t}\n\n\treturn { isInArea, enter, leave, reset };\n}\n\nexport interface FileDropProps {\n\tclassName?: string;\n\tonStart?: () => void;\n\tonChange: Dispatch<File>;\n\tonError: Dispatch<string>;\n}\n\nexport default function FileDrop(props: FileDropProps) {\n\tconst { className, onStart = NOOP, onChange, onError } = props;\n\n\tconst boundary = useBoundaryCounter();\n\tconst dragStarted = useRef(false);\n\n\tfunction handleFileChange(event: ChangeEvent<HTMLInputElement>) {\n\t\tconst { files } = event.currentTarget;\n\t\tif (files?.length) {\n\t\t\tonChange(files[0]);\n\t\t}\n\t}\n\n\tfunction handleDragEnter() {\n\t\tboundary.enter();\n\n\t\tfunction handleDragEnd() {\n\t\t\tdocument.removeEventListener(\"dragend\", handleDragEnd);\n\t\t\tdragStarted.current = false;\n\t\t}\n\n\t\tif (!dragStarted.current) {\n\t\t\tdragStarted.current = true;\n\t\t\tonStart();\n\t\t\tdocument.addEventListener(\"dragend\", handleDragEnd);\n\t\t}\n\t}\n\n\tfunction handleDrop(event: React.DragEvent) {\n\t\tevent.preventDefault();\n\t\tboundary.reset();\n\n\t\tconst { items } = event.dataTransfer;\n\t\tconst file = items[0]?.getAsFile();\n\n\t\tif (file) {\n\t\t\tonChange(file);\n\t\t} else {\n\t\t\tonError(\"The dropped item is not a file\");\n\t\t}\n\t}\n\n\tconst classes = clsx(\n\t\tstyles.uploadFile,\n\t\tclassName,\n\t\t{ [styles.dragging]: boundary.isInArea },\n\t);\n\n\treturn (\n\t\t<label\n\t\t\tclassName={classes}\n\t\t\tonDragEnter={handleDragEnter}\n\t\t\tonDragOver={e => e.preventDefault()}\n\t\t\tonDrop={handleDrop}\n\t\t\tonDragLeave={boundary.leave}\n\t\t>\n\t\t\t<div>\n\t\t\t\t<ImageIcon className={styles.icon}/>\n\t\t\t\t<span className={styles.text}>\n\t\t\t\t\tDrag & drop\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className={styles.text}>\n\t\t\t\tOr select an image\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tclassName={styles.fileInput}\n\t\t\t\tname=\"file\"\n\t\t\t\ttype=\"file\"\n\t\t\t\taccept=\"image/*\"\n\t\t\t\tonClick={onStart}\n\t\t\t\tonChange={handleFileChange}\n\t\t\t/>\n\t\t</label>\n\t);\n}\n","import CheckIcon from \"../assets/check_box.svg\";\nimport CheckIconActive from \"../assets/check_box-checked.svg\";\nimport RadioIcon from \"../assets/radio_box.svg\";\nimport RadioIconActive from \"../assets/radio_box-checked.svg\";\nimport CheckBoxBase, { CheckBoxProps } from \"./CheckBoxBase\";\n\nexport function CheckBox(props: CheckBoxProps) {\n\treturn CheckBoxBase({ ...props, type: \"checkbox\", Icon: CheckIcon, IconChecked: CheckIconActive });\n}\n\nexport function RadioBox(props: CheckBoxProps) {\n\treturn CheckBoxBase({ ...props, type: \"radio\", Icon: RadioIcon, IconChecked: RadioIconActive });\n}\n\nexport { default as RangeInput } from \"./RangeInput\";\nexport { default as Button } from \"./Button\";\nexport { default as NumberInput } from \"./NumberInput\";\nexport { default as Dialog } from \"./Dialog\";\nexport { default as PinchZoom } from \"./PinchZoom\";\nexport { default as SelectBox } from \"./SelectBox\";\nexport { default as SwitchButton } from \"./SwitchButton\";\nexport { default as ControlField } from \"./ControlField\";\nexport { default as FileDrop } from \"./FileDrop\";\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"_2NAiN\",\"numberInput\":\"X9XRk\",\"fieldset\":\"_2_AqQ\",\"header\":\"_3NBy8\",\"controls\":\"iHY_O\",\"label\":\"_2k_N3\",\"body\":\"_1mcDx\",\"input\":\"_1Cik9 no-spinner\"};","import { ChangeEvent, useState } from \"react\";\nimport { ControlField, RangeInput } from \"../ui\";\nimport { ControlType, FieldProps } from \"./index\";\nimport styles from \"./RangeControl.scss\";\n\nexport interface NumberRange {\n\tmin: number;\n\tmax: number;\n\tstep: number;\n}\n\nexport function sequence(range: NumberRange) {\n\tconst { min, max, step } = range;\n\treturn new Array<number>(Math.ceil((max + 1 - min) / step))\n\t\t.fill(min)\n\t\t.map((v, i) => v + i * step);\n}\n\ninterface Metadata extends NumberRange {\n\tid: string;\n\tlabel: string;\n}\n\nexport default class RangeControl implements ControlType<number> {\n\n\tprivate readonly data: Metadata;\n\n\tconstructor(data: Metadata) {\n\t\tthis.data = data;\n\t\tthis.Input = this.Input.bind(this);\n\t}\n\n\tget id() {\n\t\treturn this.data.id;\n\t}\n\n\tcreateState() {\n\t\treturn sequence(this.data);\n\t}\n\n\tInput(props: FieldProps<number>) {\n\t\tconst { id, label, min, max, step } = this.data;\n\t\tconst { value, onChange } = props;\n\n\t\t// This is not a class component, just a render function in a class.\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tconst [tempValue, setTempValue] = useState(value);\n\n\t\tfunction handleRangeInput(newValue: number) {\n\t\t\tonChange(newValue);\n\t\t\tsetTempValue(newValue);\n\t\t}\n\n\t\tfunction handleNumberInput(event: ChangeEvent<HTMLInputElement>) {\n\t\t\tconst { target } = event;\n\t\t\tif (target.checkValidity()) {\n\t\t\t\tonChange(target.valueAsNumber);\n\t\t\t}\n\t\t\tsetTempValue(target.valueAsNumber);\n\t\t}\n\n\t\treturn (\n\t\t\t<ControlField {...props}>\n\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t{label}\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName={styles.input}\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin={min}\n\t\t\t\t\t\tmax={max}\n\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\tvalue={tempValue}\n\t\t\t\t\t\trequired={true}\n\t\t\t\t\t\tonChange={handleNumberInput}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<RangeInput\n\t\t\t\t\tname={id}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tstep={step}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t\tonValueChange={handleRangeInput}\n\t\t\t\t/>\n\t\t\t</ControlField>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"_1diDc\",\"numberInput\":\"_1Or-U\",\"fieldset\":\"_1MYaD\",\"header\":\"_2MVPJ\",\"controls\":\"_3LMFG\",\"label\":\"_2w5qd\",\"body\":\"_2BoYb\",\"input\":\"_4ukp6 no-spinner\",\"item\":\"_1TAGd\"};","import { ControlType, FieldProps } from \"./index\";\nimport { ControlField, RadioBox } from \"../ui\";\nimport styles from \"./EnumControl.scss\";\n\ninterface ControlData {\n\tid: string;\n\tlabel: string;\n\tnames: string[];\n}\n\nexport default class EnumControl implements ControlType<string> {\n\n\tprivate readonly data: ControlData;\n\n\tconstructor(data: ControlData) {\n\t\tthis.data = data;\n\t\tthis.Input = this.Input.bind(this);\n\t}\n\n\tget id() {\n\t\treturn this.data.id;\n\t}\n\n\tcreateState() {\n\t\treturn this.data.names;\n\t}\n\n\tInput(props: FieldProps<string>) {\n\t\tconst { id, label, names } = this.data;\n\t\tconst { value, onChange } = props;\n\n\t\tconst items = names.map(name =>\n\t\t\t<RadioBox\n\t\t\t\tkey={name}\n\t\t\t\tclassName={styles.item}\n\t\t\t\tchecked={name === value}\n\t\t\t\tname={id}\n\t\t\t\tonChange={() => onChange(name)}\n\t\t\t>\n\t\t\t\t{name}\n\t\t\t</RadioBox>,\n\t\t);\n\n\t\treturn (\n\t\t\t<ControlField {...props}>\n\t\t\t\t{label}\n\t\t\t\t<div>{items}</div>\n\t\t\t</ControlField>\n\t\t);\n\t}\n}\n","import type { ControlType, FieldProps } from \".\";\nimport { ControlField, SwitchButton } from \"../ui\";\nimport styles from \"./SwitchControl.scss\";\n\nexport interface SwitchControlConfig {\n\tid: string;\n\tlabel: string;\n}\n\nexport default class SwitchControl implements ControlType<boolean> {\n\n\tprivate readonly data: SwitchControlConfig;\n\n\tconstructor(data: SwitchControlConfig) {\n\t\tthis.data = data;\n\t\tthis.Input = this.Input.bind(this);\n\t}\n\n\tget id() {\n\t\treturn this.data.id;\n\t}\n\n\tcreateState() {\n\t\treturn [false, true];\n\t}\n\n\tInput(props: FieldProps<boolean>) {\n\t\tconst { value, onChange } = props;\n\t\tconst { label } = this.data;\n\n\t\treturn (\n\t\t\t<ControlField {...props} className={styles.control}>\n\t\t\t\t{label}\n\t\t\t\t<SwitchButton\n\t\t\t\t\tchecked={value}\n\t\t\t\t\tonValueChange={onChange}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t/>\n\t\t\t</ControlField>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"UVvZa\",\"numberInput\":\"ZLnfL\",\"fieldset\":\"C33aj\",\"header\":\"AAaYm\",\"controls\":\"_22UlF\",\"label\":\"XoQCO\",\"body\":\"_2JP3U\",\"input\":\"_1r4zK no-spinner\",\"container\":\"_2HSf4 C33aj\",\"control\":\"_-9JFp\"};","import { CheckBox, SwitchButton } from \"../ui\";\nimport { OptionFieldProps, OptionType } from \"./index\";\nimport SwitchControl from \"./SwitchControl\";\nimport styles from \"./SwitchControl.scss\";\n\nexport interface BoolVariableConfig {\n\tid: string;\n\tlabel: string;\n\tdefaultValue: boolean | number;\n}\n\nexport class BoolOption implements OptionType<boolean> {\n\n\tprivate readonly data: BoolVariableConfig;\n\n\tconstructor(data: BoolVariableConfig) {\n\t\tthis.data = data;\n\t\tthis.OptionField = this.OptionField.bind(this);\n\t}\n\n\tget id() {\n\t\treturn this.data.id;\n\t}\n\n\tcreateControl(range: undefined) {\n\t\treturn new SwitchControl(this.data);\n\t}\n\n\tcreateState() {\n\t\treturn [Boolean(this.data.defaultValue), undefined] as [boolean, never];\n\t}\n\n\tOptionField(props: OptionFieldProps<boolean, any>) {\n\t\tconst { id, label } = this.data;\n\t\tconst { isVariable, value, onValueChange, onVariabilityChange } = props;\n\n\t\treturn (\n\t\t\t<fieldset className={styles.container}>\n\t\t\t\t<CheckBox\n\t\t\t\t\tclassName={styles.label}\n\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\tonValueChange={onVariabilityChange}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</CheckBox>\n\t\t\t\t{isVariable\n\t\t\t\t\t? <strong>OFF & ON</strong>\n\t\t\t\t\t: <SwitchButton name={id} checked={value} onValueChange={onValueChange}/>\n\t\t\t\t}\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\tpopulate(value: boolean, options: any) {\n\t\toptions[this.data.id] = value;\n\t}\n\n\tgenerate(_: never, key: any, options: any) {\n\t\tconst { id } = this.data;\n\t\treturn [\n\t\t\t{\n\t\t\t\tkey: { ...key, [id]: false },\n\t\t\t\toptions: { ...options, [id]: false },\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: { ...key, [id]: true },\n\t\t\t\toptions: { ...options, [id]: true },\n\t\t\t},\n\t\t];\n\t}\n}\n","import { ChangeEvent } from \"react\";\nimport type { OptionFieldProps, OptionType } from \".\";\nimport { CheckBox, RadioBox } from \"../ui\";\nimport styles from \"./EnumControl.scss\";\nimport EnumControl from \"./EnumControl\";\n\nexport interface EnumOptionConfig<T extends Record<string, any>> {\n\tid: string;\n\tlabel: string;\n\tenumObject: T;\n\tdefaultValue: keyof T;\n}\n\nexport class EnumOption<T> implements OptionType<keyof T, Array<keyof T>> {\n\n\tprotected readonly data: EnumOptionConfig<T>;\n\n\tconstructor(data: EnumOptionConfig<T>) {\n\t\tthis.data = data;\n\t\tthis.OptionField = this.OptionField.bind(this);\n\t}\n\n\tget id() {\n\t\treturn this.data.id;\n\t}\n\n\tcreateControl(names: Array<keyof T>) {\n\t\tconst { id, label } = this.data;\n\t\treturn new EnumControl({ id, label, names: (names as string[]) });\n\t}\n\n\tcreateState() {\n\t\tconst { defaultValue } = this.data;\n\t\treturn [defaultValue, [defaultValue]] as [keyof T, Array<keyof T>];\n\t}\n\n\tOptionField(props: OptionFieldProps<keyof T, Array<keyof T>>) {\n\t\tconst { id, label, enumObject } = this.data;\n\t\tconst { isVariable, value, range, onValueChange, onRangeChange, onVariabilityChange } = props;\n\n\t\tfunction handleChangeV(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tconst { checked, name } = e.currentTarget;\n\t\t\tlet newVariables = [...range];\n\n\t\t\tif (checked) {\n\t\t\t\tnewVariables.push(name as any);\n\t\t\t} else {\n\t\t\t\tnewVariables = range.filter(v => v !== name);\n\t\t\t}\n\n\t\t\tif (newVariables.length > 0) {\n\t\t\t\tonRangeChange(newVariables);\n\t\t\t}\n\t\t}\n\n\t\tfunction handleChangeC(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tonValueChange(e.currentTarget.value as keyof T);\n\t\t}\n\n\t\tlet items: any[];\n\t\tif (isVariable) {\n\t\t\titems = Object.keys(enumObject).map(name => {\n\t\t\t\treturn <CheckBox\n\t\t\t\t\tclassName={styles.item}\n\t\t\t\t\tkey={name}\n\t\t\t\t\tname={name}\n\t\t\t\t\tchecked={range.includes(name as any)}\n\t\t\t\t\tonChange={handleChangeV}\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</CheckBox>;\n\t\t\t});\n\t\t} else {\n\t\t\titems = Object.keys(enumObject).map(name => {\n\t\t\t\treturn <RadioBox\n\t\t\t\t\tclassName={styles.item}\n\t\t\t\t\tkey={name}\n\t\t\t\t\tname={id}\n\t\t\t\t\tvalue={name}\n\t\t\t\t\tchecked={value === name}\n\t\t\t\t\tonChange={handleChangeC}\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</RadioBox>;\n\t\t\t});\n\t\t}\n\n\t\treturn (\n\t\t\t<fieldset className={styles.fieldset}>\n\t\t\t\t<CheckBox\n\t\t\t\t\tclassName={styles.header}\n\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\tonValueChange={onVariabilityChange}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</CheckBox>\n\t\t\t\t<div className={styles.body}>{items}</div>\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\tpopulate(value: keyof T, options: any) {\n\t\tconst { id, enumObject } = this.data;\n\t\toptions[id] = enumObject[value];\n\t}\n\n\tgenerate(range: Array<keyof T>, key: any, options: any) {\n\t\tconst { id, enumObject } = this.data;\n\n\t\treturn range.map(name => {\n\t\t\tconst newKey = { ...key, [id]: name };\n\t\t\tconst newOpts = { ...options, [id]: enumObject[name] };\n\t\t\treturn { key: newKey, options: newOpts };\n\t\t});\n\t}\n}\n","import { Dispatch } from \"react\";\nimport { CheckBox, NumberInput, RangeInput } from \"../ui\";\nimport type { OptionFieldProps, OptionType } from \".\";\nimport RangeControl, { NumberRange, sequence } from \"./RangeControl\";\nimport styles from \"./RangeControl.scss\";\nimport { IDENTITY } from \"../utils\";\n\ninterface RangePartProps {\n\tname: keyof NumberRange;\n\trange: NumberRange;\n\tonRangeChange: Dispatch<NumberRange>;\n\n\tmin?: number;\n\tmax?: number;\n\tstep?: number;\n}\n\ninterface Metadata extends NumberRange {\n\tid: string;\n\tlabel: string;\n\tmapFn?: (index: number) => number;\n\tdefaultValue: number;\n}\n\nexport class NumberOption implements OptionType<number, NumberRange> {\n\n\tprivate readonly data: Metadata;\n\n\tconstructor(data: Metadata) {\n\t\tthis.data = data;\n\t\tthis.VariableMode = this.VariableMode.bind(this);\n\t\tthis.ConstMode = this.ConstMode.bind(this);\n\t\tthis.OptionField = this.OptionField.bind(this);\n\t\tthis.RangePart = this.RangePart.bind(this);\n\t}\n\n\tget id() {\n\t\treturn this.data.id;\n\t}\n\n\tcreateControl(range: NumberRange) {\n\t\tconst { min, max, step } = range;\n\t\tconst reachableMax = Math.floor((max - min) / step) * step + min;\n\t\treturn new RangeControl({ ...this.data, ...range, max: reachableMax });\n\t}\n\n\tcreateState() {\n\t\tconst { min, max, step, defaultValue } = this.data;\n\t\treturn [defaultValue, { min, max, step }] as [number, NumberRange];\n\t}\n\n\tConstMode(props: OptionFieldProps<number, NumberRange>) {\n\t\tconst { id, min, max, step } = this.data;\n\t\tconst { value, onValueChange } = props;\n\n\t\treturn (\n\t\t\t<RangeInput\n\t\t\t\tclassName={styles.body}\n\t\t\t\tname={id}\n\t\t\t\tvalue={value}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\tstep={step}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t/>\n\t\t);\n\t}\n\n\tVariableMode(props: OptionFieldProps<number, NumberRange>) {\n\t\tconst { RangePart } = this;\n\t\tconst { step } = this.data;\n\t\tconst { range, onRangeChange } = props;\n\n\t\treturn (\n\t\t\t<div className={styles.body}>\n\t\t\t\t<RangePart range={range} onRangeChange={onRangeChange} name=\"min\" max={range.max}/>\n\t\t\t\t<RangePart range={range} onRangeChange={onRangeChange} name=\"max\" min={range.min}/>\n\t\t\t\t<RangePart range={range} onRangeChange={onRangeChange} name=\"step\" min={step}/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tRangePart(props: RangePartProps) {\n\t\tconst { name, min, max, step, range, onRangeChange } = { ...this.data, ...props };\n\n\t\tfunction handleChange(valueAsNumber: number) {\n\t\t\tonRangeChange({ ...range, [name]: valueAsNumber });\n\t\t}\n\n\t\treturn (\n\t\t\t<label className={styles.spinner}>\n\t\t\t\t<span>{name}</span>\n\t\t\t\t<NumberInput\n\t\t\t\t\tclassName={styles.numberInput}\n\t\t\t\t\tname={name}\n\t\t\t\t\tvalue={range[name]}\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tstep={step}\n\t\t\t\t\tonValueChange={handleChange}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t);\n\t}\n\n\tOptionField(props: OptionFieldProps<number, NumberRange>) {\n\t\tconst { VariableMode, ConstMode } = this;\n\t\tconst { label, min, max, step } = this.data;\n\t\tconst { isVariable, value, onVariabilityChange, onValueChange } = props;\n\n\t\treturn (\n\t\t\t<fieldset className={styles.fieldset}>\n\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t<CheckBox\n\t\t\t\t\t\tclassName={styles.label}\n\t\t\t\t\t\tchecked={isVariable}\n\t\t\t\t\t\tonValueChange={onVariabilityChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</CheckBox>\n\t\t\t\t\t{\n\t\t\t\t\t\t!isVariable &&\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName={styles.input}\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin={min}\n\t\t\t\t\t\t\tmax={max}\n\t\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\tonChange={e => onValueChange(e.target.valueAsNumber)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{isVariable ? <VariableMode {...props}/> : <ConstMode {...props}/>}\n\t\t\t</fieldset>\n\t\t);\n\t}\n\n\tpopulate(value: number, options: any) {\n\t\tconst { id, mapFn = IDENTITY } = this.data;\n\t\toptions[id] = mapFn(value);\n\t}\n\n\tgenerate(range: NumberRange, key: any, options: any) {\n\t\tconst { id,  mapFn = IDENTITY } = this.data;\n\n\t\treturn sequence(range).map(value => {\n\t\t\tconst newOpts = { ...options, [id]: mapFn(value) };\n\t\t\tconst newKey = { ...key, [id]: value };\n\t\t\treturn { key: newKey, options: newOpts };\n\t\t});\n\t}\n}\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function initEmscriptenModule<T extends EmscriptenWasm.Module>(\n  moduleFactory: EmscriptenWasm.ModuleFactory<T>,\n): Promise<T> {\n  return moduleFactory({\n    // Just to be safe, don't automatically invoke any wasm functions\n    noInitialRun: true,\n  });\n}\n\nexport function blobToArrayBuffer(blob: Blob): Promise<ArrayBuffer> {\n  return new Response(blob).arrayBuffer();\n}\n","import * as Comlink from \"comlink\";\nimport { OptionsKeyPair, OptionType } from \"../form\";\nimport { EncoderState, OptionPanelProps } from \"./index\";\n\nexport function createState(templates: OptionType[]) {\n\tconst values: Record<string, any> = {};\n\tconst ranges: Record<string, any> = {};\n\n\tfor (const t of templates) {\n\t\tconst [value, range] = t.createState();\n\t\tvalues[t.id] = value;\n\t\tranges[t.id] = range;\n\t}\n\treturn { varNames: [], values, ranges } as EncoderState;\n}\n\nexport function renderOption(template: OptionType, props: OptionPanelProps) {\n\tconst { id, OptionField } = template;\n\tconst { state, onChange } = props;\n\tconst { varNames, values, ranges } = state;\n\n\tfunction handleTypeChange(value: boolean) {\n\t\tlet { varNames } = state;\n\t\tif (value) {\n\t\t\tvarNames.push(id);\n\t\t} else {\n\t\t\tvarNames = varNames.filter(v => v !== id);\n\t\t}\n\t\tonChange({ ...state, varNames });\n\t}\n\n\tfunction handleValueChange(value: any) {\n\t\tonChange({ ...state, values: { ...values, [id]: value } });\n\t}\n\n\tfunction handleRangeChange(range: any) {\n\t\tonChange({ ...state, ranges: { ...ranges, [id]: range } });\n\t}\n\n\treturn <OptionField\n\t\tkey={id}\n\t\tisVariable={varNames.includes(id)}\n\t\tvalue={values[id]}\n\t\trange={ranges[id]}\n\t\tonValueChange={handleValueChange}\n\t\tonRangeChange={handleRangeChange}\n\t\tonVariabilityChange={handleTypeChange}\n\t/>;\n}\n\nexport function buildOptions(templates: OptionType[], state: EncoderState) {\n\tconst { varNames, values, ranges } = state;\n\n\tfunction applyOption(list: OptionsKeyPair[], template: OptionType) {\n\t\tconst { id } = template;\n\n\t\tif (varNames.includes(id)) {\n\t\t\tconst newList: OptionsKeyPair[] = [];\n\n\t\t\tfor (const { key, options } of list) {\n\t\t\t\tconst generated = template.generate(ranges[id], key, options);\n\t\t\t\tnewList.push(...generated);\n\t\t\t}\n\t\t\treturn newList;\n\t\t} else {\n\t\t\tlist.forEach(({ options }) => template.populate(values[id], options));\n\t\t\treturn list;\n\t\t}\n\t}\n\n\treturn templates.reduce(applyOption, [{ key: {}, options: {} }]);\n}\n\nexport function mergeOptions<T>(base: T, from: Partial<T>) {\n\tconst invalidKey = process.env.NODE_ENV === \"production\"\n\t\t? undefined\n\t\t: Object.keys(from).find(k => !(k in base));\n\n\tif (invalidKey) {\n\t\tthrow new Error(`Unexpected options property: ${invalidKey}`);\n\t}\n\treturn { ...base, ...from } as T;\n}\n\nexport type EncodeModuleLoader<T> = () => Promise<EncodeModule<T>>;\n\nexport interface EncodeModule<T> {\n\tencode(data: BufferSource, width: number, height: number, options: T): Uint8Array | null;\n}\n\nexport function wasmEncodeFn<T>(loader: EncodeModuleLoader<T>) {\n\tlet module: Promise<EncodeModule<T>> | undefined;\n\n\treturn async (image: ImageData, options: T) => {\n\t\tconst { data, width, height } = image;\n\t\tif (!module) {\n\t\t\tmodule = loader();\n\t\t}\n\t\tconst result = (await module).encode(data, width, height, options);\n\t\tif (!result) {\n\t\t\tthrow new Error(\"Encoding error\");\n\t\t}\n\t\treturn Comlink.transfer(result.buffer, [result.buffer]);\n\t};\n}\n\nexport interface DecodeModule {\n\tdecode(data: BufferSource): ImageData | null;\n}\n\nexport type DecodeModuleLoader = () => Promise<DecodeModule>;\n\nexport function wasmDecodeFn(loader: DecodeModuleLoader) {\n\tlet module: Promise<DecodeModule> | undefined;\n\n\treturn async (data: ArrayBuffer) => {\n\t\tif (!module) {\n\t\t\tmodule = loader();\n\t\t}\n\t\tconst result = (await module).decode(data);\n\t\tif (!result) {\n\t\t\tthrow new Error(\"Decoding error\");\n\t\t}\n\t\treturn Comlink.transfer(result, [result.data.buffer]);\n\t};\n}\n","import type { EncodeOptions } from \"squoosh/codecs/mozjpeg/enc/mozjpeg_enc\";\nimport { initEmscriptenModule } from \"squoosh/src/features/worker-utils\";\nimport { wasmEncodeFn } from \"../common\";\n\nexport { EncodeOptions };\n\nexport const ColorSpace = {\n\tGRAYSCALE: 1,\n\tRGB: 2,\n\tYCbCr: 3,\n};\n\nexport const Quantization = {\n\t\"JPEG Annex K\": 0,\n\t\"Flat\": 1,\n\t\"MSSIM-tuned Kodak\": 2,\n\t\"ImageMagick\": 3,\n\t\"PSNR-HVS-M-tuned Kodak\": 4,\n\t\"Klein et al\": 5,\n\t\"Watson et al\": 6,\n\t\"Ahumada et al\": 7,\n\t\"Peterson et al\": 8,\n};\n\nexport const defaultOptions: EncodeOptions = {\n\tquality: 75,\n\tbaseline: false,\n\tarithmetic: false,\n\tprogressive: true,\n\toptimize_coding: true,\n\tsmoothing: 0,\n\tcolor_space: ColorSpace.YCbCr,\n\tquant_table: Quantization.ImageMagick,\n\ttrellis_multipass: false,\n\ttrellis_opt_zero: false,\n\ttrellis_opt_table: false,\n\ttrellis_loops: 1,\n\tauto_subsample: true,\n\tchroma_subsample: 2,\n\tseparate_chroma_quality: false,\n\tchroma_quality: 75,\n};\n\nexport const encode = wasmEncodeFn<EncodeOptions>(async () => {\n\tconst module = await import(\"squoosh/codecs/mozjpeg/enc/mozjpeg_enc\");\n\treturn initEmscriptenModule(module.default);\n});\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { BoolOption, EnumOption, NumberOption, OptionType } from \"../../form\";\nimport { ColorSpace, defaultOptions, EncodeOptions, Quantization } from \"./codec\";\nimport { EncoderState, OptionPanelProps } from \"../index\";\nimport { buildOptions, createState, mergeOptions, renderOption } from \"../common\";\n\nexport const name = \"MozJPEG\";\nexport const mimeType = \"image/jpeg\";\nexport const extension = \"jpg\";\n\nconst templates: OptionType[] = [\n\tnew NumberOption({\n\t\tid: \"quality\",\n\t\tlabel: \"Quality (-q)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tnew EnumOption({\n\t\tid: \"color_space\",\n\t\tlabel: \"Channels\",\n\t\tenumObject: ColorSpace,\n\t\tdefaultValue: \"YCbCr\",\n\t}),\n\tnew EnumOption({\n\t\tid: \"quant_table\",\n\t\tlabel: \"Quantization\",\n\t\tenumObject: Quantization,\n\t\tdefaultValue: \"ImageMagick\",\n\t}),\n\tnew BoolOption({\n\t\tid: \"arithmetic\",\n\t\tlabel: \"Arithmetic\",\n\t\tdefaultValue: defaultOptions.arithmetic,\n\t}),\n\tnew BoolOption({\n\t\tid: \"auto_subsample\",\n\t\tlabel: \"Auto subsample chroma\",\n\t\tdefaultValue: defaultOptions.auto_subsample,\n\t}),\n\n\tnew BoolOption({\n\t\tid: \"separate_chroma_quality\",\n\t\tlabel: \"Separate chroma quality\",\n\t\tdefaultValue: defaultOptions.separate_chroma_quality,\n\t}),\n\tnew NumberOption({\n\t\tid: \"chroma_quality\",\n\t\tlabel: \"Chroma quality\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.chroma_quality,\n\t}),\n\n\tnew NumberOption({\n\t\tid: \"smoothing\",\n\t\tlabel: \"Smoothing\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.smoothing,\n\t}),\n\n\tnew BoolOption({\n\t\tid: \"baseline\",\n\t\tlabel: \"Pointless spec compliance\",\n\t\tdefaultValue: defaultOptions.baseline,\n\t}),\n\tnew BoolOption({\n\t\tid: \"progressive\",\n\t\tlabel: \"Progressive\",\n\t\tdefaultValue: defaultOptions.progressive,\n\t}),\n\tnew BoolOption({\n\t\tid: \"optimize_coding\",\n\t\tlabel: \"Optimize Huffman table\",\n\t\tdefaultValue: defaultOptions.optimize_coding,\n\t}),\n\n\tnew BoolOption({\n\t\tid: \"trellis_multipass\",\n\t\tlabel: \"Trellis multipass\",\n\t\tdefaultValue: defaultOptions.trellis_multipass,\n\t}),\n\tnew BoolOption({\n\t\tid: \"trellis_opt_zero\",\n\t\tlabel: \"Optimize zero block runs\",\n\t\tdefaultValue: defaultOptions.trellis_opt_zero,\n\t}),\n\tnew BoolOption({\n\t\tid: \"trellis_opt_table\",\n\t\tlabel: \"Optimize after trellis quantization\",\n\t\tdefaultValue: defaultOptions.trellis_opt_table,\n\t}),\n\tnew NumberOption({\n\t\tid: \"trellis_loops\",\n\t\tlabel: \"Trellis quantization passes\",\n\t\tmin: 0,\n\t\tmax: 50,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.trellis_loops,\n\t}),\n];\n\nexport function getState(saved?: EncoderState) {\n\treturn saved ?? createState(templates);\n}\n\nexport function OptionsPanel(props: OptionPanelProps) {\n\treturn <>{templates.map(t => renderOption(t, props))}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function getControls(state: EncoderState) {\n\tconst { varNames, ranges } = state;\n\treturn templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(t => t.createControl(ranges[t.id]));\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.mozjpegEncode(mergeOptions(defaultOptions, options));\n}\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport type { EncodeOptions } from 'codecs/jxl/enc/jxl_enc';\n\nexport { EncodeOptions };\n\nexport const label = 'JPEG XL (beta)';\nexport const mimeType = 'image/jxl';\nexport const extension = 'jxl';\nexport const defaultOptions: EncodeOptions = {\n  speed: 4,\n  quality: 75,\n  progressive: false,\n  epf: -1,\n  nearLossless: 0,\n  lossyPalette: false,\n  decodingSpeedTier: 0,\n};\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { BoolOption, NumberOption, OptionType } from \"../../form\";\nimport { buildOptions, createState, mergeOptions, renderOption } from \"../common\";\nimport { EncoderState, OptionPanelProps } from \"../index\";\nimport { defaultOptions, EncodeOptions } from \"./codec\";\n\nexport const name = \"JPEG XL\";\nexport const mimeType = \"image/jxl\";\nexport const extension = \"jxl\";\n\nconst templates: OptionType[] = [\n\tnew NumberOption({ // 100 = lossless\n\t\tid: \"quality\",\n\t\tlabel: \"Quality\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 0.1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tnew BoolOption({\n\t\tid: \"lossyPalette\",\n\t\tlabel: \"Slight loss\",\n\t\tdefaultValue: defaultOptions.lossyPalette,\n\t}),\n\tnew BoolOption({\n\t\tid: \"progressive\",\n\t\tlabel: \"Progressive\",\n\t\tdefaultValue: defaultOptions.progressive,\n\t}),\n\tnew NumberOption({\n\t\tid: \"speed\",\n\t\tlabel: \"Speed\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.speed,\n\t}),\n\tnew NumberOption({\n\t\tid: \"epf\",\n\t\tlabel: \"Edge preserving filter\",\n\t\tmin: -1,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.epf,\n\t}),\n];\n\nexport function getState(saved?: EncoderState) {\n\treturn saved ?? createState(templates);\n}\n\nexport function OptionsPanel(props: OptionPanelProps) {\n\treturn <>{templates.map(t => renderOption(t, props))}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function getControls(state: EncoderState) {\n\tconst { varNames, ranges } = state;\n\treturn templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(t => t.createControl(ranges[t.id]));\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.jxlEncode(mergeOptions(defaultOptions, options));\n}\n","import type { EncodeOptions } from \"squoosh/codecs/jxl/enc/jxl_enc\";\nimport { initEmscriptenModule } from \"squoosh/src/features/worker-utils\";\nimport { wasmDecodeFn, wasmEncodeFn } from \"../common\";\n\nexport { defaultOptions } from \"squoosh/src/features/encoders/jxl/shared/meta\";\n\nexport { EncodeOptions };\n\nexport const encode = wasmEncodeFn<EncodeOptions>(async () => {\n\tconst module = await import(\"squoosh/codecs/jxl/enc/jxl_enc\");\n\treturn initEmscriptenModule(module.default);\n});\n\nexport const decode = wasmDecodeFn(async () => {\n\tconst module = await import(\"squoosh/codecs/jxl/dec/jxl_dec\");\n\treturn initEmscriptenModule(module.default);\n});\n","/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport type { EncodeOptions } from 'codecs/webp/enc/webp_enc';\n\nexport { EncodeOptions };\n\nexport const label = 'WebP';\nexport const mimeType = 'image/webp';\nexport const extension = 'webp';\n// These come from struct WebPConfig in encode.h.\nexport const defaultOptions: EncodeOptions = {\n  quality: 75,\n  target_size: 0,\n  target_PSNR: 0,\n  method: 4,\n  sns_strength: 50,\n  filter_strength: 60,\n  filter_sharpness: 0,\n  filter_type: 1,\n  partitions: 0,\n  segments: 4,\n  pass: 1,\n  show_compressed: 0,\n  preprocessing: 0,\n  autofilter: 0,\n  partition_limit: 0,\n  alpha_compression: 1,\n  alpha_filtering: 1,\n  alpha_quality: 100,\n  lossless: 0,\n  exact: 0,\n  image_hint: 0,\n  emulate_jpeg_size: 0,\n  thread_level: 0,\n  low_memory: 0,\n  near_lossless: 100,\n  use_delta_palette: 0,\n  use_sharp_yuv: 0,\n};\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { BoolOption, EnumOption, NumberOption, OptionType, PresetOption } from \"../../form\";\nimport { defaultOptions, EncodeOptions } from \"./codec\";\nimport { EncoderState, OptionPanelProps } from \"../index\";\nimport { buildOptions, createState, mergeOptions, renderOption } from \"../common\";\n\nexport const name = \"WebP\";\nexport const mimeType = \"image/webp\";\nexport const extension = \"webp\";\n\nconst WebPImageHint = {\n\tDefault: 0,\n\tPicture: 1,\n\tPhoto: 2,\n\tGraph: 3,\n};\n\n// https://github.com/webmproject/libwebp/blob/83604bf3ac2212a353c53d8c9df35d94fa9ab000/src/enc/config_enc.c#L62\nconst WebPPreset = {\n\tdefault: {\n\t\t// nothing to do.\n\t},\n\tphoto: {\n\t\tsns_strength: 80,\n\t\tfilter_sharpness: 3,\n\t\tfilter_strength: 30,\n\t\tpreprocessing: (v: number) => v | 2,\n\t},\n\tpicture: {\n\t\tsns_strength: 80,\n\t\tfilter_sharpness: 4,\n\t\tfilter_strength: 35,\n\t\tpreprocessing: (v: number) => v & ~2,\n\t},\n\tdrawing: {\n\t\tsns_strength: 25,\n\t\tfilter_sharpness: 6,\n\t\tfilter_strength: 10,\n\t},\n\ticon: {\n\t\tsns_strength: 25,\n\t\tfilter_strength: 10,\n\t\tpreprocessing: (v: number) => v & ~2,\n\t},\n\ttext: {\n\t\tsns_strength: 0,\n\t\tfilter_strength: 0,\n\t\tsegments: 2,\n\t\tpreprocessing: (v: number) => v & ~2,\n\t},\n};\n\nconst templates: OptionType[] = [\n\tnew BoolOption({\n\t\tid: \"lossless\",\n\t\tlabel: \"lossless\",\n\t\tdefaultValue: defaultOptions.lossless,\n\t}),\n\tnew NumberOption({\n\t\tid: \"quality\",\n\t\tlabel: \"Quality (-q)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tnew NumberOption({\n\t\tid: \"near_lossless\",\n\t\tlabel: \"Near lossless (-near_lossless)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.near_lossless,\n\t}),\n\tnew NumberOption({\n\t\tid: \"method\",\n\t\tlabel: \"Method (-m)\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.method,\n\t}),\n\tnew PresetOption({\n\t\tid: \"preset\",\n\t\tlabel: \"Preset (-preset)\",\n\t\tenumObject: WebPPreset,\n\t\tdefaultValue: \"default\",\n\t}),\n\tnew NumberOption({\n\t\tid: \"sns_strength\",\n\t\tlabel: \"Spatial noise shaping (-sns)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.sns_strength,\n\t}),\n\tnew BoolOption({\n\t\tid: \"filter_type\",\n\t\tlabel: \"User strong filter (-strong)\",\n\t\tdefaultValue: defaultOptions.filter_type,\n\t}),\n\n\tnew BoolOption({\n\t\tid: \"autofilter\",\n\t\tlabel: \"Auto adjust filter strength (-af)\",\n\t\tdefaultValue: defaultOptions.autofilter,\n\t}),\n\tnew NumberOption({\n\t\tid: \"filter_strength\",\n\t\tlabel: \"Filter strength (-f)\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.filter_strength,\n\t}),\n\tnew NumberOption({\n\t\tid: \"filter_sharpness\",\n\t\tlabel: \"Filter sharpness (-sharpness)\",\n\t\tmin: 0,\n\t\tmax: 7,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.filter_sharpness,\n\t}),\n\tnew BoolOption({\n\t\tid: \"use_sharp_yuv\",\n\t\tlabel: \"Sharp YUV\",\n\t\tdefaultValue: defaultOptions.use_sharp_yuv,\n\t}),\n\tnew EnumOption({\n\t\tid: \"image_hint\",\n\t\tlabel: \"Hint (-hint)\",\n\t\tenumObject: WebPImageHint,\n\t\tdefaultValue: \"Default\",\n\t}),\n];\n\nexport function getState(saved?: EncoderState): EncoderState {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\tconst { values, ranges } = createState(templates);\n\t(ranges.quality as any).step = 5;\n\treturn { varNames: [\"quality\"], values, ranges };\n}\n\nexport function OptionsPanel(props: OptionPanelProps) {\n\treturn <>{templates.map(t => renderOption(t, props))}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function getControls(state: EncoderState) {\n\tconst { varNames, ranges } = state;\n\treturn templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(t => t.createControl(ranges[t.id]));\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.webpEncode(mergeOptions(defaultOptions, options));\n}\n","import type { EncodeOptions } from \"squoosh/codecs/webp/enc/webp_enc\";\nimport { simd } from \"wasm-feature-detect\";\nimport { initEmscriptenModule } from \"squoosh/src/features/worker-utils\";\nimport { wasmDecodeFn, wasmEncodeFn } from \"../common\";\n\nexport { defaultOptions } from \"squoosh/src/features/encoders/webP/shared/meta\";\n\nexport { EncodeOptions };\n\nexport const encode = wasmEncodeFn<EncodeOptions>(async () => {\n\tif (await simd()) {\n\t\tconst webpEncoder = await import(\"squoosh/codecs/webp/enc/webp_enc_simd\");\n\t\treturn initEmscriptenModule(webpEncoder.default);\n\t}\n\tconst webpEncoder = await import(\"squoosh/codecs/webp/enc/webp_enc\");\n\treturn initEmscriptenModule(webpEncoder.default);\n});\n\nexport const decode = wasmDecodeFn(async () => {\n\tconst module = await import(\"squoosh/codecs/webp/dec/webp_dec\");\n\treturn initEmscriptenModule(module.default);\n});\n","import { EnumOption } from \"./EnumOption\";\n\nexport class PresetOption<T> extends EnumOption<T> {\n\n\tgenerate(range: Array<keyof T>, key: any, options: any) {\n\t\tconst { id } = this;\n\n\t\treturn range.map(name => {\n\t\t\tconst newKey = { ...key, [id]: name };\n\t\t\tconst copy = { ...options };\n\t\t\tthis.populate(name, copy);\n\t\t\treturn { key: newKey, options: copy };\n\t\t});\n\t}\n\n\tpopulate(name: keyof T, options: any) {\n\t\tObject.entries(this.data.enumObject[name])\n\t\t\t.forEach(([k, v]) => options[k] = (typeof v === \"function\") ? v(options[k]) : v);\n\t}\n}\n","import type { EncodeOptions } from \"squoosh/codecs/avif/enc/avif_enc\";\nimport { initEmscriptenModule } from \"squoosh/src/features/worker-utils\";\nimport { wasmDecodeFn, wasmEncodeFn } from \"../common\";\n\nexport { EncodeOptions };\n\nexport const Subsampling = {\n\tYUV400: 0,\n\tYUV420: 1,\n\tYUV422: 2,\n\tYUV444: 3,\n};\n\nexport const AVIFTune = {\n\tauto: 0,\n\tpsnr: 1,\n\tssim: 3,\n};\n\nexport const defaultOptions: EncodeOptions = {\n\tcqLevel: 33,\n\tcqAlphaLevel: -1,\n\tdenoiseLevel: 0,\n\ttileColsLog2: 0,\n\ttileRowsLog2: 0,\n\tspeed: 6,\n\tsubsample: Subsampling.YUV420,\n\tchromaDeltaQ: false,\n\tsharpness: 0,\n\ttune: AVIFTune.auto,\n};\n\nexport const encode = wasmEncodeFn<EncodeOptions>(async () => {\n\tconst module = await import(\"squoosh/codecs/avif/enc/avif_enc\");\n\treturn initEmscriptenModule(module.default);\n});\n\nexport const decode = wasmDecodeFn(async () => {\n\tconst module = await import(\"squoosh/codecs/avif/dec/avif_dec\");\n\treturn initEmscriptenModule(module.default);\n});\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { BoolOption, EnumOption, NumberOption, OptionType } from \"../../form\";\nimport { EncoderState, OptionPanelProps } from \"../index\";\nimport { buildOptions, createState, renderOption } from \"../common\";\nimport { defaultOptions, EncodeOptions, Subsampling } from \"./codec\";\n\nexport const name = \"AVIF\";\nexport const mimeType = \"image/avif\";\nexport const extension = \"avif\";\n\nconst templates: OptionType[] = [\n\tnew NumberOption({\n\t\tid: \"cqLevel\",\n\t\tlabel: \"Quality\",\n\t\tmin: 0,\n\t\tmax: 63,\n\t\tstep: 1,\n\t\tmapFn: i => 63 - i,\n\t\tdefaultValue: defaultOptions.cqLevel,\n\t}),\n\tnew NumberOption({\n\t\tid: \"cqAlphaLevel\",\n\t\tlabel: \"Alpha quality (-1 to same with the quality)\",\n\t\tmin: -1,\n\t\tmax: 63,\n\t\tstep: 1,\n\t\tmapFn: i => (i === -1) ? -1 : 63 - i,\n\t\tdefaultValue: defaultOptions.cqAlphaLevel,\n\t}),\n\tnew NumberOption({\n\t\tid: \"sharpness\",\n\t\tlabel: \"Sharpness\",\n\t\tmin: 0,\n\t\tmax: 7,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.sharpness,\n\t}),\n\tnew NumberOption({\n\t\tid: \"denoiseLevel\",\n\t\tlabel: \"Noise synthesis\",\n\t\tmin: 0,\n\t\tmax: 50,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.denoiseLevel,\n\t}),\n\tnew BoolOption({\n\t\tid: \"chromaDeltaQ\",\n\t\tlabel: \"Extra chroma compression\",\n\t\tdefaultValue: defaultOptions.chromaDeltaQ,\n\t}),\n\tnew NumberOption({\n\t\tid: \"tileRowsLog2\",\n\t\tlabel: \"Log2 of tile rows\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.tileRowsLog2,\n\t}),\n\tnew NumberOption({\n\t\tid: \"tileColsLog2\",\n\t\tlabel: \"Log2 of tile cols\",\n\t\tmin: 0,\n\t\tmax: 6,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.tileColsLog2,\n\t}),\n\tnew NumberOption({\n\t\tid: \"speed\",\n\t\tlabel: \"Speed\",\n\t\tmin: 0,\n\t\tmax: 10,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.speed,\n\t}),\n\tnew EnumOption({\n\t\tid: \"subsample\",\n\t\tlabel: \"Subsample\",\n\t\tenumObject: Subsampling,\n\t\tdefaultValue: \"YUV420\",\n\t}),\n];\n\nexport function getState(saved?: EncoderState) {\n\treturn saved ?? createState(templates);\n}\n\nexport function OptionsPanel(props: OptionPanelProps) {\n\treturn <>{templates.map(t => renderOption(t, props))}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function getControls(state: EncoderState) {\n\tconst { varNames, ranges } = state;\n\treturn templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(t => t.createControl(ranges[t.id]));\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.avifEncode({ ...defaultOptions, ...options });\n}\n","import type { EncodeOptions } from \"squoosh/codecs/wp2/enc/wp2_enc\";\nimport { initEmscriptenModule } from \"squoosh/src/features/worker-utils\";\nimport { wasmDecodeFn, wasmEncodeFn } from \"../common\";\n\nexport { EncodeOptions };\n\nexport const UVMode = {\n\t\"Adapt\": 0,\n\t\"420\": 1,\n\t\"444\": 2,\n\t\"Auto\": 3,\n};\n\nexport const Csp = {\n\tYCoCg: 0,\n\tYCbCr: 1,\n\tCustom: 2,\n\tYIQ: 3,\n};\n\nexport const defaultOptions: EncodeOptions = {\n\tquality: 75,\n\talpha_quality: 75,\n\teffort: 5,\n\tpass: 1,\n\tsns: 50,\n\tuv_mode: UVMode.Adapt,\n\tcsp_type: Csp.YCoCg,\n\terror_diffusion: 0,\n\tuse_random_matrix: false,\n};\n\nexport const encode = wasmEncodeFn<EncodeOptions>(async () => {\n\tconst module = await import(\"squoosh/codecs/wp2/enc/wp2_enc\");\n\treturn initEmscriptenModule(module.default);\n});\n\nexport const decode = wasmDecodeFn(async () => {\n\tconst module = await import(\"squoosh/codecs/wp2/dec/wp2_dec\");\n\treturn initEmscriptenModule(module.default);\n});\n","import { Remote } from \"comlink\";\nimport { WorkerApi } from \"../../worker\";\nimport { BoolOption, EnumOption, NumberOption, OptionType } from \"../../form\";\nimport { Csp, defaultOptions, EncodeOptions, UVMode } from \"./codec\";\nimport { EncoderState, OptionPanelProps } from \"../index\";\nimport { buildOptions, createState, mergeOptions, renderOption } from \"../common\";\n\nexport const name = \"WebP v2\";\nexport const mimeType = \"image/webp2\";\nexport const extension = \"wp2\";\n\nconst templates: OptionType[] = [\n\t// new BoolOption({\n\t// \tid: \"lossless\",\n\t// \tlabel: \"lossless\",\n\t// \tdefaultValue: defaultOptions.lossless,\n\t// }),\n\tnew NumberOption({\n\t\tid: \"quality\",\n\t\tlabel: \"Quality\",\n\t\tmin: 0,\n\t\tmax: 95,\n\t\tstep: 0.1,\n\t\tdefaultValue: defaultOptions.quality,\n\t}),\n\tnew NumberOption({\n\t\tid: \"alpha_quality\",\n\t\tlabel: \"Alpha Quality\",\n\t\tmin: 0,\n\t\tmax: 95,\n\t\tstep: 0.1,\n\t\tdefaultValue: defaultOptions.alpha_quality,\n\t}),\n\tnew NumberOption({\n\t\tid: \"effort\",\n\t\tlabel: \"Effort\",\n\t\tmin: 0,\n\t\tmax: 9,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.effort,\n\t}),\n\tnew NumberOption({\n\t\tid: \"pass\",\n\t\tlabel: \"Passes\",\n\t\tmin: 0,\n\t\tmax: 9,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.pass,\n\t}),\n\tnew NumberOption({\n\t\tid: \"sns\",\n\t\tlabel: \"Spatial noise shaping\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.sns,\n\t}),\n\tnew NumberOption({\n\t\tid: \"error_diffusion\",\n\t\tlabel: \"Error diffusion\",\n\t\tmin: 0,\n\t\tmax: 100,\n\t\tstep: 1,\n\t\tdefaultValue: defaultOptions.error_diffusion,\n\t}),\n\tnew EnumOption({\n\t\tid: \"uv_mode\",\n\t\tlabel: \"UVMode\",\n\t\tenumObject: UVMode,\n\t\tdefaultValue: \"Adapt\",\n\t}),\n\tnew EnumOption({\n\t\tid: \"csp_type\",\n\t\tlabel: \"Color space\",\n\t\tenumObject: Csp,\n\t\tdefaultValue: \"YCoCg\",\n\t}),\n\tnew BoolOption({\n\t\tid: \"use_random_matrix\",\n\t\tlabel: \"Random matrix\",\n\t\tdefaultValue: defaultOptions.use_random_matrix,\n\t}),\n];\n\nexport function getState(saved?: EncoderState) {\n\treturn saved ?? createState(templates);\n}\n\nexport function OptionsPanel(props: OptionPanelProps) {\n\treturn <>{templates.map(t => renderOption(t, props))}</>;\n}\n\nexport function getOptionsList(state: EncoderState) {\n\treturn buildOptions(templates, state);\n}\n\nexport function getControls(state: EncoderState) {\n\tconst { varNames, ranges } = state;\n\treturn templates\n\t\t.filter(t => varNames.includes(t.id))\n\t\t.map(t => t.createControl(ranges[t.id]));\n}\n\nexport function encode(options: EncodeOptions, worker: Remote<WorkerApi>) {\n\treturn worker.webp2Encode(mergeOptions(defaultOptions, options));\n}\n","import { Dispatch } from \"react\";\nimport { Remote } from \"comlink\";\nimport { ControlType, OptionsKeyPair } from \"../form\";\nimport { WorkerApi } from \"../worker\";\nimport * as MozJPEG from \"./mozjpeg/client\";\nimport * as JXL from \"./jxl/client\";\nimport * as WebP from \"./webp/client\";\nimport * as AVIF from \"./avif/client\";\nimport * as WebP2 from \"./webp2/client\";\n\nexport interface EncoderState {\n\tvarNames: string[];\n\tvalues: Record<string, unknown>;\n\tranges: Record<string, unknown>;\n}\n\nexport interface EncodeResult {\n\ttime: number;\n\tbuffer: ArrayBuffer;\n}\n\nexport interface OptionPanelProps {\n\tstate: EncoderState;\n\tonChange: Dispatch<EncoderState>;\n}\n\nexport interface ImageEncoder {\n\tname: string;\n\textension: string;\n\tmimeType: string;\n\n\tgetState(saved?: EncoderState): EncoderState;\n\n\tOptionsPanel(props: OptionPanelProps): JSX.Element;\n\n\tgetOptionsList(state: EncoderState): OptionsKeyPair[];\n\n\tgetControls(state: EncoderState): ControlType[];\n\n\tencode(options: any, worker: Remote<WorkerApi>): Promise<EncodeResult>;\n}\n\nexport const ENCODERS: ImageEncoder[] = [MozJPEG, JXL, WebP, AVIF, WebP2];\n\nexport const ENCODER_MAP = Object.fromEntries(ENCODERS.map(e => [e.name, e]));\n","import { Remote, wrap } from \"comlink\";\n\nexport type WorkerFactory = () => Worker;\n\nexport type TaskFn<T, R> = (remote: Remote<T>) => Promise<R>;\n\ninterface WorkerJob<T> {\n\ttask: TaskFn<T, any>;\n\tresolve: (value: any) => void;\n}\n\n// Is a worker pool necessary? Multiple consumer cycles can also works.\nexport default class WorkerPool<T> {\n\n\tterminated = false;\n\n\tprivate readonly queue: Array<WorkerJob<T>> = [];\n\n\tprivate readonly waiters: Array<() => void> = [];\n\n\t// Track workers for terminate\n\tprivate readonly workers: Worker[];\n\n\tprivate readonly remotes: Array<Remote<T>>;\n\n\tconstructor(factory: WorkerFactory, size: number) {\n\t\tif (size < 1) {\n\t\t\tthrow new Error(\"Worker count must be at least 1\");\n\t\t}\n\t\tthis.workers = new Array(size);\n\t\tthis.remotes = new Array(size);\n\n\t\tfor (let i = 0; i < size; i++) {\n\t\t\tconst worker = factory();\n\t\t\tthis.workers[i] = worker;\n\t\t\tthis.remotes[i] = wrap<T>(worker);\n\t\t}\n\t}\n\n\t/**\n\t * Run a function with each worker.\n\t *\n\t * @param fn Function\n\t */\n\trunOnEach<R>(fn: TaskFn<T, R>) {\n\t\treturn Promise.all(this.remotes.map(fn));\n\t}\n\n\trun<R>(task: TaskFn<T, R>) {\n\t\treturn new Promise<R>(resolve => this.addJob({ task, resolve }));\n\t}\n\n\tjoin() {\n\t\tconst { queue, remotes, workers, waiters } = this;\n\t\tif (queue.length === 0 && remotes.length === workers.length) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\treturn new Promise<void>(resolve => waiters.push(resolve));\n\t}\n\n\tterminate() {\n\t\tthis.terminated = true;\n\t\tthis.workers.forEach(worker => worker.terminate());\n\t\tthis.waiters.forEach(resolve => resolve());\n\t}\n\n\tprivate addJob(job: WorkerJob<T>) {\n\t\tconst remote = this.remotes.pop();\n\t\tif (!remote) {\n\t\t\tthis.queue.push(job);\n\t\t} else {\n\t\t\treturn this.runJob(remote, job);\n\t\t}\n\t}\n\n\tprivate async runJob(remote: Remote<T>, job: WorkerJob<T>): Promise<void> {\n\t\tconst { task, resolve } = job;\n\t\tresolve(await task(remote));\n\n\t\tconst next = this.queue.pop();\n\t\tif (next) {\n\t\t\treturn this.runJob(remote, next);\n\t\t}\n\n\t\tconst { remotes, workers, waiters } = this;\n\t\tremotes.push(remote);\n\t\tif (remotes.length === workers.length) {\n\t\t\twaiters.splice(0, waiters.length).forEach(resolve => resolve());\n\t\t}\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"drop\":\"_1294e\",\"demoLabel\":\"_2Sr67\",\"demo\":\"_3BC6E\",\"error\":\"Qed9H\",\"card\":\"_2CyJM\",\"demoIcon\":\"_5g0tc\",\"demoDescription\":\"_3dMVq\",\"loading\":\"P11_5\",\"lds-ripple\":\"_38pFY\"};","import { Dispatch, useRef, useState } from \"react\";\nimport photo from \"../assets/demo/photo.jpg\";\nimport photoIcon from \"../assets/demo/photo-icon.jpg\";\nimport artwork from \"../assets/demo/artwork.jpg\";\nimport artworkIcon from \"../assets/demo/artwork-icon.jpg\";\nimport colorfulText from \"../assets/demo/colorful-text.png\";\nimport colorfulTextIcon from \"../assets/demo/colorful-text-icon.png\";\nimport { Button, Dialog, FileDrop } from \"../ui\";\nimport { getFileFromUrl } from \"../utils\";\nimport { decode } from \"../decode\";\nimport { InputImage } from \"./index\";\nimport styles from \"./SelectFileDialog.scss\";\n\nconst demos = [\n\t{\n\t\tdescription: \"Large photo (488KB)\",\n\t\turl: photo,\n\t\ticon: photoIcon,\n\t},\n\t{\n\t\tdescription: \"Artwork (408KB)\",\n\t\turl: artwork,\n\t\ticon: artworkIcon,\n\t},\n\t{\n\t\tdescription: \"Colorful text (68KB)\",\n\t\turl: colorfulText,\n\t\ticon: colorfulTextIcon,\n\t},\n];\n\ninterface DemoButtonProps {\n\tdescription: string;\n\turl: string;\n\ticon: string;\n\tonClick: (url: string) => Promise<void>;\n}\n\nfunction DemoButton(props: DemoButtonProps) {\n\tconst { description, url, icon, onClick } = props;\n\n\tconst [loading, setLoading] = useState(false);\n\n\tasync function handleClick() {\n\t\tif (loading) {\n\t\t\treturn;\n\t\t}\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tawait onClick(url);\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\treturn (\n\t\t<button key={url} className={styles.card} onClick={handleClick}>\n\t\t\t<img\n\t\t\t\tsrc={icon}\n\t\t\t\talt=\"icon\"\n\t\t\t\tclassName={styles.demoIcon}\n\t\t\t/>\n\t\t\t{loading && <div className={styles.loading}/>}\n\t\t\t<span className={styles.demoDescription}>{description}</span>\n\t\t</button>\n\t);\n}\n\ninterface SelectFileDialogProps {\n\tonCancel: () => void;\n\tonChange: Dispatch<InputImage>;\n}\n\nexport default function SelectFileDialog(props: SelectFileDialogProps) {\n\tconst { onCancel, onChange } = props;\n\n\tconst abortController = useRef(new AbortController());\n\tconst [error, setError] = useState<string>();\n\n\tfunction accept(file: File) {\n\t\tdecode(file)\n\t\t\t.then(raw => onChange({ file, raw }))\n\t\t\t.catch(e => setError(e.message));\n\t}\n\n\tfunction acceptUpload(file: File) {\n\t\taccept(file);\n\t\tabortController.current.abort();\n\t}\n\n\tasync function acceptUrl(url: string) {\n\t\tconst newController = new AbortController();\n\t\tabortController.current.abort();\n\t\tabortController.current = newController;\n\n\t\tconst { signal } = newController;\n\t\ttry {\n\t\t\taccept(await getFileFromUrl(url, signal));\n\t\t} catch (e) {\n\t\t\tif (e.name !== \"AbortError\") throw e;\n\t\t}\n\t}\n\n\tconst demoButtons = demos.map(demo =>\n\t\t<DemoButton {...demo} key={demo.url} onClick={acceptUrl}/>,\n\t);\n\n\treturn (\n\t\t<Dialog onClose={onCancel}>\n\t\t\t<div className=\"dialog-content\">\n\t\t\t\t<FileDrop\n\t\t\t\t\tclassName={styles.drop}\n\t\t\t\t\tonChange={acceptUpload}\n\t\t\t\t\tonError={setError}\n\t\t\t\t\tonStart={() => setError(undefined)}\n\t\t\t\t/>\n\t\t\t\t<span className={styles.demoLabel}>\n\t\t\t\t\tOr try one of these:\n\t\t\t\t</span>\n\t\t\t\t<div className={styles.demo}>{demoButtons}</div>\n\t\t\t</div>\n\t\t\t<div className=\"dialog-actions\">\n\t\t\t\t<span className={styles.error}>{error}</span>\n\t\t\t\t<Button className=\"second\" onClick={onCancel}>Back</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","import { bytes } from \"../utils\";\nimport { InputImage } from \"./index\";\nimport styles from \"./ImageInfoPanel.scss\";\n\ninterface ImageInfoPanelProps {\n\tvalue: InputImage;\n}\n\nexport default function ImageInfoPanel(props: ImageInfoPanelProps) {\n\tconst { file, raw } = props.value;\n\tconst { width, height, data } = raw;\n\n\tconst ratio = (file.size / data.byteLength * 100).toFixed(2);\n\n\tfunction drawImage(el: HTMLCanvasElement | null) {\n\t\tel?.getContext(\"2d\")!.putImageData(raw, 0, 0);\n\t}\n\n\treturn (\n\t\t<div className=\"dialog-content\" role=\"tabpanel\">\n\t\t\t<canvas\n\t\t\t\tclassName={styles.canvas}\n\t\t\t\taria-label=\"Preview\"\n\t\t\t\tref={drawImage}\n\t\t\t\twidth={width}\n\t\t\t\theight={height}\n\t\t\t/>\n\t\t\t<dl className={styles.attributes}>\n\t\t\t\t<dt>File name:</dt>\n\t\t\t\t<dd>{file.name}</dd>\n\n\t\t\t\t<dt>Type:</dt>\n\t\t\t\t<dd>{file.type}</dd>\n\n\t\t\t\t<dt>Resolution:</dt>\n\t\t\t\t<dd>{width} x {height}</dd>\n\n\t\t\t\t<dt>Raw size:</dt>\n\t\t\t\t<dd>{bytes(data.byteLength)}</dd>\n\n\t\t\t\t<dt>File size (Ratio %):</dt>\n\t\t\t\t<dd>{bytes(file.size)} ({ratio}%)</dd>\n\t\t\t</dl>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"_3eH8J\",\"header\":\"_10jMI\",\"title\":\"_3NKY5\",\"tab\":\"_1HnK8\",\"canvas\":\"WKrzW\",\"attributes\":\"lL9Er\"};","import metrics, { ButteraugliDiff, ButteraugliOptions, MetricsModule } from \"./diff\";\nimport ssim, { Options } from \"ssim.js\";\n\nexport type SSIMOptions = Partial<Options>;\nexport type { ButteraugliOptions };\n\nexport const defaultButteraugliOptions: ButteraugliOptions = {\n\thfAsymmetry: 1.0,\n\tgoodQualitySeek: 1.5,\n\tbadQualitySeek: 0.5,\n};\n\nlet loadPromise: Promise<void> | undefined;\n\nlet wasmModule: MetricsModule;\n\n/**\n * Initialize WebAssembly module, you must call this function before butteraugli()\n *\n * @param wasmUrl Url of metrics.wasm, If omitted, use the file in the same directory.\n */\nexport function initWasmModule(wasmUrl?: string) {\n\tif (loadPromise) {\n\t\treturn loadPromise;\n\t}\n\tconst init = wasmUrl ? metrics({ locateFile: () => wasmUrl }) : metrics();\n\treturn loadPromise = init.then(m => { wasmModule = m; });\n}\n\nfunction check(image0: ImageData, image1: ImageData) {\n\tconst len0 = image0.data.byteLength;\n\tconst len1 = image1.data.byteLength;\n\n\tif (len0 !== len1) {\n\t\tthrow new Error(`Image data have different length ${len0} vs. ${len1}`);\n\t}\n\n\tconst channels = len0 / image0.width / image0.height;\n\tif (channels !== 3 && channels !== 4) {\n\t\tthrow new Error(\"Image must be RGB or RGBA in colors\");\n\t}\n\n\tif (image0.width !== image1.width) {\n\t\tthrow new Error(`Image have different width ${image0.width} vs. ${image1.width}`);\n\t}\n\tif (image0.height !== image1.height) {\n\t\tthrow new Error(`Image have different width ${image0.height} vs. ${image1.height}`);\n\t}\n}\n\nexport class Butteraugli {\n\n\tprivate readonly native: ButteraugliDiff;\n\tprivate readonly reference: ImageData;\n\n\tconstructor(image: ImageData) {\n\t\tthis.reference = image;\n\t\tthis.native = new wasmModule.ButteraugliDiff(image);\n\t}\n\n\tclose() {\n\t\tthis.native.delete();\n\t}\n\n\tdiff(image: ImageData, options?: Partial<ButteraugliOptions>) {\n\t\tif (!loadPromise) {\n\t\t\tthrow new Error(\"Wasm module not load\");\n\t\t}\n\t\tcheck(this.reference, image);\n\n\t\tconst merged = { ...defaultButteraugliOptions, ...options };\n\n\t\tif (merged.badQualitySeek < 0 || merged.badQualitySeek >= 2) {\n\t\t\tthrow new Error(\"badQualitySeek must between 0, 2\");\n\t\t}\n\t\tif (merged.goodQualitySeek < 0 || merged.goodQualitySeek >= 2) {\n\t\t\tthrow new Error(\"goodQualitySeek must between 0, 2\");\n\t\t}\n\n\t\treturn this.native.Diff(image.data, merged);\n\t}\n}\n\nexport function getPSNR(image0: ImageData, image1: ImageData) {\n\tif (!wasmModule) {\n\t\tthrow new Error(\"Wasm module not loaded\");\n\t}\n\tcheck(image0, image1);\n\n\tconst dataA = image0.data;\n\tconst dataB = image1.data;\n\tconst { length } = dataA;\n\n\tlet sse = 0;\n\tfor (let i = 0; i < length; i++) {\n\t\tconst e = dataA[i] - dataB[i];\n\t\tsse += e * e;\n\t}\n\treturn 10 * Math.log10(255 * 255 / sse * length);\n}\n\nexport function getSSIM(image0: ImageData, image1: ImageData, options?: SSIMOptions) {\n\treturn ssim(image0, image1, options).mssim;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"_15tPw dialog-content\",\"subfields\":\"_3TOcu\",\"field\":\"_6RszX\",\"inlineLabel\":\"_1wJoX\",\"label\":\"_4BrBt\",\"select\":\"_3RZQr\"};","import React, { ChangeEvent, Dispatch, ReactNode } from \"react\";\nimport * as ssimJs from \"ssim.js\";\nimport { ButteraugliOptions, defaultButteraugliOptions } from \"../../lib/similarity\";\nimport { CheckBox, NumberInput } from \"../ui\";\nimport { MeasureOptions, Optional } from \"../analyzing\";\nimport styles from \"./MeasurePanel.scss\";\n\nexport function getMeasureOptions(saved?: MeasureOptions): MeasureOptions {\n\tif (saved) {\n\t\treturn saved;\n\t}\n\treturn {\n\t\tversion: 1,\n\t\tworkerCount: navigator.hardwareConcurrency,\n\t\ttime: true,\n\t\tPSNR: false,\n\t\tSSIM: {\n\t\t\tenabled: true,\n\t\t\toptions: ssimJs.getOptions(),\n\t\t},\n\t\tbutteraugli: {\n\t\t\tenabled: false,\n\t\t\toptions: defaultButteraugliOptions,\n\t\t},\n\t};\n}\n\ninterface LabelWrapperProps {\n\tlabel: string;\n\tchildren: ReactNode;\n}\n\nfunction LabelWrapper(props: LabelWrapperProps) {\n\tconst { label, children } = props;\n\treturn (\n\t\t<label className={styles.field}>\n\t\t\t<span className={styles.label}>\n\t\t\t\t{label}\n\t\t\t</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface ButteraugliProps {\n\tvalue: Optional<ButteraugliOptions>;\n\tonChange: Dispatch<Optional<ButteraugliOptions>>;\n}\n\nfunction ButteraugliFields(props: ButteraugliProps) {\n\tconst { value, onChange } = props;\n\n\tfunction handleChange(name: string, newValue: number) {\n\t\tconst options = { ...value.options, [name]: newValue };\n\t\tonChange({ ...value, options });\n\t}\n\n\tconst inputs = Object.entries(value.options).map(([name, value]) =>\n\t\t<LabelWrapper key={name} label={name}>\n\t\t\t<NumberInput\n\t\t\t\tclassName={styles.value}\n\t\t\t\tname={name}\n\t\t\t\tmin={0}\n\t\t\t\tmax={2}\n\t\t\t\tstep={0.1}\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={v => handleChange(name, v)}\n\t\t\t/>\n\t\t</LabelWrapper>,\n\t);\n\n\treturn <fieldset className={styles.subfields}>{inputs}</fieldset>;\n}\n\nfunction deepSet(target: any, path: string, value: any) {\n\tconst parts = path.split(\".\");\n\n\tfunction recurs(current: any, index: number) {\n\t\tconst key = parts[index];\n\t\tlet localValue = value;\n\t\tif (index < parts.length - 1) {\n\t\t\tlocalValue = recurs(current[key], index + 1);\n\t\t}\n\t\treturn { ...current, [key]: localValue };\n\t}\n\n\treturn recurs(target, 0);\n}\n\ninterface Model<T> {\n\tvalue: T;\n\tonChange: Dispatch<Partial<T>>;\n}\n\nfunction SSIMOptionsSet(props: Model<ssimJs.Options>) {\n\tconst { value, onChange } = props;\n\n\treturn (\n\t\t<fieldset className={styles.subfields}>\n\t\t\t<LabelWrapper label=\"Algorithm\">\n\t\t\t\t<select\n\t\t\t\t\tclassName={styles.select}\n\t\t\t\t\tvalue={value.ssim}\n\t\t\t\t\tonChange={e => onChange({ ssim: e.target.value as any })}\n\t\t\t\t>\n\t\t\t\t\t<option>fast</option>\n\t\t\t\t\t<option>original</option>\n\t\t\t\t\t<option>bezkrovny</option>\n\t\t\t\t\t<option>weber</option>\n\t\t\t\t</select>\n\t\t\t</LabelWrapper>\n\t\t\t<LabelWrapper label=\"k1\">\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={value.k1}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tstep={0.01}\n\t\t\t\t\tonValueChange={k1 => onChange({ k1 })}\n\t\t\t\t/>\n\t\t\t</LabelWrapper>\n\t\t\t<LabelWrapper label=\"k2\">\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={value.k2}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tstep={0.01}\n\t\t\t\t\tonValueChange={k2 => onChange({ k2 })}\n\t\t\t\t/>\n\t\t\t</LabelWrapper>\n\t\t\t<LabelWrapper label=\"window size\">\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={value.windowSize}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tstep={0.01}\n\t\t\t\t\tonValueChange={windowSize => onChange({ windowSize })}\n\t\t\t\t/>\n\t\t\t</LabelWrapper>\n\t\t</fieldset>\n\t);\n}\n\nexport interface MeasurePanelProps {\n\tencodeTime?: boolean;\n\tvalue: MeasureOptions;\n\tonChange: Dispatch<MeasureOptions>;\n}\n\nexport default function MeasurePanel(props: MeasurePanelProps) {\n\tconst { encodeTime, value, onChange } = props;\n\tconst { workerCount, time, SSIM, PSNR, butteraugli } = value;\n\n\tfunction handleChange(event: ChangeEvent<HTMLInputElement>) {\n\t\tconst { name, checked } = event.currentTarget;\n\t\tonChange({ ...value, [name]: checked });\n\t}\n\n\tfunction handleWorkerCountChange(count: number) {\n\t\tonChange({ ...value, workerCount: count });\n\t}\n\n\tfunction handleBgChange(newValue: Optional<ButteraugliOptions>) {\n\t\tonChange({ ...value, butteraugli: newValue });\n\t}\n\n\treturn (\n\t\t<form className={styles.form} role=\"tabpanel\">\n\t\t\t<label>\n\t\t\t\t<span className={styles.inlineLabel}>\n\t\t\t\t\tThread count:\n\t\t\t\t</span>\n\t\t\t\t<NumberInput\n\t\t\t\t\tvalue={workerCount}\n\t\t\t\t\tmin={1}\n\t\t\t\t\tstep={1}\n\t\t\t\t\tonValueChange={handleWorkerCountChange}\n\t\t\t\t/>\n\t\t\t</label>\n\n\t\t\t{\n\t\t\t\tencodeTime &&\n\t\t\t\t<CheckBox\n\t\t\t\t\tchecked={time}\n\t\t\t\t\tname=\"time\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t>\n\t\t\t\t\tEncode time (Not very accurate)\n\t\t\t\t</CheckBox>\n\t\t\t}\n\n\t\t\t<CheckBox\n\t\t\t\tchecked={SSIM.enabled}\n\t\t\t\tname=\"SSIM.enabled\"\n\t\t\t\tonChange={e => onChange(deepSet(value, \"SSIM.enabled\", e.target.checked))}\n\t\t\t>\n\t\t\t\tStructural similarity index measure\n\t\t\t</CheckBox>\n\t\t\t<SSIMOptionsSet\n\t\t\t\tvalue={SSIM.options}\n\t\t\t\tonChange={v => onChange(deepSet(value, \"SSIM.options\", v))}\n\t\t\t/>\n\n\t\t\t<CheckBox\n\t\t\t\tchecked={PSNR}\n\t\t\t\tname=\"PSNR\"\n\t\t\t\tonChange={handleChange}\n\t\t\t>\n\t\t\t\tPeak signal-to-noise ratio\n\t\t\t</CheckBox>\n\n\t\t\t<CheckBox\n\t\t\t\tchecked={butteraugli.enabled}\n\t\t\t\tname=\"butteraugli\"\n\t\t\t\tonValueChange={v => onChange({ ...value, butteraugli: { ...butteraugli, enabled: v } })}\n\t\t\t>\n\t\t\t\tButteraugli\n\t\t\t</CheckBox>\n\t\t\t<ButteraugliFields value={butteraugli} onChange={handleBgChange}/>\n\t\t</form>\n\t);\n}\n","import { ChangeEvent, Dispatch, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { CheckBox } from \"../ui\";\nimport { ENCODER_MAP, ENCODERS, EncoderState } from \"../codecs\";\nimport styles from \"./EncoderPanel.scss\";\n\nexport interface EncoderConfig {\n\tenable: boolean;\n\tstate: EncoderState;\n}\n\nexport type EncodingOptions = Record<string, EncoderConfig>;\n\nexport function getEncodingOptions(saved?: EncodingOptions) {\n\tconst config = saved ?? {};\n\n\tfor (const { name, getState } of ENCODERS) {\n\t\tif (config[name]) {\n\t\t\tconfig[name].state = getState(config[name].state);\n\t\t} else {\n\t\t\tconfig[name] = { enable: false, state: getState() };\n\t\t}\n\t}\n\tif (!saved) {\n\t\tconfig.WebP.enable = true;\n\t}\n\treturn config;\n}\n\nexport interface EncoderPanelProps {\n\tvalue: Record<string, EncoderConfig>;\n\tonChange: Dispatch<Record<string, EncoderConfig>>;\n}\n\nexport default function EncoderPanel(props: EncoderPanelProps) {\n\tconst { value, onChange } = props;\n\n\tconst [current, setCurrent] = useState(\"WebP\");\n\n\tconst tabs = ENCODERS.map(e => {\n\t\tconst { name } = e;\n\n\t\tconst classes = clsx(\n\t\t\tstyles.tab,\n\t\t\t{ [styles.active]: name === current },\n\t\t);\n\n\t\tfunction handleEnableChange(e: ChangeEvent<HTMLInputElement>) {\n\t\t\tconst x = { ...value[name], enable: e.currentTarget.checked };\n\t\t\tonChange({ ...value, [name]: x });\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={classes}\n\t\t\t\tkey={name}\n\t\t\t\tonClick={() => setCurrent(name)}\n\t\t\t>\n\t\t\t\t<CheckBox\n\t\t\t\t\tchecked={value[name].enable}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t\tonChange={handleEnableChange}\n\t\t\t\t/>\n\t\t\t\t<span className={styles.name}>{name}</span>\n\t\t\t</button>\n\t\t);\n\t});\n\n\tfunction handleOptionChange(newState: any) {\n\t\tconst c = { ...value[current], state: newState };\n\t\tonChange({ ...value, [current]: c });\n\t}\n\n\tconst { OptionsPanel } = ENCODER_MAP[current];\n\n\treturn (\n\t\t<div className={styles.container} role=\"tabpanel\">\n\t\t\t<div className={styles.tablist}>\n\t\t\t\t{tabs}\n\t\t\t</div>\n\t\t\t<form className={styles.form}>\n\t\t\t\t<OptionsPanel\n\t\t\t\t\tstate={value[current].state}\n\t\t\t\t\tonChange={handleOptionChange}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_1LeZ1 dialog-content\",\"tablist\":\"_1sBf2\",\"tab\":\"_3rUeO\",\"active\":\"_1krxL\",\"name\":\"_2G5o7\",\"form\":\"_3GSpr\"};","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"_6sryz\",\"header\":\"_3x7vU\",\"title\":\"_150Dn\",\"tab\":\"_29qBc\"};","import { useState } from \"react\";\nimport { MeasureOptions } from \"../analyzing\";\nimport { Button, Dialog } from \"../ui\";\nimport { InputImage } from \"./index\";\nimport ImageInfoPanel from \"./ImageInfoPanel\";\nimport MeasurePanel, { getMeasureOptions } from \"./MeasurePanel\";\nimport EncoderPanel, { EncodingOptions, getEncodingOptions } from \"./EncoderPanel\";\nimport styles from \"./ConfigDialog.scss\";\n\nexport interface AnalyzeConfig {\n\tmeasure: MeasureOptions;\n\tencoding: EncodingOptions;\n}\n\nexport interface ConfigDialogProps {\n\timage: InputImage;\n\tonStart: (config: AnalyzeConfig) => void;\n\tonClose: () => void;\n\tonSelectFile: () => void;\n}\n\nfunction loadOptions<T>(key: string, processor: (saved?: T) => T) {\n\treturn () => {\n\t\tconst saved = localStorage.getItem(key);\n\t\treturn processor(saved ? JSON.parse(saved) : undefined);\n\t};\n}\n\nconst panels = [\"Information\", \"Encoding\", \"Measure\"];\n\nexport default function ConfigDialog(props: ConfigDialogProps) {\n\tconst { image, onStart, onClose, onSelectFile } = props;\n\n\tconst [index, setIndex] = useState(0);\n\tconst [encoding, setEncoding] = useState(loadOptions(\"Encoding\", getEncodingOptions));\n\tconst [measure, setMeasure] = useState(loadOptions(\"Measure\", getMeasureOptions));\n\n\tfunction start() {\n\t\tonStart({ encoding, measure });\n\t\tlocalStorage.setItem(\"Encoding\", JSON.stringify(encoding));\n\t\tlocalStorage.setItem(\"Measure\", JSON.stringify(measure));\n\t}\n\n\tconst tabs = panels.map((name, i) =>\n\t\t<div\n\t\t\tclassName={styles.tab}\n\t\t\tkey={i}\n\t\t\trole=\"tab\"\n\t\t\taria-selected={i === index}\n\t\t\tonClick={() => setIndex(i)}\n\t\t>\n\t\t\t{name}\n\t\t</div>);\n\n\tlet panel;\n\n\tswitch (index) {\n\t\tcase 0:\n\t\t\tpanel = <ImageInfoPanel value={image}/>;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tpanel = <EncoderPanel\n\t\t\t\tvalue={encoding}\n\t\t\t\tonChange={setEncoding}\n\t\t\t/>;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tpanel = <MeasurePanel\n\t\t\t\tvalue={measure}\n\t\t\t\tencodeTime={true}\n\t\t\t\tonChange={setMeasure}\n\t\t\t/>;\n\t\t\tbreak;\n\t}\n\n\tconst ready = image && Object.values(encoding).some(e => e.enable);\n\n\treturn (\n\t\t<Dialog\n\t\t\tname=\"Analysis config\"\n\t\t\tclassName={styles.dialog}\n\t\t\tonClose={onClose}\n\t\t>\n\t\t\t<div className={styles.header} role=\"tablist\">{tabs}</div>\n\t\t\t{panel}\n\t\t\t<div className=\"dialog-actions\">\n\t\t\t\t<Button onClick={onSelectFile}>Select file...</Button>\n\t\t\t\t<Button className=\"second\" onClick={onClose}>Cancel</Button>\n\t\t\t\t<Button disabled={!ready} onClick={start}>Start</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Button, Dialog } from \"../ui\";\nimport styles from \"./ProgressDialog.scss\";\n\ninterface ProgressPanelProps {\n\terror?: string;\n\tmax: number;\n\tvalue: number;\n\tonCancel: () => void;\n}\n\nexport default function ProgressDialog(props: ProgressPanelProps) {\n\tconst { error, value, max, onCancel } = props;\n\n\tconst startTime = useRef(performance.now());\n\tconst [timeUsage, setTimeUsage] = useState(\"--:--:--\");\n\n\tfunction scheduleRefreshTask() {\n\t\tfunction refreshTime() {\n\t\t\tconst ms = performance.now() - startTime.current;\n\t\t\tconst date = new Date(ms);\n\t\t\tsetTimeUsage(date.toISOString().substr(11, 8));\n\t\t}\n\n\t\tconst timer = setInterval(refreshTime, 1000);\n\t\treturn () => clearInterval(timer);\n\t}\n\n\tuseEffect(scheduleRefreshTask, []);\n\n\treturn (\n\t\t<Dialog onClose={onCancel}>\n\t\t\t<div className={styles.content}>\n\t\t\t\t<h1>Encoding...</h1>\n\n\t\t\t\t{error && <p className={styles.error}>Error: {error}</p>}\n\n\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t<span>{value} / {max}</span>\n\t\t\t\t\t<span>Elapsed time: {timeUsage}</span>\n\t\t\t\t</div>\n\n\t\t\t\t<progress\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tclassName={styles.progress}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t<Button className=\"second\" onClick={onCancel}>Cancel</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_1RFbq dialog-content\",\"text\":\"_3vxdS\",\"error\":\"O-Yz-\",\"progress\":\"mrzz8\",\"buttons\":\"_3UNgR dialog-actions\"};","import { Dispatch, useState } from \"react\";\nimport { Analyzer, AnalyzeResult, newWorker, ObjectKeyMap } from \"../analyzing\";\nimport { ENCODERS, ImageEncoder } from \"../codecs\";\nimport WorkerPool from \"../WorkerPool\";\nimport { WorkerApi } from \"../worker\";\nimport { OptionsKey, OptionsKeyPair } from \"../form\";\nimport { useProgress } from \"../utils\";\nimport { AnalyzeContext, ControlsMap, InputImage } from \".\";\nimport SelectFileDialog from \"./SelectFileDialog\";\nimport ConfigDialog, { AnalyzeConfig } from \"./ConfigDialog\";\nimport ProgressDialog from \"./ProgressDialog\";\nimport { EncodingOptions } from \"./EncoderPanel\";\n\ninterface EncodeTask {\n\tencoder: ImageEncoder;\n\toptionsList: OptionsKeyPair[];\n}\n\nfunction getTasks(encoding: EncodingOptions) {\n\tconst controlsMap: ControlsMap = {};\n\tconst taskQueue: EncodeTask[] = [];\n\n\tfor (const encoder of ENCODERS) {\n\t\tconst { name } = encoder;\n\t\tconst { enable, state } = encoding[name];\n\t\tif (!enable) {\n\t\t\tcontinue;\n\t\t}\n\t\tcontrolsMap[name] = encoder.getControls(state);\n\t\tconst optionsList = encoder.getOptionsList(state);\n\t\ttaskQueue.push({ encoder, optionsList });\n\t}\n\n\treturn { controlsMap, taskQueue };\n}\n\ninterface CompressSessionProps {\n\tisOpen: boolean;\n\tonChange: Dispatch<AnalyzeContext>;\n\tonClose: () => void;\n}\n\nexport default function CompressSession(props: CompressSessionProps) {\n\tconst { isOpen, onClose, onChange } = props;\n\n\tconst [selectFile, setSelectFile] = useState(true);\n\tconst [input, setInput] = useState<InputImage>();\n\tconst [encoder, setEncoder] = useState<WorkerPool<WorkerApi>>();\n\n\tconst progress = useProgress();\n\tconst [error, setError] = useState<string>();\n\n\tfunction cancelSelectFile() {\n\t\tinput ? setSelectFile(false) : onClose();\n\t}\n\n\tasync function handleInputChange(image: InputImage) {\n\t\tsetInput(image);\n\t\tsetSelectFile(false);\n\t}\n\n\tasync function handleStart(config: AnalyzeConfig) {\n\t\tif (!input) {\n\t\t\tthrow new Error(\"File is null\");\n\t\t}\n\t\tconst { file } = input;\n\t\tconst { encoding, measure } = config;\n\n\t\tconst { controlsMap, taskQueue } = getTasks(encoding);\n\n\t\tconst outputMap = new ObjectKeyMap<OptionsKey, AnalyzeResult>();\n\t\tconst pool = new WorkerPool<WorkerApi>(newWorker, measure.workerCount);\n\t\tconst analyzer = new Analyzer(pool, measure);\n\n\t\tconst seriesMeta = [{ key: \"ratio\", name: \"Compression Ratio %\" }];\n\n\t\tconst { calculations, metricsMeta } = analyzer.getMetricsMeta();\n\t\tlet taskCount = taskQueue.reduce((s, c) => s + c.optionsList.length, 0);\n\t\ttaskCount *= (1 + calculations);\n\t\tseriesMeta.push(...metricsMeta);\n\n\t\tif (measure.time) {\n\t\t\tseriesMeta.push({ key: \"time\", name: \"Encode Time (s)\" });\n\t\t\ttaskCount += measure.workerCount;\n\t\t}\n\n\t\tprogress.reset(taskCount);\n\t\tsetEncoder(pool);\n\t\tanalyzer.onProgress = progress.increase;\n\n\t\ttry {\n\t\t\tawait analyzer.setOriginalImage(input);\n\n\t\t\t// Warmup workers to avoid disturbance of initialize time\n\t\t\tif (measure.time) {\n\t\t\t\tfor (const { encoder, optionsList } of taskQueue) {\n\t\t\t\t\tconst { options } = optionsList[0];\n\t\t\t\t\tawait pool.runOnEach(r => encoder.encode(options, r).then(progress.increase));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const { encoder, optionsList } of taskQueue) {\n\t\t\t\tfor (const { key, options } of optionsList) {\n\n\t\t\t\t\t// noinspection ES6MissingAwait\n\t\t\t\t\tpool.run(async r => {\n\t\t\t\t\t\tconst { buffer, data, time } = await analyzer.encode(r, encoder, options);\n\t\t\t\t\t\tconst ratio = buffer.byteLength / file.size * 100;\n\t\t\t\t\t\tconst output: AnalyzeResult = {\n\t\t\t\t\t\t\tbuffer,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\tmetrics: { time, ratio },\n\t\t\t\t\t\t};\n\t\t\t\t\t\tanalyzer.measure(output);\n\t\t\t\t\t\toutputMap.set({ encoder: encoder.name, key }, output);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait pool.join();\n\n\t\t\tif (!pool.terminated) {\n\t\t\t\tsetEncoder(undefined);\n\t\t\t\tonChange({ input, controlsMap, seriesMeta, outputMap });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// Some browsers will crash the page on OOM.\n\t\t\tconsole.error(e);\n\t\t\tsetError(e.message);\n\t\t}\n\n\t\tpool.terminate();\n\t}\n\n\tfunction stop() {\n\t\tencoder!.terminate();\n\t\tsetEncoder(undefined);\n\t}\n\n\tif (!isOpen) {\n\t\treturn null;\n\t} else if (encoder) {\n\t\treturn (\n\t\t\t<ProgressDialog\n\t\t\t\tvalue={progress.value}\n\t\t\t\tmax={progress.max}\n\t\t\t\terror={error}\n\t\t\t\tonCancel={stop}\n\t\t\t/>\n\t\t);\n\t} else if (selectFile) {\n\t\treturn (\n\t\t\t<SelectFileDialog\n\t\t\t\tonCancel={cancelSelectFile}\n\t\t\t\tonChange={handleInputChange}\n\t\t\t/>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<ConfigDialog\n\t\t\t\timage={input!}\n\t\t\t\tonStart={handleStart}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonSelectFile={() => setSelectFile(true)}\n\t\t\t/>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"Tt2Yp\",\"banner\":\"_2g3gN\",\"title\":\"_2UBpq\",\"subTitle\":\"_3dZjB\",\"bigButton\":\"_3YpNu\",\"github\":\"K-q6E\",\"unsplash\":\"_3tP01\",\"link\":\"_3c5c0\",\"section\":\"_2SF9G\"};","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgGithubLogo(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 438.549 438.549\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z\"\n  })));\n}\n\nexport default SvgGithubLogo;","import clsx from \"clsx\";\nimport { Button } from \"../ui\";\nimport styles from \"./IntroPage.scss\";\nimport GitHubIcon from \"../assets/github-logo.svg\";\nimport banner from \"../assets/intro-banner.png\";\n\ninterface IntroPageProps {\n\tonEncode: () => void;\n\tonCompare: () => void;\n}\n\nexport default function IntroPage(props: IntroPageProps) {\n\tconst { onEncode, onCompare } = props;\n\n\treturn (\n\t\t<div>\n\t\t\t<section className={styles.header}>\n\t\t\t\t<img className={styles.banner} alt=\"banner\" src={banner}/>\n\n\t\t\t\t<div>\n\t\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\t\tICAnalyzer\n\t\t\t\t\t</h1>\n\t\t\t\t\t<h2 className={styles.subTitle}>\n\t\t\t\t\t\tImage Codec & Quality analyze tool\n\t\t\t\t\t</h2>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={styles.bigButton}\n\t\t\t\t\t\ttype=\"outline\"\n\t\t\t\t\t\tonClick={onEncode}\n\t\t\t\t\t>\n\t\t\t\t\t\tConvert\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={styles.bigButton}\n\t\t\t\t\t\ttype=\"outline\"\n\t\t\t\t\t\tonClick={onCompare}\n\t\t\t\t\t>\n\t\t\t\t\t\tCompare images\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={clsx(styles.bigButton, \"second\")}\n\t\t\t\t\t\ttype=\"outline\"\n\t\t\t\t\t\thref=\"https://github.com/Kaciras/ICAnalyzer\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<GitHubIcon className={styles.github}/>\n\t\t\t\t\t\tSource Code\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={styles.unsplash}>\n\t\t\t\t\tPhoto by\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName={styles.link}\n\t\t\t\t\t\thref=\"https://unsplash.com/@veverkolog?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\"\n\t\t\t\t\t>\n\t\t\t\t\t\tDuan veverkolog\n\t\t\t\t\t</a>\n\t\t\t\t\ton\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName={styles.link}\n\t\t\t\t\t\thref=\"https://unsplash.com/s/photos/eagle?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\"\n\t\t\t\t\t>\n\t\t\t\t\t\tUnsplash\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className={styles.section}>\n\t\t\t\tTODO\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n","import { CSSProperties } from \"react\";\nimport styles from \"./ColorPicker.scss\";\n\n/**\n * Get the RGBA data at position in the image.\n *\n * @return the Uint8ClampedArray slice contains [R, G, B, A] values\n */\nfunction getPixel(image: ImageData, x: number, y: number) {\n\tconst { width, data } = image;\n\tconst i = (x + y * width) * 4;\n\treturn data.slice(i, i + 4);\n}\n\nfunction pad(n: string) {\n\treturn n.length < 2 ? \"0\" + n : n;\n}\n\n/**\n * Convert the pixel data to hex color string.\n */\nfunction pixelToHex(pixel: Uint8ClampedArray) {\n\treturn pixel\n\t\t.reduce((s, n) => s + pad(n.toString(16)), \"#\")\n\t\t.toUpperCase();\n}\n\ninterface ColorItemProps {\n\tname: string;\n\tvalue: Uint8ClampedArray;\n}\n\nfunction ColorItem(props: ColorItemProps) {\n\tconst { name, value } = props;\n\tconst color = pixelToHex(value);\n\n\t// Remove the alpha channel for color tile\n\tconst cssVariables: any = {\n\t\t\"--color\": color.substring(0, 7),\n\t};\n\n\treturn <div className={styles.color} style={cssVariables}>{name}: {color}</div>;\n}\n\nexport interface ColorPickerProps {\n\tstyle?: CSSProperties;\n\n\tx: number;\n\ty: number;\n\timageA: ImageData;\n\timageB: ImageData;\n}\n\nexport default function ColorPicker(props: ColorPickerProps) {\n\tconst { style, x, y, imageA, imageB } = props;\n\n\tconst pixelA = getPixel(imageA, x, y);\n\tconst pixelB = getPixel(imageB, x, y);\n\tconst pixelDiff = pixelA.map((n, i) => Math.abs(n - pixelB[i]));\n\n\treturn (\n\t\t<div className={styles.container} style={style}>\n\t\t\t<div>x: {x}, y: {y}</div>\n\t\t\t<ColorItem name=\"Origin\" value={pixelA}/>\n\t\t\t<ColorItem name=\"Output\" value={pixelB}/>\n\t\t\t<ColorItem name=\"Diff\" value={pixelDiff}/>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_1hKG3\",\"color\":\"_1JGQL\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_3kS7K\",\"tabPanel\":\"-oYCp controls\",\"option\":\"_92kbo\",\"icon\":\"_2JgM9\",\"main\":\"_36tMg\",\"wrapper\":\"_2sQef\",\"canvas\":\"_1YBWC\",\"controls\":\"ICaVu\",\"darkNumberInput\":\"_19OEA\",\"zoomInput\":\"_1AxLs _19OEA\",\"button\":\"_3mZJ8\"};","import { Dispatch, MouseEvent, RefObject, SetStateAction, useEffect, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport BrightnessIcon from \"bootstrap-icons/icons/brightness-high.svg\";\nimport PickColorIcon from \"bootstrap-icons/icons/eyedropper.svg\";\nimport ResetIcon from \"bootstrap-icons/icons/arrow-counterclockwise.svg\";\nimport { ButtonProps } from \"../ui/Button\";\nimport { PinchZoomState } from \"../ui/PinchZoom\";\nimport { AnalyzeResult } from \"../analyzing\";\nimport { Button, NumberInput, PinchZoom, SwitchButton } from \"../ui\";\nimport { InputImage } from \"./index\";\nimport ColorPicker from \"./ColorPicker\";\nimport styles from \"./ImageView.scss\";\n\nexport enum ViewType {\n\tOriginal,\n\tOutput,\n\tDifference,\n\tHeatMap,\n}\n\nconst viewTypeNames = [\"Original\", \"Output\", \"Difference\", \"HeatMap\"];\n\ninterface ImageViewTabProps extends ButtonProps {\n\ttarget: string;\n}\n\nfunction useResettable<T>(initialState: T): [T, Dispatch<SetStateAction<T>>, () => void] {\n\tconst [value, setValue] = useState(initialState);\n\treturn [value, setValue, () => setValue(initialState)];\n}\n\nfunction drawDataToCanvas(data: ImageData, canvas: RefObject<HTMLCanvasElement>) {\n\tconst { current } = canvas;\n\tif (current === null) {\n\t\tthrow new Error(\"Canvas is null\");\n\t}\n\tconst ctx = current.getContext(\"2d\");\n\tif (!ctx) {\n\t\tthrow new Error(\"Canvas not initialized\");\n\t}\n\tctx.putImageData(data, 0, 0);\n}\n\nexport interface ImageViewProps {\n\tclassName?: string;\n\toriginal: InputImage;\n\toutput: AnalyzeResult;\n}\n\nexport default function ImageView(props: ImageViewProps) {\n\tconst { original, output, className } = props;\n\tconst { width, height } = original.raw;\n\tconst { heatMap } = output;\n\n\tconst [type, setType] = useState(ViewType.Output);\n\tconst [picking, setPicking] = useState(false);\n\tconst [inRegion, setInRegion] = useState(false);\n\tconst [brightness, setBrightness] = useState(1);\n\n\tconst [mousePos, setMousePos] = useState({ clientX: 0, clientY: 0 });\n\n\tconst [pinchZoom, setPinchZoom, resetPinchZoom] = useResettable<PinchZoomState>({\n\t\tx: 0,\n\t\ty: 0,\n\t\tscale: 1,\n\t});\n\n\tconst backCanvas = useRef<HTMLCanvasElement>(null);\n\tconst topCanvas = useRef<HTMLCanvasElement>(null);\n\n\tconst topImage = (type === ViewType.HeatMap) ? heatMap! : output.data;\n\n\tfunction refreshBottomCanvas() {\n\t\tresetPinchZoom();\n\t\tdrawDataToCanvas(original.raw, backCanvas);\n\t}\n\n\tfunction refreshTopCanvas() {\n\t\tdrawDataToCanvas(topImage, topCanvas);\n\t}\n\n\tuseEffect(refreshBottomCanvas, [original]);\n\tuseEffect(refreshTopCanvas, [topImage]);\n\n\tfunction handleMouseMove(event: MouseEvent) {\n\t\tconst { clientX, clientY } = event;\n\t\tsetMousePos({ clientX, clientY });\n\t}\n\n\tfunction setZoom(value: number) {\n\t\tsetPinchZoom(prev => ({ ...prev, scale: value / 100 }));\n\t}\n\n\tconst tabData = viewTypeNames.map<ImageViewTabProps>(target => ({ target }));\n\n\tif (!heatMap) {\n\t\ttabData[3].disabled = true;\n\t\ttabData[3].title = \"Require enable butteraugli\";\n\t}\n\n\tconst imageViewTabs = tabData.map(data => {\n\t\tconst { target, disabled, title } = data;\n\t\tconst value = ViewType[target as keyof typeof ViewType];\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tkey={value}\n\t\t\t\ttype=\"text\"\n\t\t\t\tactive={type === value}\n\t\t\t\tdisabled={disabled}\n\t\t\t\ttitle={title}\n\t\t\t\tonClick={() => setType(value)}\n\t\t\t>\n\t\t\t\t{target}\n\t\t\t</Button>\n\t\t);\n\t});\n\n\tlet brightnessInput = null;\n\tlet brightnessVal = 1;\n\n\tif (type === ViewType.Difference) {\n\t\tbrightnessVal = brightness;\n\t\tbrightnessInput = (\n\t\t\t<label\n\t\t\t\ttitle=\"Brightness\"\n\t\t\t\tclassName={styles.option}\n\t\t\t>\n\t\t\t\t<BrightnessIcon className={styles.icon}/>\n\t\t\t\t<NumberInput\n\t\t\t\t\tclassName={styles.darkNumberInput}\n\t\t\t\t\tvalue={brightness}\n\t\t\t\t\tmin={1}\n\t\t\t\t\tmax={255}\n\t\t\t\t\tstep={1}\n\t\t\t\t\tminMaxButton={true}\n\t\t\t\t\tonValueChange={setBrightness}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t);\n\t}\n\n\tconst wrapperCSS = {\n\t\twidth, height,\n\t\t\"--scale\": pinchZoom.scale,\n\t\t\"--x\": pinchZoom.x + \"px\",\n\t\t\"--y\": pinchZoom.y + \"px\",\n\t\t\"--brightness\": `${brightnessVal}`,\n\t};\n\n\tconst { clientX, clientY } = mousePos;\n\tconst px = Math.floor((clientX - pinchZoom.x - (window.innerWidth - width * pinchZoom.scale) / 2) / pinchZoom.scale);\n\tconst py = Math.floor((clientY - pinchZoom.y - (window.innerHeight - height * pinchZoom.scale) / 2) / pinchZoom.scale);\n\n\tconst pickerCSS = {\n\t\ttop: clientY,\n\t\tleft: clientX,\n\t};\n\n\tconst mixBlendMode = type === ViewType.Difference ? \"difference\" : undefined;\n\n\treturn (\n\t\t<div className={clsx(styles.container, className)}>\n\t\t\t<PinchZoom\n\t\t\t\tclassName={styles.main}\n\t\t\t\tstate={pinchZoom}\n\t\t\t\t// Can't zoom by mouse wheel if scale = 0\n\t\t\t\tonChange={v => v.scale > 0.01 && setPinchZoom(v)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={styles.wrapper}\n\t\t\t\t\tstyle={wrapperCSS}\n\t\t\t\t\tonMouseOver={() => setInRegion(true)}\n\t\t\t\t\tonMouseMove={handleMouseMove}\n\t\t\t\t\tonMouseOut={() => setInRegion(false)}\n\t\t\t\t>\n\t\t\t\t\t<canvas\n\t\t\t\t\t\tclassName={styles.canvas}\n\t\t\t\t\t\tref={backCanvas}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t/>\n\t\t\t\t\t<canvas\n\t\t\t\t\t\tclassName={styles.canvas}\n\t\t\t\t\t\tref={topCanvas}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\tstyle={{ mixBlendMode }}\n\t\t\t\t\t\thidden={type === ViewType.Original}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</PinchZoom>\n\n\t\t\t<div className={styles.tabPanel}>\n\t\t\t\t<div>{imageViewTabs}</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName={styles.option}\n\t\t\t\t\ttitle=\"Pick color\"\n\t\t\t\t>\n\t\t\t\t\t<PickColorIcon className={styles.icon}/>\n\t\t\t\t\t<SwitchButton\n\t\t\t\t\t\tchecked={picking}\n\t\t\t\t\t\tonValueChange={setPicking}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{brightnessInput}\n\t\t\t</div>\n\n\t\t\t<div className={styles.controls}>\n\t\t\t\t<NumberInput\n\t\t\t\t\ttitle=\"Zoom scale\"\n\t\t\t\t\tmin={25}\n\t\t\t\t\tstep={1}\n\t\t\t\t\tincrement={25}\n\t\t\t\t\tclassName={styles.zoomInput}\n\t\t\t\t\tvalue={Math.round(pinchZoom.scale * 100)}\n\t\t\t\t\tonValueChange={setZoom}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Reset view\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.button}\n\t\t\t\t\tonClick={resetPinchZoom}\n\t\t\t\t>\n\t\t\t\t\t<ResetIcon/>\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t{\n\t\t\t\tpicking && inRegion &&\n\t\t\t\t<ColorPicker\n\t\t\t\t\tstyle={pickerCSS}\n\t\t\t\t\tx={px}\n\t\t\t\t\ty={py}\n\t\t\t\t\timageA={original.raw}\n\t\t\t\t\timageB={output.data}\n\t\t\t\t/>\n\t\t\t}\n\t\t</div>\n\t);\n}\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgLock(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 486.733 486.733\",\n    fill: \"currentColor\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M403.88 196.563h-9.484v-44.388c0-82.099-65.151-150.681-146.582-152.145-2.225-.04-6.671-.04-8.895 0C157.486 1.494 92.336 70.076 92.336 152.175v44.388h-9.485c-14.616 0-26.538 15.082-26.538 33.709v222.632c0 18.606 11.922 33.829 26.539 33.829H403.88c14.616 0 26.539-15.223 26.539-33.829V230.272c0-18.626-11.922-33.709-26.539-33.709zM273.442 341.362v67.271c0 7.703-6.449 14.222-14.158 14.222H227.45c-7.71 0-14.159-6.519-14.159-14.222v-67.271c-7.477-7.36-11.83-17.537-11.83-28.795 0-21.334 16.491-39.666 37.459-40.513 2.222-.09 6.673-.09 8.895 0 20.968.847 37.459 19.179 37.459 40.513-.002 11.258-4.355 21.435-11.832 28.795zm58.444-144.799H154.847v-44.388c0-48.905 39.744-89.342 88.519-89.342 48.775 0 88.521 40.437 88.521 89.342v44.388z\"\n  })));\n}\n\nexport default SvgLock;","import { useEffect, useState } from \"react\";\nimport clsx from \"clsx\";\nimport Highcharts, { Chart, Options, SeriesLineOptions, YAxisOptions } from \"highcharts\";\nimport Export from \"highcharts/modules/exporting\";\nimport ExportOffline from \"highcharts/modules/offline-exporting\";\nimport LockIcon from \"../assets/lock.svg\";\nimport { Button } from \"../ui\";\nimport { AnalyzeResult } from \"../analyzing\";\nimport { MetricMeta } from \"./index\";\nimport styles from \"./ChartPanel.scss\";\n\nExport(Highcharts);\nExportOffline(Highcharts);\n\nconst baseOptions: Options = {\n\tchart: {\n\t\tanimation: false,\n\t\tstyledMode: true,\n\t},\n\ttitle: {\n\t\ttext: \"\",\n\t},\n\ttooltip: {\n\t\tborderRadius: 0,\n\t},\n\tlegend: {\n\t\tverticalAlign: \"top\",\n\t\twidth: 450,\n\n\t\t// Since legend item vary widely in width, disable align to use space more efficiently\n\t\talignColumns: false,\n\t},\n\txAxis: {\n\t\t// Avoid layout shift on Y axis changes\n\t\twidth: 430,\n\t},\n\texporting: {\n\t\tmenuItemDefinitions: {\n\t\t\tdownloadExpand: {\n\t\t\t\ttext: \"Download with full Axis\",\n\t\t\t\tonclick() {\n\t\t\t\t\tconst yAxis = new Array(this.yAxis.length);\n\t\t\t\t\tyAxis.fill({ visible: true });\n\n\t\t\t\t\tconst optionsMixin = {\n\t\t\t\t\t\tyAxis,\n\t\t\t\t\t\txAxis: {\n\t\t\t\t\t\t\tplotLines: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tlabelFormat: \"{name}\",\n\t\t\t\t\t\t\tlabelFormatter: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.exportChartLocal({ type: \"image/svg+xml\" }, optionsMixin);\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tbuttons: {\n\t\t\tcontextButton: {\n\t\t\t\ty: 5,\n\t\t\t\tx: -5,\n\t\t\t\theight: 32,\n\t\t\t\twidth: 32,\n\t\t\t\tsymbolSize: 16,\n\t\t\t\tsymbolX: 17,\n\t\t\t\tsymbolY: 16,\n\t\t\t\tmenuItems: [\n\t\t\t\t\t\"viewFullscreen\",\n\t\t\t\t\t\"downloadSVG\",\n\t\t\t\t\t\"downloadExpand\",\n\t\t\t\t],\n\t\t\t},\n\t\t},\n\t\tsourceWidth: 800,\n\t\tsourceHeight: 400,\n\t\tchartOptions: {\n\t\t\tlegend: {\n\t\t\t\t// @ts-ignore According to the document, null is acceptable\n\t\t\t\twidth: null,\n\t\t\t},\n\t\t\t// @ts-ignore According to the document, null is acceptable\n\t\t\txAxis: {\n\t\t\t\twidth: null,\n\t\t\t},\n\t\t\tchart: {\n\t\t\t\tclassName: \"exporting_chart_class\",\n\t\t\t},\n\t\t},\n\t},\n};\n\nfunction handleMouseover(chart: Chart, i: number) {\n\tconst { yAxis } = chart;\n\tfor (let j = 1; j < yAxis.length; j++) {\n\t\tyAxis[j].update({ visible: i === j }, false);\n\t}\n\tchart.redraw();\n}\n\nfunction addSeriesListener(chart: Chart) {\n\tconst { allItems } = chart.legend;\n\tfor (let i = 1; i < allItems.length; i++) {\n\t\tallItems[i].onMouseOver = () => handleMouseover(chart, i);\n\t}\n}\n\nfunction addLegendListener(chart: Chart) {\n\tconst { series } = chart;\n\tfor (let i = 1; i < series.length; i++) {\n\t\t(series[i] as any).legendItem.on(\"mouseover\", () => handleMouseover(chart, i));\n\t}\n}\n\nexport interface ChartProps {\n\tclassName?: string;\n\tvisible: boolean;\n\n\tseriesMeta: MetricMeta[];\n\tindex: number;\n\tvalues: string[];\n\toutputs: AnalyzeResult[];\n}\n\nfunction toChartData(props: ChartProps) {\n\tconst { seriesMeta, outputs, values } = props;\n\n\tconst { length } = seriesMeta;\n\tconst series = new Array<SeriesLineOptions>(length);\n\tconst yAxis = new Array<YAxisOptions>(length);\n\n\tfor (let i = 0; i < length; i++) {\n\t\tconst { key, name } = seriesMeta[i];\n\t\tyAxis[i] = {\n\t\t\ttitle: {\n\t\t\t\ttext: name,\n\t\t\t},\n\t\t\tvisible: false,\n\t\t\topposite: true,\n\t\t};\n\t\tseries[i] = {\n\t\t\tname,\n\t\t\ttype: \"line\",\n\t\t\tyAxis: i,\n\t\t\tdata: outputs.map(output => output.metrics[key]),\n\t\t};\n\t}\n\n\tconst [left, initialRight] = yAxis;\n\tleft.visible = true;\n\tleft.opposite = false;\n\tif (initialRight) {\n\t\tinitialRight.visible = true;\n\t}\n\n\treturn { series, yAxis, xAxis: { categories: values } };\n}\n\nexport default function ChartPanel(props: ChartProps) {\n\tconst { className, visible, seriesMeta, outputs, index, values } = props;\n\n\tconst [chart, setChart] = useState<Chart>();\n\tconst [locked, setLocked] = useState(false);\n\n\tfunction initHighcharts(el: HTMLDivElement | null) {\n\t\tif (!el || chart) {\n\t\t\treturn;\n\t\t}\n\t\tconst dataPart = toChartData(props);\n\t\tconst options = Highcharts.merge(baseOptions, dataPart);\n\n\t\tconst newChart = Highcharts.chart(el, options);\n\t\tsetChart(newChart);\n\t\taddSeriesListener(newChart);\n\t\taddLegendListener(newChart);\n\t}\n\n\tfunction updateSeriesData(chart: Chart) {\n\t\tchart.xAxis[0].setCategories(values, false);\n\t\tchart.series.forEach((s, i) => {\n\t\t\tconst { key } = seriesMeta[i];\n\t\t\ts.setData(outputs.map(output => output.metrics[key]), false);\n\t\t});\n\t}\n\n\tfunction updatePlotLine(chart: Chart) {\n\t\tconst [xAxis] = chart.xAxis;\n\t\txAxis.removePlotLine(\"MarkLine\");\n\t\txAxis.addPlotLine({\n\t\t\tid: \"MarkLine\",\n\t\t\tvalue: index,\n\t\t\tdashStyle: \"Dash\",\n\t\t});\n\t\tchart.legend.update({\n\t\t\tlabelFormatter() {\n\t\t\t\tconst { name, options } = this as any;\n\t\t\t\tconst value = options.data[index];\n\t\t\t\tlet displayValue;\n\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase +Infinity:\n\t\t\t\t\t\tdisplayValue = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase -Infinity:\n\t\t\t\t\t\tdisplayValue = \"-\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tdisplayValue = value.toFixed(2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn `${name}: <b>${displayValue}</b>`;\n\t\t\t},\n\t\t});\n\t\taddLegendListener(chart);\n\t}\n\n\tuseEffect(() => chart && updateSeriesData(chart), [outputs]);\n\tuseEffect(() => chart && updatePlotLine(chart));\n\n\tfunction handleLockChange() {\n\t\tif (locked) {\n\t\t\tconst clear = { min: null, max: null };\n\t\t\tchart!.yAxis.forEach(y => y.update(clear, false));\n\t\t\tsetLocked(false);\n\t\t} else {\n\t\t\tsetLocked(true);\n\t\t\tchart!.yAxis.forEach(y => y.update({ min: y.min, max: y.max }), false);\n\t\t}\n\t\tchart!.redraw();\n\t}\n\n\t// High cost of rendering chart, so keep the element\n\tconst display = visible ? undefined : { display: \"none\" };\n\n\treturn (\n\t\t<section\n\t\t\tclassName={clsx(styles.container, className)}\n\t\t\tstyle={display}\n\t\t>\n\t\t\t<Button\n\t\t\t\ttitle=\"Lock Y axis range\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName={styles.lock}\n\t\t\t\tactive={locked}\n\t\t\t\tonClick={handleLockChange}\n\t\t\t>\n\t\t\t\t<LockIcon/>\n\t\t\t</Button>\n\t\t\t<div className={styles.chart} ref={initHighcharts}/>\n\t\t</section>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_120CL\",\"chart\":\"N21M3\",\"lock\":\"_2SMWc\"};","import { ChangeEvent, Dispatch } from \"react\";\nimport { ControlField, SelectBox } from \"../ui\";\nimport { ENCODERS } from \"../codecs\";\nimport { ControlState, Step } from \"./AnalyzePage\";\nimport { ControlsMap } from \"./index\";\nimport styles from \"./ControlPanel.scss\";\n\nexport interface ControlPanelProps {\n\tcontrolsMap: ControlsMap;\n\tvalue: ControlState;\n\tonChange: Dispatch<Partial<ControlState>>;\n}\n\nexport default function ControlPanel(props: ControlPanelProps) {\n\tconst { controlsMap, value, onChange } = props;\n\tconst { variableType, variableName, encoderName, encoderState } = value;\n\n\tif (variableType === Step.None) {\n\t\treturn null;\n\t}\n\n\tfunction handleCodecChange(e: ChangeEvent<HTMLSelectElement>) {\n\t\tonChange({ encoderName: e.currentTarget.value });\n\t}\n\n\tfunction handleVarChange(variableType: Step, variableName: string) {\n\t\tonChange({ variableType, variableName });\n\t}\n\n\tfunction handleValueChange(id: string, newValue: any) {\n\t\tconst key = encoderState[encoderName];\n\t\tconst es = { ...encoderState, [encoderName]: { ...key, [id]: newValue } };\n\t\tonChange({ encoderState: es });\n\t}\n\n\tconst selectOptions = ENCODERS\n\t\t.filter(e => e.name in controlsMap)\n\t\t.map(({ name }) => <option key={name} value={name}>{name}</option>);\n\n\tconst state = encoderState[encoderName];\n\tconst controls = controlsMap[encoderName].map(C =>\n\t\t<C.Input\n\t\t\tvalue={state[C.id]}\n\t\t\tactive={variableType === Step.Options && variableName === C.id}\n\t\t\tkey={C.id}\n\t\t\tonChange={v => handleValueChange(C.id, v)}\n\t\t\tonFocus={() => handleVarChange(Step.Options, C.id)}\n\t\t/>,\n\t);\n\n\treturn (\n\t\t<form className={styles.variableGroup}>\n\t\t\t{controls}\n\t\t\t{\n\t\t\t\tselectOptions.length > 1 &&\n\t\t\t\t<ControlField\n\t\t\t\t\tactive={variableType === Step.Encoder}\n\t\t\t\t\tonFocus={() => handleVarChange(Step.Encoder, \"Encoder\")}\n\t\t\t\t>\n\t\t\t\t\t<SelectBox\n\t\t\t\t\t\ttitle=\"Codec name\"\n\t\t\t\t\t\tvalue={encoderName}\n\t\t\t\t\t\tonChange={handleCodecChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{selectOptions}\n\t\t\t\t\t</SelectBox>\n\t\t\t\t</ControlField>\n\t\t\t}\n\t\t</form>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"variableGroup\":\"_33pnL controls\",\"radioButtonGroup\":\"_1SeOc\"};","// extracted by mini-css-extract-plugin\nexport default {\"buttonPanel\":\"_1C_7C controls\",\"iconButton\":\"_3RfWA\",\"imageView\":\"_2Uqli\",\"metricsPanel\":\"o4vo9\",\"simpleMetrics\":\"_1riCj controls o4vo9\"};","import { ReactNode, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\nimport UploadIcon from \"bootstrap-icons/icons/cloud-upload.svg\";\nimport ChartIcon from \"bootstrap-icons/icons/bar-chart-line.svg\";\nimport DownloadIcon from \"bootstrap-icons/icons/download.svg\";\nimport CloseIcon from \"bootstrap-icons/icons/x.svg\";\nimport { Button } from \"../ui\";\nimport { ENCODER_MAP, ENCODERS, ImageEncoder } from \"../codecs\";\nimport { AnalyzeResult } from \"../analyzing\";\nimport { AnalyzeContext, ControlsMap } from \"./index\";\nimport ImageView from \"./ImageView\";\nimport ChartPanel from \"./ChartPanel\";\nimport ControlPanel from \"./ControlPanel\";\nimport styles from \"./AnalyzePage.scss\";\n\ninterface DownloadButtonProps {\n\ttitle?: string;\n\tbuffer: ArrayBuffer;\n\tfilename: string;\n\tcodec: ImageEncoder;\n\tchildren: ReactNode;\n}\n\nfunction DownloadButton(props: DownloadButtonProps) {\n\tconst { title, buffer, filename, children } = props;\n\tconst { mimeType, extension } = props.codec;\n\n\tconst url = useRef(\"\");\n\n\tuseEffect(() => () => URL.revokeObjectURL(url.current), []);\n\n\tfunction downloadImage() {\n\t\tconst blob = new Blob([buffer], { type: mimeType });\n\n\t\tURL.revokeObjectURL(url.current);\n\t\tconst newUrl = URL.createObjectURL(blob);\n\t\turl.current = newUrl;\n\n\t\tconst a = document.createElement(\"a\");\n\t\ta.href = newUrl;\n\t\ta.download = filename.replace(/.[^.]*$/, `.${extension}`);\n\t\tdocument.body.appendChild(a);\n\t\ta.click();\n\t\tdocument.body.removeChild(a);\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={styles.iconButton}\n\t\t\ttype=\"text\"\n\t\t\ttitle={title}\n\t\t\tonClick={downloadImage}\n\t\t>\n\t\t\t{children}\n\t\t</Button>\n\t);\n}\n\nexport enum Step {\n\tNone,\n\tEncoder,\n\tOptions,\n}\n\nexport interface ControlState {\n\tencoderName: string;\n\tencoderState: Record<string, Record<string, any>>;\n\n\tvariableType: Step;\n\tvariableName: string;\n}\n\nfunction createControlState(controlsMap: ControlsMap): ControlState {\n\tlet variableType = Step.None;\n\tlet variableName = \"\";\n\n\tconst kvs = Object.entries(controlsMap);\n\tif (kvs.length > 1) {\n\t\tvariableType = Step.Encoder;\n\t\tvariableName = \"\";\n\t}\n\n\tconst [encoderName, controls] = kvs[0];\n\tif (controls.length > 0) {\n\t\tvariableType = Step.Options;\n\t\tvariableName = controls[0].id;\n\t}\n\n\t// encoder name -> option id -> values\n\tconst encoderState: Record<string, Record<string, any>> = {};\n\tfor (const [k, v] of kvs) {\n\t\tencoderState[k] = Object.fromEntries(v.map(c => [c.id, c.createState()[0]]));\n\t}\n\n\treturn { variableType, variableName, encoderName, encoderState };\n}\n\nfunction updateControlState(state: ControlState, action: Partial<ControlState>) {\n\treturn { ...state, ...action };\n}\n\nfunction getSeries(result: AnalyzeContext, state: ControlState) {\n\tconst { controlsMap, outputMap } = result;\n\tconst { variableType, variableName, encoderName, encoderState } = state;\n\n\tconst key = encoderState[encoderName];\n\tconst output = outputMap.get({ encoder: encoderName, key });\n\n\tlet labels: string[];\n\tlet series: AnalyzeResult[];\n\n\tif (variableType === Step.None) {\n\t\tlabels = [\"\"];\n\t\tseries = [output];\n\t} else if (variableType === Step.Encoder) {\n\t\tlabels = ENCODERS.filter(e => e.name in encoderState).map(e => e.name);\n\t\tseries = labels.map(encoder => outputMap.get({\n\t\t\tencoder,\n\t\t\tkey: encoderState[encoder],\n\t\t}));\n\t} else if (variableType === Step.Options) {\n\t\tconst values = controlsMap[encoderName]\n\t\t\t.find(c => c.id === variableName)!.createState();\n\n\t\tlabels = values.map(v => v.toString());\n\t\tseries = values.map(v => outputMap.get({\n\t\t\tencoder: encoderName,\n\t\t\tkey: { ...key, [variableName]: v },\n\t\t}));\n\t} else {\n\t\tthrow new Error(\"Missing handle of variableType: \" + variableType);\n\t}\n\n\treturn { output, labels, series };\n}\n\nexport interface AnalyzePageProps {\n\tresult: AnalyzeContext;\n\tonStart: () => void;\n\tonClose: () => void;\n}\n\nexport default function AnalyzePage(props: AnalyzePageProps) {\n\tconst { result, onStart, onClose } = props;\n\tconst { input, controlsMap, seriesMeta } = result;\n\n\tconst [showChart, setShowChart] = useState(true);\n\tconst [state, setState] = useReducer(updateControlState, controlsMap, createControlState);\n\n\tconst { labels, series, output } = useMemo(() => getSeries(result, state), [result, state]);\n\n\tconst index = series.indexOf(output);\n\tif (index < 0) {\n\t\tthrow new Error(\"Can't find current index in series\");\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ImageView\n\t\t\t\tclassName={styles.imageView}\n\t\t\t\toriginal={input}\n\t\t\t\toutput={output}\n\t\t\t/>\n\n\t\t\t<ChartPanel\n\t\t\t\tclassName={styles.metricsPanel}\n\t\t\t\tvisible={showChart}\n\t\t\t\tseriesMeta={seriesMeta}\n\t\t\t\tindex={index}\n\t\t\t\tvalues={labels}\n\t\t\t\toutputs={series}\n\t\t\t/>\n\n\t\t\t<div className={styles.buttonPanel}>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Back\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tonClick={onClose}\n\t\t\t\t>\n\t\t\t\t\t<CloseIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Try it again\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tonClick={onStart}\n\t\t\t\t>\n\t\t\t\t\t<UploadIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Show metrics\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tactive={showChart}\n\t\t\t\t\tonClick={() => setShowChart(!showChart)}\n\t\t\t\t>\n\t\t\t\t\t<ChartIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<DownloadButton\n\t\t\t\t\ttitle=\"Download output image\"\n\t\t\t\t\tfilename={input.file.name}\n\t\t\t\t\tcodec={ENCODER_MAP[state.encoderName]}\n\t\t\t\t\tbuffer={output.buffer}\n\t\t\t\t>\n\t\t\t\t\t<DownloadIcon/>\n\t\t\t\t</DownloadButton>\n\t\t\t</div>\n\n\t\t\t<ControlPanel value={state} onChange={setState} controlsMap={controlsMap}/>\n\t\t</>\n\t);\n}\n","import { useState } from \"react\";\nimport UploadIcon from \"bootstrap-icons/icons/cloud-upload.svg\";\nimport ChartIcon from \"bootstrap-icons/icons/bar-chart-line.svg\";\nimport CloseIcon from \"bootstrap-icons/icons/x.svg\";\nimport { Button } from \"../ui\";\nimport ImageView from \"./ImageView\";\nimport { MetricMeta } from \"./index\";\nimport { AnalyzePageProps } from \"./AnalyzePage\";\nimport styles from \"./AnalyzePage.scss\";\n\ninterface MetricsPanelProps {\n\tvisible: boolean;\n\tmetas: MetricMeta[];\n\tmetrics: Record<string, number>;\n}\n\nfunction MetricsPanel(props: MetricsPanelProps) {\n\tconst { visible, metas, metrics } = props;\n\n\tif (!visible) {\n\t\treturn null;\n\t}\n\n\tconst items = [];\n\tfor (const { key, name } of metas) {\n\t\titems.push(<dt>{name}:</dt>);\n\t\titems.push(<dd>{metrics[key].toFixed(3)}</dd>);\n\t}\n\n\treturn <dl className={styles.simpleMetrics}>{items}</dl>;\n}\n\nexport default function ComparePage(props: AnalyzePageProps) {\n\tconst { result, onStart, onClose } = props;\n\tconst { input, outputMap, seriesMeta } = result;\n\n\tconst [showChart, setShowChart] = useState(true);\n\n\tconst output = outputMap.get({});\n\n\treturn (\n\t\t<>\n\t\t\t<ImageView\n\t\t\t\tclassName={styles.imageView}\n\t\t\t\toriginal={input}\n\t\t\t\toutput={output}\n\t\t\t/>\n\n\t\t\t<MetricsPanel\n\t\t\t\tvisible={showChart}\n\t\t\t\tmetas={seriesMeta}\n\t\t\t\tmetrics={output.metrics}\n\t\t\t/>\n\n\t\t\t<div className={styles.buttonPanel}>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Back\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tonClick={onClose}\n\t\t\t\t>\n\t\t\t\t\t<CloseIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Try it again\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tonClick={onStart}\n\t\t\t\t>\n\t\t\t\t\t<UploadIcon/>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttitle=\"Show metrics\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={styles.iconButton}\n\t\t\t\t\tactive={showChart}\n\t\t\t\t\tonClick={() => setShowChart(!showChart)}\n\t\t\t\t>\n\t\t\t\t\t<ChartIcon/>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"body\":\"_3aXX_ dialog-content\",\"section\":\"_2RwLF\",\"header\":\"_3qCEp\",\"fileDrop\":\"_3xcM7\",\"title\":\"_2xFLV\",\"buttonIcon\":\"_2Etp1\",\"reset\":\"_1uJoY\",\"canvas\":\"_1HjOB\",\"info\":\"_1CjJL\",\"error\":\"_3rJRu\"};","import { Dispatch, memo, useState } from \"react\";\nimport CloseIcon from \"bootstrap-icons/icons/x.svg\";\nimport { decode } from \"../decode\";\nimport { Button, Dialog, FileDrop } from \"../ui\";\nimport { InputImage } from \"./index\";\nimport { CompareData } from \"./CompareSession\";\nimport styles from \"./CompareDialog.scss\";\n\ntype InputState = InputImage | undefined;\n\ninterface UploadBoxProps {\n\tname: string;\n\tonChange: Dispatch<InputState>;\n\tonError: Dispatch<string | undefined>;\n}\n\nfunction UploadBox(props: UploadBoxProps) {\n\tconst { name, onChange, onError } = props;\n\n\tfunction onFileChange(file: File) {\n\t\treturn decode(file)\n\t\t\t.then(raw => onChange({ file, raw }))\n\t\t\t.catch(e => onError(e.message));\n\t}\n\n\treturn (\n\t\t<section className={styles.section}>\n\t\t\t<div className={styles.header}>\n\t\t\t\t<h3 className={styles.title}>{name}</h3>\n\t\t\t</div>\n\t\t\t<FileDrop\n\t\t\t\tclassName={styles.fileDrop}\n\t\t\t\tonChange={onFileChange}\n\t\t\t\tonError={onError}\n\t\t\t\tonStart={() => onError(undefined)}\n\t\t\t/>\n\t\t</section>\n\t);\n}\n\ninterface PreviewBoxProps {\n\tvalue: InputImage;\n\tname: string;\n\tonChange: Dispatch<InputState>;\n}\n\nconst PreviewBox = memo((props: PreviewBoxProps) => {\n\tconst { value, name, onChange } = props;\n\tconst { file, raw } = value;\n\n\tfunction drawImage(el: HTMLCanvasElement | null) {\n\t\tel?.getContext(\"2d\")!.putImageData(raw, 0, 0);\n\t}\n\n\treturn (\n\t\t<section className={styles.section}>\n\t\t\t<div className={styles.header}>\n\t\t\t\t<h3 className={styles.title}>{name}</h3>\n\t\t\t\t<Button\n\t\t\t\t\tclassName={styles.reset}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ttitle=\"Reset\"\n\t\t\t\t\tonClick={() => onChange(undefined)}\n\t\t\t\t>\n\t\t\t\t\t<CloseIcon/>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<canvas\n\t\t\t\tclassName={styles.canvas}\n\t\t\t\tref={drawImage}\n\t\t\t\twidth={raw.width}\n\t\t\t\theight={raw.height}\n\t\t\t/>\n\t\t\t<div className={styles.info}>{file.name}</div>\n\t\t</section>\n\t);\n});\n\nPreviewBox.displayName = \"PreviewBox\";\n\nexport interface CompareDialogProps {\n\tdata?: CompareData;\n\tonAccept: Dispatch<CompareData>;\n\tonCancel: () => void;\n}\n\nexport default function CompareDialog(props: CompareDialogProps) {\n\tconst { data, onAccept, onCancel } = props;\n\n\tconst [error, setError] = useState<string>();\n\tconst [original, setOriginal] = useState<InputState>(data?.original);\n\tconst [changed, setChanged] = useState<InputState>(data?.changed);\n\n\tfunction handleAccept() {\n\t\tonAccept({ original: original!, changed: changed! });\n\t}\n\n\tfunction section(name: string, value: InputState, setValue: Dispatch<InputState>) {\n\t\treturn value\n\t\t\t? <PreviewBox name={name} value={value} onChange={setValue}/>\n\t\t\t: <UploadBox name={name} onChange={setValue} onError={setError}/>;\n\t}\n\n\tconst isValid = original && changed && !error;\n\n\treturn (\n\t\t<Dialog onClose={onCancel}>\n\t\t\t<div className={styles.body}>\n\t\t\t\t{section(\"Origin image\", original, setOriginal)}\n\t\t\t\t{section(\"Changed image\", changed, setChanged)}\n\t\t\t</div>\n\t\t\t<div className=\"dialog-actions\">\n\t\t\t\t<span className={styles.error}>{error}</span>\n\t\t\t\t<Button className=\"second\" onClick={onCancel}>Back</Button>\n\t\t\t\t<Button disabled={!isValid} onClick={handleAccept}>Next</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","import { Dispatch, useState } from \"react\";\nimport { builtinResize } from \"squoosh/src/client/lazy-app/util/canvas\";\nimport { AnalyzeContext, InputImage } from \"./index\";\nimport { Analyzer, AnalyzeResult, newWorker, ObjectKeyMap } from \"../analyzing\";\nimport { Button, Dialog } from \"../ui\";\nimport { WorkerApi } from \"../worker\";\nimport { OptionsKey } from \"../form\";\nimport { useProgress } from \"../utils\";\nimport ProgressDialog from \"./ProgressDialog\";\nimport WorkerPool from \"../WorkerPool\";\nimport CompareDialog from \"./CompareDialog\";\nimport MeasurePanel, { getMeasureOptions } from \"./MeasurePanel\";\nimport styles from \"./ConfigDialog.scss\";\n\nexport interface CompareData {\n\toriginal: InputImage;\n\tchanged: InputImage;\n}\n\ninterface CompareSessionProps {\n\tisOpen: boolean;\n\tonChange: Dispatch<AnalyzeContext>;\n\tonClose: () => void;\n}\n\nexport default function CompareSession(props: CompareSessionProps) {\n\tconst { isOpen, onChange, onClose } = props;\n\n\tconst [selectFile, setSelectFile] = useState(true);\n\tconst [data, setData] = useState<CompareData>();\n\tconst [measure, setMeasure] = useState(getMeasureOptions);\n\tconst [workers, setWorkers] = useState<WorkerPool<WorkerApi>>();\n\tconst progress = useProgress();\n\tconst [error, setError] = useState<string>();\n\n\tfunction handleAccept(data: CompareData) {\n\t\tsetData(data);\n\t\tsetSelectFile(false);\n\t}\n\n\tfunction handleSelectCancel() {\n\t\tdata ? setSelectFile(false) : onClose();\n\t}\n\n\tasync function handleStart() {\n\t\tif (!data || !measure) {\n\t\t\tthrow new Error(\"Missing required data\");\n\t\t}\n\t\tconst { original, changed } = data;\n\t\tconst imageA = original.raw;\n\t\tlet imageB = changed.raw;\n\n\t\tlocalStorage.setItem(\"Measure\", JSON.stringify(measure));\n\n\t\tconst pool = new WorkerPool<WorkerApi>(newWorker, measure.workerCount);\n\t\tconst analyzer = new Analyzer(pool,  measure);\n\n\t\tconst seriesMeta = [{ key: \"ratio\", name: \"Compression Ratio %\" }];\n\t\tconst { calculations, metricsMeta } = analyzer.getMetricsMeta();\n\t\tseriesMeta.push(...metricsMeta);\n\t\tprogress.reset(1 + calculations);\n\n\t\tif (imageA.width !== imageB.width || imageA.height !== imageB.height) {\n\t\t\timageB = await builtinResize(imageB, 0, 0,\n\t\t\t\timageB.width, imageB.height, imageA.width, imageA.height, \"high\");\n\t\t}\n\n\t\tconst buffer = await changed.file.arrayBuffer();\n\t\tconst outputMap = new ObjectKeyMap<OptionsKey, AnalyzeResult>();\n\n\t\tawait analyzer.setOriginalImage(original);\n\n\t\tconst ratio = buffer.byteLength / original.file.size * 100;\n\t\tconst output: AnalyzeResult = {\n\t\t\tbuffer,\n\t\t\tdata: imageB,\n\t\t\tmetrics: { ratio },\n\t\t};\n\t\tanalyzer.measure(output);\n\t\toutputMap.set({}, output);\n\n\t\tawait pool.join();\n\n\t\tif (!pool.terminated) {\n\t\t\tsetWorkers(undefined);\n\t\t\tonChange({ input: original, outputMap, seriesMeta, controlsMap: {} });\n\t\t}\n\n\t\tpool.terminate();\n\t}\n\n\tfunction stop() {\n\t\tworkers!.terminate();\n\t\tsetWorkers(undefined);\n\t}\n\n\tif (!isOpen) {\n\t\treturn null;\n\t}\n\n\tif (selectFile) {\n\t\treturn <CompareDialog\n\t\t\tdata={data}\n\t\t\tonAccept={handleAccept}\n\t\t\tonCancel={handleSelectCancel}\n\t\t/>;\n\t}\n\n\tif (workers) {\n\t\treturn (\n\t\t\t<ProgressDialog\n\t\t\t\tvalue={progress.value}\n\t\t\t\tmax={progress.max}\n\t\t\t\terror={error}\n\t\t\t\tonCancel={stop}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Dialog\n\t\t\tname=\"Compare config\"\n\t\t\tclassName={styles.dialog}\n\t\t\tonClose={onClose}\n\t\t>\n\t\t\t<h2 className={styles.title}>\n\t\t\t\tMeasure Options\n\t\t\t</h2>\n\t\t\t<MeasurePanel\n\t\t\t\tvalue={measure}\n\t\t\t\tonChange={setMeasure}\n\t\t\t/>\n\t\t\t<div className=\"dialog-actions\">\n\t\t\t\t<Button\n\t\t\t\t\tonClick={() => setSelectFile(true)}\n\t\t\t\t>\n\t\t\t\t\tSelect files...\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"second\"\n\t\t\t\t\tonClick={onClose}\n\t\t\t\t>\n\t\t\t\t\tCancel\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={handleStart}\n\t\t\t\t>\n\t\t\t\t\tNext\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Dialog>\n\t);\n}\n","import { useState } from \"react\";\nimport CompressSession from \"./CompressSession\";\nimport IntroPage from \"./IntroPage\";\nimport AnalyzePage from \"./AnalyzePage\";\nimport ComparePage from \"./ComparePage\";\nimport CompareSession from \"./CompareSession\";\nimport { ControlType, OptionsKey } from \"../form\";\nimport { AnalyzeResult, ObjectKeyMap } from \"../analyzing\";\n\nexport interface InputImage {\n\tfile: File;\n\traw: ImageData;\n}\n\nexport type ControlsMap = Record<string, ControlType[]>;\n\nexport interface MetricMeta {\n\tkey: string;\n\tname: string;\n}\n\nexport interface AnalyzeContext {\n\tinput: InputImage;\n\tcontrolsMap: ControlsMap;\n\toutputMap: ObjectKeyMap<OptionsKey, AnalyzeResult>;\n\tseriesMeta: MetricMeta[];\n}\n\ninterface ContextWithId extends AnalyzeContext {\n\tid: number;\n}\n\nenum Mode {\n\tNone,\n\tCompress,\n\tCompare,\n}\n\nexport default function App() {\n\tconst [mode, setMode] = useState(Mode.None);\n\tconst [isOpen, setOpen] = useState(true);\n\tconst [result, setResult] = useState<ContextWithId>();\n\n\tfunction handleChange(value: AnalyzeContext) {\n\t\tsetOpen(false);\n\t\t(value as ContextWithId).id = (result?.id || 1) + 1;\n\t\tsetResult(value as ContextWithId);\n\t}\n\n\tfunction createSession(mode: Mode) {\n\t\tsetMode(mode);\n\t\tsetOpen(true);\n\t}\n\n\tlet Session: any;\n\tlet Page: any;\n\n\tswitch (mode) {\n\t\tcase Mode.Compare:\n\t\t\tSession = CompareSession;\n\t\t\tPage = ComparePage;\n\t\t\tbreak;\n\t\tcase Mode.Compress:\n\t\t\tSession = CompressSession;\n\t\t\tPage = AnalyzePage;\n\t\t\tbreak;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{result\n\t\t\t\t? <Page\n\t\t\t\t\tkey={result.id} // avoid reuse of control state\n\t\t\t\t\tresult={result}\n\t\t\t\t\tonStart={() => setOpen(true)}\n\t\t\t\t\tonClose={() => setResult(undefined)}\n\t\t\t\t/>\n\t\t\t\t: <IntroPage\n\t\t\t\t\tonEncode={() => createSession(Mode.Compress)}\n\t\t\t\t\tonCompare={() => createSession(Mode.Compare)}\n\t\t\t\t/>\n\t\t\t}\n\t\t\t{\n\t\t\t\tSession && <Session\n\t\t\t\t\tisOpen={isOpen}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tonClose={() => setOpen(false)}\n\t\t\t\t/>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\nimport packageJson from \"../package.json\";\nimport \"./index.scss\";\nimport App from \"./app\";\n\nfunction detectBrowserSupport() {\n\ttry {\n\t\tnew File([], \"\");\n\t} catch {\n\t\treturn false;\n\t}\n\tif (!CSS.supports(\"mix-blend-mode: difference\")) {\n\t\treturn false;\n\t}\n\treturn \"AbortController\" in window;\n}\n\nif (!detectBrowserSupport()) {\n\talert(\"ICAnalyzer does not support this browser, please switch to a modern one\");\n}\n\n// Can't use { name, version } = packageJson, because webpack doesn't support tree shaking for object destructuring.\n// SENTRY_DSN is only defined on web build.\nif (process.env.SENTRY_DSN !== null) {\n\tSentry.init({\n\t\tdsn: process.env.SENTRY_DSN,\n\t\tintegrations: [\n\t\t\tnew Integrations.BrowserTracing(),\n\t\t],\n\t\ttracesSampleRate: 0.2,\n\t\trelease: `${packageJson.name}@${packageJson.version}`,\n\t});\n}\n\nReactDOM.render(<App/>, document.getElementById(\"root\"));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","// This function allow to reference all chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkic_analyzer\"] = self[\"webpackChunkic_analyzer\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [469], () => (__webpack_require__(7990)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}