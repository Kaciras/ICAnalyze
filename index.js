(()=>{var e,t={9650:(e,t,n)=>{var a,r=(a=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,r,i;e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){r=e,i=t}));var o,s,c,l,u,d={};for(o in t)t.hasOwnProperty(o)&&(d[o]=t[o]);s="object"==typeof window,c="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,u=!s&&!l&&!c;var f,h,p,m,v="";l?(v=c?n(5783).dirname(v)+"/":"//",f=function(e,t){return p||(p=n(2203)),m||(m=n(5783)),e=m.normalize(e),p.readFileSync(e,t?null:"utf8")},h=function(e){return(e=f(e,!0)).buffer||(e=new Uint8Array(e)),w(e.buffer),e},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",$),t.inspect=function(){return"[Emscripten Module object]"}):u?("undefined"!=typeof read&&(f=function(e){return read(e)}),h=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||c)&&(c?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),a&&(v=a),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},c&&(h=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var g,b=t.print||console.log.bind(console),y=t.printErr||console.warn.bind(console);for(o in d)d.hasOwnProperty(o)&&(t[o]=d[o]);d=null,t.wasmBinary&&(g=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime,"object"!=typeof WebAssembly&&$("no native wasm support detected");var x,j=!1;function w(e,t){e||$("Assertion failed: "+t)}var O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){var a=t+n;for(n=t;e[n]&&!(n>=a);)++n;if(16<n-t&&e.subarray&&O)return O.decode(e.subarray(t,n));for(a="";t<n;){var r=e[t++];if(128&r){var i=63&e[t++];if(192==(224&r))a+=String.fromCharCode((31&r)<<6|i);else{var o=63&e[t++];65536>(r=224==(240&r)?(15&r)<<12|i<<6|o:(7&r)<<18|i<<12|o<<6|63&e[t++])?a+=String.fromCharCode(r):(r-=65536,a+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else a+=String.fromCharCode(r)}return a}var _,N,S,k,E,P,A,V,T,M="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function R(e,t){for(var n=e>>1,a=n+t/2;!(n>=a)&&E[n];)++n;if(32<(n<<=1)-e&&M)return M.decode(S.subarray(e,n));for(n="",a=0;!(a>=t/2);++a){var r=k[e+2*a>>1];if(0==r)break;n+=String.fromCharCode(r)}return n}function F(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var a=t;n=(n-=2)<2*e.length?n/2:e.length;for(var r=0;r<n;++r)k[t>>1]=e.charCodeAt(r),t+=2;return k[t>>1]=0,t-a}function I(e){return 2*e.length}function L(e,t){for(var n=0,a="";!(n>=t/4);){var r=P[e+4*n>>2];if(0==r)break;++n,65536<=r?(r-=65536,a+=String.fromCharCode(55296|r>>10,56320|1023&r)):a+=String.fromCharCode(r)}return a}function z(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var a=t;n=a+n-4;for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),P[t>>2]=i,(t+=4)+4>n)break}return P[t>>2]=0,t-a}function W(e){for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);55296<=a&&57343>=a&&++n,t+=4}return t}function B(){var e=x.buffer;_=e,t.HEAP8=N=new Int8Array(e),t.HEAP16=k=new Int16Array(e),t.HEAP32=P=new Int32Array(e),t.HEAPU8=S=new Uint8Array(e),t.HEAPU16=E=new Uint16Array(e),t.HEAPU32=A=new Uint32Array(e),t.HEAPF32=V=new Float32Array(e),t.HEAPF64=T=new Float64Array(e)}var U,D=[],q=[],H=[],Y=[];function Z(){var e=t.preRun.shift();D.unshift(e)}var X=0,G=null,Q=null;function $(e){throw t.onAbort&&t.onAbort(e),y(e),j=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),i(e),e}function J(e){var t=ee;return String.prototype.startsWith?t.startsWith(e):0===t.indexOf(e)}function K(){return J("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={};var ee="diff.wasm";if(!K()){var te=ee;ee=t.locateFile?t.locateFile(te,v):v+te}function ne(){var e=ee;try{if(e==ee&&g)return new Uint8Array(g);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}function ae(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n(t);else{var a=n.qa;"number"==typeof a?void 0===n.ga?U.get(a)():U.get(a)(n.ga):a(void 0===n.ga?null:n.ga)}}}function re(e){this.O=e-16,this.Ga=function(e){P[this.O+8>>2]=e},this.Da=function(e){P[this.O+0>>2]=e},this.Ea=function(){P[this.O+4>>2]=0},this.Ca=function(){N[this.O+12>>0]=0},this.Fa=function(){N[this.O+13>>0]=0},this.xa=function(e,t){this.Ga(e),this.Da(t),this.Ea(),this.Ca(),this.Fa()}}var ie={};function oe(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function se(e){return this.fromWireType(A[e>>2])}var ce={},le={},ue={};function de(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function fe(e,t){return e=de(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function he(e){var t=Error,n=fe(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var pe=void 0;function me(e){throw new pe(e)}function ve(e,t,n){function a(t){(t=n(t)).length!==e.length&&me("Mismatched type converter count");for(var a=0;a<e.length;++a)we(e[a],t[a])}e.forEach((function(e){ue[e]=t}));var r=Array(t.length),i=[],o=0;t.forEach((function(e,t){le.hasOwnProperty(e)?r[t]=le[e]:(i.push(e),ce.hasOwnProperty(e)||(ce[e]=[]),ce[e].push((function(){r[t]=le[e],++o===i.length&&a(r)})))})),0===i.length&&a(r)}function ge(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var be=void 0;function ye(e){for(var t="";S[e];)t+=be[S[e++]];return t}var xe=void 0;function je(e){throw new xe(e)}function we(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var a=t.name;if(e||je('type "'+a+'" must have a positive integer typeid pointer'),le.hasOwnProperty(e)){if(n.wa)return;je("Cannot register type '"+a+"' twice")}le[e]=t,delete ue[e],ce.hasOwnProperty(e)&&(t=ce[e],delete ce[e],t.forEach((function(e){e()})))}function Oe(e){return{count:e.count,Z:e.Z,aa:e.aa,O:e.O,R:e.R,S:e.S,T:e.T}}function Ce(e){je(e.N.R.P.name+" instance already deleted")}var _e=!1;function Ne(){}function Se(e){--e.count.value,0===e.count.value&&(e.S?e.T.X(e.S):e.R.P.X(e.O))}function ke(e){return"undefined"==typeof FinalizationGroup?(ke=function(e){return e},e):(_e=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next())(t=t.value).O?Se(t):console.warn("object already deleted: "+t.O)})),Ne=function(e){_e.unregister(e.N)},(ke=function(e){return _e.register(e,e.N,e.N),e})(e))}var Ee=void 0,Pe=[];function Ae(){for(;Pe.length;){var e=Pe.pop();e.N.Z=!1,e.delete()}}function Ve(){}var Te={};function Me(e,t,n){if(void 0===e[t].W){var a=e[t];e[t]=function(){return e[t].W.hasOwnProperty(arguments.length)||je("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].W+")!"),e[t].W[arguments.length].apply(this,arguments)},e[t].W=[],e[t].W[a.da]=a}}function Re(e,t,n,a,r,i,o,s){this.name=e,this.constructor=t,this.$=n,this.X=a,this.U=r,this.ra=i,this.ba=o,this.oa=s,this.Aa=[]}function Fe(e,t,n){for(;t!==n;)t.ba||je("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.ba(e),t=t.U;return e}function Ie(e,t){return null===t?(this.ha&&je("null is not a valid "+this.name),0):(t.N||je('Cannot pass "'+et(t)+'" as a '+this.name),t.N.O||je("Cannot pass deleted object as a pointer of type "+this.name),Fe(t.N.O,t.N.R.P,this.P))}function Le(e,t){if(null===t){if(this.ha&&je("null is not a valid "+this.name),this.fa){var n=this.ia();return null!==e&&e.push(this.X,n),n}return 0}if(t.N||je('Cannot pass "'+et(t)+'" as a '+this.name),t.N.O||je("Cannot pass deleted object as a pointer of type "+this.name),!this.ea&&t.N.R.ea&&je("Cannot convert argument of type "+(t.N.T?t.N.T.name:t.N.R.name)+" to parameter type "+this.name),n=Fe(t.N.O,t.N.R.P,this.P),this.fa)switch(void 0===t.N.S&&je("Passing raw pointer to smart pointer is illegal"),this.Ka){case 0:t.N.T===this?n=t.N.S:je("Cannot convert argument of type "+(t.N.T?t.N.T.name:t.N.R.name)+" to parameter type "+this.name);break;case 1:n=t.N.S;break;case 2:if(t.N.T===this)n=t.N.S;else{var a=t.clone();n=this.Ba(n,Ke((function(){a.delete()}))),null!==e&&e.push(this.X,n)}break;default:je("Unsupporting sharing policy")}return n}function ze(e,t){return null===t?(this.ha&&je("null is not a valid "+this.name),0):(t.N||je('Cannot pass "'+et(t)+'" as a '+this.name),t.N.O||je("Cannot pass deleted object as a pointer of type "+this.name),t.N.R.ea&&je("Cannot convert argument of type "+t.N.R.name+" to parameter type "+this.name),Fe(t.N.O,t.N.R.P,this.P))}function We(e,t,n){return t===n?e:void 0===n.U||null===(e=We(e,t,n.U))?null:n.oa(e)}var Be={};function Ue(e,t){return t.R&&t.O||me("makeClassHandle requires ptr and ptrType"),!!t.T!=!!t.S&&me("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ke(Object.create(e,{N:{value:t}}))}function De(e,t,n,a){this.name=e,this.P=t,this.ha=n,this.ea=a,this.fa=!1,this.X=this.Ba=this.ia=this.ma=this.Ka=this.za=void 0,void 0!==t.U?this.toWireType=Le:(this.toWireType=a?Ie:ze,this.V=null)}function qe(e,n){var a=-1!=(e=ye(e)).indexOf("j")?function(e,n){w(0<=e.indexOf("j"),"getDynCaller should only be called with i64 sigs");var a=[];return function(){a.length=arguments.length;for(var r=0;r<arguments.length;r++)a[r]=arguments[r];return-1!=e.indexOf("j")?a&&a.length?t["dynCall_"+e].apply(null,[n].concat(a)):t["dynCall_"+e].call(null,n):U.get(n).apply(null,a)}}(e,n):U.get(n);return"function"!=typeof a&&je("unknown function pointer with signature "+e+": "+n),a}var He=void 0;function Ye(e){var t=ye(e=bt(e));return gt(e),t}function Ze(e,t){var n=[],a={};throw t.forEach((function e(t){a[t]||le[t]||(ue[t]?ue[t].forEach(e):(n.push(t),a[t]=!0))})),new He(e+": "+n.map(Ye).join([", "]))}function Xe(e,t){for(var n=[],a=0;a<e;a++)n.push(P[(t>>2)+a]);return n}function Ge(e){var t=Function;if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=fe(t.name||"unknownFunctionName",(function(){}));return n.prototype=t.prototype,n=new n,(e=t.apply(n,e))instanceof Object?e:n}var Qe=[],$e=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Je(e){4<e&&0==--$e[e].ja&&($e[e]=void 0,Qe.push(e))}function Ke(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Qe.length?Qe.pop():$e.length;return $e[t]={ja:1,value:e},t}}function et(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function tt(e,t){switch(t){case 2:return function(e){return this.fromWireType(V[e>>2])};case 3:return function(e){return this.fromWireType(T[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function nt(e,t,n){switch(t){case 0:return n?function(e){return N[e]}:function(e){return S[e]};case 1:return n?function(e){return k[e>>1]}:function(e){return E[e>>1]};case 2:return n?function(e){return P[e>>2]}:function(e){return A[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var at={};function rt(e){var t=at[e];return void 0===t?ye(e):t}var it=[];function ot(e){return e||je("Cannot use deleted val. handle = "+e),$e[e].value}function st(){return"object"==typeof globalThis?globalThis:Function("return this")()}function ct(e,t){var n=le[e];return void 0===n&&je(t+" has unknown type "+Ye(e)),n}var lt={},ut=[null,[],[]];pe=t.InternalError=he("InternalError");for(var dt=Array(256),ft=0;256>ft;++ft)dt[ft]=String.fromCharCode(ft);be=dt,xe=t.BindingError=he("BindingError"),Ve.prototype.isAliasOf=function(e){if(!(this instanceof Ve&&e instanceof Ve))return!1;var t=this.N.R.P,n=this.N.O,a=e.N.R.P;for(e=e.N.O;t.U;)n=t.ba(n),t=t.U;for(;a.U;)e=a.ba(e),a=a.U;return t===a&&n===e},Ve.prototype.clone=function(){if(this.N.O||Ce(this),this.N.aa)return this.N.count.value+=1,this;var e=ke(Object.create(Object.getPrototypeOf(this),{N:{value:Oe(this.N)}}));return e.N.count.value+=1,e.N.Z=!1,e},Ve.prototype.delete=function(){this.N.O||Ce(this),this.N.Z&&!this.N.aa&&je("Object already scheduled for deletion"),Ne(this),Se(this.N),this.N.aa||(this.N.S=void 0,this.N.O=void 0)},Ve.prototype.isDeleted=function(){return!this.N.O},Ve.prototype.deleteLater=function(){return this.N.O||Ce(this),this.N.Z&&!this.N.aa&&je("Object already scheduled for deletion"),Pe.push(this),1===Pe.length&&Ee&&Ee(Ae),this.N.Z=!0,this},De.prototype.sa=function(e){return this.ma&&(e=this.ma(e)),e},De.prototype.ka=function(e){this.X&&this.X(e)},De.prototype.argPackAdvance=8,De.prototype.readValueFromPointer=se,De.prototype.deleteObject=function(e){null!==e&&e.delete()},De.prototype.fromWireType=function(e){function t(){return this.fa?Ue(this.P.$,{R:this.za,O:n,T:this,S:e}):Ue(this.P.$,{R:this,O:e})}var n=this.sa(e);if(!n)return this.ka(e),null;var a=function(e,t){for(void 0===t&&je("ptr should not be undefined");e.U;)t=e.ba(t),e=e.U;return Be[t]}(this.P,n);if(void 0!==a)return 0===a.N.count.value?(a.N.O=n,a.N.S=e,a.clone()):(a=a.clone(),this.ka(e),a);if(a=this.P.ra(n),!(a=Te[a]))return t.call(this);a=this.ea?a.na:a.pointerType;var r=We(n,this.P,a.P);return null===r?t.call(this):this.fa?Ue(a.P.$,{R:a,O:r,T:this,S:e}):Ue(a.P.$,{R:a,O:r})},t.getInheritedInstanceCount=function(){return Object.keys(Be).length},t.getLiveInheritedInstances=function(){var e,t=[];for(e in Be)Be.hasOwnProperty(e)&&t.push(Be[e]);return t},t.flushPendingDeletes=Ae,t.setDelayFunction=function(e){Ee=e,Pe.length&&Ee&&Ee(Ae)},He=t.UnboundTypeError=he("UnboundTypeError"),t.count_emval_handles=function(){for(var e=0,t=5;t<$e.length;++t)void 0!==$e[t]&&++e;return e},t.get_first_emval=function(){for(var e=5;e<$e.length;++e)if(void 0!==$e[e])return $e[e];return null},q.push({qa:function(){mt()}});var ht={b:function(e,t,n,a){$("Assertion failed: "+(e?C(S,e,void 0):"")+", at: "+[t?t?C(S,t,void 0):"":"unknown filename",n,a?a?C(S,a,void 0):"":"unknown function"])},B:function(e){return vt(e+16)+16},E:function(){},A:function(e,t,n){throw new re(e).xa(t,n),e},i:function(e){var t=ie[e];delete ie[e];var n=t.ia,a=t.X,r=t.la;ve([e],r.map((function(e){return e.va})).concat(r.map((function(e){return e.Ia}))),(function(e){var i={};return r.forEach((function(t,n){var a=e[n],o=t.ta,s=t.ua,c=e[n+r.length],l=t.Ha,u=t.Ja;i[t.pa]={read:function(e){return a.fromWireType(o(s,e))},write:function(e,t){var n=[];l(u,e,c.toWireType(n,t)),oe(n)}}})),[{name:t.name,fromWireType:function(e){var t,n={};for(t in i)n[t]=i[t].read(e);return a(e),n},toWireType:function(e,t){for(var r in i)if(!(r in t))throw new TypeError('Missing field:  "'+r+'"');var o=n();for(r in i)i[r].write(o,t[r]);return null!==e&&e.push(a,o),o},argPackAdvance:8,readValueFromPointer:se,V:a}]}))},y:function(e,t,n,a,r){var i=ge(n);we(e,{name:t=ye(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?a:r},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var a=N;else if(2===n)a=k;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);a=P}return this.fromWireType(a[e>>i])},V:null})},t:function(e,n,a,r,i,o,s,c,l,u,d,f,h){d=ye(d),o=qe(i,o),c&&(c=qe(s,c)),u&&(u=qe(l,u)),h=qe(f,h);var p=de(d);!function(e,n){t.hasOwnProperty(e)?(je("Cannot register public name '"+e+"' twice"),Me(t,e,e),t.hasOwnProperty(void 0)&&je("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),t[e].W[void 0]=n):t[e]=n}(p,(function(){Ze("Cannot construct "+d+" due to unbound types",[r])})),ve([e,n,a],r?[r]:[],(function(n){if(n=n[0],r)var a=n.P,i=a.$;else i=Ve.prototype;n=fe(p,(function(){if(Object.getPrototypeOf(this)!==s)throw new xe("Use 'new' to construct "+d);if(void 0===l.Y)throw new xe(d+" has no accessible constructor");var e=l.Y[arguments.length];if(void 0===e)throw new xe("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.Y).toString()+") parameters instead!");return e.apply(this,arguments)}));var s=Object.create(i,{constructor:{value:n}});n.prototype=s;var l=new Re(d,n,s,h,a,o,c,u);a=new De(d,l,!0,!1),i=new De(d+"*",l,!1,!1);var f=new De(d+" const*",l,!1,!0);return Te[e]={pointerType:i,na:f},function(e,n){t.hasOwnProperty(e)||me("Replacing nonexistant public symbol"),t[e]=n,t[e].da=void 0}(p,n),[a,i,f]}))},s:function(e,t,n,a,r,i){w(0<t);var o=Xe(t,n);r=qe(a,r);var s=[i],c=[];ve([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.P.Y&&(e.P.Y=[]),void 0!==e.P.Y[t-1])throw new xe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.P.Y[t-1]=function(){Ze("Cannot construct "+e.name+" due to unbound types",o)},ve([],o,(function(a){return e.P.Y[t-1]=function(){arguments.length!==t-1&&je(n+" called with "+arguments.length+" arguments, expected "+(t-1)),c.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=a[e].toWireType(c,arguments[e-1]);return e=r.apply(null,s),oe(c),a[0].fromWireType(e)},[]})),[]}))},r:function(e,t,n,a,r,i,o,s){var c=Xe(n,a);t=ye(t),i=qe(r,i),ve([],[e],(function(e){function a(){Ze("Cannot call "+r+" due to unbound types",c)}var r=(e=e[0]).name+"."+t;s&&e.P.Aa.push(t);var l=e.P.$,u=l[t];return void 0===u||void 0===u.W&&u.className!==e.name&&u.da===n-2?(a.da=n-2,a.className=e.name,l[t]=a):(Me(l,t,r),l[t].W[n-2]=a),ve([],c,(function(a){var s=r,c=e,u=i,d=a.length;2>d&&je("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=null!==a[1]&&null!==c,h=!1;for(c=1;c<a.length;++c)if(null!==a[c]&&void 0===a[c].V){h=!0;break}var p="void"!==a[0].name,m="",v="";for(c=0;c<d-2;++c)m+=(0!==c?", ":"")+"arg"+c,v+=(0!==c?", ":"")+"arg"+c+"Wired";s="return function "+de(s)+"("+m+") {\nif (arguments.length !== "+(d-2)+") {\nthrowBindingError('function "+s+" called with ' + arguments.length + ' arguments, expected "+(d-2)+" args!');\n}\n",h&&(s+="var destructors = [];\n");var g=h?"destructors":"null";for(m="throwBindingError invoker fn runDestructors retType classParam".split(" "),u=[je,u,o,oe,a[0],a[1]],f&&(s+="var thisWired = classParam.toWireType("+g+", this);\n"),c=0;c<d-2;++c)s+="var arg"+c+"Wired = argType"+c+".toWireType("+g+", arg"+c+"); // "+a[c+2].name+"\n",m.push("argType"+c),u.push(a[c+2]);if(f&&(v="thisWired"+(0<v.length?", ":"")+v),s+=(p?"var rv = ":"")+"invoker(fn"+(0<v.length?", ":"")+v+");\n",h)s+="runDestructors(destructors);\n";else for(c=f?1:2;c<a.length;++c)d=1===c?"thisWired":"arg"+(c-2)+"Wired",null!==a[c].V&&(s+=d+"_dtor("+d+"); // "+a[c].name+"\n",m.push(d+"_dtor"),u.push(a[c].V));return p&&(s+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),m.push(s+"}\n"),a=Ge(m).apply(null,u),void 0===l[t].W?(a.da=n-2,l[t]=a):l[t].W[n-2]=a,[]})),[]}))},x:function(e,t){we(e,{name:t=ye(t),fromWireType:function(e){var t=$e[e].value;return Je(e),t},toWireType:function(e,t){return Ke(t)},argPackAdvance:8,readValueFromPointer:se,V:null})},k:function(e,t,n){n=ge(n),we(e,{name:t=ye(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+et(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:tt(t,n),V:null})},d:function(e,t,n,a,r){function i(e){return e}t=ye(t),-1===r&&(r=4294967295);var o=ge(n);if(0===a){var s=32-8*n;i=function(e){return e<<s>>>s}}var c=-1!=t.indexOf("unsigned");we(e,{name:t,fromWireType:i,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+et(n)+'" to '+this.name);if(n<a||n>r)throw new TypeError('Passing a number "'+et(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+a+", "+r+"]!");return c?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:nt(t,o,0!==a),V:null})},c:function(e,t,n){function a(e){var t=A;return new r(_,t[1+(e>>=2)],t[e])}var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];we(e,{name:n=ye(n),fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{wa:!0})},l:function(e,t){var n="std::string"===(t=ye(t));we(e,{name:t,fromWireType:function(e){var t=A[e>>2];if(n)for(var a=e+4,r=0;r<=t;++r){var i=e+4+r;if(r==t||0==S[i]){if(a=a?C(S,a,i-a):"",void 0===o)var o=a;else o+=String.fromCharCode(0),o+=a;a=i+1}}else{for(o=Array(t),r=0;r<t;++r)o[r]=String.fromCharCode(S[e+4+r]);o=o.join("")}return gt(e),o},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var a="string"==typeof t;a||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||je("Cannot pass non-string to std::string");var r=(n&&a?function(){for(var e=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++n)),127>=a?++e:e=2047>=a?e+2:65535>=a?e+3:e+4}return e}:function(){return t.length})(),i=vt(4+r+1);if(A[i>>2]=r,n&&a)!function(e,t,n){var a=S;if(0<n){n=t+n-1;for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),127>=i){if(t>=n)break;a[t++]=i}else{if(2047>=i){if(t+1>=n)break;a[t++]=192|i>>6}else{if(65535>=i){if(t+2>=n)break;a[t++]=224|i>>12}else{if(t+3>=n)break;a[t++]=240|i>>18,a[t++]=128|i>>12&63}a[t++]=128|i>>6&63}a[t++]=128|63&i}}a[t]=0}}(t,i+4,r+1);else if(a)for(a=0;a<r;++a){var o=t.charCodeAt(a);255<o&&(gt(i),je("String has UTF-16 code units that do not fit in 8 bits")),S[i+4+a]=o}else for(a=0;a<r;++a)S[i+4+a]=t[a];return null!==e&&e.push(gt,i),i},argPackAdvance:8,readValueFromPointer:se,V:function(e){gt(e)}})},g:function(e,t,n){if(n=ye(n),2===t)var a=R,r=F,i=I,o=function(){return E},s=1;else 4===t&&(a=L,r=z,i=W,o=function(){return A},s=2);we(e,{name:n,fromWireType:function(e){for(var n,r=A[e>>2],i=o(),c=e+4,l=0;l<=r;++l){var u=e+4+l*t;l!=r&&0!=i[u>>s]||(c=a(c,u-c),void 0===n?n=c:(n+=String.fromCharCode(0),n+=c),c=u+t)}return gt(e),n},toWireType:function(e,a){"string"!=typeof a&&je("Cannot pass non-string to C++ string type "+n);var o=i(a),c=vt(4+o+t);return A[c>>2]=o>>s,r(a,c+4,o+t),null!==e&&e.push(gt,c),c},argPackAdvance:8,readValueFromPointer:se,V:function(e){gt(e)}})},m:function(e,t,n,a,r,i){ie[e]={name:ye(t),ia:qe(n,a),X:qe(r,i),la:[]}},e:function(e,t,n,a,r,i,o,s,c,l){ie[e].la.push({pa:ye(t),va:n,ta:qe(a,r),ua:i,Ia:o,Ha:qe(s,c),Ja:l})},z:function(e,t){we(e,{ya:!0,name:t=ye(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:function(e,t,n,a){(e=it[e])(t=ot(t),n=rt(n),null,a)},f:Je,p:function(e){return 0===e?Ke(st()):(e=rt(e),Ke(st()[e]))},o:function(e,t){for(var n=(t=function(e,t){for(var n=Array(e),a=0;a<e;++a)n[a]=ct(P[(t>>2)+a],"parameter "+a);return n}(e,t))[0],a=n.name+"_$"+t.slice(1).map((function(e){return e.name})).join("_")+"$",r=["retType"],i=[n],o="",s=0;s<e-1;++s)o+=(0!==s?", ":"")+"arg"+s,r.push("argType"+s),i.push(t[1+s]);a="return function "+de("methodCaller_"+a)+"(handle, name, destructors, args) {\n";var c=0;for(s=0;s<e-1;++s)a+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=t[s+1].argPackAdvance;for(a+="    var rv = handle[name]("+o+");\n",s=0;s<e-1;++s)t[s+1].deleteObject&&(a+="    argType"+s+".deleteObject(arg"+s+");\n");return n.ya||(a+="    return retType.toWireType(destructors, rv);\n"),r.push(a+"};\n"),function(e){var t=it.length;return it.push(e),t}(e=Ge(r).apply(null,i))},h:function(e){4<e&&($e[e].ja+=1)},D:function(e,n,a,r){e=ot(e);var i=lt[n];if(!i){i="";for(var o=0;o<n;++o)i+=(0!==o?", ":"")+"arg"+o;var s="return function emval_allocator_"+n+"(constructor, argTypes, args) {\n";for(o=0;o<n;++o)s+="var argType"+o+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+o+'], "parameter '+o+'");\nvar arg'+o+" = argType"+o+".readValueFromPointer(args);\nargs += argType"+o+"['argPackAdvance'];\n";i=new Function("requireRegisteredType","Module","__emval_register",s+"var obj = new constructor("+i+");\nreturn __emval_register(obj);\n}\n")(ct,t,Ke),lt[n]=i}return i(e,a,r)},C:function(){return Ke([])},q:function(e,t){return Ke(e=(e=ct(e,"_emval_take_value")).readValueFromPointer(t))},a:function(){$()},v:function(e,t,n){S.copyWithin(e,t,t+n)},w:function(e){e>>>=0;var t=S.length;if(2147483648<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296),0<(a=Math.max(16777216,e,a))%65536&&(a+=65536-a%65536);e:{try{x.grow(Math.min(2147483648,a)-_.byteLength+65535>>>16),B();var r=1;break e}catch(e){}r=void 0}if(r)return!0}return!1},j:function(e,t,n,a){for(var r=0,i=0;i<n;i++){for(var o=P[t+8*i>>2],s=P[t+(8*i+4)>>2],c=0;c<s;c++){var l=S[o+c],u=ut[e];0===l||10===l?((1===e?b:y)(C(u,0)),u.length=0):u.push(l)}r+=s}return P[a>>2]=r,0},u:function(){}};!function(){function e(e){t.asm=e.exports,x=t.asm.F,B(),U=t.asm.G,X--,t.monitorRunDependencies&&t.monitorRunDependencies(X),0==X&&(null!==G&&(clearInterval(G),G=null),Q&&(e=Q,Q=null,e()))}function n(t){e(t.instance)}function a(e){return(g||!s&&!c||"function"!=typeof fetch||J("file://")?Promise.resolve().then((function(){return ne()})):fetch(ee,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ee+"'";return e.arrayBuffer()})).catch((function(){return ne()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),$(e)}))}var r={a:ht};if(X++,t.monitorRunDependencies&&t.monitorRunDependencies(X),t.instantiateWasm)try{return t.instantiateWasm(r,e)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||K()||J("file://")||"function"!=typeof fetch?a(n):fetch(ee,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(n,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(i)}();var pt,mt=t.___wasm_call_ctors=function(){return(mt=t.___wasm_call_ctors=t.asm.H).apply(null,arguments)},vt=t._malloc=function(){return(vt=t._malloc=t.asm.I).apply(null,arguments)},gt=t._free=function(){return(gt=t._free=t.asm.J).apply(null,arguments)},bt=t.___getTypeName=function(){return(bt=t.___getTypeName=t.asm.K).apply(null,arguments)};function yt(){function e(){if(!pt&&(pt=!0,t.calledRun=!0,!j)){if(ae(q),ae(H),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();Y.unshift(e)}ae(Y)}}if(!(0<X)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)Z();ae(D),0<X||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.___embind_register_native_and_builtin_types=function(){return(t.___embind_register_native_and_builtin_types=t.asm.L).apply(null,arguments)},t.dynCall_jiji=function(){return(t.dynCall_jiji=t.asm.M).apply(null,arguments)},Q=function e(){pt||yt(),pt||(Q=e)},t.run=yt,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return yt(),e.ready});e.exports=r},1023:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{K:()=>j,H:()=>x});var r={};n.r(r),n.d(r,{OptionsPanel:()=>st,encode:()=>lt,extension:()=>tt,getOptionsList:()=>ct,initOptionsState:()=>ot,mimeType:()=>et,name:()=>Ke});var i={};n.r(i),n.d(i,{OptionsPanel:()=>vt,encode:()=>bt,extension:()=>ht,getOptionsList:()=>gt,initOptionsState:()=>mt,mimeType:()=>ft,name:()=>dt});var o={};n.r(o),n.d(o,{OptionsPanel:()=>_t,encode:()=>St,extension:()=>wt,getOptionsList:()=>Nt,initOptionsState:()=>Ct,mimeType:()=>jt,name:()=>xt});var s={};n.r(s),n.d(s,{OptionsPanel:()=>Rt,Subsampling:()=>Vt,encode:()=>It,extension:()=>At,getOptionsList:()=>Ft,initOptionsState:()=>Mt,mimeType:()=>Pt,name:()=>Et});var c={};n.r(c),n.d(c,{Csp:()=>Ut,OptionsPanel:()=>Yt,UVMode:()=>Bt,encode:()=>Xt,extension:()=>Wt,getOptionsList:()=>Zt,initOptionsState:()=>Ht,mimeType:()=>zt,name:()=>Lt});var l=n(4637),u=n(7995),d=n(7737),f=n(7996),h=n(9496),p=n(4279);const m=new Map;async function v(e){const t=URL.createObjectURL(e);try{return await async function(e){const t=new Image;t.decoding="async",t.src=e;const n=new Promise(((e,n)=>{t.onload=()=>e(),t.onerror=()=>n(Error("Image loading error"))}));return t.decode&&await t.decode().catch((()=>null)),await n,t}(t)}finally{URL.revokeObjectURL(t)}}async function g(e){const t="createImageBitmap"in self?await createImageBitmap(e):await v(e),n=document.createElement("canvas"),{width:a,height:r}=t;n.width=a,n.height=r;const i=n.getContext("2d");if(!i)throw new Error("Canvas not initialized");return i.drawImage(t,0,0),i.getImageData(0,0,a,r)}async function b(e){e=function(e){const t=(new DOMParser).parseFromString(e,"image/svg+xml"),n=t.documentElement;if(n.getAttribute("width")&&n.getAttribute("height"))return e;const a=n.getAttribute("viewBox");if(null===a)throw Error("SVG must have width/height or viewBox");const[,,r,i]=a.split(/\s+/);return n.setAttribute("width",r),n.setAttribute("height",i),(new XMLSerializer).serializeToString(t)}(e);const t=new Blob([e],{type:"image/svg+xml"});return function(e,t={}){const{width:n=e.width,height:a=e.height,sx:r=0,sy:i=0,sw:o=e.width,sh:s=e.height}=t,c=document.createElement("canvas");c.width=n,c.height=a;const l=c.getContext("2d");if(!l)throw new Error("Could not create canvas context");return l.drawImage(e,r,i,o,s,0,0,n,a),l.getImageData(0,0,n,a)}(await v(t))}async function y(e,t){const{type:n}=e;if("image/svg+xml"===n)return e.text().then(b);if(await function(e){if(!m.has(e)){const t=(async()=>{const t=document.createElement("picture"),n=document.createElement("img"),a=document.createElement("source");return a.srcset="data:,x",a.type=e,t.append(a,n),await 0,!!n.currentSrc})();m.set(e,t)}return m.get(e)}(n))return g(e);null!=t||(t=(0,p.Ud)(x()));const a=await e.arrayBuffer();switch(n){case"image/webp":return t.webpDecode(a);case"image/avif":return t.avifDecode(a);case"image/jxl":return t.jxlDecode(a);case"image/webp2":return t.webp2Decode(a);default:return g(e)}}function x(){return new Worker(new URL(n.p+n.u(299),n.b))}new Map([[/^%PDF-/,"application/pdf"],[/^GIF87a/,"image/gif"],[/^GIF89a/,"image/gif"],[/^\x89PNG\x0D\x0A\x1A\x0A/,"image/png"],[/^\xFF\xD8\xFF/,"image/jpeg"],[/^BM/,"image/bmp"],[/^I I/,"image/tiff"],[/^II*/,"image/tiff"],[/^MM\x00*/,"image/tiff"],[/^RIFF....WEBPVP8[LX ]/,"image/webp"],[/^\xF4\xFF\x6F/,"image/webp2"],[/^\x00\x00\x00 ftypavif\x00\x00\x00\x00/,"image/avif"],[/^\xff\x0a/,"image/jxl"],[/^\x00\x00\x00\x0cJXL \x0d\x0a\x87\x0a/,"image/jxl"]]);class j{onProgress(){}async encode(e,t,n){const{buffer:a,time:r}=await t.encode(n,e);this.onProgress();const i=new Blob([a],{type:t.mimeType});return{time:r,buffer:a,data:await y(i,e)}}async measure(e,t,n){const{SSIM:a,PSNR:r,butteraugli:i}=n,o={};if(r&&(o.PSNR=await e.calcPSNR(t),this.onProgress()),a.enabled&&(o.SSIM=await e.calcSSIM(t,a.options),this.onProgress()),i.enabled){const[n,a]=await e.calcButteraugli(t,i.options);this.onProgress();const r=function(e,t,n){if(e.byteLength/t/n!=4)throw new Error("Buffer must be a 8-bit depth RGBA array");const a=document.createElement("canvas").getContext("2d");if(!a)throw new Error("Could not create canvas context");const r=a.createImageData(t,n);return r.data.set(new Uint8ClampedArray(e)),r}(a,t.width,t.height);o.butteraugli={source:n,heatMap:r}}return o}}var w=n(8481),O=n(2794),C=n(9573),_=n(8877),N=n(7721),S=n(5185);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var E=h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),P=h.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"});const A=function(e){return h.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),E,P)};function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var T=h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),M=h.createElement("path",{d:"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"});const R=function(e){return h.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),T,M)};function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var I=h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),L=h.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"});const z=function(e){return h.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),I,L)};function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var B=h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),U=h.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"});const D=function(e){return h.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),B,U)};var q=n(1626);const H=()=>{},Y=["","K","M","G","T","P","E","Z","Y"];function Z(e,t=1024){const n=Math.abs(e);if(0===n)return`${e.toFixed(2)} B`;const a=~~(Math.log2(n)/Math.log2(t));return`${(e/t**a).toFixed(2)} ${Y[a]}B`}function X(e){const{className:t,type:n,Icon:a,IconChecked:r,name:i,value:o,checked:s,disabled:c,onClick:u,onChange:d=H,onValueChange:f=H,children:h}=e;return(0,l.jsxs)("label",Object.assign({className:(0,q.Z)("_2Ov17",t),onClick:u},{children:[(0,l.jsx)("input",{type:n,className:"_2IoHf",name:i,value:o,disabled:c,checked:s,onChange:function(e){d(e),f(e.currentTarget.checked)}},void 0),(0,l.jsx)("span",Object.assign({className:"_2H-Mw"},{children:s?(0,l.jsx)(r,{},void 0):(0,l.jsx)(a,{},void 0)}),void 0),h&&(0,l.jsx)("span",Object.assign({className:"_11H37"},{children:h}),void 0)]}),void 0)}function G(e){const{className:t,name:n,value:a,min:r,max:i,step:o,disabled:s,onClick:c,onChange:u=H,onValueChange:d=H}=e,f={"--value-percent":(a-r)/(i-r)*100+"%"};return(0,l.jsxs)("div",Object.assign({className:(0,q.Z)("_2DhF4",t),style:f},{children:[(0,l.jsx)("input",{type:"range",className:"_3dzMs",name:n,disabled:s,value:a,min:r,max:i,step:o,onClick:c,onChange:function(e){u(e),d(e.currentTarget.valueAsNumber)}},void 0),(0,l.jsx)("div",Object.assign({className:"_2b567"},{children:(0,l.jsx)("div",{className:"_26ZKf"},void 0)}),void 0)]}),void 0)}const Q={text:"_3asye",active:"_1lox2",button:"_2wLkD",outline:"_1UDsQ _2wLkD",busy:"_3XmXG"};function $(e){const{type:t="button",href:n,active:a,title:r,className:i,disabled:o,onClick:s,children:c}=e,u=(0,q.Z)(Q[t],i,{[Q.active]:a}),d=n?"a":"button",f=n?void 0:"button";return(0,l.jsx)(d,Object.assign({className:u,href:n,title:r,disabled:o,type:f,onClick:s},{children:c}),void 0)}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var K=h.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),ee=h.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"});const te=function(e){return h.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),K,ee)};function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ae=h.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),re=h.createElement("path",{d:"M19 13H5v-2h14v2z"});const ie=function(e){return h.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),ae,re)};function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var se=h.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),ce=h.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"});const le=function(e){return h.createElement("svg",oe({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),se,ce)};function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var de=h.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),fe=h.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"});const he=function(e){return h.createElement("svg",ue({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),de,fe)},pe="_1H0a4";function me(e){const{inputId:t,title:n,name:a,className:r,disabled:i,minMaxButton:o,value:s,min:c=0,max:u=Number.MAX_SAFE_INTEGER,step:d=1,increment:f=d,onValueChange:h=H}=e;function p(e,t){if(0!==e.button)return;let n=0;const a=Math.pow(10,function(e){const t=e.toString(),n=t.indexOf(".")+1;return n||t.length-n}(d));function r(e){return e+=t,e=Math.min(Math.max(e,c),u),Math.round(e*a)/a}function i(e){const t=r(e);h(t),n=window.setTimeout((()=>i(t)),50)}const o=r(s);h(o),n=window.setTimeout((()=>i(o)),400),document.addEventListener("mouseup",(function e(){clearTimeout(n),document.removeEventListener("mouseup",e)}))}return(0,l.jsxs)("div",Object.assign({title:n,className:(0,q.Z)("_2dfjc",r)},{children:[o&&(0,l.jsx)("button",Object.assign({title:"Min",type:"button",className:pe,tabIndex:-1,disabled:i,onClick:()=>h(c)},{children:(0,l.jsx)(he,{},void 0)}),void 0),(0,l.jsx)("button",Object.assign({title:"Decrease",type:"button",className:pe,tabIndex:-1,disabled:i,onMouseDown:e=>p(e,-f)},{children:(0,l.jsx)(ie,{shapeRendering:"crispEdges"},void 0)}),void 0),(0,l.jsx)("input",{type:"number",id:t,className:"xI_9P",disabled:i,name:a,min:c,max:u,step:d,value:s,onChange:e=>h(e.currentTarget.valueAsNumber)},void 0),(0,l.jsx)("button",Object.assign({title:"Increase",type:"button",className:pe,tabIndex:-1,disabled:i,onMouseDown:e=>p(e,f)},{children:(0,l.jsx)(te,{shapeRendering:"crispEdges"},void 0)}),void 0),o&&(0,l.jsx)("button",Object.assign({title:"Max",type:"button",className:pe,tabIndex:-1,disabled:i,onClick:()=>h(u)},{children:(0,l.jsx)(le,{},void 0)}),void 0)]}),void 0)}const ve="_3_cLi",ge="_1p1yr";function be(){const e=document.body.querySelectorAll("._3_cLi"),t=e[e.length-2];if(t)return t.classList.add(ge),()=>t.classList.remove(ge)}function ye(e){const{className:t,name:n,onClose:a=H,children:r}=e;return(0,h.useEffect)((function(){function e(e){"Escape"===e.key&&(a(),e.stopImmediatePropagation())}return window.addEventListener("keyup",e),()=>window.removeEventListener("keyup",e)}),[a]),(0,h.useLayoutEffect)(be,[]),(0,u.createPortal)((0,l.jsx)("div",Object.assign({className:ve},{children:(0,l.jsx)("div",Object.assign({role:"dialog","aria-label":n,className:(0,q.Z)(t,"_1Vq87")},{children:r}),void 0)}),void 0),document.body)}function xe(e){const{state:t,className:n,children:a,onChange:r}=e;function i(e,n){const a=t.x+e,i=t.y+n;r({scale:t.scale,x:a,y:i})}return(0,l.jsx)("div",Object.assign({style:{touchAction:"none"},className:n,onWheel:function(e){const{ctrlKey:n,deltaMode:a,clientX:i,clientY:o}=e;let{deltaY:s}=e;e.preventDefault(),1===a&&(s*=15);const c=1-s/(n?100:300),l=e.currentTarget.firstElementChild.getBoundingClientRect(),u=(l.left+l.width/2-i)*(c-1),d=(l.top+l.height/2-o)*(c-1);r({x:t.x+u,y:t.y+d,scale:t.scale*c})},onTouchStart:function(e){!function(e,t){const n=e.touches[0];function a(e){const a=e.touches[0];t(a.pageX-n.pageX,a.pageY-n.pageY)}document.addEventListener("touchmove",a),document.addEventListener("touchend",(function e(t){t.preventDefault(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",e)}))}(e.nativeEvent,i)},onMouseDown:function(e){0===e.button&&function(e,t){const n=e.pageX,a=e.pageY;function r(e){t(e.pageX-n,e.pageY-a)}document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(t){t.preventDefault(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}))}(e.nativeEvent,i)}},{children:a}),void 0)}var je=n(2804);function we(e){return(0,l.jsxs)("div",Object.assign({className:"_3Neg9"},{children:[(0,l.jsx)("select",Object.assign({},e,{className:"_2rF3V"}),void 0),(0,l.jsx)(je.Z,{className:"_2Arv_"},void 0)]}),void 0)}function Oe(e){const{className:t,name:n,checked:a,disabled:r,onClick:i,onChange:o=H,onValueChange:s=H}=e,c=(0,q.Z)("_23L3Q",t,{_38B3L:a});return(0,l.jsx)("label",Object.assign({className:c},{children:(0,l.jsx)("input",{type:"checkbox",className:"rBLkp",disabled:r,checked:a,name:n,onClick:i,onChange:function(e){o(e),s(e.currentTarget.checked)}},void 0)}),void 0)}function Ce(e){const{active:t,className:n,onFocus:a,children:r}=e,i=(0,q.Z)("_7lvOB",n,{_31kUg:t});return(0,l.jsx)("div",Object.assign({className:i,onClick:a},{children:r}),void 0)}var _e=n(2279);const Ne="_5050B";function Se(e){const{className:t,onChange:n,onError:a}=e,r=function(){const[e,t]=(0,h.useState)(!1),n=(0,h.useRef)(0);return{isInArea:e,enter:function(){t(++n.current>0)},leave:function(){t(--n.current>0)},reset:function(){n.current=0,t(!1)}}}(),i=(0,q.Z)("_1QfF_",t,{_2NkFn:r.isInArea});return(0,l.jsxs)("label",Object.assign({className:i,onDragEnter:r.enter,onDragOver:e=>e.preventDefault(),onDrop:function(e){e.preventDefault(),r.reset();const{items:t}=e.dataTransfer,i=t[0].getAsFile();i?n(i):a("The dropped item is not a file")},onDragLeave:r.leave},{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(_e.Z,{className:"_1uubp _5050B"},void 0),(0,l.jsx)("span",Object.assign({className:Ne},{children:"Drag & drop"}),void 0)]},void 0),(0,l.jsx)("div",Object.assign({className:Ne},{children:"Or select an image"}),void 0),(0,l.jsx)("input",{className:"_1wDkd",name:"file",type:"file",accept:"image/*",onChange:function(e){const{files:t}=e.currentTarget;(null==t?void 0:t.length)&&n(t[0])}},void 0)]}),void 0)}function ke(e){return X({...e,type:"checkbox",Icon:A,IconChecked:R})}function Ee(e){return X({...e,type:"radio",Icon:z,IconChecked:D})}function Pe(e){const{description:t,url:n,icon:a,onClick:r}=e,[i,o]=(0,h.useState)(!1);return(0,l.jsxs)("button",Object.assign({className:"_2Z_sH",onClick:async function(){if(!i){o(!0);try{await r(n)}finally{o(!1)}}}},{children:[(0,l.jsx)("img",{src:a,alt:"icon",className:"ZflhA"},void 0),i&&(0,l.jsx)("div",{className:"_2BAvs"},void 0),(0,l.jsx)("span",Object.assign({className:"_3fIXD"},{children:t}),void 0)]}),n)}const Ae=[{description:"Large photo (2.8MB)",url:w,icon:O},{description:"Artwork (408KB)",url:C,icon:_},{description:"Colorful text (68KB)",url:S,icon:N}];function Ve(e){const{onCancel:t,onChange:n}=e,a=(0,h.useRef)(new AbortController),[r,i]=(0,h.useState)("");function o(e){y(e).then((t=>n({file:e,data:t}))).catch((()=>i("Can not decode file as image.")))}async function s(e){const t=new AbortController;a.current.abort(),a.current=t;const{signal:n}=t;try{o(await async function(e,t){const n=await fetch(e,{signal:t}),a=await n.blob(),r=/[^;]*/.exec(a.type)[0],i=new URL(e).pathname.split("/").pop()||"image",o=n.headers.get("last-modified"),s=o?new Date(o).getTime():void 0;return new File([a],i,{type:r,lastModified:s})}(e,n))}catch(e){if("AbortError"!==e.name)throw e}}const c=Ae.map((e=>(0,h.createElement)(Pe,Object.assign({},e,{key:e.url,onClick:s}))));return(0,l.jsxs)(ye,Object.assign({onClose:t},{children:[(0,l.jsxs)("div",Object.assign({className:"dialog-content"},{children:[(0,l.jsx)(Se,{className:"_1294e",onChange:function(e){o(e),a.current.abort()},onError:i},void 0),(0,l.jsx)("span",Object.assign({className:"_2Sr67"},{children:"Or try one of these:"}),void 0),(0,l.jsx)("div",Object.assign({className:"_3BC6E"},{children:c}),void 0)]}),void 0),(0,l.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,l.jsx)("span",Object.assign({className:"Qed9H"},{children:r}),void 0),(0,l.jsx)($,Object.assign({className:"second",onClick:t},{children:"Back"}),void 0)]}),void 0)]}),void 0)}function Te(e){const{file:t}=e.image,{width:n,height:a,data:r}=e.image.data,i=(t.size/r.byteLength*100).toFixed(2);return(0,l.jsxs)("div",Object.assign({className:"dialog-content",role:"tabpanel"},{children:[(0,l.jsx)("canvas",{className:"WKrzW","aria-label":"Preview",ref:function(t){if(!t)return;const n=t.getContext("2d");null==n||n.putImageData(e.image.data,0,0)},width:n,height:a},void 0),(0,l.jsxs)("dl",Object.assign({className:"lL9Er"},{children:[(0,l.jsx)("dt",{children:"File name:"},void 0),(0,l.jsx)("dd",{children:t.name},void 0),(0,l.jsx)("dt",{children:"Type:"},void 0),(0,l.jsx)("dd",{children:t.type},void 0),(0,l.jsx)("dt",{children:"Resolution:"},void 0),(0,l.jsxs)("dd",{children:[n," x ",a]},void 0),(0,l.jsx)("dt",{children:"Raw size:"},void 0),(0,l.jsx)("dd",{children:Z(r.byteLength)},void 0),(0,l.jsx)("dt",{children:"File size (Ratio %):"},void 0),(0,l.jsxs)("dd",{children:[Z(t.size)," (",i,"%)"]},void 0)]}),void 0)]}),void 0)}var Me=n(8059);n(9650);const Re={hfAsymmetry:1,goodQualitySeek:1.5,badQualitySeek:.5},Fe={form:"_3_OKa dialog-content",field:"_2vX3s",inlineLabel:"_2MSGh",label:"ba7J1"};function Ie(e){return e||{version:1,workerCount:navigator.hardwareConcurrency,time:!0,PSNR:!0,SSIM:{enabled:!1,options:Me.getOptions()},butteraugli:{enabled:!1,options:Re}}}function Le(e){const{value:t,onChange:n}=e;function a(e,a){const r={...t.options,[e]:a};n({...t,options:r})}const r=Object.entries(t.options).map((([e,t])=>(0,l.jsxs)("label",Object.assign({className:Fe.field},{children:[(0,l.jsx)("span",Object.assign({className:Fe.label},{children:e}),void 0),(0,l.jsx)(me,{className:Fe.value,name:e,min:0,max:2,step:.1,value:t,onValueChange:t=>a(e,t)},void 0)]}),e)));return(0,l.jsxs)("div",{children:[(0,l.jsx)(ke,Object.assign({checked:t.enabled,name:"butteraugli",onValueChange:e=>n({...t,enabled:e})},{children:"Butteraugli"}),void 0),(0,l.jsx)("fieldset",Object.assign({className:"subfields"},{children:t.enabled&&r}),void 0)]},void 0)}function ze(e){const{value:t,onChange:n}=e,{workerCount:a,time:r,SSIM:i,PSNR:o,butteraugli:s}=t;function c(e){const{name:a,checked:r}=e.currentTarget;n({...t,[a]:r})}return(0,l.jsxs)("form",Object.assign({className:Fe.form,role:"tabpanel"},{children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("span",Object.assign({className:Fe.inlineLabel},{children:"Worker count:"}),void 0),(0,l.jsx)(me,{value:a,min:1,step:1,onValueChange:function(e){n({...t,workerCount:e})}},void 0)]},void 0),(0,l.jsx)(ke,Object.assign({checked:r,name:"time",onChange:c},{children:"Encode time (Not very accurate)"}),void 0),(0,l.jsx)(ke,Object.assign({checked:o,name:"PSNR",onChange:c},{children:"Peak signal-to-noise ratio"}),void 0),(0,l.jsx)(ke,Object.assign({checked:i.enabled,name:"SSIM",onChange:c},{children:"Structural similarity index measure"}),void 0),(0,l.jsx)(Le,{value:s,onChange:function(e){n({...t,butteraugli:e})}},void 0)]}),void 0)}const We="_1DFIs",Be="_2hMcD",Ue="_1QAox";function De(e){const{min:t,max:n,step:a}=e;return new Array(Math.ceil((n+1-t)/a)).fill(t).map(((e,t)=>e+t*a))}class qe{constructor(e){this.data=e,this.Input=this.Input.bind(this)}get id(){return this.data.id}createState(){return De(this.data)}Input(e){const{id:t,label:n,min:a,max:r,step:i}=this.data,{value:o,onChange:s}=e;return(0,l.jsxs)(Ce,Object.assign({},e,{children:[(0,l.jsxs)("div",Object.assign({className:We},{children:[(0,l.jsx)("span",Object.assign({className:Be},{children:n}),void 0),o]}),void 0),(0,l.jsx)(G,{name:t,value:o,min:a,max:r,step:i,onClick:e=>e.stopPropagation(),onValueChange:s},void 0)]}),void 0)}}class He{constructor(e){this.data=e,this.VariableMode=this.VariableMode.bind(this),this.ConstMode=this.ConstMode.bind(this),this.OptionField=this.OptionField.bind(this)}get id(){return this.data.id}createControl(e){return new qe({...this.data,...e})}createState(){const{min:e,max:t,step:n,defaultValue:a}=this.data;return[a,{min:e,max:t,step:n}]}ConstMode(e){const{id:t,min:n,max:a,step:r}=this.data,{value:i,onValueChange:o}=e;return(0,l.jsx)(G,{className:Ue,name:t,value:i,min:n,max:a,step:r,onValueChange:o},void 0)}VariableMode(e){const{step:t}=this.data,{range:n,onRangeChange:a}=e,r=e=>{const{name:t,min:r,max:i,step:o}={...this.data,...e};return(0,l.jsxs)("label",Object.assign({className:"_1NEr4"},{children:[(0,l.jsx)("span",{children:t},void 0),(0,l.jsx)(me,{className:"_2drmu",name:t,value:n[t],min:r,max:i,step:o,onValueChange:e=>function(e,t){a({...n,[e]:t})}(t,e)},void 0)]}),void 0)};return(0,l.jsxs)("div",Object.assign({className:Ue},{children:[(0,l.jsx)(r,{name:"min",max:n.max},void 0),(0,l.jsx)(r,{name:"max",min:n.min},void 0),(0,l.jsx)(r,{name:"step",min:t},void 0)]}),void 0)}OptionField(e){const{VariableMode:t,ConstMode:n}=this,{label:a}=this.data,{isVariable:r,value:i,onVariabilityChange:o}=e;return(0,l.jsxs)("fieldset",Object.assign({className:"_2eY19"},{children:[(0,l.jsxs)("div",Object.assign({className:We},{children:[(0,l.jsx)(ke,Object.assign({className:Be,checked:r,onValueChange:o},{children:a}),void 0),!r&&i]}),void 0),r?(0,l.jsx)(t,Object.assign({},e),void 0):(0,l.jsx)(n,Object.assign({},e),void 0)]}),void 0)}populate(e,t){const{id:n,offset:a=0}=this.data;t[n]=a+e}generate(e,t,n){const{id:a,offset:r=0}=this.data;return De(e).map((e=>{const i={...n,[a]:e+=r};return{key:{...t,[a]:e},options:i}}))}}class Ye{constructor(e){this.data=e}get id(){return this.data.id}createState(){return[!1,!0]}Input(e){const{value:t,onChange:n}=e,{label:a}=this.data;return(0,l.jsxs)(Ce,Object.assign({},e,{className:"_1JOas"},{children:[a,(0,l.jsx)(Oe,{checked:t,onValueChange:n,onClick:e=>e.stopPropagation()},void 0)]}),void 0)}}class Ze{constructor(e){this.data=e,this.OptionField=this.OptionField.bind(this)}get id(){return this.data.id}createControl(e){return new Ye(this.data)}createState(){return[Boolean(this.data.defaultValue),void 0]}OptionField(e){const{id:t,label:n}=this.data,{isVariable:a,value:r,onValueChange:i,onVariabilityChange:o}=e;return(0,l.jsxs)("fieldset",Object.assign({className:"_1Whgl _3be6o"},{children:[(0,l.jsx)(ke,Object.assign({className:"_3SupV",checked:a,onValueChange:o},{children:n}),void 0),a?(0,l.jsx)("strong",{children:"OFF & ON"},void 0):(0,l.jsx)(Oe,{name:t,checked:r,onValueChange:i},void 0)]}),void 0)}populate(e,t){t[this.data.id]=e}generate(e,t,n){const{id:a}=this.data;return[{key:{...t,[a]:!1},options:{...n,[a]:!1}},{key:{...t,[a]:!0},options:{...n,[a]:!0}}]}}const Xe="_2ds9S";class Ge{constructor(e){this.data=e}get id(){return this.data.id}createState(){return this.data.names}Input(e){const{id:t,label:n,names:a}=this.data,{value:r,onChange:i}=e;function o(e){i(e.currentTarget.name)}const s=a.map((e=>(0,l.jsx)(Ee,Object.assign({className:Xe,checked:e===r,name:t,onChange:o},{children:e}),e)));return(0,l.jsxs)(Ce,Object.assign({},e,{children:[n,(0,l.jsx)("div",{children:s},void 0)]}),void 0)}}class Qe{constructor(e){this.data=e,this.OptionField=this.OptionField.bind(this)}get id(){return this.data.id}createControl(e){const{id:t,label:n}=this.data;return new Ge({id:t,label:n,names:e})}createState(){const{defaultValue:e}=this.data;return[e,[e]]}OptionField(e){const{id:t,label:n,enumObject:a}=this.data,{isVariable:r,value:i,range:o,onValueChange:s,onRangeChange:c,onVariabilityChange:u}=e;function d(e){const{checked:t,name:n}=e.currentTarget;let a=[...o];t?a.push(n):a=o.filter((e=>e!==n)),a.length>0&&c(a)}function f(e){s(e.currentTarget.value)}let h;return h=r?Object.keys(a).map((e=>(0,l.jsx)(ke,Object.assign({className:Xe,name:e,checked:o.includes(e),onChange:d},{children:e}),e))):Object.keys(a).map((e=>(0,l.jsx)(Ee,Object.assign({className:Xe,name:t,value:e,checked:i===e,onChange:f},{children:e}),e))),(0,l.jsxs)("fieldset",Object.assign({className:"_2g87T"},{children:[(0,l.jsx)(ke,Object.assign({className:"_3Cf8v",checked:r,onValueChange:u},{children:n}),void 0),(0,l.jsx)("div",Object.assign({className:"_38c4A"},{children:h}),void 0)]}),void 0)}populate(e,t){const{id:n,enumObject:a}=this.data;t[n]=a[e]}generate(e,t,n){const{id:a,enumObject:r}=this.data;return e.map((e=>({key:{...t,[a]:e},options:{...n,[a]:r[e]}})))}}function $e(e,t){const{varNames:n,values:a,ranges:r}=t;return e.reduce((function(e,t){const{id:i}=t;if(n.includes(i)){const n=[];for(const{key:a,options:o}of e){const e=t.generate(r[i],a,o);n.push(...e)}return n}return e.forEach((({options:e})=>t.populate(a[i],e))),e}),[{key:{},options:{}}])}function Je(e,t){return{...e,...t}}const Ke="MozJPEG",et="image/jpeg",tt="jpg",nt={GRAYSCALE:1,RGB:2,YCbCr:3},at={"JPEG Annex K":0,Flat:1,"MSSIM-tuned Kodak":2,ImageMagick:3,"PSNR-HVS-M-tuned Kodak":4,"Klein et al":5,"Watson et al":6,"Ahumada et al":7,"Peterson et al":8},rt={quality:75,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:nt.YCbCr,quant_table:at.ImageMagick,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75},it=[new He({id:"quality",label:"Quality (-q)",min:0,max:100,step:1,defaultValue:rt.quality}),new Qe({id:"color_space",label:"Channels",enumObject:nt,defaultValue:"YCbCr"}),new Qe({id:"quant_table",label:"Quantization",enumObject:at,defaultValue:"ImageMagick"}),new Ze({id:"arithmetic",label:"Arithmetic",defaultValue:rt.arithmetic}),new Ze({id:"auto_subsample",label:"Auto subsample chroma",defaultValue:rt.auto_subsample}),new Ze({id:"separate_chroma_quality",label:"Separate chroma quality",defaultValue:rt.separate_chroma_quality}),new He({id:"chroma_quality",label:"Chroma quality",min:0,max:100,step:1,defaultValue:rt.chroma_quality}),new He({id:"smoothing",label:"Smoothing",min:0,max:100,step:1,defaultValue:rt.smoothing}),new Ze({id:"baseline",label:"Pointless spec compliance",defaultValue:rt.baseline}),new Ze({id:"progressive",label:"Progressive",defaultValue:rt.progressive}),new Ze({id:"optimize_coding",label:"Optimize Huffman table",defaultValue:rt.optimize_coding}),new Ze({id:"trellis_multipass",label:"Trellis multipass",defaultValue:rt.trellis_multipass}),new Ze({id:"trellis_opt_zero",label:"Optimize zero block runs",defaultValue:rt.trellis_opt_zero}),new Ze({id:"trellis_opt_table",label:"Optimize after trellis quantization",defaultValue:rt.trellis_opt_table}),new He({id:"trellis_loops",label:"Trellis quantization passes",min:0,max:50,step:1,defaultValue:rt.trellis_loops})];function ot(e){if(e)return e;const t={},n={};for(const e of it){const[a,r]=e.createState();t[e.id]=a,n[e.id]=r}return{varNames:[],values:t,ranges:n}}function st(e){const{state:t,onChange:n}=e,{varNames:a,values:r,ranges:i}=t,o=it.map((({id:e,OptionField:o})=>(0,l.jsx)(o,{isVariable:a.includes(e),value:r[e],range:i[e],onValueChange:a=>function(e,a){n({...t,values:{...r,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...i,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:r}=t;a?r.push(e):r=r.filter((t=>t!==e)),n({...t,varNames:r})}(e,a)},e)));return(0,l.jsx)(l.Fragment,{children:o},void 0)}function ct(e){const{varNames:t,ranges:n}=e,a=$e(it,e);return{controls:it.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function lt(e,t){return t.mozjpegEncode(Je(rt,e))}const ut={speed:4,quality:75,progressive:!1,epf:-1,nearLossless:0,lossyPalette:!1},dt="JPEG XL",ft="image/jxl",ht="jxl",pt=[new He({id:"quality",label:"Quality",min:0,max:100,step:.1,defaultValue:ut.quality}),new Ze({id:"lossyPalette",label:"Slight loss",defaultValue:ut.lossyPalette}),new Ze({id:"progressive",label:"Progressive",defaultValue:ut.progressive}),new He({id:"speed",label:"Speed",min:0,max:6,step:1,defaultValue:ut.speed}),new He({id:"epf",label:"Edge preserving filter",min:-1,max:6,step:1,defaultValue:ut.epf})];function mt(e){if(e)return e;const t={},n={};for(const e of pt){const[a,r]=e.createState();t[e.id]=a,n[e.id]=r}return{varNames:[],values:t,ranges:n}}function vt(e){const{state:t,onChange:n}=e,{varNames:a,values:r,ranges:i}=t,o=pt.map((({id:e,OptionField:o})=>(0,l.jsx)(o,{isVariable:a.includes(e),value:r[e],range:i[e],onValueChange:a=>function(e,a){n({...t,values:{...r,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...i,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:r}=t;a?r.push(e):r=r.filter((t=>t!==e)),n({...t,varNames:r})}(e,a)},e)));return(0,l.jsx)(l.Fragment,{children:o},void 0)}function gt(e){const{varNames:t,ranges:n}=e,a=$e(pt,e);return{controls:pt.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function bt(e,t){return t.jxlEncode(Je(ut,e))}const yt={quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0},xt="WebP",jt="image/webp",wt="webp",Ot=[new Ze({id:"lossless",label:"lossless",defaultValue:yt.lossless}),new He({id:"quality",label:"Quality (-q)",min:0,max:100,step:1,defaultValue:yt.quality}),new He({id:"near_lossless",label:"Near lossless (-near_lossless)",min:0,max:100,step:1,defaultValue:yt.near_lossless}),new He({id:"method",label:"Method (-m)",min:0,max:6,step:1,defaultValue:yt.method}),new class extends Qe{generate(e,t,n){const{id:a}=this;return e.map((e=>{const r={...t,[a]:e},i={...n};return this.populate(e,i),{key:r,options:i}}))}populate(e,t){Object.entries(this.data.enumObject[e]).forEach((([e,n])=>t[e]="function"==typeof n?n(t[e]):n))}}({id:"preset",label:"Preset (-preset)",enumObject:{default:{},photo:{sns_strength:80,filter_sharpness:3,filter_strength:30,preprocessing:e=>2|e},picture:{sns_strength:80,filter_sharpness:4,filter_strength:35,preprocessing:e=>-3&e},drawing:{sns_strength:25,filter_sharpness:6,filter_strength:10},icon:{sns_strength:25,filter_strength:10,preprocessing:e=>-3&e},text:{sns_strength:0,filter_strength:0,segments:2,preprocessing:e=>-3&e}},defaultValue:"default"}),new He({id:"sns_strength",label:"Spatial noise shaping (-sns)",min:0,max:100,step:1,defaultValue:yt.sns_strength}),new Ze({id:"filter_type",label:"User strong filter (-strong)",defaultValue:yt.filter_type}),new Ze({id:"autofilter",label:"Auto adjust filter strength (-af)",defaultValue:yt.autofilter}),new He({id:"filter_strength",label:"Filter strength (-f)",min:0,max:100,step:1,defaultValue:yt.filter_strength}),new He({id:"filter_sharpness",label:"Filter sharpness (-sharpness)",min:0,max:7,step:1,defaultValue:yt.filter_sharpness}),new Ze({id:"use_sharp_yuv",label:"Sharp YUV",defaultValue:yt.use_sharp_yuv}),new Qe({id:"image_hint",label:"Hint (-hint)",enumObject:{Default:0,Picture:1,Photo:2,Graph:3},defaultValue:"Default"})];function Ct(e){if(e)return e;const t={},n={};for(const e of Ot){const[a,r]=e.createState();t[e.id]=a,n[e.id]=r}return n.quality.step=5,{varNames:["quality"],values:t,ranges:n}}function _t(e){const{state:t,onChange:n}=e,{varNames:a,values:r,ranges:i}=t,o=Ot.map((({id:e,OptionField:o})=>(0,l.jsx)(o,{isVariable:a.includes(e),value:r[e],range:i[e],onValueChange:a=>function(e,a){n({...t,values:{...r,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...i,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:r}=t;a?r.push(e):r=r.filter((t=>t!==e)),n({...t,varNames:r})}(e,a)},e)));return(0,l.jsx)(l.Fragment,{children:o},void 0)}function Nt(e){const{varNames:t,ranges:n}=e,a=$e(Ot,e);return{controls:Ot.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function St(e,t){return t.webpEncode(Je(yt,e))}const kt={cqLevel:33,minQuantizerAlpha:0,tileColsLog2:0,tileRowsLog2:0,speed:8,subsample:1,chromaDeltaQ:!1,sharpness:0,targetSsim:!1},Et="AVIF",Pt="image/avif",At="avif",Vt={YUV400:0,YUV420:1,YUV422:2,YUV444:3},Tt=[new He({id:"minQuantizer",label:"Min quality",min:0,max:63,step:1,defaultValue:kt.minQuantizer}),new He({id:"maxQuantizer",label:"Max quality",min:0,max:63,step:1,defaultValue:kt.maxQuantizer}),new He({id:"minQuantizerAlpha",label:"Min alpha quality",min:0,max:63,step:1,defaultValue:kt.minQuantizerAlpha}),new He({id:"maxQuantizerAlpha",label:"Max alpha quality",min:0,max:63,step:1,defaultValue:kt.maxQuantizerAlpha}),new He({id:"tileRowsLog2",label:"Log2 of tile rows",min:0,max:6,step:1,defaultValue:kt.tileRowsLog2}),new He({id:"tileColsLog2",label:"Log2 of tile cols",min:0,max:6,step:1,defaultValue:kt.tileColsLog2}),new He({id:"speed",label:"Speed",min:0,max:10,step:8,defaultValue:kt.speed}),new Qe({id:"subsample",label:"Subsample",enumObject:Vt,defaultValue:"YUV420"})];function Mt(e){if(e)return e;const t={},n={};for(const e of Tt){const[a,r]=e.createState();t[e.id]=a,n[e.id]=r}return{varNames:[],values:t,ranges:n}}function Rt(e){const{state:t,onChange:n}=e,{varNames:a,values:r,ranges:i}=t,o=Tt.map((({id:e,OptionField:o})=>(0,l.jsx)(o,{isVariable:a.includes(e),value:r[e],range:i[e],onValueChange:a=>function(e,a){n({...t,values:{...r,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...i,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:r}=t;a?r.push(e):r=r.filter((t=>t!==e)),n({...t,varNames:r})}(e,a)},e)));return(0,l.jsx)(l.Fragment,{children:o},void 0)}function Ft(e){const{varNames:t,ranges:n}=e,a=$e(Tt,e);return{controls:Tt.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function It(e,t){return t.avifEncode({...kt,...e})}const Lt="WebP v2",zt="image/webp2",Wt="wp2",Bt={Adapt:0,420:1,444:2,Auto:3},Ut={YCoCg:0,YCbCr:1,Custom:2,YIQ:3},Dt={quality:75,alpha_quality:75,effort:5,pass:1,sns:50,uv_mode:Bt.Adapt,csp_type:Ut.YCoCg,error_diffusion:0,use_random_matrix:!1},qt=[new He({id:"quality",label:"Quality",min:0,max:95,step:.1,defaultValue:Dt.quality}),new He({id:"alpha_quality",label:"Alpha Quality",min:0,max:95,step:.1,defaultValue:Dt.alpha_quality}),new He({id:"effort",label:"Effort",min:0,max:9,step:1,defaultValue:Dt.effort}),new He({id:"pass",label:"Passes",min:0,max:9,step:1,defaultValue:Dt.pass}),new He({id:"sns",label:"Spatial noise shaping",min:0,max:100,step:1,defaultValue:Dt.sns}),new He({id:"error_diffusion",label:"Error diffusion",min:0,max:100,step:1,defaultValue:Dt.error_diffusion}),new Qe({id:"uv_mode",label:"UVMode",enumObject:Bt,defaultValue:"Adapt"}),new Qe({id:"csp_type",label:"Color space",enumObject:Ut,defaultValue:"YCoCg"}),new Ze({id:"use_random_matrix",label:"Random matrix",defaultValue:Dt.use_random_matrix})];function Ht(e){if(e)return e;const t={},n={};for(const e of qt){const[a,r]=e.createState();t[e.id]=a,n[e.id]=r}return{varNames:[],values:t,ranges:n}}function Yt(e){const{state:t,onChange:n}=e,{varNames:a,values:r,ranges:i}=t,o=qt.map((({id:e,OptionField:o})=>(0,l.jsx)(o,{isVariable:a.includes(e),value:r[e],range:i[e],onValueChange:a=>function(e,a){n({...t,values:{...r,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...i,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:r}=t;a?r.push(e):r=r.filter((t=>t!==e)),n({...t,varNames:r})}(e,a)},e)));return(0,l.jsx)(l.Fragment,{children:o},void 0)}function Zt(e){const{varNames:t,ranges:n}=e,a=$e(qt,e);return{controls:qt.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function Xt(e,t){return t.webp2Encode(Je(Dt,e))}const Gt=[r,i,o,s,c],Qt=Object.fromEntries(Gt.map((e=>[e.name,e])));function $t(e){if(e)return e;const t={};for(const e of Gt)t[e.name]={enable:!1,state:e.initOptionsState()};return t.WebP.enable=!0,t}function Jt(e){const{value:t,onChange:n}=e,[a,r]=(0,h.useState)("WebP"),i=Gt.map((e=>{const{name:i}=e,o=(0,q.Z)("_3rUeO",{_1krxL:i===a});return(0,l.jsxs)("button",Object.assign({className:o,onClick:()=>r(i)},{children:[(0,l.jsx)(ke,{checked:t[i].enable,onClick:e=>e.stopPropagation(),onChange:function(e){const a={...t[i],enable:e.currentTarget.checked};n({...t,[i]:a})}},void 0),(0,l.jsx)("span",Object.assign({className:"_2G5o7"},{children:i}),void 0)]}),i)})),{OptionsPanel:o}=Qt[a];return(0,l.jsxs)("div",Object.assign({className:"_1LeZ1 dialog-content",role:"tabpanel"},{children:[(0,l.jsx)("div",Object.assign({className:"_1sBf2"},{children:i}),void 0),(0,l.jsx)("form",Object.assign({className:"_3GSpr"},{children:(0,l.jsx)(o,{state:t[a].state,onChange:function(e){const r={...t[a],state:e};n({...t,[a]:r})}},void 0)}),void 0)]}),void 0)}function Kt(){const e=localStorage.getItem("Config");return e?JSON.parse(e):{encoders:$t(),measure:Ie()}}const en=["Information","Encoding","Measure"];function tn(e){const{image:t,onStart:n,onClose:a,onSelectFile:r}=e,[i,o]=(0,h.useState)(0),[s,c]=(0,h.useState)(Kt),u=en.map(((e,t)=>(0,l.jsx)("div",Object.assign({className:"_29qBc",role:"tab","aria-selected":t===i,onClick:()=>o(t)},{children:e}),t)));let d;switch(i){case 0:d=(0,l.jsx)(Te,{image:t},void 0);break;case 1:d=(0,l.jsx)(Jt,{value:s.encoders,onChange:e=>c({...s,encoders:e})},void 0);break;case 2:d=(0,l.jsx)(ze,{value:s.measure,onChange:e=>c({...s,measure:e})},void 0)}const f=t&&Object.values(s.encoders).some((e=>e.enable));return(0,l.jsxs)(ye,Object.assign({name:"Analysis config",className:"_6sryz",onClose:a},{children:[(0,l.jsx)("div",Object.assign({className:"_3x7vU",role:"tablist"},{children:u}),void 0),d,(0,l.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,l.jsx)($,Object.assign({onClick:r},{children:"Select file..."}),void 0),(0,l.jsx)($,Object.assign({className:"second",onClick:a},{children:"Cancel"}),void 0),(0,l.jsx)($,Object.assign({disabled:!f,onClick:function(){n(s),localStorage.setItem("Config",JSON.stringify(s))}},{children:"Start"}),void 0)]}),void 0)]}),void 0)}const nn=new Intl.RelativeTimeFormat("en");function an(e,t,n){return(n-t)/t*(performance.now()-e)}function rn(e){const{error:t,value:n,max:a,onCancel:r}=e,[i]=(0,h.useState)((()=>performance.now())),o=(0,h.useMemo)((()=>function(e,t){let n,a=!1;return function(...e){return a?n:(a=!0,setTimeout((()=>a=!1),500),n=t.apply(this,e))}}(0,an)),[])(i,n,a),s=Number.isNaN(o)?"----":nn.format(~~(o/1e3),"seconds");return(0,l.jsxs)(ye,{children:[(0,l.jsxs)("div",Object.assign({className:"_1RFbq dialog-content"},{children:[(0,l.jsx)("h1",{children:"Encoding..."},void 0),t&&(0,l.jsxs)("p",Object.assign({className:"O-Yz-"},{children:["Error: ",t]}),void 0),(0,l.jsxs)("div",Object.assign({className:"_3vxdS"},{children:[(0,l.jsxs)("span",{children:[n," / ",a]},void 0),(0,l.jsx)("span",{children:s},void 0)]}),void 0),(0,l.jsx)("progress",{value:n,max:a,className:"mrzz8"},void 0)]}),void 0),(0,l.jsx)("div",Object.assign({className:"_3UNgR dialog-actions"},{children:(0,l.jsx)($,Object.assign({color:"second",onClick:r},{children:" Cancel "}),void 0)}),void 0)]},void 0)}class on{constructor(e,t){if(this.terminated=!1,this.queue=[],this.waiters=[],t<1)throw new Error("Worker count must be at least 1");this.workers=new Array(t),this.remotes=new Array(t);for(let n=0;n<t;n++){const t=e();this.workers[n]=t,this.remotes[n]=(0,p.Ud)(t)}}runOnEach(e){return Promise.all(this.remotes.map(e))}run(e){return new Promise((t=>this.addJob({task:e,resolve:t})))}join(){const{queue:e,remotes:t,workers:n,waiters:a}=this;return 0===e.length&&t.length===n.length?Promise.resolve():new Promise((e=>a.push(e)))}terminate(){this.terminated=!0,this.workers.forEach((e=>e.terminate())),this.waiters.forEach((e=>e()))}addJob(e){const t=this.remotes.pop();if(t)return this.runJob(t,e);this.queue.push(e)}async runJob(e,t){const{task:n,resolve:a}=t;a(await n(e));const r=this.queue.pop();if(r)return this.runJob(e,r);const{remotes:i,workers:o,waiters:s}=this;i.push(e),i.length===o.length&&s.splice(0,s.length).forEach((e=>e()))}}function sn(e){const{open:t,onClose:n,onChange:r}=e,[i,o]=(0,h.useState)(!0),[s,c]=(0,h.useState)(),[u,d]=(0,h.useState)(),f=function(e=1){const[t,n]=(0,h.useState)(e),[a,r]=(0,h.useState)(0);return{value:a,max:t,increase:function(){r((e=>e+1))},reset:function(e){r(0),n(e)}}}(),[p,m]=(0,h.useState)();return t?u?(0,l.jsx)(rn,{value:f.value,max:f.max,error:p,onCancel:function(){u.terminate()}},void 0):i?(0,l.jsx)(Ve,{onCancel:function(){s?o(!1):n()},onChange:async function(e){c(e),o(!1)}},void 0):(0,l.jsx)(tn,{image:s,onStart:async function(e){if(!s)throw new Error("File is null");const{data:t}=s,{encoders:n,measure:i}=e;let o=0;const c=[],l={};for(const e of Gt){const{name:t,getOptionsList:a}=e,r=n[t];if(!r.enable)continue;const{controls:i,optionsList:s}=a(r.state);l[t]=i,c.push([e,s]),o+=s.length}let u=1;i.butteraugli.enabled&&u++,i.PSNR&&u++,i.SSIM.enabled&&u++;const h=i.time?i.workerCount:0;f.reset(o*u+h);const p=new a.ObjectKeyMap,v=new on(x,i.workerCount),g=new j;d(v),g.onProgress=f.increase;try{if(await v.runOnEach((e=>e.setImageToEncode(t))),i.time)for(const[e,t]of c){const{options:n}=t[0];await v.runOnEach((async t=>e.encode(t,n).then(f.increase)))}for(const[e,t]of c)for(const{key:n,options:a}of t)v.run((async t=>{const r=await g.encode(t,e,a),o=await g.measure(t,r.data,i),s={encoder:e.name,key:n};p.set(s,{...r,metrics:o})}));await v.join(),v.terminated||(d(void 0),r({config:{controlsMap:l},outputMap:p,original:s}))}catch(e){console.error(e),m(e.message)}v.terminate()},onClose:n,onSelectFile:()=>o(!0)},void 0):null}const cn="_3YpNu",ln="_3c5c0";function un(){return(un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var dn=h.createElement("path",{d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"});const fn=function(e){return h.createElement("svg",un({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 438.549 438.549",fill:"currentColor"},e),dn)};var hn=n(7500);function pn(e){const{onStart:t}=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("section",Object.assign({className:"Tt2Yp"},{children:[(0,l.jsx)("img",{className:"_2g3gN",alt:"banner",src:hn},void 0),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",Object.assign({className:"_2UBpq"},{children:"ICAnalyze"}),void 0),(0,l.jsx)("h2",{children:"Image Codec & Quality analyze tool"},void 0),(0,l.jsx)($,Object.assign({type:"outline",className:cn,onClick:t},{children:"Try it!"}),void 0),(0,l.jsxs)($,Object.assign({type:"outline",className:"_3YpNu second",href:"https://github.com/Kaciras/ICAnalyze"},{children:[(0,l.jsx)(fn,{},void 0),"Source Code"]}),void 0)]},void 0),(0,l.jsxs)("div",Object.assign({className:"_3tP01"},{children:["Photo by",(0,l.jsx)("a",Object.assign({className:ln,href:"https://unsplash.com/@veverkolog?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},{children:"Duan veverkolog"}),void 0),"on",(0,l.jsx)("a",Object.assign({className:ln,href:"https://unsplash.com/s/photos/eagle?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},{children:"Unsplash"}),void 0)]}),void 0)]}),void 0),(0,l.jsx)("section",Object.assign({className:"_2SF9G"},{children:"TODO"}),void 0)]},void 0)}var mn=n(8538),vn=n(8844),gn=n(5971),bn=n(368),yn=n(9109),xn=n(3631),jn=n(563);function wn(e,t,n){const{width:a,data:r}=e,i=4*(t+n*a);return Array.from(r.slice(i,i+4))}function On(e){const{name:t,value:n}=e,a="#"+n.map((e=>function(e){return e.length<2?"0"+e:e}(e.toString(16)))).join("").toUpperCase(),r={"--color":a.substring(0,7)};return(0,l.jsxs)("div",Object.assign({className:"_1JGQL",style:r},{children:[t,": ",a]}),void 0)}function Cn(e){const{style:t,x:n,y:a,imageA:r,imageB:i}=e,o=wn(r,n,a),s=wn(i,n,a),c=o.map(((e,t)=>Math.abs(e-s[t])));return(0,l.jsxs)("div",Object.assign({className:"_1hKG3",style:t},{children:[(0,l.jsxs)("div",{children:["x: ",n,", y: ",a]},void 0),(0,l.jsx)(On,{name:"Origin",value:o},void 0),(0,l.jsx)(On,{name:"Output",value:s},void 0),(0,l.jsx)(On,{name:"Diff",value:c},void 0)]}),void 0)}const _n="_92kbo",Nn="_2JgM9",Sn="_1YBWC";var kn;function En(e,t){if(null===t.current)throw new Error("Canvas is null");const n=t.current.getContext("2d");if(!n)throw new Error("Canvas not initialized");n.putImageData(e,0,0)}function Pn(e){const{original:t,output:n}=e,{width:a,height:r}=t.data,{butteraugli:i}=n.metrics,[o,s]=(0,h.useState)(kn.Compressed),[c,u]=(0,h.useState)(!1),[d,f]=(0,h.useState)(!1),[p,m]=(0,h.useState)(1),[v,g]=(0,h.useState)({clientX:0,clientY:0}),[b,y,x]=function(e){const[t,n]=(0,h.useState)(e);return[t,n,()=>n(e)]}({x:0,y:0,scale:1}),j=(0,h.useRef)(null),w=(0,h.useRef)(null),O=o===kn.HeatMap?i.heatMap:n.data;function C(e){const{children:t,target:n,disabled:a,title:r}=e;return(0,l.jsx)($,Object.assign({type:"text",active:o===n,disabled:a,title:r,onClick:()=>s(n)},{children:t}),void 0)}(0,h.useEffect)((function(){x(),En(t.data,j)}),[t]),(0,h.useEffect)((function(){En(O,w)}),[O]);let _=null,N=1;o===kn.AbsDiff&&(N=p,_=(0,l.jsxs)("label",Object.assign({title:"Brightness",className:_n},{children:[(0,l.jsx)(xn.Z,{className:Nn},void 0),(0,l.jsx)(me,{className:"_19OEA",value:p,min:1,max:255,step:1,minMaxButton:!0,onValueChange:m},void 0)]}),void 0));const S={width:a,height:r,"--scale":b.scale,"--x":b.x+"px","--y":b.y+"px","--brightness":`${N}`},{clientX:k,clientY:E}=v,P=Math.floor((k-b.x-(window.innerWidth-a*b.scale)/2)/b.scale),A=Math.floor((E-b.y-(window.innerHeight-r*b.scale)/2)/b.scale),V={left:v.clientX,top:v.clientY},T=o===kn.AbsDiff?"difference":void 0,M=i?void 0:"Require enable butteraugli";return(0,l.jsxs)("div",Object.assign({className:"_3kS7K"},{children:[(0,l.jsx)(xe,Object.assign({className:"_1iZci",state:b,onChange:e=>e.scale>.01&&y(e)},{children:(0,l.jsxs)("div",Object.assign({className:"_2sQef",style:S,onMouseOver:()=>f(!0),onMouseMove:function(e){const{clientX:t,clientY:n}=e;g({clientX:t,clientY:n})},onMouseOut:()=>f(!1)},{children:[(0,l.jsx)("canvas",{className:Sn,ref:j,width:a,height:r},void 0),(0,l.jsx)("canvas",{className:Sn,ref:w,width:a,height:r,style:{mixBlendMode:T},hidden:o===kn.Original},void 0)]}),void 0)}),void 0),(0,l.jsxs)("div",Object.assign({className:"_1Tvc7 controls"},{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(C,Object.assign({target:kn.Original},{children:"Original"}),void 0),(0,l.jsx)(C,Object.assign({target:kn.Compressed},{children:"Output"}),void 0),(0,l.jsx)(C,Object.assign({target:kn.AbsDiff},{children:"Difference"}),void 0),(0,l.jsx)(C,Object.assign({disabled:!i,title:M,target:kn.HeatMap},{children:"HeatMap"}),void 0)]},void 0),(0,l.jsxs)("div",Object.assign({className:_n,title:"Pick color"},{children:[(0,l.jsx)(jn.Z,{className:Nn},void 0),(0,l.jsx)(Oe,{checked:c,onValueChange:u},void 0)]}),void 0),_]}),void 0),(0,l.jsxs)("div",Object.assign({className:"ICaVu"},{children:[(0,l.jsx)(me,{title:"Zoom scale",min:1,step:1,increment:50,className:"_1AxLs _19OEA",value:Math.round(100*b.scale),onValueChange:function(e){y((t=>({...t,scale:e/100})))}},void 0),(0,l.jsx)($,Object.assign({title:"Reset view",type:"text",className:"_3mZJ8",onClick:x},{children:(0,l.jsx)(yn.Z,{},void 0)}),void 0)]}),void 0),c&&d&&(0,l.jsx)(Cn,{style:V,x:P,y:A,imageA:t.data,imageB:n.data},void 0)]}),void 0)}!function(e){e[e.Original=0]="Original",e[e.Compressed=1]="Compressed",e[e.AbsDiff=2]="AbsDiff",e[e.HeatMap=3]="HeatMap"}(kn||(kn={}));var An=n(8726),Vn=n.n(An),Tn=n(2688),Mn=n.n(Tn),Rn=n(4301),Fn=n.n(Rn);function In(){return(In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ln=h.createElement("path",{d:"M403.88 196.563h-9.484v-44.388c0-82.099-65.151-150.681-146.582-152.145-2.225-.04-6.671-.04-8.895 0C157.486 1.494 92.336 70.076 92.336 152.175v44.388h-9.485c-14.616 0-26.538 15.082-26.538 33.709v222.632c0 18.606 11.922 33.829 26.539 33.829H403.88c14.616 0 26.539-15.223 26.539-33.829V230.272c0-18.626-11.922-33.709-26.539-33.709zM273.442 341.362v67.271c0 7.703-6.449 14.222-14.158 14.222H227.45c-7.71 0-14.159-6.519-14.159-14.222v-67.271c-7.477-7.36-11.83-17.537-11.83-28.795 0-21.334 16.491-39.666 37.459-40.513 2.222-.09 6.673-.09 8.895 0 20.968.847 37.459 19.179 37.459 40.513-.002 11.258-4.355 21.435-11.832 28.795zm58.444-144.799H154.847v-44.388c0-48.905 39.744-89.342 88.519-89.342 48.775 0 88.521 40.437 88.521 89.342v44.388z"});const zn=function(e){return h.createElement("svg",In({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 486.733 486.733",fill:"currentColor"},e),Ln)};Mn()(Vn()),Fn()(Vn());class Wn{constructor(e,t){this.mapping=[],this.labels=[],this.divisor=e.file.size/100;const{labels:n,mapping:a,divisor:r}=this,[i]=t;function o(e,t){void 0!==t(i)&&(a.push(t),n.push(e))}o("Compression Ratio %",(e=>e.buffer.byteLength/r)),o("Encode Time (s)",(e=>e.time)),o("SSIM",(e=>e.metrics.SSIM)),o("PSNR (db)",(e=>e.metrics.PSNR)),o("Butteraugli Source",(e=>{var t;return null===(t=e.metrics.butteraugli)||void 0===t?void 0:t.source}))}convert(e){return this.mapping.map((t=>e.map((e=>t(e)))))}}function Bn(e,t){e.yAxis.forEach(((e,n)=>{0!==n&&e.update({visible:t===n},!1)})),e.redraw()}function Un(e){e.series.forEach(((t,n)=>{0!==n&&t.legendItem.on("mouseover",(()=>Bn(e,n)))}))}function Dn(e){const{visible:t,original:n,outputs:a,index:r,values:i}=e,[o,s]=(0,h.useState)(),[c,u]=(0,h.useState)(!1),d=(0,h.useMemo)((()=>new Wn(n,a)),[n]);(0,h.useEffect)((()=>o&&function(e){const t=d.convert(a);e.xAxis[0].setCategories(i,!1),e.series.forEach(((e,n)=>e.setData(t[n],!1)))}(o)),[a]),(0,h.useEffect)((()=>o&&function(e){const[t]=e.xAxis;t.removePlotLine("MarkLine"),t.addPlotLine({id:"MarkLine",value:r,dashStyle:"Dash"}),e.legend.update({labelFormatter(){const{name:e,options:t}=this,n=t.data[r];let a;switch(n){case 1/0:a="";break;case-1/0:a="-";break;default:a=n.toFixed(2)}return`${e}: <b>${a}</b>`}}),Un(e)}(o)));const f=t?{}:{display:"none"};return(0,l.jsxs)("section",Object.assign({className:"_120CL",style:f},{children:[(0,l.jsx)($,Object.assign({title:"Lock Y axis range",type:"text",className:"_2SMWc",active:c,onClick:function(){if(c){const e={min:null,max:null};o.yAxis.forEach((t=>t.update(e,!1))),u(!1)}else u(!0),o.yAxis.forEach((e=>e.update({min:e.min,max:e.max})),!1);o.redraw()}},{children:(0,l.jsx)(zn,{},void 0)}),void 0),(0,l.jsx)("div",{className:"N21M3",ref:function(e){if(!e||o)return;const t=d.convert(a),n=new Array(t.length),r=new Array(t.length);for(let e=0;e<t.length;e++){const a=d.labels[e];n[e]={name:a,type:"line",data:t[e],yAxis:e},r[e]={title:{text:a},visible:!1,opposite:!0}}const[c,l]=r;c.visible=!0,c.opposite=!1,l&&(l.visible=!0);const u={series:n,yAxis:r,chart:{animation:!1,styledMode:!0},title:{text:""},tooltip:{borderRadius:0},legend:{verticalAlign:"top",width:450,alignColumns:!1},xAxis:{categories:i,width:430},exporting:{buttons:{contextButton:{y:5,x:-5,height:32,width:32,symbolSize:16,symbolX:17,symbolY:16}},chartOptions:{chart:{className:"exporting_chart_class"}}}};s(Vn().chart(e,u,(e=>{!function(e){e.legend.allItems.forEach(((t,n)=>{0!==n&&(t.onMouseOver=()=>Bn(e,n))}))}(e),Un(e)})))}},void 0)]}),void 0)}function qn(e){const{config:t,value:n,onChange:a}=e,{variableType:r,variableName:i,encoderName:o,encoderState:s}=n;if(r===Zn.None)return null;function c(e,t){a({variableType:e,variableName:t})}const u=Gt.filter((e=>e.name in t.controlsMap)).map((({name:e})=>(0,l.jsx)("option",Object.assign({value:e},{children:e}),e))),d=s[o],f=t.controlsMap[o].map((e=>(0,l.jsx)(e.Input,{value:d[e.id],active:r===Zn.Options&&i===e.id,onChange:t=>function(e,t){const n=s[o],r={...s,[o]:{...n,[e]:t}};a({encoderState:r})}(e.id,t),onFocus:()=>c(Zn.Options,e.id)},e.id)));return(0,l.jsxs)("form",Object.assign({className:"_33pnL controls"},{children:[f,u.length>1&&(0,l.jsx)(Ce,Object.assign({active:r===Zn.Encoder,onFocus:()=>c(Zn.Encoder,"Encoder")},{children:(0,l.jsx)(we,Object.assign({value:o,onChange:function(e){a({encoderName:e.currentTarget.value})}},{children:u}),void 0)}),void 0)]}),void 0)}const Hn="_3RfWA";function Yn(e){const{title:t,buffer:n,filename:a,children:r}=e,{mimeType:i,extension:o}=e.codec,s=(0,h.useRef)("");return(0,h.useEffect)((()=>()=>URL.revokeObjectURL(s.current)),[]),(0,l.jsx)($,Object.assign({className:Hn,type:"text",title:t,onClick:function(){const e=new Blob([n],{type:i});URL.revokeObjectURL(s.current);const t=URL.createObjectURL(e);s.current=t;const r=document.createElement("a");r.href=t,r.download=a.replace(/.[^.]*$/,`.${o}`),document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{children:r}),void 0)}var Zn;function Xn(e){const{result:t,onStart:n,onClose:a}=e,{original:r,config:i,outputMap:o}=t,[s,c]=(0,h.useState)(!0),[u,d]=(0,h.useReducer)((function(e,t){return{...e,...t}}),null,(function(){const{controlsMap:e}=i;let t=Zn.None,n="";const a=Object.entries(e);a.length>1&&(t=Zn.Encoder,n="");const r={};for(const[e,t]of a)r[e]=Object.fromEntries(t.map((e=>[e.id,e.createState()[0]])));const[o,s]=a[0];return s.length>0&&(t=Zn.Options,n=s[0].id),{variableType:t,variableName:n,encoderName:o,encoderState:r}})),{variableType:f,variableName:p,encoderName:m,encoderState:v}=u,g=Qt[m],b=v[m],y=o.get({encoder:m,key:b}),[x,j]=(0,h.useMemo)((()=>{if(f===Zn.Encoder){const e=Gt.filter((e=>e.name in v)),t=e.map((e=>{const t=v[e.name];return o.get({encoder:e.name,key:t})}));return[e.map((e=>e.name)),t]}if(f===Zn.Options){const e=i.controlsMap[m].find((e=>e.id===p)).createState(),t=e.map((e=>o.get({encoder:m,key:{...b,[p]:e}})));return[e.map((e=>e.toString())),t]}return[[""],[y]]}),[b,t,f,p]),w=j.indexOf(y);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Pn,{original:r,output:y},void 0),(0,l.jsx)(Dn,{visible:s,original:r,index:w,values:x,outputs:j},void 0),(0,l.jsxs)("div",Object.assign({className:"_3BYoV controls"},{children:[(0,l.jsx)($,Object.assign({title:"Back",type:"text",className:Hn,onClick:a},{children:(0,l.jsx)(bn.Z,{},void 0)}),void 0),(0,l.jsx)($,Object.assign({title:"Select an image",type:"text",className:Hn,onClick:n},{children:(0,l.jsx)(mn.Z,{},void 0)}),void 0),(0,l.jsx)($,Object.assign({title:"Show chart",type:"text",className:Hn,active:s,onClick:()=>c(!s)},{children:(0,l.jsx)(vn.Z,{},void 0)}),void 0),(0,l.jsx)(Yn,Object.assign({title:"Download compressed image",filename:r.file.name,codec:g,buffer:y.buffer},{children:(0,l.jsx)(gn.Z,{},void 0)}),void 0)]}),void 0),(0,l.jsx)(qn,{value:u,onChange:d,config:i},void 0)]},void 0)}!function(e){e[e.None=0]="None",e[e.Encoder=1]="Encoder",e[e.Options=2]="Options"}(Zn||(Zn={})),function(){try{new File([],"")}catch{return!1}return!!CSS.supports("mix-blend-mode: difference")&&"AbortController"in window}()||alert("ICAnalyze does not support this browser, please switch to a modern one"),d.S({integrations:[new f.jK.BrowserTracing],tracesSampleRate:.2,release:"ic-analyze@0.1.0",dsn:"https://d101904fac2c486ea6f8563c2cf054af@o253601.ingest.sentry.io/5499968"}),u.render((0,l.jsx)((function(){const[e,t]=(0,h.useState)(!1),[n,a]=(0,h.useState)(),r=()=>t(!0);return(0,l.jsxs)(l.Fragment,{children:[n?(0,l.jsx)(Xn,{result:n,onStart:r,onClose:()=>a(void 0)},n.id):(0,l.jsx)(pn,{onStart:r},void 0),(0,l.jsx)(sn,{open:e,onChange:function(e){t(!1),e.id=((null==n?void 0:n.id)||1)+1,a(e)},onClose:()=>t(!1)},void 0)]},void 0)}),{},void 0),document.getElementById("root"))},8877:(e,t,n)=>{"use strict";e.exports=n.p+"artwork-icon.bc259.jpg"},9573:(e,t,n)=>{"use strict";e.exports=n.p+"artwork.b7c32.jpg"},7721:(e,t,n)=>{"use strict";e.exports=n.p+"colorful-text-icon.75a8e.png"},5185:(e,t,n)=>{"use strict";e.exports=n.p+"colorful-text.b5bb7.png"},2794:(e,t,n)=>{"use strict";e.exports=n.p+"large-photo-icon.a4fd9.jpg"},8481:(e,t,n)=>{"use strict";e.exports=n.p+"large-photo.54b97.jpg"},7500:(e,t,n)=>{"use strict";e.exports=n.p+"intro-banner.8d466.png"},2203:()=>{},5783:()=>{}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],s=!0,c=0;c<n.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(s=!1,i<o&&(o=i));s&&(e.splice(l--,1),t=r())}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.u=e=>e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b=document.baseURI||self.location.href;var e={826:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,s,c]=n,l=0;for(r in s)a.o(s,r)&&(a.m[r]=s[r]);for(c&&c(a),t&&t(n);l<o.length;l++)i=o[l],a.o(e,i)&&e[i]&&e[i][0](),e[o[l]]=0;a.O()},n=self.webpackChunkic_analyze=self.webpackChunkic_analyze||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[881],(()=>a(1023)));r=a.O(r)})();
//# sourceMappingURL=index.js.map