(()=>{var e,n={5564:(e,n,t)=>{"use strict";e.exports=t.p+"demo-large-photo.b8cae.jpg"},6314:(e,n,t)=>{"use strict";e.exports=t.p+"icon-demo-large-photo.464fc.jpg"},9650:(e,n,t)=>{var r,a=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var n,a,i;e=e||{},n||(n=void 0!==e?e:{}),n.ready=new Promise((function(e,n){a=e,i=n}));var o,s,c,l,u,d={};for(o in n)n.hasOwnProperty(o)&&(d[o]=n[o]);s="object"==typeof window,c="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,u=!s&&!l&&!c;var f,h,p,v,m="";l?(m=c?t(5783).dirname(m)+"/":"//",f=function(e,n){return p||(p=t(2203)),v||(v=t(5783)),e=v.normalize(e),p.readFileSync(e,n?null:"utf8")},h=function(e){return(e=f(e,!0)).buffer||(e=new Uint8Array(e)),w(e.buffer),e},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",K),n.inspect=function(){return"[Emscripten Module object]"}):u?("undefined"!=typeof read&&(f=function(e){return read(e)}),h=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||c)&&(c?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),r&&(m=r),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",f=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},c&&(h=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}));var g,b=n.print||console.log.bind(console),y=n.printErr||console.warn.bind(console);for(o in d)d.hasOwnProperty(o)&&(n[o]=d[o]);d=null,n.wasmBinary&&(g=n.wasmBinary),n.noExitRuntime&&n.noExitRuntime,"object"!=typeof WebAssembly&&K("no native wasm support detected");var j,x=!1;function w(e,n){e||K("Assertion failed: "+n)}var A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,n,t){var r=n+t;for(t=n;e[t]&&!(t>=r);)++t;if(16<t-n&&e.subarray&&A)return A.decode(e.subarray(n,t));for(r="";n<t;){var a=e[n++];if(128&a){var i=63&e[n++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&e[n++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&e[n++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}var C,N,_,S,k,T,E,P,I,F="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function R(e,n){for(var t=e>>1,r=t+n/2;!(t>=r)&&k[t];)++t;if(32<(t<<=1)-e&&F)return F.decode(_.subarray(e,t));for(t="",r=0;!(r>=n/2);++r){var a=S[e+2*r>>1];if(0==a)break;t+=String.fromCharCode(a)}return t}function B(e,n,t){if(void 0===t&&(t=2147483647),2>t)return 0;var r=n;t=(t-=2)<2*e.length?t/2:e.length;for(var a=0;a<t;++a)S[n>>1]=e.charCodeAt(a),n+=2;return S[n>>1]=0,n-r}function V(e){return 2*e.length}function W(e,n){for(var t=0,r="";!(t>=n/4);){var a=T[e+4*t>>2];if(0==a)break;++t,65536<=a?(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a)):r+=String.fromCharCode(a)}return r}function M(e,n,t){if(void 0===t&&(t=2147483647),4>t)return 0;var r=n;t=r+t-4;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),T[n>>2]=i,(n+=4)+4>t)break}return T[n>>2]=0,n-r}function L(e){for(var n=0,t=0;t<e.length;++t){var r=e.charCodeAt(t);55296<=r&&57343>=r&&++t,n+=4}return n}function U(){var e=j.buffer;C=e,n.HEAP8=N=new Int8Array(e),n.HEAP16=S=new Int16Array(e),n.HEAP32=T=new Int32Array(e),n.HEAPU8=_=new Uint8Array(e),n.HEAPU16=k=new Uint16Array(e),n.HEAPU32=E=new Uint32Array(e),n.HEAPF32=P=new Float32Array(e),n.HEAPF64=I=new Float64Array(e)}var D,z=[],Z=[],H=[],Y=[];function G(){var e=n.preRun.shift();z.unshift(e)}var X=0,q=null,$=null;function K(e){throw n.onAbort&&n.onAbort(e),y(e),x=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),i(e),e}function Q(e){var n=ee;return String.prototype.startsWith?n.startsWith(e):0===n.indexOf(e)}function J(){return Q("data:application/octet-stream;base64,")}n.preloadedImages={},n.preloadedAudios={};var ee="diff.wasm";if(!J()){var ne=ee;ee=n.locateFile?n.locateFile(ne,m):m+ne}function te(){var e=ee;try{if(e==ee&&g)return new Uint8Array(g);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){K(e)}}function re(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(n);else{var r=t.qa;"number"==typeof r?void 0===t.ga?D.get(r)():D.get(r)(t.ga):r(void 0===t.ga?null:t.ga)}}}function ae(e){this.O=e-16,this.Ga=function(e){T[this.O+8>>2]=e},this.Da=function(e){T[this.O+0>>2]=e},this.Ea=function(){T[this.O+4>>2]=0},this.Ca=function(){N[this.O+12>>0]=0},this.Fa=function(){N[this.O+13>>0]=0},this.xa=function(e,n){this.Ga(e),this.Da(n),this.Ea(),this.Ca(),this.Fa()}}var ie={};function oe(e){for(;e.length;){var n=e.pop();e.pop()(n)}}function se(e){return this.fromWireType(E[e>>2])}var ce={},le={},ue={};function de(e){if(void 0===e)return"_unknown";var n=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=n&&57>=n?"_"+e:e}function fe(e,n){return e=de(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(n)}function he(e){var n=Error,t=fe(e,(function(n){this.name=e,this.message=n,void 0!==(n=Error(n).stack)&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},t}var pe=void 0;function ve(e){throw new pe(e)}function me(e,n,t){function r(n){(n=t(n)).length!==e.length&&ve("Mismatched type converter count");for(var r=0;r<e.length;++r)we(e[r],n[r])}e.forEach((function(e){ue[e]=n}));var a=Array(n.length),i=[],o=0;n.forEach((function(e,n){le.hasOwnProperty(e)?a[n]=le[e]:(i.push(e),ce.hasOwnProperty(e)||(ce[e]=[]),ce[e].push((function(){a[n]=le[e],++o===i.length&&r(a)})))})),0===i.length&&r(a)}function ge(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var be=void 0;function ye(e){for(var n="";_[e];)n+=be[_[e++]];return n}var je=void 0;function xe(e){throw new je(e)}function we(e,n,t){if(t=t||{},!("argPackAdvance"in n))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=n.name;if(e||xe('type "'+r+'" must have a positive integer typeid pointer'),le.hasOwnProperty(e)){if(t.wa)return;xe("Cannot register type '"+r+"' twice")}le[e]=n,delete ue[e],ce.hasOwnProperty(e)&&(n=ce[e],delete ce[e],n.forEach((function(e){e()})))}function Ae(e){return{count:e.count,Z:e.Z,aa:e.aa,O:e.O,R:e.R,S:e.S,T:e.T}}function Oe(e){xe(e.N.R.P.name+" instance already deleted")}var Ce=!1;function Ne(){}function _e(e){--e.count.value,0===e.count.value&&(e.S?e.T.X(e.S):e.R.P.X(e.O))}function Se(e){return"undefined"==typeof FinalizationGroup?(Se=function(e){return e},e):(Ce=new FinalizationGroup((function(e){for(var n=e.next();!n.done;n=e.next())(n=n.value).O?_e(n):console.warn("object already deleted: "+n.O)})),Ne=function(e){Ce.unregister(e.N)},(Se=function(e){return Ce.register(e,e.N,e.N),e})(e))}var ke=void 0,Te=[];function Ee(){for(;Te.length;){var e=Te.pop();e.N.Z=!1,e.delete()}}function Pe(){}var Ie={};function Fe(e,n,t){if(void 0===e[n].W){var r=e[n];e[n]=function(){return e[n].W.hasOwnProperty(arguments.length)||xe("Function '"+t+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[n].W+")!"),e[n].W[arguments.length].apply(this,arguments)},e[n].W=[],e[n].W[r.da]=r}}function Re(e,n,t,r,a,i,o,s){this.name=e,this.constructor=n,this.$=t,this.X=r,this.U=a,this.ra=i,this.ba=o,this.oa=s,this.Aa=[]}function Be(e,n,t){for(;n!==t;)n.ba||xe("Expected null or instance of "+t.name+", got an instance of "+n.name),e=n.ba(e),n=n.U;return e}function Ve(e,n){return null===n?(this.ha&&xe("null is not a valid "+this.name),0):(n.N||xe('Cannot pass "'+en(n)+'" as a '+this.name),n.N.O||xe("Cannot pass deleted object as a pointer of type "+this.name),Be(n.N.O,n.N.R.P,this.P))}function We(e,n){if(null===n){if(this.ha&&xe("null is not a valid "+this.name),this.fa){var t=this.ia();return null!==e&&e.push(this.X,t),t}return 0}if(n.N||xe('Cannot pass "'+en(n)+'" as a '+this.name),n.N.O||xe("Cannot pass deleted object as a pointer of type "+this.name),!this.ea&&n.N.R.ea&&xe("Cannot convert argument of type "+(n.N.T?n.N.T.name:n.N.R.name)+" to parameter type "+this.name),t=Be(n.N.O,n.N.R.P,this.P),this.fa)switch(void 0===n.N.S&&xe("Passing raw pointer to smart pointer is illegal"),this.Ka){case 0:n.N.T===this?t=n.N.S:xe("Cannot convert argument of type "+(n.N.T?n.N.T.name:n.N.R.name)+" to parameter type "+this.name);break;case 1:t=n.N.S;break;case 2:if(n.N.T===this)t=n.N.S;else{var r=n.clone();t=this.Ba(t,Je((function(){r.delete()}))),null!==e&&e.push(this.X,t)}break;default:xe("Unsupporting sharing policy")}return t}function Me(e,n){return null===n?(this.ha&&xe("null is not a valid "+this.name),0):(n.N||xe('Cannot pass "'+en(n)+'" as a '+this.name),n.N.O||xe("Cannot pass deleted object as a pointer of type "+this.name),n.N.R.ea&&xe("Cannot convert argument of type "+n.N.R.name+" to parameter type "+this.name),Be(n.N.O,n.N.R.P,this.P))}function Le(e,n,t){return n===t?e:void 0===t.U||null===(e=Le(e,n,t.U))?null:t.oa(e)}var Ue={};function De(e,n){return n.R&&n.O||ve("makeClassHandle requires ptr and ptrType"),!!n.T!=!!n.S&&ve("Both smartPtrType and smartPtr must be specified"),n.count={value:1},Se(Object.create(e,{N:{value:n}}))}function ze(e,n,t,r){this.name=e,this.P=n,this.ha=t,this.ea=r,this.fa=!1,this.X=this.Ba=this.ia=this.ma=this.Ka=this.za=void 0,void 0!==n.U?this.toWireType=We:(this.toWireType=r?Ve:Me,this.V=null)}function Ze(e,t){var r=-1!=(e=ye(e)).indexOf("j")?function(e,t){w(0<=e.indexOf("j"),"getDynCaller should only be called with i64 sigs");var r=[];return function(){r.length=arguments.length;for(var a=0;a<arguments.length;a++)r[a]=arguments[a];return-1!=e.indexOf("j")?r&&r.length?n["dynCall_"+e].apply(null,[t].concat(r)):n["dynCall_"+e].call(null,t):D.get(t).apply(null,r)}}(e,t):D.get(t);return"function"!=typeof r&&xe("unknown function pointer with signature "+e+": "+t),r}var He=void 0;function Ye(e){var n=ye(e=yn(e));return bn(e),n}function Ge(e,n){var t=[],r={};throw n.forEach((function e(n){r[n]||le[n]||(ue[n]?ue[n].forEach(e):(t.push(n),r[n]=!0))})),new He(e+": "+t.map(Ye).join([", "]))}function Xe(e,n){for(var t=[],r=0;r<e;r++)t.push(T[(n>>2)+r]);return t}function qe(e){var n=Function;if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+typeof n+" which is not a function");var t=fe(n.name||"unknownFunctionName",(function(){}));return t.prototype=n.prototype,t=new t,(e=n.apply(t,e))instanceof Object?e:t}var $e=[],Ke=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Qe(e){4<e&&0==--Ke[e].ja&&(Ke[e]=void 0,$e.push(e))}function Je(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var n=$e.length?$e.pop():Ke.length;return Ke[n]={ja:1,value:e},n}}function en(e){if(null===e)return"null";var n=typeof e;return"object"===n||"array"===n||"function"===n?e.toString():""+e}function nn(e,n){switch(n){case 2:return function(e){return this.fromWireType(P[e>>2])};case 3:return function(e){return this.fromWireType(I[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function tn(e,n,t){switch(n){case 0:return t?function(e){return N[e]}:function(e){return _[e]};case 1:return t?function(e){return S[e>>1]}:function(e){return k[e>>1]};case 2:return t?function(e){return T[e>>2]}:function(e){return E[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var rn={};function an(e){var n=rn[e];return void 0===n?ye(e):n}var on=[];function sn(e){return e||xe("Cannot use deleted val. handle = "+e),Ke[e].value}function cn(){return"object"==typeof globalThis?globalThis:Function("return this")()}function ln(e,n){var t=le[e];return void 0===t&&xe(n+" has unknown type "+Ye(e)),t}var un={},dn=[null,[],[]];pe=n.InternalError=he("InternalError");for(var fn=Array(256),hn=0;256>hn;++hn)fn[hn]=String.fromCharCode(hn);be=fn,je=n.BindingError=he("BindingError"),Pe.prototype.isAliasOf=function(e){if(!(this instanceof Pe&&e instanceof Pe))return!1;var n=this.N.R.P,t=this.N.O,r=e.N.R.P;for(e=e.N.O;n.U;)t=n.ba(t),n=n.U;for(;r.U;)e=r.ba(e),r=r.U;return n===r&&t===e},Pe.prototype.clone=function(){if(this.N.O||Oe(this),this.N.aa)return this.N.count.value+=1,this;var e=Se(Object.create(Object.getPrototypeOf(this),{N:{value:Ae(this.N)}}));return e.N.count.value+=1,e.N.Z=!1,e},Pe.prototype.delete=function(){this.N.O||Oe(this),this.N.Z&&!this.N.aa&&xe("Object already scheduled for deletion"),Ne(this),_e(this.N),this.N.aa||(this.N.S=void 0,this.N.O=void 0)},Pe.prototype.isDeleted=function(){return!this.N.O},Pe.prototype.deleteLater=function(){return this.N.O||Oe(this),this.N.Z&&!this.N.aa&&xe("Object already scheduled for deletion"),Te.push(this),1===Te.length&&ke&&ke(Ee),this.N.Z=!0,this},ze.prototype.sa=function(e){return this.ma&&(e=this.ma(e)),e},ze.prototype.ka=function(e){this.X&&this.X(e)},ze.prototype.argPackAdvance=8,ze.prototype.readValueFromPointer=se,ze.prototype.deleteObject=function(e){null!==e&&e.delete()},ze.prototype.fromWireType=function(e){function n(){return this.fa?De(this.P.$,{R:this.za,O:t,T:this,S:e}):De(this.P.$,{R:this,O:e})}var t=this.sa(e);if(!t)return this.ka(e),null;var r=function(e,n){for(void 0===n&&xe("ptr should not be undefined");e.U;)n=e.ba(n),e=e.U;return Ue[n]}(this.P,t);if(void 0!==r)return 0===r.N.count.value?(r.N.O=t,r.N.S=e,r.clone()):(r=r.clone(),this.ka(e),r);if(r=this.P.ra(t),!(r=Ie[r]))return n.call(this);r=this.ea?r.na:r.pointerType;var a=Le(t,this.P,r.P);return null===a?n.call(this):this.fa?De(r.P.$,{R:r,O:a,T:this,S:e}):De(r.P.$,{R:r,O:a})},n.getInheritedInstanceCount=function(){return Object.keys(Ue).length},n.getLiveInheritedInstances=function(){var e,n=[];for(e in Ue)Ue.hasOwnProperty(e)&&n.push(Ue[e]);return n},n.flushPendingDeletes=Ee,n.setDelayFunction=function(e){ke=e,Te.length&&ke&&ke(Ee)},He=n.UnboundTypeError=he("UnboundTypeError"),n.count_emval_handles=function(){for(var e=0,n=5;n<Ke.length;++n)void 0!==Ke[n]&&++e;return e},n.get_first_emval=function(){for(var e=5;e<Ke.length;++e)if(void 0!==Ke[e])return Ke[e];return null},Z.push({qa:function(){mn()}});var pn={b:function(e,n,t,r){K("Assertion failed: "+(e?O(_,e,void 0):"")+", at: "+[n?n?O(_,n,void 0):"":"unknown filename",t,r?r?O(_,r,void 0):"":"unknown function"])},B:function(e){return gn(e+16)+16},E:function(){},A:function(e,n,t){throw new ae(e).xa(n,t),e},i:function(e){var n=ie[e];delete ie[e];var t=n.ia,r=n.X,a=n.la;me([e],a.map((function(e){return e.va})).concat(a.map((function(e){return e.Ia}))),(function(e){var i={};return a.forEach((function(n,t){var r=e[t],o=n.ta,s=n.ua,c=e[t+a.length],l=n.Ha,u=n.Ja;i[n.pa]={read:function(e){return r.fromWireType(o(s,e))},write:function(e,n){var t=[];l(u,e,c.toWireType(t,n)),oe(t)}}})),[{name:n.name,fromWireType:function(e){var n,t={};for(n in i)t[n]=i[n].read(e);return r(e),t},toWireType:function(e,n){for(var a in i)if(!(a in n))throw new TypeError('Missing field:  "'+a+'"');var o=t();for(a in i)i[a].write(o,n[a]);return null!==e&&e.push(r,o),o},argPackAdvance:8,readValueFromPointer:se,V:r}]}))},y:function(e,n,t,r,a){var i=ge(t);we(e,{name:n=ye(n),fromWireType:function(e){return!!e},toWireType:function(e,n){return n?r:a},argPackAdvance:8,readValueFromPointer:function(e){if(1===t)var r=N;else if(2===t)r=S;else{if(4!==t)throw new TypeError("Unknown boolean type size: "+n);r=T}return this.fromWireType(r[e>>i])},V:null})},t:function(e,t,r,a,i,o,s,c,l,u,d,f,h){d=ye(d),o=Ze(i,o),c&&(c=Ze(s,c)),u&&(u=Ze(l,u)),h=Ze(f,h);var p=de(d);!function(e,t){n.hasOwnProperty(e)?(xe("Cannot register public name '"+e+"' twice"),Fe(n,e,e),n.hasOwnProperty(void 0)&&xe("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),n[e].W[void 0]=t):n[e]=t}(p,(function(){Ge("Cannot construct "+d+" due to unbound types",[a])})),me([e,t,r],a?[a]:[],(function(t){if(t=t[0],a)var r=t.P,i=r.$;else i=Pe.prototype;t=fe(p,(function(){if(Object.getPrototypeOf(this)!==s)throw new je("Use 'new' to construct "+d);if(void 0===l.Y)throw new je(d+" has no accessible constructor");var e=l.Y[arguments.length];if(void 0===e)throw new je("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.Y).toString()+") parameters instead!");return e.apply(this,arguments)}));var s=Object.create(i,{constructor:{value:t}});t.prototype=s;var l=new Re(d,t,s,h,r,o,c,u);r=new ze(d,l,!0,!1),i=new ze(d+"*",l,!1,!1);var f=new ze(d+" const*",l,!1,!0);return Ie[e]={pointerType:i,na:f},function(e,t){n.hasOwnProperty(e)||ve("Replacing nonexistant public symbol"),n[e]=t,n[e].da=void 0}(p,t),[r,i,f]}))},s:function(e,n,t,r,a,i){w(0<n);var o=Xe(n,t);a=Ze(r,a);var s=[i],c=[];me([],[e],(function(e){var t="constructor "+(e=e[0]).name;if(void 0===e.P.Y&&(e.P.Y=[]),void 0!==e.P.Y[n-1])throw new je("Cannot register multiple constructors with identical number of parameters ("+(n-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.P.Y[n-1]=function(){Ge("Cannot construct "+e.name+" due to unbound types",o)},me([],o,(function(r){return e.P.Y[n-1]=function(){arguments.length!==n-1&&xe(t+" called with "+arguments.length+" arguments, expected "+(n-1)),c.length=0,s.length=n;for(var e=1;e<n;++e)s[e]=r[e].toWireType(c,arguments[e-1]);return e=a.apply(null,s),oe(c),r[0].fromWireType(e)},[]})),[]}))},r:function(e,n,t,r,a,i,o,s){var c=Xe(t,r);n=ye(n),i=Ze(a,i),me([],[e],(function(e){function r(){Ge("Cannot call "+a+" due to unbound types",c)}var a=(e=e[0]).name+"."+n;s&&e.P.Aa.push(n);var l=e.P.$,u=l[n];return void 0===u||void 0===u.W&&u.className!==e.name&&u.da===t-2?(r.da=t-2,r.className=e.name,l[n]=r):(Fe(l,n,a),l[n].W[t-2]=r),me([],c,(function(r){var s=a,c=e,u=i,d=r.length;2>d&&xe("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=null!==r[1]&&null!==c,h=!1;for(c=1;c<r.length;++c)if(null!==r[c]&&void 0===r[c].V){h=!0;break}var p="void"!==r[0].name,v="",m="";for(c=0;c<d-2;++c)v+=(0!==c?", ":"")+"arg"+c,m+=(0!==c?", ":"")+"arg"+c+"Wired";s="return function "+de(s)+"("+v+") {\nif (arguments.length !== "+(d-2)+") {\nthrowBindingError('function "+s+" called with ' + arguments.length + ' arguments, expected "+(d-2)+" args!');\n}\n",h&&(s+="var destructors = [];\n");var g=h?"destructors":"null";for(v="throwBindingError invoker fn runDestructors retType classParam".split(" "),u=[xe,u,o,oe,r[0],r[1]],f&&(s+="var thisWired = classParam.toWireType("+g+", this);\n"),c=0;c<d-2;++c)s+="var arg"+c+"Wired = argType"+c+".toWireType("+g+", arg"+c+"); // "+r[c+2].name+"\n",v.push("argType"+c),u.push(r[c+2]);if(f&&(m="thisWired"+(0<m.length?", ":"")+m),s+=(p?"var rv = ":"")+"invoker(fn"+(0<m.length?", ":"")+m+");\n",h)s+="runDestructors(destructors);\n";else for(c=f?1:2;c<r.length;++c)d=1===c?"thisWired":"arg"+(c-2)+"Wired",null!==r[c].V&&(s+=d+"_dtor("+d+"); // "+r[c].name+"\n",v.push(d+"_dtor"),u.push(r[c].V));return p&&(s+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),v.push(s+"}\n"),r=qe(v).apply(null,u),void 0===l[n].W?(r.da=t-2,l[n]=r):l[n].W[t-2]=r,[]})),[]}))},x:function(e,n){we(e,{name:n=ye(n),fromWireType:function(e){var n=Ke[e].value;return Qe(e),n},toWireType:function(e,n){return Je(n)},argPackAdvance:8,readValueFromPointer:se,V:null})},k:function(e,n,t){t=ge(t),we(e,{name:n=ye(n),fromWireType:function(e){return e},toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+en(n)+'" to '+this.name);return n},argPackAdvance:8,readValueFromPointer:nn(n,t),V:null})},d:function(e,n,t,r,a){function i(e){return e}n=ye(n),-1===a&&(a=4294967295);var o=ge(t);if(0===r){var s=32-8*t;i=function(e){return e<<s>>>s}}var c=-1!=n.indexOf("unsigned");we(e,{name:n,fromWireType:i,toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+en(t)+'" to '+this.name);if(t<r||t>a)throw new TypeError('Passing a number "'+en(t)+'" from JS side to C/C++ side to an argument of type "'+n+'", which is outside the valid range ['+r+", "+a+"]!");return c?t>>>0:0|t},argPackAdvance:8,readValueFromPointer:tn(n,o,0!==r),V:null})},c:function(e,n,t){function r(e){var n=E;return new a(C,n[1+(e>>=2)],n[e])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][n];we(e,{name:t=ye(t),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{wa:!0})},l:function(e,n){var t="std::string"===(n=ye(n));we(e,{name:n,fromWireType:function(e){var n=E[e>>2];if(t)for(var r=e+4,a=0;a<=n;++a){var i=e+4+a;if(a==n||0==_[i]){if(r=r?O(_,r,i-r):"",void 0===o)var o=r;else o+=String.fromCharCode(0),o+=r;r=i+1}}else{for(o=Array(n),a=0;a<n;++a)o[a]=String.fromCharCode(_[e+4+a]);o=o.join("")}return bn(e),o},toWireType:function(e,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var r="string"==typeof n;r||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int8Array||xe("Cannot pass non-string to std::string");var a=(t&&r?function(){for(var e=0,t=0;t<n.length;++t){var r=n.charCodeAt(t);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&n.charCodeAt(++t)),127>=r?++e:e=2047>=r?e+2:65535>=r?e+3:e+4}return e}:function(){return n.length})(),i=gn(4+a+1);if(E[i>>2]=a,t&&r)!function(e,n,t){var r=_;if(0<t){t=n+t-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),127>=i){if(n>=t)break;r[n++]=i}else{if(2047>=i){if(n+1>=t)break;r[n++]=192|i>>6}else{if(65535>=i){if(n+2>=t)break;r[n++]=224|i>>12}else{if(n+3>=t)break;r[n++]=240|i>>18,r[n++]=128|i>>12&63}r[n++]=128|i>>6&63}r[n++]=128|63&i}}r[n]=0}}(n,i+4,a+1);else if(r)for(r=0;r<a;++r){var o=n.charCodeAt(r);255<o&&(bn(i),xe("String has UTF-16 code units that do not fit in 8 bits")),_[i+4+r]=o}else for(r=0;r<a;++r)_[i+4+r]=n[r];return null!==e&&e.push(bn,i),i},argPackAdvance:8,readValueFromPointer:se,V:function(e){bn(e)}})},g:function(e,n,t){if(t=ye(t),2===n)var r=R,a=B,i=V,o=function(){return k},s=1;else 4===n&&(r=W,a=M,i=L,o=function(){return E},s=2);we(e,{name:t,fromWireType:function(e){for(var t,a=E[e>>2],i=o(),c=e+4,l=0;l<=a;++l){var u=e+4+l*n;l!=a&&0!=i[u>>s]||(c=r(c,u-c),void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),c=u+n)}return bn(e),t},toWireType:function(e,r){"string"!=typeof r&&xe("Cannot pass non-string to C++ string type "+t);var o=i(r),c=gn(4+o+n);return E[c>>2]=o>>s,a(r,c+4,o+n),null!==e&&e.push(bn,c),c},argPackAdvance:8,readValueFromPointer:se,V:function(e){bn(e)}})},m:function(e,n,t,r,a,i){ie[e]={name:ye(n),ia:Ze(t,r),X:Ze(a,i),la:[]}},e:function(e,n,t,r,a,i,o,s,c,l){ie[e].la.push({pa:ye(n),va:t,ta:Ze(r,a),ua:i,Ia:o,Ha:Ze(s,c),Ja:l})},z:function(e,n){we(e,{ya:!0,name:n=ye(n),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:function(e,n,t,r){(e=on[e])(n=sn(n),t=an(t),null,r)},f:Qe,p:function(e){return 0===e?Je(cn()):(e=an(e),Je(cn()[e]))},o:function(e,n){for(var t=(n=function(e,n){for(var t=Array(e),r=0;r<e;++r)t[r]=ln(T[(n>>2)+r],"parameter "+r);return t}(e,n))[0],r=t.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$",a=["retType"],i=[t],o="",s=0;s<e-1;++s)o+=(0!==s?", ":"")+"arg"+s,a.push("argType"+s),i.push(n[1+s]);r="return function "+de("methodCaller_"+r)+"(handle, name, destructors, args) {\n";var c=0;for(s=0;s<e-1;++s)r+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=n[s+1].argPackAdvance;for(r+="    var rv = handle[name]("+o+");\n",s=0;s<e-1;++s)n[s+1].deleteObject&&(r+="    argType"+s+".deleteObject(arg"+s+");\n");return t.ya||(r+="    return retType.toWireType(destructors, rv);\n"),a.push(r+"};\n"),function(e){var n=on.length;return on.push(e),n}(e=qe(a).apply(null,i))},h:function(e){4<e&&(Ke[e].ja+=1)},D:function(e,t,r,a){e=sn(e);var i=un[t];if(!i){i="";for(var o=0;o<t;++o)i+=(0!==o?", ":"")+"arg"+o;var s="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n";for(o=0;o<t;++o)s+="var argType"+o+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+o+'], "parameter '+o+'");\nvar arg'+o+" = argType"+o+".readValueFromPointer(args);\nargs += argType"+o+"['argPackAdvance'];\n";i=new Function("requireRegisteredType","Module","__emval_register",s+"var obj = new constructor("+i+");\nreturn __emval_register(obj);\n}\n")(ln,n,Je),un[t]=i}return i(e,r,a)},C:function(){return Je([])},q:function(e,n){return Je(e=(e=ln(e,"_emval_take_value")).readValueFromPointer(n))},a:function(){K()},v:function(e,n,t){_.copyWithin(e,n,n+t)},w:function(e){e>>>=0;var n=_.length;if(2147483648<e)return!1;for(var t=1;4>=t;t*=2){var r=n*(1+.2/t);r=Math.min(r,e+100663296),0<(r=Math.max(16777216,e,r))%65536&&(r+=65536-r%65536);e:{try{j.grow(Math.min(2147483648,r)-C.byteLength+65535>>>16),U();var a=1;break e}catch(e){}a=void 0}if(a)return!0}return!1},j:function(e,n,t,r){for(var a=0,i=0;i<t;i++){for(var o=T[n+8*i>>2],s=T[n+(8*i+4)>>2],c=0;c<s;c++){var l=_[o+c],u=dn[e];0===l||10===l?((1===e?b:y)(O(u,0)),u.length=0):u.push(l)}a+=s}return T[r>>2]=a,0},u:function(){}};!function(){function e(e){n.asm=e.exports,j=n.asm.F,U(),D=n.asm.G,X--,n.monitorRunDependencies&&n.monitorRunDependencies(X),0==X&&(null!==q&&(clearInterval(q),q=null),$&&(e=$,$=null,e()))}function t(n){e(n.instance)}function r(e){return(g||!s&&!c||"function"!=typeof fetch||Q("file://")?Promise.resolve().then((function(){return te()})):fetch(ee,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ee+"'";return e.arrayBuffer()})).catch((function(){return te()}))).then((function(e){return WebAssembly.instantiate(e,a)})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),K(e)}))}var a={a:pn};if(X++,n.monitorRunDependencies&&n.monitorRunDependencies(X),n.instantiateWasm)try{return n.instantiateWasm(a,e)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||J()||Q("file://")||"function"!=typeof fetch?r(t):fetch(ee,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,a).then(t,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),r(t)}))}))).catch(i)}();var vn,mn=n.___wasm_call_ctors=function(){return(mn=n.___wasm_call_ctors=n.asm.H).apply(null,arguments)},gn=n._malloc=function(){return(gn=n._malloc=n.asm.I).apply(null,arguments)},bn=n._free=function(){return(bn=n._free=n.asm.J).apply(null,arguments)},yn=n.___getTypeName=function(){return(yn=n.___getTypeName=n.asm.K).apply(null,arguments)};function jn(){function e(){if(!vn&&(vn=!0,n.calledRun=!0,!x)){if(re(Z),re(H),a(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var e=n.postRun.shift();Y.unshift(e)}re(Y)}}if(!(0<X)){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)G();re(z),0<X||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e())}}if(n.___embind_register_native_and_builtin_types=function(){return(n.___embind_register_native_and_builtin_types=n.asm.L).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.M).apply(null,arguments)},$=function e(){vn||jn(),vn||($=e)},n.run=jn,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return jn(),e.ready});e.exports=a},3147:(e,n,t)=>{"use strict";var r={};t.r(r),t.d(r,{Controls:()=>Fe,OptionsPanel:()=>Ie,encode:()=>Be,extension:()=>Te,getDefaultOptions:()=>Pe,getOptionsList:()=>Re,mimeType:()=>ke,name:()=>Se});var a=t(1925),i=t(6258),o=t(7789),s=t(1214),c=t(3889),l=t(4279);async function u(e){const n=URL.createObjectURL(e);try{return await async function(e){const n=new Image;n.decoding="async",n.src=e;const t=new Promise(((e,t)=>{n.onload=()=>e(),n.onerror=()=>t(Error("Image loading error"))}));return n.decode&&await n.decode().catch((()=>null)),await t,n}(n)}finally{URL.revokeObjectURL(n)}}new Map,new Map([[/^%PDF-/,"application/pdf"],[/^GIF87a/,"image/gif"],[/^GIF89a/,"image/gif"],[/^\x89PNG\x0D\x0A\x1A\x0A/,"image/png"],[/^\xFF\xD8\xFF/,"image/jpeg"],[/^BM/,"image/bmp"],[/^I I/,"image/tiff"],[/^II*/,"image/tiff"],[/^MM\x00*/,"image/tiff"],[/^RIFF....WEBPVP8[LX ]/,"image/webp"],[/^\xF4\xFF\x6F/,"image/webp2"],[/^\x00\x00\x00 ftypavif\x00\x00\x00\x00/,"image/avif"],[/^\xff\x0a/,"image/jpegxl"]]);const d=()=>{},f=["","K","M","G","T","P","E","Z","Y"];function h(e,n=1024){const t=Math.abs(e);if(0==t)return`${e.toFixed(2)} B`;const r=~~(Math.log2(t)/Math.log2(n));return`${(e/n**r).toFixed(2)} ${f[r]}B`}class p{constructor(e,n){this.workers=[],this.remotes=[],this.workers=new Array(n),this.remotes=new Array(n);for(let t=0;t<n;t++){const n=e();this.workers[t]=n,this.remotes[t]=(0,l.Ud)(n)}}get count(){return this.workers.length}runOnEach(e){return Promise.all(this.remotes.map(e))}async all(e,n){const t=new Array(e.length);let r=0;return this.runOnEach((async a=>{for(;r<e.length;){const i=r++;t[i]=await n(a,e[i])}})).then((()=>t))}terminate(){this.workers.forEach((e=>e.terminate()))}}function v(){return new Worker(new URL(new URL(t.p+t.u(103),t.b)))}class m{constructor(e,n){const{measure:t,optionsList:r}=n;if(t.workerCount<1)throw new Error("Thread count must be at least 1");const a=Math.min(t.workerCount,r.length);this.image=e,this.config=n,this.pool=new p(v,a)}onProgress(){}increaseProgress(){this.onProgress()}async encode(){const{encoder:e,optionsList:n,measure:t}=this.config,{image:r}=this;return await this.pool.runOnEach((e=>e.setImageToEncode(r))),t.time&&await this.pool.runOnEach((async t=>{await e.encode(n[0],t),this.increaseProgress()})),this.pool.all(n,this.poll.bind(this))}terminate(){this.pool.terminate()}async poll(e,n){const{encoder:t}=this.config,{buffer:r,time:a}=await t.encode(n,e),i=new Blob([r],{type:t.mimeType}),o=await w(i);return this.increaseProgress(),{time:a,buffer:r,data:o,metrics:await this.measure(e,o)}}async measure(e,n){const{SSIM:t,PSNR:r,butteraugli:a}=this.config.measure,i={};if(r&&(i.PSNR=await e.calcPSNR(n),this.increaseProgress()),t.enabled&&(i.SSIM=await e.calcSSIM(n,t.options),this.increaseProgress()),a.enabled){const[t,r]=await e.calcButteraugli(n,a.options);this.increaseProgress();const o=function(e,n,t){if(e.byteLength/n/t!=4)throw new Error("Buffer must be a 8-bit depth RGBA array");const r=document.createElement("canvas").getContext("2d");if(!r)throw new Error("Could not create canvas context");const a=r.createImageData(n,t);return a.data.set(new Uint8ClampedArray(e)),a}(r,n.width,n.height);i.butteraugli={source:t,heatMap:o}}return i}}async function g(e){const n="createImageBitmap"in self?await createImageBitmap(e):await u(e),t=document.createElement("canvas"),{width:r,height:a}=n;t.width=r,t.height=a;const i=t.getContext("2d");if(!i)throw new Error("Canvas not initialized");return i.drawImage(n,0,0),i.getImageData(0,0,r,a)}function b(e,n,t){let r;return r=async function(a){return r=await e()?n:t,await r(a)},e=>r(e)}const y=b((function(){const e=new Image;return e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",new Promise((n=>{e.onload=()=>n(!0),e.onerror=()=>n(!1)}))}),g,(function(e){const n=v();return e.arrayBuffer().then((e=>(0,l.Ud)(n).webpDecode(e))).finally((()=>n.terminate()))})),j=b((function(){const e=new Image;return e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABYAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgS0AAAAAABNjb2xybmNseAABAAQAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB5tZGF0EgAKBzgADtAQQBkyCRAAAAAP+I9ngw==",new Promise((n=>{e.onload=()=>n(!0),e.onerror=()=>n(!1)}))}),g,(function(e){const n=v();return e.arrayBuffer().then((e=>(0,l.Ud)(n).avifDecode(e))).finally((()=>n.terminate()))}));async function x(e){e=function(e){const n=(new DOMParser).parseFromString(e,"image/svg+xml"),t=n.documentElement;if(t.getAttribute("width")&&t.getAttribute("height"))return e;const r=t.getAttribute("viewBox");if(null===r)throw Error("SVG must have width/height or viewBox");const[,,a,i]=r.split(/\s+/);return t.setAttribute("width",a),t.setAttribute("height",i),(new XMLSerializer).serializeToString(n)}(e);const n=new Blob([e],{type:"image/svg+xml"});return function(e,n={}){const{width:t=e.width,height:r=e.height,sx:a=0,sy:i=0,sw:o=e.width,sh:s=e.height}=n,c=document.createElement("canvas");c.width=t,c.height=r;const l=c.getContext("2d");if(!l)throw new Error("Could not create canvas context");return l.drawImage(e,a,i,o,s,0,0,t,r),l.getImageData(0,0,t,r)}(await u(n))}function w(e){switch(e.type){case"image/svg+xml":return e.text().then(x);case"image/webp":return y(e);case"image/avif":return j(e);default:return g(e)}}var A=t(1626),O=t(4685);function C(){return(C=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var N=c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),_=c.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"});const S=function(e){return c.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),N,_)};function k(){return(k=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var T=c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),E=c.createElement("path",{d:"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"});const P=function(e){return c.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),T,E)};function I(){return(I=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var F=c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),R=c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"});const B=function(e){return c.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),F,R)};function V(){return(V=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var W=c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),M=c.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"});const L=function(e){return c.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),W,M)};function U(e){const{className:n,type:t,Icon:r,IconChecked:i,name:o,children:s,checked:c,disabled:l,onChange:u=d,onValueChange:f=d}=e;return(0,a.jsxs)("label",Object.assign({className:(0,A.Z)("_2Ov17",n)},{children:[(0,a.jsx)("input",{type:t,className:"_2IoHf",name:o,disabled:l,checked:c,onChange:function(e){u(e),f(e.currentTarget.checked)}},void 0),(0,a.jsx)("span",Object.assign({className:(0,A.Z)("_2H-Mw",{OBGYY:c})},{children:c?(0,a.jsx)(i,{},void 0):(0,a.jsx)(r,{},void 0)}),void 0),s&&(0,a.jsx)("span",Object.assign({className:"_11H37"},{children:s}),void 0)]}),void 0)}function D(e){e.currentTarget.blur()}function z(e){const{className:n,children:t,title:r,href:i,disabled:o,active:s,onClick:c}=e,l=(0,A.Z)("qzDJM",n,{_3vITC:s}),u=i?"a":"button";return(0,a.jsx)(u,Object.assign({className:l,title:r,disabled:o,href:i,type:"button",onClick:c,onMouseUp:D},{children:t}),void 0)}function Z(e){const{value:n,min:t,max:r,step:i,disabled:o,onChange:s=d,onValueChange:c=d}=e,l={"--value-percent":(n-t)/(r-t)*100+"%"};return(0,a.jsxs)("span",Object.assign({className:"_2DhF4",style:l},{children:[(0,a.jsx)("input",{type:"range",className:"_3dzMs",disabled:o,value:n,min:t,max:r,step:i,onChange:function(e){s(e),c(e.currentTarget.valueAsNumber)}},void 0),(0,a.jsx)("span",Object.assign({className:"_2b567"},{children:(0,a.jsx)("span",{className:"_26ZKf"},void 0)}),void 0)]}),void 0)}function H(e){const{className:n,children:t,title:r,disabled:i,color:o,busy:s,onClick:c}=e,l=(0,A.Z)("_2wLkD",n,o,{_3XmXG:s});return(0,a.jsx)("button",Object.assign({className:l,title:r,disabled:i,type:"button",onClick:c,onMouseUp:D},{children:t}),void 0)}const Y="_1H0a4";function G(e){const{name:n,className:t,value:r,min:i,max:o,step:s,disabled:l,onChange:u,onValueChange:d}=e,[f,h]=function(e=0,n=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,r=0){const[a,i]=(0,c.useState)(e);return[a,function(e){if(e>t)e=t;else if(e<n)e=n;else if(0!==r){const n=e/r;Number.isInteger(n)||(e=Math.round(n)*r)}return i(e),e}]}(r,i,o,.5),p=void 0===r?f:r;function v(e){const n=e.target.valueAsNumber;u&&u(e),d&&d(n),h(n)}return(0,a.jsxs)("div",Object.assign({className:(0,A.Z)("_2dfjc",t)},{children:[(0,a.jsx)("input",{type:"number",className:"xI_9P",disabled:l,name:n,value:r,onChange:v},void 0),(0,a.jsx)("button",{type:"button",className:(0,A.Z)(Y,"dBnP0"),tabIndex:-1,disabled:l,onClick:()=>v(p+(s||1))},void 0),(0,a.jsx)("button",{type:"button",className:Y,tabIndex:-1,disabled:l,onClick:()=>v(p-(s||1))},void 0)]}),void 0)}const X="_3_cLi",q="_1p1yr";function $(){const e=document.body.querySelectorAll("._3_cLi"),n=e[e.length-2];if(n)return n.classList.add(q),()=>n.classList.remove(q)}function K(e){const{className:n,onClose:t=d}=e;function r(e){"Escape"===e.key&&(t(),e.stopImmediatePropagation())}return(0,c.useEffect)((()=>(window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r))),[]),(0,c.useLayoutEffect)($,[]),(0,i.createPortal)((0,a.jsx)("div",Object.assign({className:X},{children:(0,a.jsx)("div",Object.assign({className:(0,A.Z)(n,"_1Vq87")},{children:e.children}),void 0)}),void 0),document.body)}function Q(e){const{state:n,className:t,children:r,onChange:i}=e;function o(e,t){const r=n.x+e,a=n.y+t;i({scale:n.scale,x:r,y:a})}return(0,a.jsx)("div",Object.assign({style:{touchAction:"none"},className:t,onWheel:function(e){const{ctrlKey:t,deltaMode:r,clientX:a,clientY:o}=e;let{deltaY:s}=e;e.preventDefault(),1===r&&(s*=15);const c=1-s/(t?100:300),l=e.currentTarget.firstElementChild.getBoundingClientRect(),u=(l.left+l.width/2-a)*(c-1),d=(l.top+l.height/2-o)*(c-1);i({x:n.x+u,y:n.y+d,scale:n.scale*c})},onTouchStart:function(e){!function(e,n){const t=e.touches[0];function r(e){const r=e.touches[0];n(r.pageX-t.pageX,r.pageY-t.pageY)}document.addEventListener("touchmove",r),document.addEventListener("touchend",(function e(n){n.preventDefault(),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",e)}))}(e.nativeEvent,o)},onMouseDown:function(e){0===e.button&&function(e,n){const t=e.pageX,r=e.pageY;function a(e){n(e.pageX-t,e.pageY-r)}document.addEventListener("mousemove",a),document.addEventListener("mouseup",(function e(n){n.preventDefault(),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)}))}(e.nativeEvent,o)}},{children:r}),void 0)}var J=t(693);function ee(e){return(0,a.jsxs)("div",Object.assign({className:"_3Neg9"},{children:[(0,a.jsx)("select",Object.assign({},e,{className:"_2rF3V"}),void 0),(0,a.jsx)(J.Z,{className:"_2Arv_"},void 0)]}),void 0)}function ne(e){const{className:n,name:t,checked:r,disabled:i,onChange:o=d,onValueChange:s=d}=e,c=(0,A.Z)("_23L3Q",n,{_38B3L:r});return(0,a.jsx)("label",Object.assign({className:c},{children:(0,a.jsx)("input",{type:"checkbox",className:"rBLkp",disabled:i,checked:r,name:t,onChange:function(e){o(e),s(e.currentTarget.checked)}},void 0)}),void 0)}function te(e){return U({...e,type:"checkbox",Icon:S,IconChecked:P})}function re(e){return U({...e,type:"radio",Icon:B,IconChecked:L})}var ae=t(5564),ie=t(6314),oe=t(9573),se=t(8877),ce=t(7721),le=t(5185);function ue(e){const{description:n,url:t,icon:r,onClick:i}=e,[o,s]=(0,c.useState)(!1);return(0,a.jsxs)("button",Object.assign({className:"_2Z_sH",onClick:async function(){if(!o){s(!0);try{await i(t)}finally{s(!1)}}}},{children:[(0,a.jsx)("img",{src:r,alt:"icon",className:"ZflhA"},void 0),o&&(0,a.jsx)("div",{className:"_2BAvs"},void 0),(0,a.jsx)("span",Object.assign({className:"_3fIXD"},{children:n}),void 0)]}),t)}const de="_3SDL7",fe=[{description:"Large photo (2.8MB)",url:ae,icon:ie},{description:"Artwork (408KB)",url:oe,icon:se},{description:"Colorful text (68KB)",url:le,icon:ce}],he=new AbortController;function pe(e){const{onCancel:n,onFileChange:t}=e,r=function(){const[e,n]=(0,c.useState)(!1),t=(0,c.useRef)(0);return{isInArea:e,enter:function(){n(++t.current>0)},leave:function(){n(--t.current>0)},reset:function(){t.current=0,n(!1)}}}(),i=(0,c.useRef)(he),[o,s]=(0,c.useState)("");function l(e){w(e).then((n=>t(e,n))).catch((()=>s("Can not decode file as image.")))}async function u(e){const n=new AbortController;i.current.abort(),i.current=n;const{signal:t}=n;try{l(await async function(e,n){const t=await fetch(e,{signal:n}),r=await t.blob(),a=/[^;]*/.exec(r.type)[0],i=new URL(e).pathname.split("/").pop()||"image",o=t.headers.get("last-modified"),s=o?new Date(o).getTime():void 0;return new File([r],i,{type:a,lastModified:s})}(e,t))}catch(e){if("AbortError"!==e.name)throw e}}const d=fe.map((e=>(0,c.createElement)(ue,Object.assign({},e,{key:e.url,onClick:u}))));return(0,a.jsxs)(K,Object.assign({onClose:n},{children:[(0,a.jsxs)("div",Object.assign({className:"dialog-content"},{children:[(0,a.jsxs)("label",Object.assign({className:(0,A.Z)("_3uHix",{_2jvwR:r.isInArea}),tabIndex:0,onDragEnter:r.enter,onDragOver:e=>e.preventDefault(),onDrop:function(e){e.preventDefault(),r.reset(),i.current.abort();const{items:n}=e.dataTransfer,t=n[0].getAsFile();t?l(t):s("The dropped item is not a file")},onDragLeave:r.leave},{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",Object.assign({className:"wYvdR"},{children:(0,a.jsx)(O.Z,{},void 0)}),void 0),(0,a.jsx)("span",Object.assign({className:de},{children:"Drag & drop"}),void 0)]},void 0),(0,a.jsx)("div",Object.assign({className:de},{children:"Or select an image"}),void 0),(0,a.jsx)("input",{className:"_3-brh",name:"file",type:"file",accept:"image/*",onChange:function(e){i.current.abort();const{files:n}=e.currentTarget;(null==n?void 0:n.length)&&l(n[0])}},void 0)]}),void 0),(0,a.jsx)("span",Object.assign({className:"_2Sr67"},{children:"Or try one of these:"}),void 0),(0,a.jsx)("div",Object.assign({className:"_3BC6E"},{children:d}),void 0)]}),void 0),(0,a.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,a.jsx)("span",Object.assign({className:"Qed9H"},{children:o}),void 0),(0,a.jsx)(H,Object.assign({color:"second",onClick:n},{children:"Back"}),void 0)]}),void 0)]}),void 0)}function ve(e){const{file:n}=e,{width:t,height:r,data:i}=e.image,o=(n.size/i.byteLength*100).toFixed(2);return(0,a.jsxs)("div",Object.assign({className:"dialog-content"},{children:[(0,a.jsx)("canvas",{className:"WKrzW",ref:function(n){if(!n)return;const t=n.getContext("2d");null==t||t.putImageData(e.image,0,0)},width:t,height:r},void 0),(0,a.jsxs)("dl",Object.assign({className:"lL9Er"},{children:[(0,a.jsx)("dt",{children:"File name:"},void 0),(0,a.jsx)("dd",{children:n.name},void 0),(0,a.jsx)("dt",{children:"Type:"},void 0),(0,a.jsx)("dd",{children:n.type},void 0),(0,a.jsx)("dt",{children:"Resolution:"},void 0),(0,a.jsxs)("dd",{children:[t," x ",r]},void 0),(0,a.jsx)("dt",{children:"Raw size:"},void 0),(0,a.jsx)("dd",{children:h(i.byteLength)},void 0),(0,a.jsx)("dt",{children:"File size:"},void 0),(0,a.jsxs)("dd",{children:[h(n.size)," (",o,"%)"]},void 0)]}),void 0)]}),void 0)}t(9650);var me=t(8059);const ge={hfAsymmetry:1,goodQualitySeek:1.5,badQualitySeek:.5},be={form:"_3_OKa dialog-content",field:"_2vX3s",inlineLabel:"_2MSGh",label:"ba7J1"};function ye(e){return e||{version:1,workerCount:navigator.hardwareConcurrency,time:!0,PSNR:!0,SSIM:{enabled:!1,options:me.getOptions()},butteraugli:{enabled:!1,options:ge}}}function je(e){const{value:n,onChange:t}=e;function r(e){const{name:r,valueAsNumber:a}=e.currentTarget;t({...n,[r]:a})}const i=Object.entries(n.options).map((([e,n])=>(0,a.jsxs)("label",Object.assign({className:be.field},{children:[(0,a.jsx)("span",Object.assign({className:be.label},{children:e}),void 0),(0,a.jsx)(G,{className:be.value,name:e,min:0,step:.1,value:n,onChange:r},void 0)]}),e)));return(0,a.jsxs)("fieldset",{children:[(0,a.jsx)(te,Object.assign({checked:n.enabled,name:"butteraugli",onValueChange:e=>t({...n,enabled:e})},{children:"Calculate Butteraugli"}),void 0),(0,a.jsx)("div",Object.assign({className:"subfields"},{children:n.enabled&&i}),void 0)]},void 0)}function xe(e){const{value:n,onChange:t}=e,{workerCount:r,SSIM:i,PSNR:o,butteraugli:s}=n;function c(e){const{name:r,checked:a}=e.currentTarget;t({...n,[r]:a})}return(0,a.jsxs)("form",Object.assign({className:be.form},{children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("span",Object.assign({className:be.inlineLabel},{children:"Worker count:"}),void 0),(0,a.jsx)(G,{value:r,min:1,step:1,onValueChange:function(e){t({...n,workerCount:e})}},void 0)]},void 0),(0,a.jsx)(te,Object.assign({checked:o,name:"PSNR",onChange:c},{children:"Calculate PSNR"}),void 0),(0,a.jsx)(te,Object.assign({checked:i.enabled,name:"SSIM",onChange:c},{children:"Calculate SSIM"}),void 0),(0,a.jsx)(je,{value:s,onChange:function(e){t({...n,butteraugli:e})}},void 0)]}),void 0)}const we="_1gNNV";function Ae(e){const{property:n,label:t,enumObject:r,defaultValue:i}=e;return{id:n,newState:function(){return{constant:i,variable:[]}},ValueField:function(e){const{state:n,onChange:r,onFocus:i}=e,{constant:o,variable:s}=n;function c(e){r({...n,constant:e.currentTarget.name})}const l=Object.keys(s).map((e=>(0,a.jsx)(re,Object.assign({name:e,checked:e===o,onChange:c},{children:e}),e)));return(0,a.jsxs)("label",Object.assign({onFocus:i},{children:[(0,a.jsx)("p",{children:t},void 0),(0,a.jsx)("div",{children:l},void 0)]}),void 0)},OptionField:function(e){const{isVariable:n,state:i,onChange:o,onVariabilityChange:s}=e,{constant:c,variable:l}=i;function u(e){const{checked:n,name:t}=e.currentTarget;let r=[...l];n?r.push(t):r=l.filter((e=>e!==t)),o({...i,variable:r})}function d(e){o({...i,constant:e.currentTarget.name})}let f;return f=n?Object.keys(r).map((e=>(0,a.jsx)(te,Object.assign({className:we,name:e,checked:l.includes(e),onChange:u},{children:e}),e))):Object.keys(r).map((e=>(0,a.jsx)(re,Object.assign({className:we,name:e,checked:c===e,onChange:d},{children:e}),e))),(0,a.jsxs)("fieldset",Object.assign({className:"KvQkT"},{children:[(0,a.jsx)(te,Object.assign({className:"_2zbWt",checked:n,onValueChange:s},{children:t}),void 0),f]}),void 0)},generate:function(e,t,a){const{constant:i,variable:o}=e.data[n];if(t){const e=[];for(const t of o)e.push({...a,[n]:r[t]});return e}return a[n]=r[i],[a]}}}const Oe={quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0},Ce={spinner:"iL1oa",numberInput:"_1BLhK",fieldset:"_1qsN_",header:"_2V-wU",label:"_1ug-0"};function Ne(e){const{property:n,label:t,min:r,max:i,step:o,defaultValue:s}=e;function c(e){const{state:n,onChange:t}=e;return(0,a.jsx)(Z,{value:n.constant,min:r,max:i,step:o,onChange:function(e){const{valueAsNumber:r}=e.currentTarget;t({...n,constant:r})}},void 0)}function l(n){const{state:t,onChange:r}=n,{variable:i}=t;function o(e){const{valueAsNumber:n,name:a}=e.currentTarget,o={...i,[a]:n};r({...t,variable:o})}const s=n=>{const{name:t,min:r,max:s,step:c}={...e,...n};return(0,a.jsxs)("label",Object.assign({className:Ce.spinner},{children:[(0,a.jsx)("span",{children:t},void 0),(0,a.jsx)("input",{className:Ce.numberInput,type:"number",name:t,value:i[t],min:r,max:s,step:c,onChange:o},void 0)]}),void 0)};return(0,a.jsxs)("div",{children:[(0,a.jsx)(s,{name:"min",max:i.max},void 0),(0,a.jsx)(s,{name:"max",min:i.min},void 0),(0,a.jsx)(s,{name:"step",min:i.step},void 0)]},void 0)}return{id:n,newState:function(){return{constant:s,variable:{min:r,max:i,step:o}}},ValueField:function(e){const{state:n,onChange:r,onFocus:i}=e,{constant:o,variable:s}=n,{min:c,max:l,step:u}=s;return(0,a.jsxs)("label",Object.assign({onFocus:i},{children:[(0,a.jsxs)("p",{children:[t,(0,a.jsx)("span",Object.assign({className:Ce.optionValue},{children:o}),void 0)]},void 0),(0,a.jsx)(Z,{value:o,min:c,max:l,step:u,onValueChange:e=>r({...n,constant:e})},void 0)]}),void 0)},OptionField:function(e){const{isVariable:n,state:r,onVariabilityChange:i}=e,{constant:o}=r;return(0,a.jsxs)("fieldset",Object.assign({className:Ce.fieldset},{children:[(0,a.jsxs)("div",Object.assign({className:Ce.header},{children:[(0,a.jsx)(te,Object.assign({className:Ce.label,checked:n,onValueChange:i},{children:t}),void 0),!n&&o]}),void 0),n?l(e):c(e)]}),void 0)},generate:function(e,t,r){const{constant:a,variable:i}=e.data[n];if(t){const{min:e,max:t,step:a}=i,o=[];for(let i=e;i<=t;i+=a)o.push({...r,[n]:i});return o}return r[n]=a,[r]}}}function _e(e){const{property:n,label:t,defaultValue:r}=e;return{id:n,newState:function(){return Boolean(r)},ValueField:function(e){const{state:n,onChange:r,onFocus:i}=e;return(0,a.jsx)("label",Object.assign({onFocus:i},{children:(0,a.jsx)(te,Object.assign({checked:n,onValueChange:r},{children:t}),void 0)}),void 0)},OptionField:function(e){const{isVariable:n,state:r,onChange:i,onVariabilityChange:o}=e;return(0,a.jsxs)("fieldset",Object.assign({className:"_1DfL_ _794Z7"},{children:[(0,a.jsx)(te,Object.assign({className:"_1vFac",checked:n,onValueChange:o},{children:t}),void 0),n?(0,a.jsx)("strong",{children:"OFF & ON"},void 0):(0,a.jsx)(ne,{checked:r,onValueChange:i},void 0)]}),void 0)},generate:function(e,t,r){const{varNames:a,data:i}=e;return t?[{...r,[n]:!1},{...r,[n]:!0}]:(r[n]=i[n],[r])}}}const Se="WebP",ke="image/webp",Te="webp",Ee=[_e({property:"lossless",label:"lossless",defaultValue:Oe.lossless}),Ne({property:"quality",label:"Quality (-q)",min:0,max:100,step:1,defaultValue:Oe.quality}),Ne({property:"near_lossless",label:"Near lossless (-near_lossless)",min:0,max:100,step:1,defaultValue:Oe.near_lossless}),Ne({property:"method",label:"Method (-m)",min:0,max:6,step:1,defaultValue:Oe.method}),Ae({property:"preset",label:"Preset (-preset)",enumObject:{default:{},photo:{sns_strength:80,filter_sharpness:3,filter_strength:30,preprocessing:2},picture:{sns_strength:80,filter_sharpness:4,filter_strength:35,preprocessing:-3},drawing:{sns_strength:25,filter_sharpness:6,filter_strength:10},icon:{sns_strength:25,filter_strength:10,preprocessing:-3},text:{sns_strength:0,filter_strength:0,segments:2,preprocessing:-3}},defaultValue:"default"}),Ne({property:"sns",label:"Spatial noise shaping (-sns)",min:0,max:100,step:1,defaultValue:Oe.sns}),_e({property:"filter_type",label:"User strong filter (-strong)",defaultValue:Oe.filter_type}),_e({property:"autofilter",label:"Auto adjust filter strength (-af)",defaultValue:Oe.autofilter}),Ne({property:"filter_strength",label:"Filter strength (-f)",min:0,max:100,step:1,defaultValue:Oe.filter_strength}),Ne({property:"filter_sharpness",label:"Filter sharpness (-sharpness)",min:0,max:7,step:1,defaultValue:Oe.filter_sharpness}),Ae({property:"image_hint",label:"Hint (-hint)",enumObject:{Default:0,Picture:1,Photo:2,Graph:3},defaultValue:"Default"})];function Pe(e){if(e)return e;const n=Object.fromEntries(Ee.map((e=>[e.id,e.newState()])));return n.quality.variable.step=5,{varNames:["quality"],data:n}}function Ie(e){const{state:n,onChange:t}=e,r=Ee.map((({id:e,OptionField:r})=>(0,a.jsx)(r,{isVariable:n.varNames.includes(e),state:n.data[e],onChange:r=>function(e,r){n.data[e]=r,t({...n})}(e,r),onVariabilityChange:r=>function(e,r){let{varNames:a}=n;r?a.push(e):a=a.filter((n=>n!=e)),t({...n,varNames:a})}(e,r)},e)));return(0,a.jsx)(a.Fragment,{children:r},void 0)}function Fe(e){const{state:n,varName:t,onChange:r,onVariableChange:i}=e,o=Ee.filter((e=>n.varNames.includes(e.id))).map((({id:e,ValueField:t})=>(0,a.jsx)(t,{state:n.data[e],onFocus:()=>i(e),onChange:function(t){const a=Re({varNames:[],data:{...n.data,[e]:t}});r(a[0])}},e)));return(0,a.jsx)(a.Fragment,{children:o},void 0)}function Re(e){const{varNames:n}=e;return Ee.reduce((function(t,r){return t.map((t=>r.generate(e,n.includes(r.id),t))).reduce(((e,n)=>e.concat(n)),[])}),[{}])}function Be(e,n){return n.webpEncode({...Oe,options:e})}const Ve=[r],We=Object.fromEntries(Ve.map((e=>[e.name,e])));function Me(e){if(e)return e;const n={};for(const e of Ve)n[e.name]={enable:!1,state:e.getDefaultOptions()};return n.WebP.enable=!0,n}function Le(e){const{value:n,onChange:t}=e,[r,i]=(0,c.useState)("WebP"),o=Ve.map((e=>{const{name:o}=e,s=(0,A.Z)("_2SlrA",{_1krxL:o===r});return(0,a.jsxs)("div",Object.assign({className:s,tabIndex:0,onClick:()=>i(o)},{children:[(0,a.jsx)(te,{checked:n[o].enable,onChange:function(e){const r={...n[o],enable:e.currentTarget.checked};t({...n,[o]:r})}},void 0),(0,a.jsx)("span",Object.assign({className:"_2G5o7"},{children:o}),void 0)]}),o)})),{OptionsPanel:s}=We[r];return(0,a.jsxs)("div",Object.assign({className:"_1LeZ1 dialog-content"},{children:[(0,a.jsx)("div",Object.assign({className:"_1IVOA"},{children:o}),void 0),(0,a.jsx)("div",Object.assign({className:"_1yw3x"},{children:(0,a.jsx)(s,{state:n[r].state,onChange:function(e){const a={...n[r],state:e};t({...n,[r]:a})}},void 0)}),void 0)]}),void 0)}function Ue(e){return(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Resize:"},void 0),(0,a.jsxs)(ee,{children:[(0,a.jsx)("option",{children:"100%"},void 0),(0,a.jsx)("option",{children:"50%"},void 0),(0,a.jsx)("option",{children:"25%"},void 0),(0,a.jsx)("option",{children:"12.5%"},void 0),(0,a.jsx)("option",{children:"6.25%"},void 0)]},void 0)]},void 0)}const De="_29qBc";function ze(){const e=localStorage.getItem("Config");return e?JSON.parse(e):{preprocess:{},encoders:Me(),measure:ye()}}const Ze=["Information","Preprocess","Encoding","Measure"];function He(e){const{file:n,image:t,onStart:r,onClose:i,onSelectFile:o}=e,[s,l]=(0,c.useState)(0),[u,d]=(0,c.useState)(ze),f=[];for(let e=0;e<Ze.length;e++){const n=Ze[e],t=e===s?(0,A.Z)(De,"wG4Ax"):De;f.push((0,a.jsx)("div",Object.assign({className:t,onClick:()=>l(e)},{children:n}),e))}let h;switch(s){case 0:h=(0,a.jsx)(ve,{file:n,image:t},void 0);break;case 1:h=(0,a.jsx)(Ue,{value:u.preprocess,onChange:e=>d({...u,preprocess:e})},void 0);break;case 2:h=(0,a.jsx)(Le,{value:u.encoders,onChange:e=>d({...u,encoders:e})},void 0);break;case 3:h=(0,a.jsx)(xe,{value:u.measure,onChange:e=>d({...u,measure:e})},void 0)}const p=n&&Object.values(u.encoders).every((e=>e.enable));return(0,a.jsxs)(K,Object.assign({className:"_6sryz",onClose:i},{children:[(0,a.jsx)("div",Object.assign({className:"_3x7vU"},{children:f}),void 0),h,(0,a.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,a.jsx)(H,Object.assign({onClick:o},{children:"Select file..."}),void 0),(0,a.jsx)(H,Object.assign({color:"second",onClick:i},{children:"Cancel"}),void 0),(0,a.jsx)(H,Object.assign({disabled:!p,onClick:function(){r(u),localStorage.setItem("Config",JSON.stringify(u))}},{children:"Start"}),void 0)]}),void 0)]}),void 0)}const Ye=new Intl.RelativeTimeFormat("en");function Ge(e,n,t){return(t-n)/n*(performance.now()-e)}function Xe(e){const{value:n,max:t,onCancel:r}=e,[i]=(0,c.useState)((()=>performance.now())),o=(0,c.useMemo)((()=>function(e,n){let t,r=!1;return function(...e){return r?t:(r=!0,setTimeout((()=>r=!1),500),t=n.apply(this,e))}}(0,Ge)),[])(i,n,t),s=Number.isNaN(o)?"----":Ye.format(~~(o/1e3),"seconds");return(0,a.jsxs)(K,{children:[(0,a.jsxs)("div",Object.assign({className:"_1RFbq dialog-content"},{children:[(0,a.jsx)("h1",{children:"Encoding..."},void 0),(0,a.jsxs)("div",Object.assign({className:"_3vxdS"},{children:[(0,a.jsxs)("span",{children:[n," / ",t]},void 0),(0,a.jsx)("span",{children:s},void 0)]}),void 0),(0,a.jsx)("progress",{value:n,max:t,className:"mrzz8"},void 0)]}),void 0),(0,a.jsx)("div",Object.assign({className:"_3UNgR dialog-actions"},{children:(0,a.jsx)(H,Object.assign({color:"second",onClick:r},{children:" Cancel "}),void 0)}),void 0)]},void 0)}function qe(e){const[n,t]=(0,c.useState)(),[r,i]=(0,c.useState)(),[o,s]=(0,c.useState)(!0),[l,u]=(0,c.useState)(null),[d,f]=(0,c.useState)(1),[h,p]=(0,c.useState)(0);return e.open?l?(0,a.jsx)(Xe,{value:h,max:d,onCancel:function(){l.terminate(),u(null)}},void 0):o?(0,a.jsx)(pe,{onCancel:function(){n?s(!1):e.onClose()},onFileChange:async function(e){const n=await w(e);t(e),i(n),s(!1)}},void 0):(0,a.jsx)(He,{image:r,file:n,onSelectFile:()=>s(!0),onClose:e.onClose,onStart:async function(t){if(!n)throw new Error("File is null");const{preprocess:r,encoders:a,measure:i}=t,o=await w(n);for(const[e,n]of Object.entries(r));let s=0;const c=[];for(const e of Ve){const{name:n,getOptionsList:t}=e,r=a[n];if(!r.enable)continue;const i=t(r.state);c.push([e,i]),s+=i.length}let l=1;i.butteraugli&&l++,i.SSIM&&l++,i.PSNR&&l++,f(1*s*l),p(0);const d={};for(const[e,n]of c){const t={};d[e.name]=t;const r=new m(o,{encoder:e,optionsList:n,measure:i});r.onProgress=()=>p((e=>e++)),u(r);const a=await r.encode();r.terminate(),u(null);for(let e=0;e<n.length;e++)t[JSON.stringify(n[e])]=a[e]}e.onChange({config:t,map:d,original:{file:n,data:o}})}},void 0):null}const $e="_3RfWA";function Ke(){return(Ke=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var Qe=c.createElement("path",{d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"});const Je=function(e){return c.createElement("svg",Ke({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 438.549 438.549",fill:"currentColor"},e),Qe)};function en(e){const{onStart:n}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(H,Object.assign({onClick:n},{children:"Try it!"}),void 0),(0,a.jsxs)(z,Object.assign({href:"https://github.com/Kaciras/ICAnalyze",className:$e},{children:[(0,a.jsx)(Je,{},void 0),"Source Code"]}),void 0)]},void 0),(0,a.jsx)("section",{children:"TODO"},void 0)]},void 0)}var nn=t(6551),tn=t(3937),rn=t(7174),an=t(659);const on={container:"_3kS7K",inputs:"_1Tvc7 controls",imageView:"_1iZci",wrapper:"_2sQef",canvas:"_1YBWC"};var sn;function cn(e,n){if(null===n.current)throw new Error("Canvas is null");const t=n.current.getContext("2d");if(!t)throw new Error("Canvas not initialized");t.putImageData(e,0,0)}function ln(e){const{original:n,optimized:t}=e,{width:r=0,height:i=0}=n.data||{},[o,s]=(0,c.useState)(sn.Compressed),[l,u]=(0,c.useState)(100),[d,f]=(0,c.useState)({x:0,y:0,scale:1}),h=(0,c.useRef)(null),p=(0,c.useRef)(null);function v(e){const{children:n,target:t,disabled:r,title:i}=e;return(0,a.jsx)(z,Object.assign({active:o===t,disabled:r,title:i,onClick:()=>s(t)},{children:n}),void 0)}(0,c.useEffect)((function(){f({x:0,y:0,scale:1}),cn(n.data,h)}),[n]),(0,c.useEffect)((function(){const{metrics:e,data:n}=t;cn(o===sn.HeatMap?e.butteraugli.heatMap:n,p)}),[o,t]);let m=null,g=100;o===sn.AbsDiff&&(g=l,m=(0,a.jsxs)("label",{children:["Brightness:",(0,a.jsx)(G,{value:l,min:100,step:50,onValueChange:u},void 0)]},void 0));const b={width:r,height:i,"--scale":d.scale,"--x":d.x+"px","--y":d.y+"px","--brightness":`${g}%`},y=o===sn.AbsDiff?"difference":void 0,j=!t.metrics.butteraugli,x=j?"You should enable butteraugli to see this":void 0;return(0,a.jsxs)("div",Object.assign({className:on.container},{children:[(0,a.jsxs)("div",Object.assign({className:on.inputs},{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v,Object.assign({target:sn.Original},{children:"Original"}),void 0),(0,a.jsx)(v,Object.assign({target:sn.Compressed},{children:"Output"}),void 0),(0,a.jsx)(v,Object.assign({target:sn.AbsDiff},{children:"Difference"}),void 0),(0,a.jsx)(v,Object.assign({disabled:j,title:x,target:sn.HeatMap},{children:"HeatMap"}),void 0)]},void 0),m]}),void 0),(0,a.jsx)("div",{className:on.controls},void 0),(0,a.jsx)(Q,Object.assign({className:on.imageView,state:d,onChange:f},{children:(0,a.jsxs)("div",Object.assign({className:on.wrapper,style:b},{children:[(0,a.jsx)("canvas",{className:on.canvas,ref:h,width:r,height:i},void 0),(0,a.jsx)("canvas",{className:on.canvas,ref:p,width:r,height:i,style:{mixBlendMode:y},hidden:o===sn.Original},void 0)]}),void 0)}),void 0)]}),void 0)}!function(e){e[e.Original=0]="Original",e[e.Compressed=1]="Compressed",e[e.AbsDiff=2]="AbsDiff",e[e.HeatMap=3]="HeatMap"}(sn||(sn={}));var un=t(4085);function dn(e){const{original:n,outputs:t,index:r}=e,[i,o]=(0,c.useState)();return(0,c.useEffect)((()=>{if(!i)return;i.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:r});const e=i.getOption().series;i.setOption({legend:{formatter:n=>{const t=e.filter((e=>e.name===n));return`${n}: ${t[0].data[r].toFixed(2)}`},data:i.getOption().legend.data}})})),(0,a.jsx)("section",Object.assign({className:"_3T5Kh"},{children:(0,a.jsx)("div",{className:"JAZV5",ref:function(e){if(e&&!i){const r=(0,un.S1)(e,"dark",{renderer:"svg"});o(r),function(e,n,t){const r=[],a=[],i=[];let o=0;function s(e,n){if(void 0===n(t[0]))return;const s=t.map(n);r.push(e),a.push({type:"value",show:!1}),i.push({name:e,type:"line",data:s,yAxisIndex:o++})}const c=n.file.size/100;s("Compression Ratio %",(e=>e.buffer.byteLength/c)),a[0].show=!0,s("Encode Time (ms)",(e=>e.time)),s("SSIM",(e=>e.metrics.SSIM)),s("PSNR (db)",(e=>e.metrics.PSNR)),s("Butteraugli Source",(e=>{var n;return null===(n=e.metrics.butteraugli)||void 0===n?void 0:n.source})),e.setOption({tooltip:{trigger:"axis",showContent:!1,triggerOn:"none"},legend:{data:r},xAxis:{data:t.map(((e,n)=>n))},yAxis:a,series:i,backgroundColor:"transparent"})}(r,n,t)}}},void 0)}),void 0)}function fn(e){const{config:n,value:t,onChange:r}=e,{variableType:i,variableName:o,encoderName:s,options:c}=t;if(i===pn.None)return null;function l(e,n){r({...t,variableType:e,variableName:n})}const u=We[s],d=Object.keys(n.encode).map((e=>(0,a.jsx)("option",Object.assign({value:e},{children:e}),e)));return(0,a.jsxs)("div",Object.assign({className:"_33pnL controls"},{children:[(0,a.jsx)(u.Controls,{state:n.encode[s],varName:i===pn.Options&&o,onChange:function(e){r({...t,options:e})},onVariableChange:e=>l(pn.Encoder,e)},void 0),d.length>1&&(0,a.jsx)("div",Object.assign({className:"_3BEoo",onClick:()=>l(pn.Encoder,"")},{children:(0,a.jsx)(ee,Object.assign({value:s,onChange:function(e){r({...t,encoderName:e.currentTarget.value})}},{children:d}),void 0)}),void 0)]}),void 0)}function hn(e){const{title:n,buffer:t,filename:r,children:i}=e,{mimeType:o,extension:s}=e.codec,[l,u]=(0,c.useState)("");return(0,c.useEffect)((()=>()=>URL.revokeObjectURL(l)),[]),(0,a.jsx)(z,Object.assign({className:$e,title:n,onClick:function(){const e=new Blob([t],{type:o});URL.revokeObjectURL(l);const n=URL.createObjectURL(e);u(n);const a=document.createElement("a");a.href=n,a.download=r.replace(/.[^.]*$/,`.${s}`),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{children:i}),void 0)}var pn;function vn(e){const{result:n,onStart:t,onClose:r}=e,{original:i,config:o,map:s}=n,[l,u]=(0,c.useState)(!0),[d,f]=(0,c.useState)((function(){const{encoders:e}=o;let n=pn.None,t="";const r=Object.entries(e).filter((e=>e[1].enable));r.length>1&&(n=pn.Encoder,t="");const[a,i]=r[0];return i.state.varNames.length>0&&(n=pn.Options,t=i.state.varNames[0]),{variableType:n,variableName:t,encoderName:a,options:We[a].getOptionsList({varNames:[],data:i.state.data})}})),{variableType:h,variableName:p,encoderName:v}=d,m=d.options[0],g=s[v][JSON.stringify(m)],b=We[v];let y;if(h===pn.Preprocess)y=[];else if(h===pn.Encoder){const e=JSON.stringify(m);y=Array.from(Object.values(s)).map((n=>n[e]))}else if(h===pn.Options){const e=s[v];y=b.getOptionsList({varNames:[p],data:o.encoders[v].state.data}).map((n=>e[JSON.stringify(n)]))}else y=[g];const j=y.indexOf(g);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ln,{original:i,optimized:g},void 0),l&&(0,a.jsx)(dn,{original:i,outputs:y,index:j},void 0),(0,a.jsxs)("div",Object.assign({className:"_3BYoV controls"},{children:[(0,a.jsx)(z,Object.assign({title:"Back",className:$e,onClick:r},{children:(0,a.jsx)(an.Z,{},void 0)}),void 0),(0,a.jsx)(z,Object.assign({title:"Select an image",className:$e,onClick:t},{children:(0,a.jsx)(nn.Z,{},void 0)}),void 0),(0,a.jsx)(z,Object.assign({title:"Show chart",className:$e,active:l,onClick:()=>u(!l)},{children:(0,a.jsx)(tn.Z,{},void 0)}),void 0),(0,a.jsx)(hn,Object.assign({title:"Download compressed image",filename:i.file.name,codec:b,buffer:g.buffer},{children:(0,a.jsx)(rn.Z,{},void 0)}),void 0)]}),void 0),(0,a.jsx)(fn,{value:d,onChange:f,config:o},void 0)]},void 0)}!function(e){e[e.None=0]="None",e[e.Preprocess=1]="Preprocess",e[e.Encoder=2]="Encoder",e[e.Options=3]="Options"}(pn||(pn={})),function(){try{new File([],"")}catch{return!1}return!!CSS.supports("mix-blend-mode: difference")&&"AbortController"in window}()||alert("ICAnalyze does not support this browser, please switch to a modern one"),o.S({dsn:"https://d101904fac2c486ea6f8563c2cf054af@o253601.ingest.sentry.io/5499968",integrations:[new s.jK.BrowserTracing],tracesSampleRate:.2}),i.render((0,a.jsx)((function(){const[e,n]=(0,c.useState)(!1),[t,r]=(0,c.useState)(),i=()=>n(!0);return(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(vn,{result:t,onStart:i,onClose:()=>r(void 0)},void 0):(0,a.jsx)(en,{onStart:i},void 0),(0,a.jsx)(qe,{open:e,onChange:function(e){n(!1),r(e)},onClose:()=>n(!1)},void 0)]},void 0)}),{},void 0),document.getElementById("root"))},8877:(e,n,t)=>{"use strict";e.exports=t.p+"artwork-icon.bc259.jpg"},9573:(e,n,t)=>{"use strict";e.exports=t.p+"artwork.b7c32.jpg"},7721:(e,n,t)=>{"use strict";e.exports=t.p+"colorful-text-icon.75a8e.png"},5185:(e,n,t)=>{"use strict";e.exports=t.p+"colorful-text.b5bb7.png"},2203:()=>{},5783:()=>{}},t={};function r(e){var a=t[e];if(void 0!==a)return a.exports;var i=t[e]={id:e,loaded:!1,exports:{}};return n[e](i,i.exports,r),i.loaded=!0,i.exports}r.m=n,e=[],r.O=(n,t,a,i)=>{if(!t){var o=1/0;for(l=0;l<e.length;l++){for(var[t,a,i]=e[l],s=!0,c=0;c<t.length;c++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](t[c])))?t.splice(c--,1):(s=!1,i<o&&(o=i));s&&(e.splice(l--,1),n=a())}return n}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[t,a,i]},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.u=e=>e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var n=r.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{r.b=document.baseURI||self.location.href;var e={826:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var a,i,[o,s,c]=t,l=0;for(a in s)r.o(s,a)&&(r.m[a]=s[a]);for(c&&c(r),n&&n(t);l<o.length;l++)i=o[l],r.o(e,i)&&e[i]&&e[i][0](),e[o[l]]=0;r.O()},t=self.webpackChunkic_analyze=self.webpackChunkic_analyze||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var a=r.O(void 0,[748],(()=>r(3147)));a=r.O(a)})();
//# sourceMappingURL=index.js.map