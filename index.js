(()=>{var e,t={9650:e=>{var t,n=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var n,a,i;e=e||{},n||(n=void 0!==e?e:{}),n.ready=new Promise((function(e,t){a=e,i=t}));var r,s={};for(r in n)n.hasOwnProperty(r)&&(s[r]=n[r]);var o,c="";c=self.location.href,t&&(c=t),c=0!==c.indexOf("blob:")?c.substr(0,c.lastIndexOf("/")+1):"",o=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)};var l,u=n.print||console.log.bind(console),d=n.printErr||console.warn.bind(console);for(r in s)s.hasOwnProperty(r)&&(n[r]=s[r]);s=null,n.wasmBinary&&(l=n.wasmBinary),n.noExitRuntime,"object"!=typeof WebAssembly&&D("no native wasm support detected");var h,f=!1,m="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function p(e,t,n){var a=t+n;for(n=t;e[n]&&!(n>=a);)++n;if(16<n-t&&e.subarray&&m)return m.decode(e.subarray(t,n));for(a="";t<n;){var i=e[t++];if(128&i){var r=63&e[t++];if(192==(224&i))a+=String.fromCharCode((31&i)<<6|r);else{var s=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|r<<6|s:(7&i)<<18|r<<12|s<<6|63&e[t++])?a+=String.fromCharCode(i):(i-=65536,a+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else a+=String.fromCharCode(i)}return a}var v,g,b,y,x,j,w,C,O,N="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function _(e,t){for(var n=e>>1,a=n+t/2;!(n>=a)&&x[n];)++n;if(32<(n<<=1)-e&&N)return N.decode(b.subarray(e,n));for(n="",a=0;!(a>=t/2);++a){var i=y[e+2*a>>1];if(0==i)break;n+=String.fromCharCode(i)}return n}function k(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var a=t;n=(n-=2)<2*e.length?n/2:e.length;for(var i=0;i<n;++i)y[t>>1]=e.charCodeAt(i),t+=2;return y[t>>1]=0,t-a}function S(e){return 2*e.length}function E(e,t){for(var n=0,a="";!(n>=t/4);){var i=j[e+4*n>>2];if(0==i)break;++n,65536<=i?(i-=65536,a+=String.fromCharCode(55296|i>>10,56320|1023&i)):a+=String.fromCharCode(i)}return a}function P(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var a=t;n=a+n-4;for(var i=0;i<e.length;++i){var r=e.charCodeAt(i);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),j[t>>2]=r,(t+=4)+4>n)break}return j[t>>2]=0,t-a}function A(e){for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);55296<=a&&57343>=a&&++n,t+=4}return t}function V(){var e=h.buffer;v=e,n.HEAP8=g=new Int8Array(e),n.HEAP16=y=new Int16Array(e),n.HEAP32=j=new Int32Array(e),n.HEAPU8=b=new Uint8Array(e),n.HEAPU16=x=new Uint16Array(e),n.HEAPU32=w=new Uint32Array(e),n.HEAPF32=C=new Float32Array(e),n.HEAPF64=O=new Float64Array(e)}var T,M=[],R=[],I=[],F=[];function L(){var e=n.preRun.shift();M.unshift(e)}var z=0,B=null,W=null;function D(e){throw n.onAbort&&n.onAbort(e),d(e),f=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),i(e),e}function U(){var e=q;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}n.preloadedImages={},n.preloadedAudios={};var q="diff.wasm";if(!U()){var H=q;q=n.locateFile?n.locateFile(H,c):c+H}function Y(){var e=q;try{if(e==q&&l)return new Uint8Array(l);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function Z(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(n);else{var a=t.Ja;"number"==typeof a?void 0===t.fa?T.get(a)():T.get(a)(t.fa):a(void 0===t.fa?null:t.fa)}}}function X(e){this.O=e-16,this.Ea=function(e){j[this.O+8>>2]=e},this.Ba=function(e){j[this.O+0>>2]=e},this.Ca=function(){j[this.O+4>>2]=0},this.Aa=function(){g[this.O+12>>0]=0},this.Da=function(){g[this.O+13>>0]=0},this.va=function(e,t){this.Ea(e),this.Ba(t),this.Ca(),this.Aa(),this.Da()}}var J={};function G(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Q(e){return this.fromWireType(w[e>>2])}var $={},K={},ee={};function te(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function ne(e,t){return e=te(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function ae(e){var t=Error,n=ne(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var ie=void 0;function re(e){throw new ie(e)}function se(e,t,n){function a(t){(t=n(t)).length!==e.length&&re("Mismatched type converter count");for(var a=0;a<e.length;++a)he(e[a],t[a])}e.forEach((function(e){ee[e]=t}));var i=Array(t.length),r=[],s=0;t.forEach((function(e,t){K.hasOwnProperty(e)?i[t]=K[e]:(r.push(e),$.hasOwnProperty(e)||($[e]=[]),$[e].push((function(){i[t]=K[e],++s===r.length&&a(i)})))})),0===r.length&&a(i)}function oe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var ce=void 0;function le(e){for(var t="";b[e];)t+=ce[b[e++]];return t}var ue=void 0;function de(e){throw new ue(e)}function he(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var a=t.name;if(e||de('type "'+a+'" must have a positive integer typeid pointer'),K.hasOwnProperty(e)){if(n.ua)return;de("Cannot register type '"+a+"' twice")}K[e]=t,delete ee[e],$.hasOwnProperty(e)&&(t=$[e],delete $[e],t.forEach((function(e){e()})))}function fe(e){de(e.N.R.P.name+" instance already deleted")}var me=!1;function pe(){}function ve(e){--e.count.value,0===e.count.value&&(e.S?e.T.X(e.S):e.R.P.X(e.O))}function ge(e){return"undefined"==typeof FinalizationGroup?(ge=function(e){return e},e):(me=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next())(t=t.value).O?ve(t):console.warn("object already deleted: "+t.O)})),pe=function(e){me.unregister(e.N)},(ge=function(e){return me.register(e,e.N,e.N),e})(e))}var be=void 0,ye=[];function xe(){for(;ye.length;){var e=ye.pop();e.N.Z=!1,e.delete()}}function je(){}var we={};function Ce(e,t,n){if(void 0===e[t].W){var a=e[t];e[t]=function(){return e[t].W.hasOwnProperty(arguments.length)||de("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].W+")!"),e[t].W[arguments.length].apply(this,arguments)},e[t].W=[],e[t].W[a.ca]=a}}function Oe(e,t,n,a,i,r,s,o){this.name=e,this.constructor=t,this.$=n,this.X=a,this.U=i,this.pa=r,this.ba=s,this.na=o,this.ya=[]}function Ne(e,t,n){for(;t!==n;)t.ba||de("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.ba(e),t=t.U;return e}function _e(e,t){return null===t?(this.ga&&de("null is not a valid "+this.name),0):(t.N||de('Cannot pass "'+Ue(t)+'" as a '+this.name),t.N.O||de("Cannot pass deleted object as a pointer of type "+this.name),Ne(t.N.O,t.N.R.P,this.P))}function ke(e,t){if(null===t){if(this.ga&&de("null is not a valid "+this.name),this.ea){var n=this.ha();return null!==e&&e.push(this.X,n),n}return 0}if(t.N||de('Cannot pass "'+Ue(t)+'" as a '+this.name),t.N.O||de("Cannot pass deleted object as a pointer of type "+this.name),!this.da&&t.N.R.da&&de("Cannot convert argument of type "+(t.N.T?t.N.T.name:t.N.R.name)+" to parameter type "+this.name),n=Ne(t.N.O,t.N.R.P,this.P),this.ea)switch(void 0===t.N.S&&de("Passing raw pointer to smart pointer is illegal"),this.Ia){case 0:t.N.T===this?n=t.N.S:de("Cannot convert argument of type "+(t.N.T?t.N.T.name:t.N.R.name)+" to parameter type "+this.name);break;case 1:n=t.N.S;break;case 2:if(t.N.T===this)n=t.N.S;else{var a=t.clone();n=this.za(n,De((function(){a.delete()}))),null!==e&&e.push(this.X,n)}break;default:de("Unsupporting sharing policy")}return n}function Se(e,t){return null===t?(this.ga&&de("null is not a valid "+this.name),0):(t.N||de('Cannot pass "'+Ue(t)+'" as a '+this.name),t.N.O||de("Cannot pass deleted object as a pointer of type "+this.name),t.N.R.da&&de("Cannot convert argument of type "+t.N.R.name+" to parameter type "+this.name),Ne(t.N.O,t.N.R.P,this.P))}function Ee(e,t,n){return t===n?e:void 0===n.U||null===(e=Ee(e,t,n.U))?null:n.na(e)}var Pe={};function Ae(e,t){return t.R&&t.O||re("makeClassHandle requires ptr and ptrType"),!!t.T!=!!t.S&&re("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ge(Object.create(e,{N:{value:t}}))}function Ve(e,t,n,a){this.name=e,this.P=t,this.ga=n,this.da=a,this.ea=!1,this.X=this.za=this.ha=this.la=this.Ia=this.xa=void 0,void 0!==t.U?this.toWireType=ke:(this.toWireType=a?_e:Se,this.V=null)}function Te(e,t){var a=-1!=(e=le(e)).indexOf("j")?function(e,t){var a=[];return function(){a.length=arguments.length;for(var i=0;i<arguments.length;i++)a[i]=arguments[i];return-1!=e.indexOf("j")?(i=n["dynCall_"+e],i=a&&a.length?i.apply(null,[t].concat(a)):i.call(null,t)):i=T.get(t).apply(null,a),i}}(e,t):T.get(t);return"function"!=typeof a&&de("unknown function pointer with signature "+e+": "+t),a}var Me=void 0;function Re(e){var t=le(e=st(e));return rt(e),t}function Ie(e,t){var n=[],a={};throw t.forEach((function e(t){a[t]||K[t]||(ee[t]?ee[t].forEach(e):(n.push(t),a[t]=!0))})),new Me(e+": "+n.map(Re).join([", "]))}function Fe(e,t){for(var n=[],a=0;a<e;a++)n.push(j[(t>>2)+a]);return n}function Le(e){var t=Function;if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=ne(t.name||"unknownFunctionName",(function(){}));return n.prototype=t.prototype,n=new n,(e=t.apply(n,e))instanceof Object?e:n}var ze=[],Be=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function We(e){4<e&&0==--Be[e].ia&&(Be[e]=void 0,ze.push(e))}function De(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=ze.length?ze.pop():Be.length;return Be[t]={ia:1,value:e},t}}function Ue(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function qe(e,t){switch(t){case 2:return function(e){return this.fromWireType(C[e>>2])};case 3:return function(e){return this.fromWireType(O[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function He(e,t,n){switch(t){case 0:return n?function(e){return g[e]}:function(e){return b[e]};case 1:return n?function(e){return y[e>>1]}:function(e){return x[e>>1]};case 2:return n?function(e){return j[e>>2]}:function(e){return w[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Ye={};function Ze(e){var t=Ye[e];return void 0===t?le(e):t}var Xe=[];function Je(e){return e||de("Cannot use deleted val. handle = "+e),Be[e].value}function Ge(){return"object"==typeof globalThis?globalThis:Function("return this")()}function Qe(e,t){var n=K[e];return void 0===n&&de(t+" has unknown type "+Re(e)),n}var $e={},Ke=[null,[],[]];ie=n.InternalError=ae("InternalError");for(var et=Array(256),tt=0;256>tt;++tt)et[tt]=String.fromCharCode(tt);ce=et,ue=n.BindingError=ae("BindingError"),je.prototype.isAliasOf=function(e){if(!(this instanceof je&&e instanceof je))return!1;var t=this.N.R.P,n=this.N.O,a=e.N.R.P;for(e=e.N.O;t.U;)n=t.ba(n),t=t.U;for(;a.U;)e=a.ba(e),a=a.U;return t===a&&n===e},je.prototype.clone=function(){if(this.N.O||fe(this),this.N.aa)return this.N.count.value+=1,this;var e=ge,t=Object,n=t.create,a=Object.getPrototypeOf(this),i=this.N;return(e=e(n.call(t,a,{N:{value:{count:i.count,Z:i.Z,aa:i.aa,O:i.O,R:i.R,S:i.S,T:i.T}}}))).N.count.value+=1,e.N.Z=!1,e},je.prototype.delete=function(){this.N.O||fe(this),this.N.Z&&!this.N.aa&&de("Object already scheduled for deletion"),pe(this),ve(this.N),this.N.aa||(this.N.S=void 0,this.N.O=void 0)},je.prototype.isDeleted=function(){return!this.N.O},je.prototype.deleteLater=function(){return this.N.O||fe(this),this.N.Z&&!this.N.aa&&de("Object already scheduled for deletion"),ye.push(this),1===ye.length&&be&&be(xe),this.N.Z=!0,this},Ve.prototype.qa=function(e){return this.la&&(e=this.la(e)),e},Ve.prototype.ja=function(e){this.X&&this.X(e)},Ve.prototype.argPackAdvance=8,Ve.prototype.readValueFromPointer=Q,Ve.prototype.deleteObject=function(e){null!==e&&e.delete()},Ve.prototype.fromWireType=function(e){function t(){return this.ea?Ae(this.P.$,{R:this.xa,O:n,T:this,S:e}):Ae(this.P.$,{R:this,O:e})}var n=this.qa(e);if(!n)return this.ja(e),null;var a=function(e,t){for(void 0===t&&de("ptr should not be undefined");e.U;)t=e.ba(t),e=e.U;return Pe[t]}(this.P,n);if(void 0!==a)return 0===a.N.count.value?(a.N.O=n,a.N.S=e,a.clone()):(a=a.clone(),this.ja(e),a);if(a=this.P.pa(n),!(a=we[a]))return t.call(this);a=this.da?a.ma:a.pointerType;var i=Ee(n,this.P,a.P);return null===i?t.call(this):this.ea?Ae(a.P.$,{R:a,O:i,T:this,S:e}):Ae(a.P.$,{R:a,O:i})},n.getInheritedInstanceCount=function(){return Object.keys(Pe).length},n.getLiveInheritedInstances=function(){var e,t=[];for(e in Pe)Pe.hasOwnProperty(e)&&t.push(Pe[e]);return t},n.flushPendingDeletes=xe,n.setDelayFunction=function(e){be=e,ye.length&&be&&be(xe)},Me=n.UnboundTypeError=ae("UnboundTypeError"),n.count_emval_handles=function(){for(var e=0,t=5;t<Be.length;++t)void 0!==Be[t]&&++e;return e},n.get_first_emval=function(){for(var e=5;e<Be.length;++e)if(void 0!==Be[e])return Be[e];return null};var nt={b:function(e,t,n,a){D("Assertion failed: "+(e?p(b,e,void 0):"")+", at: "+[t?t?p(b,t,void 0):"":"unknown filename",n,a?a?p(b,a,void 0):"":"unknown function"])},B:function(e){return it(e+16)+16},E:function(){},A:function(e,t,n){throw new X(e).va(t,n),e},i:function(e){var t=J[e];delete J[e];var n=t.ha,a=t.X,i=t.ka;se([e],i.map((function(e){return e.ta})).concat(i.map((function(e){return e.Ga}))),(function(e){var r={};return i.forEach((function(t,n){var a=e[n],s=t.ra,o=t.sa,c=e[n+i.length],l=t.Fa,u=t.Ha;r[t.oa]={read:function(e){return a.fromWireType(s(o,e))},write:function(e,t){var n=[];l(u,e,c.toWireType(n,t)),G(n)}}})),[{name:t.name,fromWireType:function(e){var t,n={};for(t in r)n[t]=r[t].read(e);return a(e),n},toWireType:function(e,t){for(var i in r)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var s=n();for(i in r)r[i].write(s,t[i]);return null!==e&&e.push(a,s),s},argPackAdvance:8,readValueFromPointer:Q,V:a}]}))},y:function(e,t,n,a,i){var r=oe(n);he(e,{name:t=le(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?a:i},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var a=g;else if(2===n)a=y;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);a=j}return this.fromWireType(a[e>>r])},V:null})},t:function(e,t,a,i,r,s,o,c,l,u,d,h,f){d=le(d),s=Te(r,s),c&&(c=Te(o,c)),u&&(u=Te(l,u)),f=Te(h,f);var m=te(d);!function(e,t){n.hasOwnProperty(e)?(de("Cannot register public name '"+e+"' twice"),Ce(n,e,e),n.hasOwnProperty(void 0)&&de("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),n[e].W[void 0]=t):n[e]=t}(m,(function(){Ie("Cannot construct "+d+" due to unbound types",[i])})),se([e,t,a],i?[i]:[],(function(t){if(t=t[0],i)var a=t.P,r=a.$;else r=je.prototype;t=ne(m,(function(){if(Object.getPrototypeOf(this)!==o)throw new ue("Use 'new' to construct "+d);if(void 0===l.Y)throw new ue(d+" has no accessible constructor");var e=l.Y[arguments.length];if(void 0===e)throw new ue("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.Y).toString()+") parameters instead!");return e.apply(this,arguments)}));var o=Object.create(r,{constructor:{value:t}});t.prototype=o;var l=new Oe(d,t,o,f,a,s,c,u);a=new Ve(d,l,!0,!1),r=new Ve(d+"*",l,!1,!1);var h=new Ve(d+" const*",l,!1,!0);return we[e]={pointerType:r,ma:h},function(e,t){n.hasOwnProperty(e)||re("Replacing nonexistant public symbol"),n[e]=t,n[e].ca=void 0}(m,t),[a,r,h]}))},s:function(e,t,n,a,i,r){0<t||D("Assertion failed: undefined");var s=Fe(t,n);i=Te(a,i);var o=[r],c=[];se([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.P.Y&&(e.P.Y=[]),void 0!==e.P.Y[t-1])throw new ue("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.P.Y[t-1]=function(){Ie("Cannot construct "+e.name+" due to unbound types",s)},se([],s,(function(a){return e.P.Y[t-1]=function(){arguments.length!==t-1&&de(n+" called with "+arguments.length+" arguments, expected "+(t-1)),c.length=0,o.length=t;for(var e=1;e<t;++e)o[e]=a[e].toWireType(c,arguments[e-1]);return e=i.apply(null,o),G(c),a[0].fromWireType(e)},[]})),[]}))},r:function(e,t,n,a,i,r,s,o){var c=Fe(n,a);t=le(t),r=Te(i,r),se([],[e],(function(e){function a(){Ie("Cannot call "+i+" due to unbound types",c)}var i=(e=e[0]).name+"."+t;o&&e.P.ya.push(t);var l=e.P.$,u=l[t];return void 0===u||void 0===u.W&&u.className!==e.name&&u.ca===n-2?(a.ca=n-2,a.className=e.name,l[t]=a):(Ce(l,t,i),l[t].W[n-2]=a),se([],c,(function(a){var o=i,c=e,u=r,d=a.length;2>d&&de("argTypes array size mismatch! Must at least get return value and 'this' types!");var h=null!==a[1]&&null!==c,f=!1;for(c=1;c<a.length;++c)if(null!==a[c]&&void 0===a[c].V){f=!0;break}var m="void"!==a[0].name,p="",v="";for(c=0;c<d-2;++c)p+=(0!==c?", ":"")+"arg"+c,v+=(0!==c?", ":"")+"arg"+c+"Wired";o="return function "+te(o)+"("+p+") {\nif (arguments.length !== "+(d-2)+") {\nthrowBindingError('function "+o+" called with ' + arguments.length + ' arguments, expected "+(d-2)+" args!');\n}\n",f&&(o+="var destructors = [];\n");var g=f?"destructors":"null";for(p="throwBindingError invoker fn runDestructors retType classParam".split(" "),u=[de,u,s,G,a[0],a[1]],h&&(o+="var thisWired = classParam.toWireType("+g+", this);\n"),c=0;c<d-2;++c)o+="var arg"+c+"Wired = argType"+c+".toWireType("+g+", arg"+c+"); // "+a[c+2].name+"\n",p.push("argType"+c),u.push(a[c+2]);if(h&&(v="thisWired"+(0<v.length?", ":"")+v),o+=(m?"var rv = ":"")+"invoker(fn"+(0<v.length?", ":"")+v+");\n",f)o+="runDestructors(destructors);\n";else for(c=h?1:2;c<a.length;++c)d=1===c?"thisWired":"arg"+(c-2)+"Wired",null!==a[c].V&&(o+=d+"_dtor("+d+"); // "+a[c].name+"\n",p.push(d+"_dtor"),u.push(a[c].V));return m&&(o+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p.push(o+"}\n"),a=Le(p).apply(null,u),void 0===l[t].W?(a.ca=n-2,l[t]=a):l[t].W[n-2]=a,[]})),[]}))},x:function(e,t){he(e,{name:t=le(t),fromWireType:function(e){var t=Be[e].value;return We(e),t},toWireType:function(e,t){return De(t)},argPackAdvance:8,readValueFromPointer:Q,V:null})},k:function(e,t,n){n=oe(n),he(e,{name:t=le(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Ue(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:qe(t,n),V:null})},d:function(e,t,n,a,i){function r(e){return e}t=le(t),-1===i&&(i=4294967295);var s=oe(n);if(0===a){var o=32-8*n;r=function(e){return e<<o>>>o}}var c=-1!=t.indexOf("unsigned");he(e,{name:t,fromWireType:r,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+Ue(n)+'" to '+this.name);if(n<a||n>i)throw new TypeError('Passing a number "'+Ue(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+a+", "+i+"]!");return c?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:He(t,s,0!==a),V:null})},c:function(e,t,n){function a(e){var t=w;return new i(v,t[1+(e>>=2)],t[e])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];he(e,{name:n=le(n),fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ua:!0})},l:function(e,t){var n="std::string"===(t=le(t));he(e,{name:t,fromWireType:function(e){var t=w[e>>2];if(n)for(var a=e+4,i=0;i<=t;++i){var r=e+4+i;if(i==t||0==b[r]){if(a=a?p(b,a,r-a):"",void 0===s)var s=a;else s+=String.fromCharCode(0),s+=a;a=r+1}}else{for(s=Array(t),i=0;i<t;++i)s[i]=String.fromCharCode(b[e+4+i]);s=s.join("")}return rt(e),s},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var a="string"==typeof t;a||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||de("Cannot pass non-string to std::string");var i=(n&&a?function(){for(var e=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++n)),127>=a?++e:e=2047>=a?e+2:65535>=a?e+3:e+4}return e}:function(){return t.length})(),r=it(4+i+1);if(w[r>>2]=i,n&&a)!function(e,t,n){var a=b;if(0<n){n=t+n-1;for(var i=0;i<e.length;++i){var r=e.charCodeAt(i);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),127>=r){if(t>=n)break;a[t++]=r}else{if(2047>=r){if(t+1>=n)break;a[t++]=192|r>>6}else{if(65535>=r){if(t+2>=n)break;a[t++]=224|r>>12}else{if(t+3>=n)break;a[t++]=240|r>>18,a[t++]=128|r>>12&63}a[t++]=128|r>>6&63}a[t++]=128|63&r}}a[t]=0}}(t,r+4,i+1);else if(a)for(a=0;a<i;++a){var s=t.charCodeAt(a);255<s&&(rt(r),de("String has UTF-16 code units that do not fit in 8 bits")),b[r+4+a]=s}else for(a=0;a<i;++a)b[r+4+a]=t[a];return null!==e&&e.push(rt,r),r},argPackAdvance:8,readValueFromPointer:Q,V:function(e){rt(e)}})},g:function(e,t,n){if(n=le(n),2===t)var a=_,i=k,r=S,s=function(){return x},o=1;else 4===t&&(a=E,i=P,r=A,s=function(){return w},o=2);he(e,{name:n,fromWireType:function(e){for(var n,i=w[e>>2],r=s(),c=e+4,l=0;l<=i;++l){var u=e+4+l*t;l!=i&&0!=r[u>>o]||(c=a(c,u-c),void 0===n?n=c:(n+=String.fromCharCode(0),n+=c),c=u+t)}return rt(e),n},toWireType:function(e,a){"string"!=typeof a&&de("Cannot pass non-string to C++ string type "+n);var s=r(a),c=it(4+s+t);return w[c>>2]=s>>o,i(a,c+4,s+t),null!==e&&e.push(rt,c),c},argPackAdvance:8,readValueFromPointer:Q,V:function(e){rt(e)}})},m:function(e,t,n,a,i,r){J[e]={name:le(t),ha:Te(n,a),X:Te(i,r),ka:[]}},e:function(e,t,n,a,i,r,s,o,c,l){J[e].ka.push({oa:le(t),ta:n,ra:Te(a,i),sa:r,Ga:s,Fa:Te(o,c),Ha:l})},z:function(e,t){he(e,{wa:!0,name:t=le(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:function(e,t,n,a){(e=Xe[e])(t=Je(t),n=Ze(n),null,a)},f:We,p:function(e){return 0===e?De(Ge()):(e=Ze(e),De(Ge()[e]))},o:function(e,t){for(var n=(t=function(e,t){for(var n=Array(e),a=0;a<e;++a)n[a]=Qe(j[(t>>2)+a],"parameter "+a);return n}(e,t))[0],a=n.name+"_$"+t.slice(1).map((function(e){return e.name})).join("_")+"$",i=["retType"],r=[n],s="",o=0;o<e-1;++o)s+=(0!==o?", ":"")+"arg"+o,i.push("argType"+o),r.push(t[1+o]);a="return function "+te("methodCaller_"+a)+"(handle, name, destructors, args) {\n";var c=0;for(o=0;o<e-1;++o)a+="    var arg"+o+" = argType"+o+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=t[o+1].argPackAdvance;for(a+="    var rv = handle[name]("+s+");\n",o=0;o<e-1;++o)t[o+1].deleteObject&&(a+="    argType"+o+".deleteObject(arg"+o+");\n");return n.wa||(a+="    return retType.toWireType(destructors, rv);\n"),i.push(a+"};\n"),function(e){var t=Xe.length;return Xe.push(e),t}(e=Le(i).apply(null,r))},h:function(e){4<e&&(Be[e].ia+=1)},D:function(e,t,a,i){e=Je(e);var r=$e[t];if(!r){r="";for(var s=0;s<t;++s)r+=(0!==s?", ":"")+"arg"+s;var o="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n";for(s=0;s<t;++s)o+="var argType"+s+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+s+'], "parameter '+s+'");\nvar arg'+s+" = argType"+s+".readValueFromPointer(args);\nargs += argType"+s+"['argPackAdvance'];\n";r=new Function("requireRegisteredType","Module","__emval_register",o+"var obj = new constructor("+r+");\nreturn __emval_register(obj);\n}\n")(Qe,n,De),$e[t]=r}return r(e,a,i)},C:function(){return De([])},q:function(e,t){return De(e=(e=Qe(e,"_emval_take_value")).readValueFromPointer(t))},a:function(){D()},v:function(e,t,n){b.copyWithin(e,t,t+n)},w:function(e){var t=b.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296),0<(a=Math.max(e,a))%65536&&(a+=65536-a%65536);e:{try{h.grow(Math.min(2147483648,a)-v.byteLength+65535>>>16),V();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},j:function(e,t,n,a){for(var i=0,r=0;r<n;r++){for(var s=j[t+8*r>>2],o=j[t+(8*r+4)>>2],c=0;c<o;c++){var l=b[s+c],h=Ke[e];0===l||10===l?((1===e?u:d)(p(h,0)),h.length=0):h.push(l)}i+=o}return j[a>>2]=i,0},u:function(){}};!function(){function e(e){n.asm=e.exports,h=n.asm.F,V(),T=n.asm.I,R.unshift(n.asm.G),z--,n.monitorRunDependencies&&n.monitorRunDependencies(z),0==z&&(null!==B&&(clearInterval(B),B=null),W&&(e=W,W=null,e()))}function t(t){e(t.instance)}function a(e){return(l||"function"!=typeof fetch?Promise.resolve().then((function(){return Y()})):fetch(q,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+q+"'";return e.arrayBuffer()})).catch((function(){return Y()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){d("failed to asynchronously prepare wasm: "+e),D(e)}))}var r={a:nt};if(z++,n.monitorRunDependencies&&n.monitorRunDependencies(z),n.instantiateWasm)try{return n.instantiateWasm(r,e)}catch(e){return d("Module.instantiateWasm callback failed with error: "+e),!1}(l||"function"!=typeof WebAssembly.instantiateStreaming||U()||"function"!=typeof fetch?a(t):fetch(q,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){return d("wasm streaming compile failed: "+e),d("falling back to ArrayBuffer instantiation"),a(t)}))}))).catch(i)}(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.G).apply(null,arguments)};var at,it=n._malloc=function(){return(it=n._malloc=n.asm.H).apply(null,arguments)},rt=n._free=function(){return(rt=n._free=n.asm.J).apply(null,arguments)},st=n.___getTypeName=function(){return(st=n.___getTypeName=n.asm.K).apply(null,arguments)};function ot(){function e(){if(!at&&(at=!0,n.calledRun=!0,!f)){if(Z(R),Z(I),a(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var e=n.postRun.shift();F.unshift(e)}Z(F)}}if(!(0<z)){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)L();Z(M),0<z||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e())}}if(n.___embind_register_native_and_builtin_types=function(){return(n.___embind_register_native_and_builtin_types=n.asm.L).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.M).apply(null,arguments)},W=function e(){at||ot(),at||(W=e)},n.run=ot,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return ot(),e.ready});e.exports=n},7726:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{OptionsPanel:()=>Qe,encode:()=>Ke,extension:()=>He,getOptionsList:()=>$e,getState:()=>Ge,mimeType:()=>qe,name:()=>Ue});var i={};n.r(i),n.d(i,{OptionsPanel:()=>st,encode:()=>ct,extension:()=>at,getOptionsList:()=>ot,getState:()=>rt,mimeType:()=>nt,name:()=>tt});var r={};n.r(r),n.d(r,{OptionsPanel:()=>pt,encode:()=>gt,extension:()=>ht,getOptionsList:()=>vt,getState:()=>mt,mimeType:()=>dt,name:()=>ut});var s={};n.r(s),n.d(s,{OptionsPanel:()=>Nt,Subsampling:()=>wt,encode:()=>kt,extension:()=>jt,getOptionsList:()=>_t,getState:()=>Ot,mimeType:()=>xt,name:()=>yt});var o={};n.r(o),n.d(o,{Csp:()=>Vt,OptionsPanel:()=>It,UVMode:()=>At,encode:()=>Lt,extension:()=>Pt,getOptionsList:()=>Ft,getState:()=>Rt,mimeType:()=>Et,name:()=>St});var c=n(4637),l=n(7995),u=n(6755),d=n(1684);const h=JSON.parse('{"u2":"ic-analyzer","i8":"0.1.0"}');var f=n(9496),m=n(4279);const p=new Map;async function v(e){const t=URL.createObjectURL(e);try{return await async function(e){const t=new Image;t.decoding="async",t.src=e;const n=new Promise(((e,n)=>{t.onload=()=>e(),t.onerror=()=>n(Error("Image loading error"))}));return t.decode&&await t.decode().catch((()=>null)),await n,t}(t)}finally{URL.revokeObjectURL(t)}}async function g(e){const t="createImageBitmap"in self?await createImageBitmap(e):await v(e),n=document.createElement("canvas"),{width:a,height:i}=t;n.width=a,n.height=i;const r=n.getContext("2d");if(!r)throw new Error("Canvas not initialized");return r.drawImage(t,0,0),r.getImageData(0,0,a,i)}async function b(e){e=function(e){const t=(new DOMParser).parseFromString(e,"image/svg+xml"),n=t.documentElement;if(n.getAttribute("width")&&n.getAttribute("height"))return e;const a=n.getAttribute("viewBox");if(null===a)throw Error("SVG must have width/height or viewBox");const[,,i,r]=a.split(/\s+/);return n.setAttribute("width",i),n.setAttribute("height",r),(new XMLSerializer).serializeToString(t)}(e);const t=new Blob([e],{type:"image/svg+xml"});return function(e,t={}){const{width:n=e.width,height:a=e.height,sx:i=0,sy:r=0,sw:s=e.width,sh:o=e.height}=t,c=document.createElement("canvas");c.width=n,c.height=a;const l=c.getContext("2d");if(!l)throw new Error("Could not create canvas context");return l.drawImage(e,i,r,s,o,0,0,n,a),l.getImageData(0,0,n,a)}(await v(t))}async function y(e,t){const{type:n}=e;if("image/svg+xml"===n)return e.text().then(b);if(await function(e){if(!p.has(e)){const t=(async()=>{const t=document.createElement("picture"),n=document.createElement("img"),a=document.createElement("source");return a.srcset="data:,x",a.type=e,t.append(a,n),await 0,!!n.currentSrc})();p.set(e,t)}return p.get(e)}(n))return g(e);null!=t||(t=(0,m.Ud)(j()));const a=await e.arrayBuffer();switch(n){case"image/webp":return t.webpDecode(a);case"image/avif":return t.avifDecode(a);case"image/jxl":return t.jxlDecode(a);case"image/webp2":return t.webp2Decode(a);default:return g(e)}}new Map([[/^%PDF-/,"application/pdf"],[/^GIF87a/,"image/gif"],[/^GIF89a/,"image/gif"],[/^\x89PNG\x0D\x0A\x1A\x0A/,"image/png"],[/^\xFF\xD8\xFF/,"image/jpeg"],[/^BM/,"image/bmp"],[/^I I/,"image/tiff"],[/^II*/,"image/tiff"],[/^MM\x00*/,"image/tiff"],[/^RIFF....WEBPVP8[LX ]/,"image/webp"],[/^\xF4\xFF\x6F/,"image/webp2"],[/^\x00\x00\x00 ftypavif\x00\x00\x00\x00/,"image/avif"],[/^\xff\x0a/,"image/jxl"],[/^\x00\x00\x00\x0cJXL \x0d\x0a\x87\x0a/,"image/jxl"]]);class x{constructor(){this.table={}}get(e){return this.table[JSON.stringify(e)]}set(e,t){this.table[JSON.stringify(e)]=t}}function j(){return new Worker(new URL(n.p+n.u(988),n.b))}function w(e){let t=0;const n=[];return e.PSNR&&(t++,n.push({key:"psnr",name:"PSNR (db)"})),e.SSIM.enabled&&(t++,n.push({key:"ssim",name:"SSIM %"})),e.butteraugli.enabled&&(t++,n.push({key:"butteraugli",name:"Butteraugli Score"})),{calculations:t,metricsMeta:n}}function C(e,t,n){const{SSIM:a,PSNR:i,butteraugli:r}=t;function s(t){e.run((async e=>t(e).then(n)))}return e=>{const{data:t,metrics:n}=e;r.enabled&&s((async a=>{const{score:i,heatMap:s}=await a.calcButteraugli(t,r.options);n.butteraugli=i,e.heatMap=function(e,t,n){if(e.byteLength/t/n!=4)throw new Error("Buffer must be a 8-bit depth RGBA array");const a=document.createElement("canvas").getContext("2d");if(!a)throw new Error("Could not create canvas context");const i=a.createImageData(t,n);return i.data.set(new Uint8ClampedArray(e)),i}(s,t.width,t.height)})),i&&s((async e=>n.psnr=await e.calcPSNR(t))),a.enabled&&s((async e=>n.ssim=100*await e.calcSSIM(t,a.options)))}}class O{onProgress(){}async encode(e,t,n){const{buffer:a,time:i}=await t.encode(n,e);this.onProgress();const r=new Blob([a],{type:t.mimeType});return{time:i,buffer:a,data:await y(r,e)}}}var N,_;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const S=function(e){return f.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),N||(N=f.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),_||(_=f.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))};var E,P;function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const V=function(e){return f.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),E||(E=f.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),P||(P=f.createElement("path",{d:"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))};var T,M;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const I=function(e){return f.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),T||(T=f.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),M||(M=f.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})))};var F,L;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const B=function(e){return f.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),F||(F=f.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),L||(L=f.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})))};var W=n(1626);const D=()=>{},U=e=>e,q=["","K","M","G","T","P","E","Z","Y"];function H(e,t=1024){const n=Math.abs(e);if(0===n)return`${e.toFixed(2)} B`;const a=~~(Math.log2(n)/Math.log2(t));return`${(e/t**a).toFixed(2)} ${q[a]}B`}function Y(e=1){const[t,n]=(0,f.useState)(e),[a,i]=(0,f.useState)(0);return{value:a,max:t,increase:function(){i((e=>e+1))},reset:function(e){i(0),n(e)}}}function Z(e){const{className:t,type:n,Icon:a,IconChecked:i,name:r,value:s,checked:o,disabled:l,onClick:u,onChange:d=D,onValueChange:h=D,children:f}=e,m=o?i:a;return(0,c.jsxs)("label",Object.assign({className:(0,W.Z)("_2Ov17",t),onClick:u},{children:[(0,c.jsx)("input",{type:n,className:"_2IoHf",name:r,value:s,disabled:l,checked:o,onChange:function(e){d(e),h(e.currentTarget.checked)}},void 0),(0,c.jsx)(m,{className:"_2H-Mw"},void 0),f&&(0,c.jsx)("span",Object.assign({className:"_11H37"},{children:f}),void 0)]}),void 0)}function X(e){const{className:t,name:n,value:a,min:i,max:r,step:s,disabled:o,onClick:l,onChange:u=D,onValueChange:d=D}=e,h={"--value-percent":(a-i)/(r-i)*100+"%"};return(0,c.jsxs)("div",Object.assign({className:(0,W.Z)("_2DhF4",t),style:h},{children:[(0,c.jsx)("input",{type:"range",className:"_3dzMs",name:n,disabled:o,value:a,min:i,max:r,step:s,onClick:l,onChange:function(e){u(e),d(e.currentTarget.valueAsNumber)}},void 0),(0,c.jsx)("div",Object.assign({className:"_2b567"},{children:(0,c.jsx)("div",{className:"_26ZKf"},void 0)}),void 0)]}),void 0)}const J={text:"_3asye",active:"_1lox2",button:"_2wLkD",outline:"_1UDsQ _2wLkD",busy:"_3XmXG"};function G(e){const{type:t="button",href:n,active:a,autoFocus:i,title:r,className:s,disabled:o,onClick:l,children:u}=e,d=(0,W.Z)(J[t],s,{[J.active]:a}),h=n?"a":"button",f=n?void 0:"button";return(0,c.jsx)(h,Object.assign({className:d,href:n,title:r,autoFocus:i,disabled:o,type:f,onClick:l},{children:u}),void 0)}var Q,$;function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const ee=function(e){return f.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),Q||(Q=f.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),$||($=f.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})))};var te,ne;function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const ie=function(e){return f.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),te||(te=f.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),ne||(ne=f.createElement("path",{d:"M19 13H5v-2h14v2z"})))};var re,se;function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const ce=function(e){return f.createElement("svg",oe({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),re||(re=f.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),se||(se=f.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"})))};var le,ue;function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const he=function(e){return f.createElement("svg",de({xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 24 24",width:"1em",fill:"currentColor"},e),le||(le=f.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),ue||(ue=f.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"})))},fe="_1H0a4";function me(e){const{inputId:t,title:n,name:a,className:i,disabled:r,minMaxButton:s,value:o,min:l=0,max:u=Number.MAX_SAFE_INTEGER,step:d=1,increment:h=d,onValueChange:f=D}=e;function m(e,t){if(0!==e.button)return;let n=0;const a=Math.pow(10,function(e){const t=e.toString(),n=t.indexOf(".")+1;return n||t.length-n}(d));function i(e){return e+=t,e=Math.min(Math.max(e,l),u),Math.round(e*a)/a}function r(e){const t=i(e);f(t),n=window.setTimeout((()=>r(t)),50)}const s=i(o);f(s),n=window.setTimeout((()=>r(s)),400),document.addEventListener("mouseup",(function e(){clearTimeout(n),document.removeEventListener("mouseup",e)}))}return(0,c.jsxs)("div",Object.assign({title:n,className:(0,W.Z)("_2dfjc",i)},{children:[s&&(0,c.jsx)("button",Object.assign({title:"Min",type:"button",className:fe,tabIndex:-1,disabled:r,onClick:()=>f(l)},{children:(0,c.jsx)(he,{},void 0)}),void 0),(0,c.jsx)("button",Object.assign({title:"Decrease",type:"button",className:fe,tabIndex:-1,disabled:r,onMouseDown:e=>m(e,-h)},{children:(0,c.jsx)(ie,{shapeRendering:"crispEdges"},void 0)}),void 0),(0,c.jsx)("input",{type:"number",id:t,className:"xI_9P no-spinner",disabled:r,name:a,min:l,max:u,step:d,value:o,onChange:e=>f(e.currentTarget.valueAsNumber)},void 0),(0,c.jsx)("button",Object.assign({title:"Increase",type:"button",className:fe,tabIndex:-1,disabled:r,onMouseDown:e=>m(e,h)},{children:(0,c.jsx)(ee,{shapeRendering:"crispEdges"},void 0)}),void 0),s&&(0,c.jsx)("button",Object.assign({title:"Max",type:"button",className:fe,tabIndex:-1,disabled:r,onClick:()=>f(u)},{children:(0,c.jsx)(ce,{},void 0)}),void 0)]}),void 0)}const pe="_3_cLi",ve="_1p1yr";function ge(){const e=document.body.querySelectorAll("._3_cLi"),t=e[e.length-2];if(t)return t.classList.add(ve),()=>t.classList.remove(ve)}function be(e){const{className:t,name:n,onClose:a=D,children:i}=e;return(0,f.useEffect)((function(){function e(e){"Escape"===e.key&&(a(),e.stopImmediatePropagation())}return window.addEventListener("keyup",e),()=>window.removeEventListener("keyup",e)}),[a]),(0,f.useLayoutEffect)(ge,[]),(0,l.createPortal)((0,c.jsx)("div",Object.assign({className:pe},{children:(0,c.jsx)("div",Object.assign({role:"dialog","aria-label":n,className:(0,W.Z)(t,"_1Vq87")},{children:i}),void 0)}),void 0),document.body)}function ye(e){const{state:t,className:n,children:a,onChange:i}=e;function r(e,n){const a=t.x+e,r=t.y+n;i({scale:t.scale,x:a,y:r})}return(0,c.jsx)("div",Object.assign({style:{touchAction:"none"},className:n,onWheel:function(e){const{ctrlKey:n,deltaMode:a,clientX:r,clientY:s}=e;let{deltaY:o}=e;e.preventDefault(),1===a&&(o*=15);const c=1-o/(n?100:300),l=e.currentTarget.firstElementChild.getBoundingClientRect(),u=(l.left+l.width/2-r)*(c-1),d=(l.top+l.height/2-s)*(c-1);i({x:t.x+u,y:t.y+d,scale:t.scale*c})},onTouchStart:function(e){!function(e,t){const n=e.touches[0];function a(e){const a=e.touches[0];t(a.pageX-n.pageX,a.pageY-n.pageY)}document.addEventListener("touchmove",a),document.addEventListener("touchend",(function e(t){t.preventDefault(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",e)}))}(e.nativeEvent,r)},onMouseDown:function(e){0===e.button&&function(e,t){const n=e.pageX,a=e.pageY;function i(e){t(e.pageX-n,e.pageY-a)}document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(t){t.preventDefault(),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))}(e.nativeEvent,r)}},{children:a}),void 0)}var xe=n(1412);function je(e){return(0,c.jsxs)("div",Object.assign({className:"_3Neg9"},{children:[(0,c.jsx)("select",Object.assign({},e,{className:"_2rF3V"}),void 0),(0,c.jsx)(xe.Z,{className:"_2Arv_"},void 0)]}),void 0)}function we(e){const{className:t,name:n,checked:a,disabled:i,onClick:r,onChange:s=D,onValueChange:o=D}=e,l=(0,W.Z)("_23L3Q",t,{_38B3L:a});return(0,c.jsx)("label",Object.assign({className:l},{children:(0,c.jsx)("input",{type:"checkbox",className:"rBLkp",disabled:i,checked:a,name:n,onClick:r,onChange:function(e){s(e),o(e.currentTarget.checked)}},void 0)}),void 0)}function Ce(e){const{active:t,className:n,onFocus:a,children:i}=e,r=(0,W.Z)("_7lvOB",n,{_31kUg:t});return(0,c.jsx)("div",Object.assign({className:r,onClick:a},{children:i}),void 0)}var Oe=n(3922);const Ne="_5050B";function _e(e){const{className:t,onStart:n=D,onChange:a,onError:i}=e,r=function(){const[e,t]=(0,f.useState)(!1),n=(0,f.useRef)(0);return{isInArea:e,enter:function(){t(++n.current>0)},leave:function(){t(--n.current>0)},reset:function(){n.current=0,t(!1)}}}(),s=(0,f.useRef)(!1),o=(0,W.Z)("_1QfF_",t,{_2NkFn:r.isInArea});return(0,c.jsxs)("label",Object.assign({className:o,onDragEnter:function(){r.enter(),s.current||(s.current=!0,n(),document.addEventListener("dragend",(function e(){document.removeEventListener("dragend",e),s.current=!1})))},onDragOver:e=>e.preventDefault(),onDrop:function(e){var t;e.preventDefault(),r.reset();const{items:n}=e.dataTransfer,s=null===(t=n[0])||void 0===t?void 0:t.getAsFile();s?a(s):i("The dropped item is not a file")},onDragLeave:r.leave},{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(Oe.Z,{className:"_1uubp _5050B"},void 0),(0,c.jsx)("span",Object.assign({className:Ne},{children:"Drag & drop"}),void 0)]},void 0),(0,c.jsx)("div",Object.assign({className:Ne},{children:"Or select an image"}),void 0),(0,c.jsx)("input",{className:"_1wDkd",name:"file",type:"file",accept:"image/*",onClick:n,onChange:function(e){const{files:t}=e.currentTarget;(null==t?void 0:t.length)&&a(t[0])}},void 0)]}),void 0)}function ke(e){return Z({...e,type:"checkbox",Icon:S,IconChecked:V})}function Se(e){return Z({...e,type:"radio",Icon:I,IconChecked:B})}const Ee="_3NBy8",Pe="_1mcDx",Ae="_1Cik9 no-spinner";function Ve(e){const{min:t,max:n,step:a}=e;return new Array(Math.ceil((n+1-t)/a)).fill(t).map(((e,t)=>e+t*a))}class Te{constructor(e){this.data=e,this.Input=this.Input.bind(this)}get id(){return this.data.id}createState(){return Ve(this.data)}Input(e){const{id:t,label:n,min:a,max:i,step:r}=this.data,{value:s,onChange:o}=e,[l,u]=(0,f.useState)(s);return(0,c.jsxs)(Ce,Object.assign({},e,{children:[(0,c.jsxs)("div",Object.assign({className:Ee},{children:[n,(0,c.jsx)("input",{className:Ae,type:"number",min:a,max:i,step:r,value:l,required:!0,onChange:function(e){const{target:t}=e;t.checkValidity()&&o(t.valueAsNumber),u(t.valueAsNumber)}},void 0)]}),void 0),(0,c.jsx)(X,{name:t,value:s,min:a,max:i,step:r,onClick:e=>e.stopPropagation(),onValueChange:function(e){o(e),u(e)}},void 0)]}),void 0)}}const Me="_1TAGd";class Re{constructor(e){this.data=e,this.Input=this.Input.bind(this)}get id(){return this.data.id}createState(){return this.data.names}Input(e){const{id:t,label:n,names:a}=this.data,{value:i,onChange:r}=e,s=a.map((e=>(0,c.jsx)(Se,Object.assign({className:Me,checked:e===i,name:t,onChange:()=>r(e)},{children:e}),e)));return(0,c.jsxs)(Ce,Object.assign({},e,{children:[n,(0,c.jsx)("div",{children:s},void 0)]}),void 0)}}class Ie{constructor(e){this.data=e,this.Input=this.Input.bind(this)}get id(){return this.data.id}createState(){return[!1,!0]}Input(e){const{value:t,onChange:n}=e,{label:a}=this.data;return(0,c.jsxs)(Ce,Object.assign({},e,{className:"_-9JFp"},{children:[a,(0,c.jsx)(we,{checked:t,onValueChange:n,onClick:e=>e.stopPropagation()},void 0)]}),void 0)}}class Fe{constructor(e){this.data=e,this.OptionField=this.OptionField.bind(this)}get id(){return this.data.id}createControl(e){return new Ie(this.data)}createState(){return[Boolean(this.data.defaultValue),void 0]}OptionField(e){const{id:t,label:n}=this.data,{isVariable:a,value:i,onValueChange:r,onVariabilityChange:s}=e;return(0,c.jsxs)("fieldset",Object.assign({className:"_2HSf4 C33aj"},{children:[(0,c.jsx)(ke,Object.assign({className:"XoQCO",checked:a,onValueChange:s},{children:n}),void 0),a?(0,c.jsx)("strong",{children:"OFF & ON"},void 0):(0,c.jsx)(we,{name:t,checked:i,onValueChange:r},void 0)]}),void 0)}populate(e,t){t[this.data.id]=e}generate(e,t,n){const{id:a}=this.data;return[{key:{...t,[a]:!1},options:{...n,[a]:!1}},{key:{...t,[a]:!0},options:{...n,[a]:!0}}]}}class Le{constructor(e){this.data=e,this.OptionField=this.OptionField.bind(this)}get id(){return this.data.id}createControl(e){const{id:t,label:n}=this.data;return new Re({id:t,label:n,names:e})}createState(){const{defaultValue:e}=this.data;return[e,[e]]}OptionField(e){const{id:t,label:n,enumObject:a}=this.data,{isVariable:i,value:r,range:s,onValueChange:o,onRangeChange:l,onVariabilityChange:u}=e;function d(e){const{checked:t,name:n}=e.currentTarget;let a=[...s];t?a.push(n):a=s.filter((e=>e!==n)),a.length>0&&l(a)}function h(e){o(e.currentTarget.value)}let f;return f=i?Object.keys(a).map((e=>(0,c.jsx)(ke,Object.assign({className:Me,name:e,checked:s.includes(e),onChange:d},{children:e}),e))):Object.keys(a).map((e=>(0,c.jsx)(Se,Object.assign({className:Me,name:t,value:e,checked:r===e,onChange:h},{children:e}),e))),(0,c.jsxs)("fieldset",Object.assign({className:"_1MYaD"},{children:[(0,c.jsx)(ke,Object.assign({className:"_2MVPJ",checked:i,onValueChange:u},{children:n}),void 0),(0,c.jsx)("div",Object.assign({className:"_2BoYb"},{children:f}),void 0)]}),void 0)}populate(e,t){const{id:n,enumObject:a}=this.data;t[n]=a[e]}generate(e,t,n){const{id:a,enumObject:i}=this.data;return e.map((e=>({key:{...t,[a]:e},options:{...n,[a]:i[e]}})))}}class ze{constructor(e){this.data=e,this.VariableMode=this.VariableMode.bind(this),this.ConstMode=this.ConstMode.bind(this),this.OptionField=this.OptionField.bind(this),this.RangePart=this.RangePart.bind(this)}get id(){return this.data.id}createControl(e){const{min:t,max:n,step:a}=e,i=Math.floor((n-t)/a)*a+t;return new Te({...this.data,...e,max:i})}createState(){const{min:e,max:t,step:n,defaultValue:a}=this.data;return[a,{min:e,max:t,step:n}]}ConstMode(e){const{id:t,min:n,max:a,step:i}=this.data,{value:r,onValueChange:s}=e;return(0,c.jsx)(X,{className:Pe,name:t,value:r,min:n,max:a,step:i,onValueChange:s},void 0)}VariableMode(e){const{RangePart:t}=this,{step:n}=this.data,{range:a,onRangeChange:i}=e;return(0,c.jsxs)("div",Object.assign({className:Pe},{children:[(0,c.jsx)(t,{range:a,onRangeChange:i,name:"min",max:a.max},void 0),(0,c.jsx)(t,{range:a,onRangeChange:i,name:"max",min:a.min},void 0),(0,c.jsx)(t,{range:a,onRangeChange:i,name:"step",min:n},void 0)]}),void 0)}RangePart(e){const{name:t,min:n,max:a,step:i,range:r,onRangeChange:s}={...this.data,...e};return(0,c.jsxs)("label",Object.assign({className:"_2NAiN"},{children:[(0,c.jsx)("span",{children:t},void 0),(0,c.jsx)(me,{className:"X9XRk",name:t,value:r[t],min:n,max:a,step:i,onValueChange:function(e){s({...r,[t]:e})}},void 0)]}),void 0)}OptionField(e){const{VariableMode:t,ConstMode:n}=this,{label:a,min:i,max:r,step:s}=this.data,{isVariable:o,value:l,onVariabilityChange:u,onValueChange:d}=e;return(0,c.jsxs)("fieldset",Object.assign({className:"_2_AqQ"},{children:[(0,c.jsxs)("div",Object.assign({className:Ee},{children:[(0,c.jsx)(ke,Object.assign({className:"_2k_N3",checked:o,onValueChange:u},{children:a}),void 0),!o&&(0,c.jsx)("input",{className:Ae,type:"number",min:i,max:r,step:s,value:l,onChange:e=>d(e.target.valueAsNumber)},void 0)]}),void 0),o?(0,c.jsx)(t,Object.assign({},e),void 0):(0,c.jsx)(n,Object.assign({},e),void 0)]}),void 0)}populate(e,t){const{id:n,mapFn:a=U}=this.data;t[n]=a(e)}generate(e,t,n){const{id:a,mapFn:i=U}=this.data;return Ve(e).map((e=>{const r={...n,[a]:i(e)};return{key:{...t,[a]:e},options:r}}))}}function Be(e){const t={},n={};for(const a of e){const[e,i]=a.createState();t[a.id]=e,n[a.id]=i}return{varNames:[],values:t,ranges:n}}function We(e,t){const{varNames:n,values:a,ranges:i}=t;return e.reduce((function(e,t){const{id:r}=t;if(n.includes(r)){const n=[];for(const{key:a,options:s}of e){const e=t.generate(i[r],a,s);n.push(...e)}return n}return e.forEach((({options:e})=>t.populate(a[r],e))),e}),[{key:{},options:{}}])}function De(e,t){return{...e,...t}}const Ue="MozJPEG",qe="image/jpeg",He="jpg",Ye={GRAYSCALE:1,RGB:2,YCbCr:3},Ze={"JPEG Annex K":0,Flat:1,"MSSIM-tuned Kodak":2,ImageMagick:3,"PSNR-HVS-M-tuned Kodak":4,"Klein et al":5,"Watson et al":6,"Ahumada et al":7,"Peterson et al":8},Xe={quality:75,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:Ye.YCbCr,quant_table:Ze.ImageMagick,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75},Je=[new ze({id:"quality",label:"Quality (-q)",min:0,max:100,step:1,defaultValue:Xe.quality}),new Le({id:"color_space",label:"Channels",enumObject:Ye,defaultValue:"YCbCr"}),new Le({id:"quant_table",label:"Quantization",enumObject:Ze,defaultValue:"ImageMagick"}),new Fe({id:"arithmetic",label:"Arithmetic",defaultValue:Xe.arithmetic}),new Fe({id:"auto_subsample",label:"Auto subsample chroma",defaultValue:Xe.auto_subsample}),new Fe({id:"separate_chroma_quality",label:"Separate chroma quality",defaultValue:Xe.separate_chroma_quality}),new ze({id:"chroma_quality",label:"Chroma quality",min:0,max:100,step:1,defaultValue:Xe.chroma_quality}),new ze({id:"smoothing",label:"Smoothing",min:0,max:100,step:1,defaultValue:Xe.smoothing}),new Fe({id:"baseline",label:"Pointless spec compliance",defaultValue:Xe.baseline}),new Fe({id:"progressive",label:"Progressive",defaultValue:Xe.progressive}),new Fe({id:"optimize_coding",label:"Optimize Huffman table",defaultValue:Xe.optimize_coding}),new Fe({id:"trellis_multipass",label:"Trellis multipass",defaultValue:Xe.trellis_multipass}),new Fe({id:"trellis_opt_zero",label:"Optimize zero block runs",defaultValue:Xe.trellis_opt_zero}),new Fe({id:"trellis_opt_table",label:"Optimize after trellis quantization",defaultValue:Xe.trellis_opt_table}),new ze({id:"trellis_loops",label:"Trellis quantization passes",min:0,max:50,step:1,defaultValue:Xe.trellis_loops})];function Ge(e){return null!=e?e:Be(Je)}function Qe(e){const{state:t,onChange:n}=e,{varNames:a,values:i,ranges:r}=t,s=Je.map((({id:e,OptionField:s})=>(0,c.jsx)(s,{isVariable:a.includes(e),value:i[e],range:r[e],onValueChange:a=>function(e,a){n({...t,values:{...i,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...r,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:i}=t;a?i.push(e):i=i.filter((t=>t!==e)),n({...t,varNames:i})}(e,a)},e)));return(0,c.jsx)(c.Fragment,{children:s},void 0)}function $e(e){const{varNames:t,ranges:n}=e,a=We(Je,e);return{controls:Je.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function Ke(e,t){return t.mozjpegEncode(De(Xe,e))}const et={speed:4,quality:75,progressive:!1,epf:-1,nearLossless:0,lossyPalette:!1},tt="JPEG XL",nt="image/jxl",at="jxl",it=[new ze({id:"quality",label:"Quality",min:0,max:100,step:.1,defaultValue:et.quality}),new Fe({id:"lossyPalette",label:"Slight loss",defaultValue:et.lossyPalette}),new Fe({id:"progressive",label:"Progressive",defaultValue:et.progressive}),new ze({id:"speed",label:"Speed",min:0,max:6,step:1,defaultValue:et.speed}),new ze({id:"epf",label:"Edge preserving filter",min:-1,max:6,step:1,defaultValue:et.epf})];function rt(e){return null!=e?e:Be(it)}function st(e){const{state:t,onChange:n}=e,{varNames:a,values:i,ranges:r}=t,s=it.map((({id:e,OptionField:s})=>(0,c.jsx)(s,{isVariable:a.includes(e),value:i[e],range:r[e],onValueChange:a=>function(e,a){n({...t,values:{...i,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...r,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:i}=t;a?i.push(e):i=i.filter((t=>t!==e)),n({...t,varNames:i})}(e,a)},e)));return(0,c.jsx)(c.Fragment,{children:s},void 0)}function ot(e){const{varNames:t,ranges:n}=e,a=We(it,e);return{controls:it.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function ct(e,t){return t.jxlEncode(De(et,e))}const lt={quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0},ut="WebP",dt="image/webp",ht="webp",ft=[new Fe({id:"lossless",label:"lossless",defaultValue:lt.lossless}),new ze({id:"quality",label:"Quality (-q)",min:0,max:100,step:1,defaultValue:lt.quality}),new ze({id:"near_lossless",label:"Near lossless (-near_lossless)",min:0,max:100,step:1,defaultValue:lt.near_lossless}),new ze({id:"method",label:"Method (-m)",min:0,max:6,step:1,defaultValue:lt.method}),new class extends Le{generate(e,t,n){const{id:a}=this;return e.map((e=>{const i={...t,[a]:e},r={...n};return this.populate(e,r),{key:i,options:r}}))}populate(e,t){Object.entries(this.data.enumObject[e]).forEach((([e,n])=>t[e]="function"==typeof n?n(t[e]):n))}}({id:"preset",label:"Preset (-preset)",enumObject:{default:{},photo:{sns_strength:80,filter_sharpness:3,filter_strength:30,preprocessing:e=>2|e},picture:{sns_strength:80,filter_sharpness:4,filter_strength:35,preprocessing:e=>-3&e},drawing:{sns_strength:25,filter_sharpness:6,filter_strength:10},icon:{sns_strength:25,filter_strength:10,preprocessing:e=>-3&e},text:{sns_strength:0,filter_strength:0,segments:2,preprocessing:e=>-3&e}},defaultValue:"default"}),new ze({id:"sns_strength",label:"Spatial noise shaping (-sns)",min:0,max:100,step:1,defaultValue:lt.sns_strength}),new Fe({id:"filter_type",label:"User strong filter (-strong)",defaultValue:lt.filter_type}),new Fe({id:"autofilter",label:"Auto adjust filter strength (-af)",defaultValue:lt.autofilter}),new ze({id:"filter_strength",label:"Filter strength (-f)",min:0,max:100,step:1,defaultValue:lt.filter_strength}),new ze({id:"filter_sharpness",label:"Filter sharpness (-sharpness)",min:0,max:7,step:1,defaultValue:lt.filter_sharpness}),new Fe({id:"use_sharp_yuv",label:"Sharp YUV",defaultValue:lt.use_sharp_yuv}),new Le({id:"image_hint",label:"Hint (-hint)",enumObject:{Default:0,Picture:1,Photo:2,Graph:3},defaultValue:"Default"})];function mt(e){if(e)return e;const{values:t,ranges:n}=Be(ft);return n.quality.step=5,{varNames:["quality"],values:t,ranges:n}}function pt(e){const{state:t,onChange:n}=e,{varNames:a,values:i,ranges:r}=t,s=ft.map((({id:e,OptionField:s})=>(0,c.jsx)(s,{isVariable:a.includes(e),value:i[e],range:r[e],onValueChange:a=>function(e,a){n({...t,values:{...i,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...r,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:i}=t;a?i.push(e):i=i.filter((t=>t!==e)),n({...t,varNames:i})}(e,a)},e)));return(0,c.jsx)(c.Fragment,{children:s},void 0)}function vt(e){const{varNames:t,ranges:n}=e,a=We(ft,e);return{controls:ft.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function gt(e,t){return t.webpEncode(De(lt,e))}const bt={cqLevel:33,cqAlphaLevel:-1,denoiseLevel:0,tileColsLog2:0,tileRowsLog2:0,speed:6,subsample:1,chromaDeltaQ:!1,sharpness:0,targetSsim:!1},yt="AVIF",xt="image/avif",jt="avif",wt={YUV400:0,YUV420:1,YUV422:2,YUV444:3},Ct=[new ze({id:"cqLevel",label:"Quality",min:0,max:63,step:1,mapFn:e=>63-e,defaultValue:bt.cqLevel}),new ze({id:"cqAlphaLevel",label:"Alpha quality",min:0,max:63,step:1,mapFn:e=>63-e,defaultValue:bt.cqAlphaLevel}),new ze({id:"sharpness",label:"Sharpness",min:0,max:7,step:1,defaultValue:bt.sharpness}),new ze({id:"denoiseLevel",label:"Noise synthesis",min:0,max:50,step:1,defaultValue:bt.denoiseLevel}),new Fe({id:"chromaDeltaQ",label:"Extra chroma compression",defaultValue:bt.chromaDeltaQ}),new ze({id:"tileRowsLog2",label:"Log2 of tile rows",min:0,max:6,step:1,defaultValue:bt.tileRowsLog2}),new ze({id:"tileColsLog2",label:"Log2 of tile cols",min:0,max:6,step:1,defaultValue:bt.tileColsLog2}),new ze({id:"speed",label:"Speed",min:0,max:10,step:1,defaultValue:bt.speed}),new Le({id:"subsample",label:"Subsample",enumObject:wt,defaultValue:"YUV420"})];function Ot(e){return null!=e?e:Be(Ct)}function Nt(e){const{state:t,onChange:n}=e,{varNames:a,values:i,ranges:r}=t,s=Ct.map((({id:e,OptionField:s})=>(0,c.jsx)(s,{isVariable:a.includes(e),value:i[e],range:r[e],onValueChange:a=>function(e,a){n({...t,values:{...i,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...r,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:i}=t;a?i.push(e):i=i.filter((t=>t!==e)),n({...t,varNames:i})}(e,a)},e)));return(0,c.jsx)(c.Fragment,{children:s},void 0)}function _t(e){const{varNames:t,ranges:n}=e,a=We(Ct,e);return{controls:Ct.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function kt(e,t){return t.avifEncode({...bt,...e})}const St="WebP v2",Et="image/webp2",Pt="wp2",At={Adapt:0,420:1,444:2,Auto:3},Vt={YCoCg:0,YCbCr:1,Custom:2,YIQ:3},Tt={quality:75,alpha_quality:75,effort:5,pass:1,sns:50,uv_mode:At.Adapt,csp_type:Vt.YCoCg,error_diffusion:0,use_random_matrix:!1},Mt=[new ze({id:"quality",label:"Quality",min:0,max:95,step:.1,defaultValue:Tt.quality}),new ze({id:"alpha_quality",label:"Alpha Quality",min:0,max:95,step:.1,defaultValue:Tt.alpha_quality}),new ze({id:"effort",label:"Effort",min:0,max:9,step:1,defaultValue:Tt.effort}),new ze({id:"pass",label:"Passes",min:0,max:9,step:1,defaultValue:Tt.pass}),new ze({id:"sns",label:"Spatial noise shaping",min:0,max:100,step:1,defaultValue:Tt.sns}),new ze({id:"error_diffusion",label:"Error diffusion",min:0,max:100,step:1,defaultValue:Tt.error_diffusion}),new Le({id:"uv_mode",label:"UVMode",enumObject:At,defaultValue:"Adapt"}),new Le({id:"csp_type",label:"Color space",enumObject:Vt,defaultValue:"YCoCg"}),new Fe({id:"use_random_matrix",label:"Random matrix",defaultValue:Tt.use_random_matrix})];function Rt(e){return null!=e?e:Be(Mt)}function It(e){const{state:t,onChange:n}=e,{varNames:a,values:i,ranges:r}=t,s=Mt.map((({id:e,OptionField:s})=>(0,c.jsx)(s,{isVariable:a.includes(e),value:i[e],range:r[e],onValueChange:a=>function(e,a){n({...t,values:{...i,[e]:a}})}(e,a),onRangeChange:a=>function(e,a){n({...t,ranges:{...r,[e]:a}})}(e,a),onVariabilityChange:a=>function(e,a){let{varNames:i}=t;a?i.push(e):i=i.filter((t=>t!==e)),n({...t,varNames:i})}(e,a)},e)));return(0,c.jsx)(c.Fragment,{children:s},void 0)}function Ft(e){const{varNames:t,ranges:n}=e,a=We(Mt,e);return{controls:Mt.filter((e=>t.includes(e.id))).map((e=>e.createControl(n[e.id]))),optionsList:a}}function Lt(e,t){return t.webp2Encode(De(Tt,e))}const zt=[a,i,r,s,o],Bt=Object.fromEntries(zt.map((e=>[e.name,e])));class Wt{constructor(e,t){if(this.terminated=!1,this.queue=[],this.waiters=[],t<1)throw new Error("Worker count must be at least 1");this.workers=new Array(t),this.remotes=new Array(t);for(let n=0;n<t;n++){const t=e();this.workers[n]=t,this.remotes[n]=(0,m.Ud)(t)}}runOnEach(e){return Promise.all(this.remotes.map(e))}run(e){return new Promise((t=>this.addJob({task:e,resolve:t})))}join(){const{queue:e,remotes:t,workers:n,waiters:a}=this;return 0===e.length&&t.length===n.length?Promise.resolve():new Promise((e=>a.push(e)))}terminate(){this.terminated=!0,this.workers.forEach((e=>e.terminate())),this.waiters.forEach((e=>e()))}addJob(e){const t=this.remotes.pop();if(t)return this.runJob(t,e);this.queue.push(e)}async runJob(e,t){const{task:n,resolve:a}=t;a(await n(e));const i=this.queue.pop();if(i)return this.runJob(e,i);const{remotes:r,workers:s,waiters:o}=this;r.push(e),r.length===s.length&&o.splice(0,o.length).forEach((e=>e()))}}var Dt=n(6149),Ut=n(6448),qt=n(9573),Ht=n(8877),Yt=n(5185),Zt=n(7721);const Xt=[{description:"Large photo (488KB)",url:Dt,icon:Ut},{description:"Artwork (408KB)",url:qt,icon:Ht},{description:"Colorful text (68KB)",url:Yt,icon:Zt}];function Jt(e){const{description:t,url:n,icon:a,onClick:i}=e,[r,s]=(0,f.useState)(!1);return(0,c.jsxs)("button",Object.assign({className:"_2CyJM",onClick:async function(){if(!r){s(!0);try{await i(n)}finally{s(!1)}}}},{children:[(0,c.jsx)("img",{src:a,alt:"icon",className:"_5g0tc"},void 0),r&&(0,c.jsx)("div",{className:"P11_5"},void 0),(0,c.jsx)("span",Object.assign({className:"_3dMVq"},{children:t}),void 0)]}),n)}function Gt(e){const{onCancel:t,onChange:n}=e,a=(0,f.useRef)(new AbortController),[i,r]=(0,f.useState)();function s(e){y(e).then((t=>n({file:e,raw:t}))).catch((e=>r(e.message)))}async function o(e){const t=new AbortController;a.current.abort(),a.current=t;const{signal:n}=t;try{s(await async function(e,t){const n=await fetch(e,{signal:t}),a=await n.blob(),i=/[^;]*/.exec(a.type)[0],r=new URL(e).pathname.split("/").pop()||"image",s=n.headers.get("last-modified"),o=s?new Date(s).getTime():void 0;return new File([a],r,{type:i,lastModified:o})}(e,n))}catch(e){if("AbortError"!==e.name)throw e}}const l=Xt.map((e=>(0,f.createElement)(Jt,Object.assign({},e,{key:e.url,onClick:o}))));return(0,c.jsxs)(be,Object.assign({onClose:t},{children:[(0,c.jsxs)("div",Object.assign({className:"dialog-content"},{children:[(0,c.jsx)(_e,{className:"_1294e",onChange:function(e){s(e),a.current.abort()},onError:r,onStart:()=>r(void 0)},void 0),(0,c.jsx)("span",Object.assign({className:"_2Sr67"},{children:"Or try one of these:"}),void 0),(0,c.jsx)("div",Object.assign({className:"_3BC6E"},{children:l}),void 0)]}),void 0),(0,c.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,c.jsx)("span",Object.assign({className:"Qed9H"},{children:i}),void 0),(0,c.jsx)(G,Object.assign({className:"second",onClick:t},{children:"Back"}),void 0)]}),void 0)]}),void 0)}function Qt(e){const{file:t,raw:n}=e.value,{width:a,height:i,data:r}=n,s=(t.size/r.byteLength*100).toFixed(2);return(0,c.jsxs)("div",Object.assign({className:"dialog-content",role:"tabpanel"},{children:[(0,c.jsx)("canvas",{className:"WKrzW","aria-label":"Preview",ref:function(e){null==e||e.getContext("2d").putImageData(n,0,0)},width:a,height:i},void 0),(0,c.jsxs)("dl",Object.assign({className:"lL9Er"},{children:[(0,c.jsx)("dt",{children:"File name:"},void 0),(0,c.jsx)("dd",{children:t.name},void 0),(0,c.jsx)("dt",{children:"Type:"},void 0),(0,c.jsx)("dd",{children:t.type},void 0),(0,c.jsx)("dt",{children:"Resolution:"},void 0),(0,c.jsxs)("dd",{children:[a," x ",i]},void 0),(0,c.jsx)("dt",{children:"Raw size:"},void 0),(0,c.jsx)("dd",{children:H(r.byteLength)},void 0),(0,c.jsx)("dt",{children:"File size (Ratio %):"},void 0),(0,c.jsxs)("dd",{children:[H(t.size)," (",s,"%)"]},void 0)]}),void 0)]}),void 0)}var $t=n(8059);n(9650);const Kt={hfAsymmetry:1,goodQualitySeek:1.5,badQualitySeek:.5},en={form:"_15tPw dialog-content",subfields:"_3TOcu",field:"_6RszX",inlineLabel:"_1wJoX",label:"_4BrBt",select:"_3RZQr"};function tn(e){return e||{version:1,workerCount:navigator.hardwareConcurrency,time:!0,PSNR:!1,SSIM:{enabled:!0,options:$t.getOptions()},butteraugli:{enabled:!1,options:Kt}}}function nn(e){const{label:t,children:n}=e;return(0,c.jsxs)("label",Object.assign({className:en.field},{children:[(0,c.jsx)("span",Object.assign({className:en.label},{children:t}),void 0),n]}),void 0)}function an(e){const{value:t,onChange:n}=e;function a(e,a){const i={...t.options,[e]:a};n({...t,options:i})}const i=Object.entries(t.options).map((([e,t])=>(0,c.jsx)(nn,Object.assign({label:e},{children:(0,c.jsx)(me,{className:en.value,name:e,min:0,max:2,step:.1,value:t,onValueChange:t=>a(e,t)},void 0)}),e)));return(0,c.jsx)("fieldset",Object.assign({className:en.subfields},{children:i}),void 0)}function rn(e,t,n){const a=t.split(".");return function e(t,i){const r=a[i];let s=n;return i<a.length-1&&(s=e(t[r],i+1)),{...t,[r]:s}}(e,0)}function sn(e){const{value:t,onChange:n}=e;return(0,c.jsxs)("fieldset",Object.assign({className:en.subfields},{children:[(0,c.jsx)(nn,Object.assign({label:"Algorithm"},{children:(0,c.jsxs)("select",Object.assign({className:en.select,value:t.ssim,onChange:e=>n({ssim:e.target.value})},{children:[(0,c.jsx)("option",{children:"fast"},void 0),(0,c.jsx)("option",{children:"original"},void 0),(0,c.jsx)("option",{children:"bezkrovny"},void 0),(0,c.jsx)("option",{children:"weber"},void 0)]}),void 0)}),void 0),(0,c.jsx)(nn,Object.assign({label:"k1"},{children:(0,c.jsx)(me,{value:t.k1,min:0,step:.01,onValueChange:e=>n({k1:e})},void 0)}),void 0),(0,c.jsx)(nn,Object.assign({label:"k2"},{children:(0,c.jsx)(me,{value:t.k2,min:0,step:.01,onValueChange:e=>n({k2:e})},void 0)}),void 0),(0,c.jsx)(nn,Object.assign({label:"window size"},{children:(0,c.jsx)(me,{value:t.windowSize,min:0,step:.01,onValueChange:e=>n({windowSize:e})},void 0)}),void 0)]}),void 0)}function on(e){const{encodeTime:t,value:n,onChange:a}=e,{workerCount:i,time:r,SSIM:s,PSNR:o,butteraugli:l}=n;function u(e){const{name:t,checked:i}=e.currentTarget;a({...n,[t]:i})}return(0,c.jsxs)("form",Object.assign({className:en.form,role:"tabpanel"},{children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("span",Object.assign({className:en.inlineLabel},{children:"Thread count:"}),void 0),(0,c.jsx)(me,{value:i,min:1,step:1,onValueChange:function(e){a({...n,workerCount:e})}},void 0)]},void 0),t&&(0,c.jsx)(ke,Object.assign({checked:r,name:"time",onChange:u},{children:"Encode time (Not very accurate)"}),void 0),(0,c.jsx)(ke,Object.assign({checked:s.enabled,name:"SSIM.enabled",onChange:e=>a(rn(n,"SSIM.enabled",e.target.checked))},{children:"Structural similarity index measure"}),void 0),(0,c.jsx)(sn,{value:s.options,onChange:e=>a(rn(n,"SSIM.options",e))},void 0),(0,c.jsx)(ke,Object.assign({checked:o,name:"PSNR",onChange:u},{children:"Peak signal-to-noise ratio"}),void 0),(0,c.jsx)(ke,Object.assign({checked:l.enabled,name:"butteraugli",onValueChange:e=>a({...n,butteraugli:{...l,enabled:e}})},{children:"Butteraugli"}),void 0),(0,c.jsx)(an,{value:l,onChange:function(e){a({...n,butteraugli:e})}},void 0)]}),void 0)}function cn(e){const t=null!=e?e:{};for(const{name:e,getState:n}of zt)t[e]?t[e].state=n(t[e].state):t[e]={enable:!1,state:n()};return e||(t.WebP.enable=!0),t}function ln(e){const{value:t,onChange:n}=e,[a,i]=(0,f.useState)("WebP"),r=zt.map((e=>{const{name:r}=e,s=(0,W.Z)("_3rUeO",{_1krxL:r===a});return(0,c.jsxs)("button",Object.assign({className:s,onClick:()=>i(r)},{children:[(0,c.jsx)(ke,{checked:t[r].enable,onClick:e=>e.stopPropagation(),onChange:function(e){const a={...t[r],enable:e.currentTarget.checked};n({...t,[r]:a})}},void 0),(0,c.jsx)("span",Object.assign({className:"_2G5o7"},{children:r}),void 0)]}),r)})),{OptionsPanel:s}=Bt[a];return(0,c.jsxs)("div",Object.assign({className:"_1LeZ1 dialog-content",role:"tabpanel"},{children:[(0,c.jsx)("div",Object.assign({className:"_1sBf2"},{children:r}),void 0),(0,c.jsx)("form",Object.assign({className:"_3GSpr"},{children:(0,c.jsx)(s,{state:t[a].state,onChange:function(e){const i={...t[a],state:e};n({...t,[a]:i})}},void 0)}),void 0)]}),void 0)}const un="_6sryz";function dn(e,t){return()=>{const n=localStorage.getItem(e);return t(n?JSON.parse(n):void 0)}}const hn=["Information","Encoding","Measure"];function fn(e){const{image:t,onStart:n,onClose:a,onSelectFile:i}=e,[r,s]=(0,f.useState)(0),[o,l]=(0,f.useState)(dn("Encoding",cn)),[u,d]=(0,f.useState)(dn("Measure",tn)),h=hn.map(((e,t)=>(0,c.jsx)("div",Object.assign({className:"_29qBc",role:"tab","aria-selected":t===r,onClick:()=>s(t)},{children:e}),t)));let m;switch(r){case 0:m=(0,c.jsx)(Qt,{value:t},void 0);break;case 1:m=(0,c.jsx)(ln,{value:o,onChange:l},void 0);break;case 2:m=(0,c.jsx)(on,{value:u,encodeTime:!0,onChange:d},void 0)}const p=t&&Object.values(o).some((e=>e.enable));return(0,c.jsxs)(be,Object.assign({name:"Analysis config",className:un,onClose:a},{children:[(0,c.jsx)("div",Object.assign({className:"_3x7vU",role:"tablist"},{children:h}),void 0),m,(0,c.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,c.jsx)(G,Object.assign({onClick:i},{children:"Select file..."}),void 0),(0,c.jsx)(G,Object.assign({className:"second",onClick:a},{children:"Cancel"}),void 0),(0,c.jsx)(G,Object.assign({disabled:!p,onClick:function(){n({encoding:o,measure:u}),localStorage.setItem("Encoding",JSON.stringify(o)),localStorage.setItem("Measure",JSON.stringify(u))}},{children:"Start"}),void 0)]}),void 0)]}),void 0)}function mn(e){const{error:t,value:n,max:a,onCancel:i}=e,r=(0,f.useRef)(performance.now()),[s,o]=(0,f.useState)("--:--:--");return(0,f.useEffect)((function(){const e=setInterval((function(){const e=performance.now()-r.current,t=new Date(e);o(t.toISOString().substr(11,8))}),1e3);return()=>clearInterval(e)}),[]),(0,c.jsxs)(be,Object.assign({onClose:i},{children:[(0,c.jsxs)("div",Object.assign({className:"_1RFbq dialog-content"},{children:[(0,c.jsx)("h1",{children:"Encoding..."},void 0),t&&(0,c.jsxs)("p",Object.assign({className:"O-Yz-"},{children:["Error: ",t]}),void 0),(0,c.jsxs)("div",Object.assign({className:"_3vxdS"},{children:[(0,c.jsxs)("span",{children:[n," / ",a]},void 0),(0,c.jsxs)("span",{children:["Elapsed time: ",s]},void 0)]}),void 0),(0,c.jsx)("progress",{value:n,max:a,className:"mrzz8"},void 0)]}),void 0),(0,c.jsx)("div",Object.assign({className:"_3UNgR dialog-actions"},{children:(0,c.jsx)(G,Object.assign({className:"second",onClick:i},{children:"Cancel"}),void 0)}),void 0)]}),void 0)}function pn(e){const{isOpen:t,onClose:n,onChange:a}=e,[i,r]=(0,f.useState)(!0),[s,o]=(0,f.useState)(),[l,u]=(0,f.useState)(),d=Y(),[h,m]=(0,f.useState)();return t?l?(0,c.jsx)(mn,{value:d.value,max:d.max,error:h,onCancel:function(){l.terminate(),u(void 0)}},void 0):i?(0,c.jsx)(Gt,{onCancel:function(){s?r(!1):n()},onChange:async function(e){o(e),r(!1)}},void 0):(0,c.jsx)(fn,{image:s,onStart:async function(e){if(!s)throw new Error("File is null");const{file:t,raw:n}=s,{encoding:i,measure:r}=e;let o=0;const c=[],l={};for(const e of zt){const{name:t,getOptionsList:n}=e,a=i[t];if(!a.enable)continue;const{controls:r,optionsList:s}=n(a.state);l[t]=r,c.push([e,s]),o+=s.length}const h=[{key:"ratio",name:"Compression Ratio %"}],{calculations:f,metricsMeta:p}=w(r);o*=1+f,h.push(...p),r.time&&(h.push({key:"time",name:"Encode Time (s)"}),o+=r.workerCount);const v=new x,g=new Wt(j,r.workerCount),b=new O,y=C(g,r,d.increase);d.reset(o),u(g),b.onProgress=d.increase;try{if("SharedArrayBuffer"in window){const e=function(e){const{width:t,height:n,data:a}=e,i=new SharedArrayBuffer(a.byteLength),r=new Uint8ClampedArray(i);return r.set(a),{width:t,height:n,data:r}}(n);await g.runOnEach((t=>t.setImageToEncode(e)))}else await g.runOnEach((e=>e.setImageToEncode(n)));if(r.time)for(const[e,t]of c){const{options:n}=t[0];await g.runOnEach((async t=>e.encode(n,t).then(d.increase)))}for(const[e,n]of c)for(const{key:a,options:i}of n)g.run((async n=>{const{buffer:r,data:s,time:o}=await b.encode(n,e,i),c={buffer:r,data:s,metrics:{time:o,ratio:r.byteLength/t.size*100}};y(c),v.set({encoder:e.name,key:a},c)}));await g.join(),g.terminated||(u(void 0),a({controlsMap:l,seriesMeta:h,outputMap:v,input:s}))}catch(e){console.error(e),m(e.message)}g.terminate()},onClose:n,onSelectFile:()=>r(!0)},void 0):null}const vn="_3YpNu",gn="_3c5c0";var bn;function yn(){return(yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const xn=function(e){return f.createElement("svg",yn({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 438.549 438.549",fill:"currentColor"},e),bn||(bn=f.createElement("path",{d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})))};var jn=n(7500);function wn(e){const{onEncode:t,onCompare:n}=e;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("section",Object.assign({className:"Tt2Yp"},{children:[(0,c.jsx)("img",{className:"_2g3gN",alt:"banner",src:jn},void 0),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",Object.assign({className:"_2UBpq"},{children:"ICAnalyzer"}),void 0),(0,c.jsx)("h2",Object.assign({className:"_3dZjB"},{children:"Image Codec & Quality analyze tool"}),void 0),(0,c.jsx)(G,Object.assign({className:vn,type:"outline",onClick:t},{children:"Convert"}),void 0),(0,c.jsx)(G,Object.assign({className:vn,type:"outline",onClick:n},{children:"Compare images"}),void 0),(0,c.jsxs)(G,Object.assign({className:(0,W.Z)(vn,"second"),type:"outline",href:"https://github.com/Kaciras/ICAnalyzer"},{children:[(0,c.jsx)(xn,{className:"K-q6E"},void 0),"Source Code"]}),void 0)]},void 0),(0,c.jsxs)("div",Object.assign({className:"_3tP01"},{children:["Photo by",(0,c.jsx)("a",Object.assign({className:gn,href:"https://unsplash.com/@veverkolog?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},{children:"Duan veverkolog"}),void 0),"on",(0,c.jsx)("a",Object.assign({className:gn,href:"https://unsplash.com/s/photos/eagle?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},{children:"Unsplash"}),void 0)]}),void 0)]}),void 0),(0,c.jsx)("section",Object.assign({className:"_2SF9G"},{children:"TODO"}),void 0)]},void 0)}var Cn=n(7191),On=n(9120),Nn=n(2280),_n=n(2285),kn=n(6863),Sn=n(1750),En=n(3509);function Pn(e,t,n){const{width:a,data:i}=e,r=4*(t+n*a);return Array.from(i.slice(r,r+4))}function An(e){const{name:t,value:n}=e,a="#"+n.map((e=>function(e){return e.length<2?"0"+e:e}(e.toString(16)))).join("").toUpperCase(),i={"--color":a.substring(0,7)};return(0,c.jsxs)("div",Object.assign({className:"_1JGQL",style:i},{children:[t,": ",a]}),void 0)}function Vn(e){const{style:t,x:n,y:a,imageA:i,imageB:r}=e,s=Pn(i,n,a),o=Pn(r,n,a),l=s.map(((e,t)=>Math.abs(e-o[t])));return(0,c.jsxs)("div",Object.assign({className:"_1hKG3",style:t},{children:[(0,c.jsxs)("div",{children:["x: ",n,", y: ",a]},void 0),(0,c.jsx)(An,{name:"Origin",value:s},void 0),(0,c.jsx)(An,{name:"Output",value:o},void 0),(0,c.jsx)(An,{name:"Diff",value:l},void 0)]}),void 0)}const Tn="_92kbo",Mn="_2JgM9",Rn="_1YBWC";var In;!function(e){e[e.Original=0]="Original",e[e.Output=1]="Output",e[e.Difference=2]="Difference",e[e.HeatMap=3]="HeatMap"}(In||(In={}));const Fn=["Original","Output","Difference","HeatMap"];function Ln(e,t){if(null===t.current)throw new Error("Canvas is null");const n=t.current.getContext("2d");if(!n)throw new Error("Canvas not initialized");n.putImageData(e,0,0)}function zn(e){const{original:t,output:n,className:a}=e,{width:i,height:r}=t.raw,{heatMap:s}=n,[o,l]=(0,f.useState)(In.Output),[u,d]=(0,f.useState)(!1),[h,m]=(0,f.useState)(!1),[p,v]=(0,f.useState)(1),[g,b]=(0,f.useState)({clientX:0,clientY:0}),[y,x,j]=function(e){const[t,n]=(0,f.useState)(e);return[t,n,()=>n(e)]}({x:0,y:0,scale:1}),w=(0,f.useRef)(null),C=(0,f.useRef)(null),O=o===In.HeatMap?s:n.data;(0,f.useEffect)((function(){j(),Ln(t.raw,w)}),[t]),(0,f.useEffect)((function(){Ln(O,C)}),[O]);const N=Fn.map((e=>({target:e})));s||(N[3].disabled=!0,N[3].title="Require enable butteraugli");const _=N.map((e=>{const{target:t,disabled:n,title:a}=e,i=In[t];return(0,c.jsx)(G,Object.assign({type:"text",active:o===i,disabled:n,title:a,onClick:()=>l(i)},{children:t}),i)}));let k=null,S=1;o===In.Difference&&(S=p,k=(0,c.jsxs)("label",Object.assign({title:"Brightness",className:Tn},{children:[(0,c.jsx)(kn.Z,{className:Mn},void 0),(0,c.jsx)(me,{className:"_19OEA",value:p,min:1,max:255,step:1,minMaxButton:!0,onValueChange:v},void 0)]}),void 0));const E={width:i,height:r,"--scale":y.scale,"--x":y.x+"px","--y":y.y+"px","--brightness":`${S}`},{clientX:P,clientY:A}=g,V=Math.floor((P-y.x-(window.innerWidth-i*y.scale)/2)/y.scale),T=Math.floor((A-y.y-(window.innerHeight-r*y.scale)/2)/y.scale),M={top:A,left:P},R=o===In.Difference?"difference":void 0;return(0,c.jsxs)("div",Object.assign({className:(0,W.Z)("_3kS7K",a)},{children:[(0,c.jsx)(ye,Object.assign({className:"_36tMg",state:y,onChange:e=>e.scale>.01&&x(e)},{children:(0,c.jsxs)("div",Object.assign({className:"_2sQef",style:E,onMouseOver:()=>m(!0),onMouseMove:function(e){const{clientX:t,clientY:n}=e;b({clientX:t,clientY:n})},onMouseOut:()=>m(!1)},{children:[(0,c.jsx)("canvas",{className:Rn,ref:w,width:i,height:r},void 0),(0,c.jsx)("canvas",{className:Rn,ref:C,width:i,height:r,style:{mixBlendMode:R},hidden:o===In.Original},void 0)]}),void 0)}),void 0),(0,c.jsxs)("div",Object.assign({className:"-oYCp controls"},{children:[(0,c.jsx)("div",{children:_},void 0),(0,c.jsxs)("div",Object.assign({className:Tn,title:"Pick color"},{children:[(0,c.jsx)(Sn.Z,{className:Mn},void 0),(0,c.jsx)(we,{checked:u,onValueChange:d},void 0)]}),void 0),k]}),void 0),(0,c.jsxs)("div",Object.assign({className:"ICaVu"},{children:[(0,c.jsx)(me,{title:"Zoom scale",min:1,step:1,increment:50,className:"_1AxLs _19OEA",value:Math.round(100*y.scale),onValueChange:function(e){x((t=>({...t,scale:e/100})))}},void 0),(0,c.jsx)(G,Object.assign({title:"Reset view",type:"text",className:"_3mZJ8",onClick:j},{children:(0,c.jsx)(En.Z,{},void 0)}),void 0)]}),void 0),u&&h&&(0,c.jsx)(Vn,{style:M,x:V,y:T,imageA:t.raw,imageB:n.data},void 0)]}),void 0)}var Bn,Wn=n(8726),Dn=n.n(Wn),Un=n(2688),qn=n.n(Un),Hn=n(4301),Yn=n.n(Hn);function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Xn=function(e){return f.createElement("svg",Zn({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 486.733 486.733",fill:"currentColor"},e),Bn||(Bn=f.createElement("path",{d:"M403.88 196.563h-9.484v-44.388c0-82.099-65.151-150.681-146.582-152.145-2.225-.04-6.671-.04-8.895 0C157.486 1.494 92.336 70.076 92.336 152.175v44.388h-9.485c-14.616 0-26.538 15.082-26.538 33.709v222.632c0 18.606 11.922 33.829 26.539 33.829H403.88c14.616 0 26.539-15.223 26.539-33.829V230.272c0-18.626-11.922-33.709-26.539-33.709zM273.442 341.362v67.271c0 7.703-6.449 14.222-14.158 14.222H227.45c-7.71 0-14.159-6.519-14.159-14.222v-67.271c-7.477-7.36-11.83-17.537-11.83-28.795 0-21.334 16.491-39.666 37.459-40.513 2.222-.09 6.673-.09 8.895 0 20.968.847 37.459 19.179 37.459 40.513-.002 11.258-4.355 21.435-11.832 28.795zm58.444-144.799H154.847v-44.388c0-48.905 39.744-89.342 88.519-89.342 48.775 0 88.521 40.437 88.521 89.342v44.388z"})))};function Jn(e,t){const{yAxis:n}=e;for(let e=1;e<n.length;e++)n[e].update({visible:t===e},!1);e.redraw()}function Gn(e){const{series:t}=e;for(let n=1;n<t.length;n++)t[n].legendItem.on("mouseover",(()=>Jn(e,n)))}function Qn(e){const{className:t,visible:n,seriesMeta:a,outputs:i,index:r,values:s}=e,[o,l]=(0,f.useState)(),[u,d]=(0,f.useState)(!1);(0,f.useEffect)((()=>o&&function(e){e.xAxis[0].setCategories(s,!1),e.series.forEach(((e,t)=>{const{key:n}=a[t];e.setData(i.map((e=>e.metrics[n])),!1)}))}(o)),[i]),(0,f.useEffect)((()=>o&&function(e){const[t]=e.xAxis;t.removePlotLine("MarkLine"),t.addPlotLine({id:"MarkLine",value:r,dashStyle:"Dash"}),e.legend.update({labelFormatter(){const{name:e,options:t}=this,n=t.data[r];let a;switch(n){case 1/0:a="";break;case-1/0:a="-";break;default:a=n.toFixed(2)}return`${e}: <b>${a}</b>`}}),Gn(e)}(o)));const h=n?void 0:{display:"none"};return(0,c.jsxs)("section",Object.assign({className:(0,W.Z)("_120CL",t),style:h},{children:[(0,c.jsx)(G,Object.assign({title:"Lock Y axis range",type:"text",className:"_2SMWc",active:u,onClick:function(){if(u){const e={min:null,max:null};o.yAxis.forEach((t=>t.update(e,!1))),d(!1)}else d(!0),o.yAxis.forEach((e=>e.update({min:e.min,max:e.max})),!1);o.redraw()}},{children:(0,c.jsx)(Xn,{},void 0)}),void 0),(0,c.jsx)("div",{className:"N21M3",ref:function(e){if(!e||o)return;const t=new Array(a.length),n=new Array(a.length);for(let e=0;e<a.length;e++){const{key:r,name:s}=a[e];n[e]={title:{text:s},visible:!1,opposite:!0},t[e]={name:s,type:"line",yAxis:e,data:i.map((e=>e.metrics[r]))}}const[r,c]=n;r.visible=!0,r.opposite=!1,c&&(c.visible=!0);const u={series:t,yAxis:n,chart:{animation:!1,styledMode:!0},title:{text:""},tooltip:{borderRadius:0},legend:{verticalAlign:"top",width:450,alignColumns:!1},xAxis:{categories:s,width:430},exporting:{buttons:{contextButton:{y:5,x:-5,height:32,width:32,symbolSize:16,symbolX:17,symbolY:16}},chartOptions:{chart:{className:"exporting_chart_class"}}}};l(Dn().chart(e,u,(e=>{!function(e){const{allItems:t}=e.legend;for(let n=1;n<t.length;n++)t[n].onMouseOver=()=>Jn(e,n)}(e),Gn(e)})))}},void 0)]}),void 0)}qn()(Dn()),Yn()(Dn());function $n(e){const{controlsMap:t,value:n,onChange:a}=e,{variableType:i,variableName:r,encoderName:s,encoderState:o}=n;if(i===aa.None)return null;function l(e,t){a({variableType:e,variableName:t})}const u=zt.filter((e=>e.name in t)).map((({name:e})=>(0,c.jsx)("option",Object.assign({value:e},{children:e}),e))),d=o[s],h=t[s].map((e=>(0,c.jsx)(e.Input,{value:d[e.id],active:i===aa.Options&&r===e.id,onChange:t=>function(e,t){const n=o[s],i={...o,[s]:{...n,[e]:t}};a({encoderState:i})}(e.id,t),onFocus:()=>l(aa.Options,e.id)},e.id)));return(0,c.jsxs)("form",Object.assign({className:"_33pnL controls"},{children:[h,u.length>1&&(0,c.jsx)(Ce,Object.assign({active:i===aa.Encoder,onFocus:()=>l(aa.Encoder,"Encoder")},{children:(0,c.jsx)(je,Object.assign({title:"Codec name",value:s,onChange:function(e){a({encoderName:e.currentTarget.value})}},{children:u}),void 0)}),void 0)]}),void 0)}const Kn="_1C_7C controls",ea="_3RfWA",ta="_2Uqli";function na(e){const{title:t,buffer:n,filename:a,children:i}=e,{mimeType:r,extension:s}=e.codec,o=(0,f.useRef)("");return(0,f.useEffect)((()=>()=>URL.revokeObjectURL(o.current)),[]),(0,c.jsx)(G,Object.assign({className:ea,type:"text",title:t,onClick:function(){const e=new Blob([n],{type:r});URL.revokeObjectURL(o.current);const t=URL.createObjectURL(e);o.current=t;const i=document.createElement("a");i.href=t,i.download=a.replace(/.[^.]*$/,`.${s}`),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{children:i}),void 0)}var aa;function ia(e){let t=aa.None,n="";const a=Object.entries(e);a.length>1&&(t=aa.Encoder,n="");const[i,r]=a[0];r.length>0&&(t=aa.Options,n=r[0].id);const s={};for(const[e,t]of a)s[e]=Object.fromEntries(t.map((e=>[e.id,e.createState()[0]])));return{variableType:t,variableName:n,encoderName:i,encoderState:s}}function ra(e,t){return{...e,...t}}function sa(e){const{result:t,onStart:n,onClose:a}=e,{input:i,controlsMap:r,seriesMeta:s}=t,[o,l]=(0,f.useState)(!0),[u,d]=(0,f.useReducer)(ra,r,ia),{labels:h,series:m,output:p}=(0,f.useMemo)((()=>function(e,t){const{controlsMap:n,outputMap:a}=e,{variableType:i,variableName:r,encoderName:s,encoderState:o}=t,c=o[s],l=a.get({encoder:s,key:c});let u,d;if(i===aa.None)u=[""],d=[l];else if(i===aa.Encoder)u=zt.filter((e=>e.name in o)).map((e=>e.name)),d=u.map((e=>a.get({encoder:e,key:o[e]})));else{if(i!==aa.Options)throw new Error("Missing handle of variableType: "+i);{const e=n[s].find((e=>e.id===r)).createState();u=e.map((e=>e.toString())),d=e.map((e=>a.get({encoder:s,key:{...c,[r]:e}})))}}return{output:l,labels:u,series:d}}(t,u)),[t,u]),v=m.indexOf(p);if(v<0)throw new Error("Can't find current index in series");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zn,{className:ta,original:i,output:p},void 0),(0,c.jsx)(Qn,{className:"o4vo9",visible:o,seriesMeta:s,index:v,values:h,outputs:m},void 0),(0,c.jsxs)("div",Object.assign({className:Kn},{children:[(0,c.jsx)(G,Object.assign({title:"Back",type:"text",className:ea,onClick:a},{children:(0,c.jsx)(_n.Z,{},void 0)}),void 0),(0,c.jsx)(G,Object.assign({title:"Try it again",type:"text",className:ea,onClick:n},{children:(0,c.jsx)(Cn.Z,{},void 0)}),void 0),(0,c.jsx)(G,Object.assign({title:"Show metrics",type:"text",className:ea,active:o,onClick:()=>l(!o)},{children:(0,c.jsx)(On.Z,{},void 0)}),void 0),(0,c.jsx)(na,Object.assign({title:"Download output image",filename:i.file.name,codec:Bt[u.encoderName],buffer:p.buffer},{children:(0,c.jsx)(Nn.Z,{},void 0)}),void 0)]}),void 0),(0,c.jsx)($n,{value:u,onChange:d,controlsMap:r},void 0)]},void 0)}function oa(e){const{visible:t,metas:n,metrics:a}=e;if(!t)return null;const i=[];for(const{key:e,name:t}of n)i.push((0,c.jsxs)("dt",{children:[t,":"]},void 0)),i.push((0,c.jsx)("dd",{children:a[e].toFixed(3)},void 0));return(0,c.jsx)("dl",Object.assign({className:"_1riCj controls o4vo9"},{children:i}),void 0)}function ca(e){const{result:t,onStart:n,onClose:a}=e,{input:i,outputMap:r,seriesMeta:s}=t,[o,l]=(0,f.useState)(!0),u=r.get({});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zn,{className:ta,original:i,output:u},void 0),(0,c.jsx)(oa,{visible:o,metas:s,metrics:u.metrics},void 0),(0,c.jsxs)("div",Object.assign({className:Kn},{children:[(0,c.jsx)(G,Object.assign({title:"Back",type:"text",className:ea,onClick:a},{children:(0,c.jsx)(_n.Z,{},void 0)}),void 0),(0,c.jsx)(G,Object.assign({title:"Try it again",type:"text",className:ea,onClick:n},{children:(0,c.jsx)(Cn.Z,{},void 0)}),void 0),(0,c.jsx)(G,Object.assign({title:"Show metrics",type:"text",className:ea,active:o,onClick:()=>l(!o)},{children:(0,c.jsx)(On.Z,{},void 0)}),void 0)]}),void 0)]},void 0)}!function(e){e[e.None=0]="None",e[e.Encoder=1]="Encoder",e[e.Options=2]="Options"}(aa||(aa={}));const la="_2RwLF",ua="_3qCEp",da="_2xFLV";function ha(e){const{name:t,onChange:n,onError:a}=e;return(0,c.jsxs)("section",Object.assign({className:la},{children:[(0,c.jsx)("div",Object.assign({className:ua},{children:(0,c.jsx)("h3",Object.assign({className:da},{children:t}),void 0)}),void 0),(0,c.jsx)(_e,{className:"_3xcM7",onChange:function(e){return y(e).then((t=>n({file:e,raw:t}))).catch((e=>a(e.message)))},onError:a,onStart:()=>a(void 0)},void 0)]}),void 0)}const fa=(0,f.memo)((e=>{const{value:t,name:n,onChange:a}=e,{file:i,raw:r}=t;return(0,c.jsxs)("section",Object.assign({className:la},{children:[(0,c.jsxs)("div",Object.assign({className:ua},{children:[(0,c.jsx)("h3",Object.assign({className:da},{children:n}),void 0),(0,c.jsx)(G,Object.assign({className:"_1uJoY",type:"text",title:"Reset",onClick:()=>a(void 0)},{children:(0,c.jsx)(_n.Z,{},void 0)}),void 0)]}),void 0),(0,c.jsx)("canvas",{className:"_1HjOB",ref:function(e){null==e||e.getContext("2d").putImageData(r,0,0)},width:r.width,height:r.height},void 0),(0,c.jsx)("div",Object.assign({className:"_1CjJL"},{children:i.name}),void 0)]}),void 0)}));function ma(e){const{data:t,onAccept:n,onCancel:a}=e,[i,r]=(0,f.useState)(),[s,o]=(0,f.useState)(null==t?void 0:t.original),[l,u]=(0,f.useState)(null==t?void 0:t.changed);function d(e,t,n){return t?(0,c.jsx)(fa,{name:e,value:t,onChange:n},void 0):(0,c.jsx)(ha,{name:e,onChange:n,onError:r},void 0)}const h=s&&l&&!i;return(0,c.jsxs)(be,Object.assign({onClose:a},{children:[(0,c.jsxs)("div",Object.assign({className:"_3aXX_ dialog-content"},{children:[d("Origin image",s,o),d("Changed image",l,u)]}),void 0),(0,c.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,c.jsx)("span",Object.assign({className:"_3rJRu"},{children:i}),void 0),(0,c.jsx)(G,Object.assign({className:"second",onClick:a},{children:"Back"}),void 0),(0,c.jsx)(G,Object.assign({disabled:!h,onClick:function(){n({original:s,changed:l})}},{children:"Next"}),void 0)]}),void 0)]}),void 0)}function pa(e){const{isOpen:t,onChange:n,onClose:a}=e,[i,r]=(0,f.useState)(!0),[s,o]=(0,f.useState)(),[l,u]=(0,f.useState)(tn),[d,h]=(0,f.useState)(),m=Y(),[p,v]=(0,f.useState)();return t?i?(0,c.jsx)(ma,{data:s,onAccept:function(e){o(e),r(!1)},onCancel:function(){s?r(!1):a()}},void 0):d?(0,c.jsx)(mn,{value:m.value,max:m.max,error:p,onCancel:function(){d.terminate(),h(void 0)}},void 0):(0,c.jsxs)(be,Object.assign({name:"Compare config",className:un,onClose:a},{children:[(0,c.jsx)("h2",Object.assign({className:"_150Dn"},{children:"Measure Options"}),void 0),(0,c.jsx)(on,{value:l,onChange:u},void 0),(0,c.jsxs)("div",Object.assign({className:"dialog-actions"},{children:[(0,c.jsx)(G,Object.assign({onClick:()=>r(!0)},{children:"Select files..."}),void 0),(0,c.jsx)(G,Object.assign({className:"second",onClick:a},{children:"Cancel"}),void 0),(0,c.jsx)(G,Object.assign({onClick:async function(){if(!s||!l)throw new Error("Missing required data");const e=s.original.raw;let t=s.changed.raw;localStorage.setItem("Measure",JSON.stringify(l));const a=new Wt(j,l.workerCount);h(a);const i=[{key:"ratio",name:"Compression Ratio %"}],{calculations:r,metricsMeta:o}=w(l);i.push(...o),m.reset(1+r),e.width===t.width&&e.height===t.height||(t=await function(e,t,n,a,i,r,s,o){const c=document.createElement("canvas");c.width=e.width,c.height=e.height,function(e,t){const n=e.getContext("2d");if(!n)throw Error("Canvas not initialized");n.clearRect(0,0,e.width,e.height),n.putImageData(t,0,0)}(c,e);const l=document.createElement("canvas");l.width=r,l.height=s;const u=l.getContext("2d");if(!u)throw new Error("Could not create canvas context");return"pixelated"===o?u.imageSmoothingEnabled=!1:u.imageSmoothingQuality=o,u.drawImage(c,t,n,a,i,0,0,r,s),u.getImageData(0,0,r,s)}(t,0,0,t.width,t.height,e.width,e.height,"high")),await a.runOnEach((t=>t.setImageToEncode(e)));const c=C(a,l,m.increase),u=await s.changed.file.arrayBuffer(),d=new x,f={buffer:u,data:t,metrics:{ratio:u.byteLength/s.original.file.size*100}};c(f),d.set({},f),await a.join(),a.terminated||(h(void 0),n({input:s.original,outputMap:d,seriesMeta:i,controlsMap:{}})),a.terminate()}},{children:"Next"}),void 0)]}),void 0)]}),void 0):null}var va;fa.displayName="PreviewBox",function(e){e[e.None=0]="None",e[e.Compress=1]="Compress",e[e.Compare=2]="Compare"}(va||(va={})),function(){try{new File([],"")}catch{return!1}return!!CSS.supports("mix-blend-mode: difference")&&"AbortController"in window}()||alert("ICAnalyzer does not support this browser, please switch to a modern one"),u.S({dsn:"https://d101904fac2c486ea6f8563c2cf054af@o253601.ingest.sentry.io/5499968",integrations:[new d.jK.BrowserTracing],tracesSampleRate:.2,release:`${h.u2}@${h.i8}`}),l.render((0,c.jsx)((function(){const[e,t]=(0,f.useState)(va.None),[n,a]=(0,f.useState)(!0),[i,r]=(0,f.useState)();function s(e){t(e),a(!0)}let o,l;switch(e){case va.Compare:o=pa,l=ca;break;case va.Compress:o=pn,l=sa}return(0,c.jsxs)(c.Fragment,{children:[i?(0,c.jsx)(l,{result:i,onStart:()=>a(!0),onClose:()=>r(void 0)},i.id):(0,c.jsx)(wn,{onEncode:()=>s(va.Compress),onCompare:()=>s(va.Compare)},void 0),o&&(0,c.jsx)(o,{isOpen:n,onChange:function(e){a(!1),e.id=((null==i?void 0:i.id)||1)+1,r(e)},onClose:()=>a(!1)},void 0)]},void 0)}),{},void 0),document.getElementById("root"))},8877:(e,t,n)=>{"use strict";e.exports=n.p+"artwork-icon.bc259.jpg"},9573:(e,t,n)=>{"use strict";e.exports=n.p+"artwork.b7c32.jpg"},7721:(e,t,n)=>{"use strict";e.exports=n.p+"colorful-text-icon.75a8e.png"},5185:(e,t,n)=>{"use strict";e.exports=n.p+"colorful-text.b5bb7.png"},6448:(e,t,n)=>{"use strict";e.exports=n.p+"photo-icon.a4fd9.jpg"},6149:(e,t,n)=>{"use strict";e.exports=n.p+"photo.af174.jpg"},7500:(e,t,n)=>{"use strict";e.exports=n.p+"intro-banner.8d466.png"}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,e=[],a.O=(t,n,i,r)=>{if(!n){var s=1/0;for(l=0;l<e.length;l++){for(var[n,i,r]=e[l],o=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(o=!1,r<s&&(s=r));o&&(e.splice(l--,1),t=i())}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,i,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.u=e=>e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b=document.baseURI||self.location.href;var e={826:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[s,o,c]=n,l=0;for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(c)var u=c(a);for(t&&t(n);l<s.length;l++)r=s[l],a.o(e,r)&&e[r]&&e[r][0](),e[s[l]]=0;return a.O(u)},n=self.webpackChunkic_analyzer=self.webpackChunkic_analyzer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[582],(()=>a(7726)));i=a.O(i)})();
//# sourceMappingURL=index.js.map